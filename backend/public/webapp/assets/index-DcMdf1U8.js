import{c as d0,r as ww,t as Nw,j as t,S as u0,a as k,b as h0,P as jw,C as m0,d as Sw,T as f0,D as p0,R as kw,e as Aw,f as ma,g as cc,h as Cw,i as Rw,k as Tw,l as Ew,I as Uw,m as Iw,n as li,o as Mw,u as hn,A as _w,p as Dw,q as Ow,L as $h,v as di,w as Nc,G as _r,U as $x,M as dn,x as br,y as Pw,B as Mo,z as kh,E as Lw,F as x0,H as Bw,J as zw,K as qw,N as Hw,Q as Fw,V as Pn,W as Vx,X as g0,Y as $w,Z as v0,_ as Vw,$ as Dn,a0 as Gw,a1 as Qw,a2 as Jw,a3 as Yw,a4 as Kw,a5 as Xw,a6 as Zw,a7 as Ww,a8 as e1,a9 as t1,aa as r1,ab as y0,ac as n1,ad as b0,ae as w0,af as s1,ag as N0,ah as a1,ai as j0,aj as S0,ak as i1,al as o1,am as k0,an as l1,ao as c1,ap as d1,aq as u1,ar as lh,as as h1,at as Gx,au as Qx,av as Ao,aw as Jx,ax as ch,ay as m1,az as f1,aA as Yx,aB as p1,aC as x1,aD as g1,aE as v1}from"./vendor-ui-qYO5n3ph.js";import{r as y1,b as b1,g as A0,c as dc}from"./vendor-react-ClZwdvRs.js";import{e as C0,p as w1}from"./vendor-ai-rQO63PiC.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function a(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=a(c);fetch(c.href,d)}})();var dh={exports:{}},Co={},uh={exports:{}},hh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx;function N1(){return Kx||(Kx=1,function(e){function n(D,K){var de=D.length;D.push(K);e:for(;0<de;){var Ce=de-1>>>1,_e=D[Ce];if(0<c(_e,K))D[Ce]=K,D[de]=_e,de=Ce;else break e}}function a(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var K=D[0],de=D.pop();if(de!==K){D[0]=de;e:for(var Ce=0,_e=D.length,Re=_e>>>1;Ce<Re;){var pe=2*(Ce+1)-1,ve=D[pe],Le=pe+1,je=D[Le];if(0>c(ve,de))Le<_e&&0>c(je,ve)?(D[Ce]=je,D[Le]=de,Ce=Le):(D[Ce]=ve,D[pe]=de,Ce=pe);else if(Le<_e&&0>c(je,de))D[Ce]=je,D[Le]=de,Ce=Le;else break e}}return K}function c(D,K){var de=D.sortIndex-K.sortIndex;return de!==0?de:D.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,f=m.now();e.unstable_now=function(){return m.now()-f}}var p=[],x=[],j=1,b=null,y=3,_=!1,B=!1,P=!1,L=!1,U=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function w(D){for(var K=a(x);K!==null;){if(K.callback===null)o(x);else if(K.startTime<=D)o(x),K.sortIndex=K.expirationTime,n(p,K);else break;K=a(x)}}function I(D){if(P=!1,w(D),!B)if(a(p)!==null)B=!0,J||(J=!0,Q());else{var K=a(x);K!==null&&R(I,K.startTime-D)}}var J=!1,W=-1,C=5,$=-1;function ee(){return L?!0:!(e.unstable_now()-$<C)}function X(){if(L=!1,J){var D=e.unstable_now();$=D;var K=!0;try{e:{B=!1,P&&(P=!1,T(W),W=-1),_=!0;var de=y;try{t:{for(w(D),b=a(p);b!==null&&!(b.expirationTime>D&&ee());){var Ce=b.callback;if(typeof Ce=="function"){b.callback=null,y=b.priorityLevel;var _e=Ce(b.expirationTime<=D);if(D=e.unstable_now(),typeof _e=="function"){b.callback=_e,w(D),K=!0;break t}b===a(p)&&o(p),w(D)}else o(p);b=a(p)}if(b!==null)K=!0;else{var Re=a(x);Re!==null&&R(I,Re.startTime-D),K=!1}}break e}finally{b=null,y=de,_=!1}K=void 0}}finally{K?Q():J=!1}}}var Q;if(typeof S=="function")Q=function(){S(X)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,me=ie.port2;ie.port1.onmessage=X,Q=function(){me.postMessage(null)}}else Q=function(){U(X,0)};function R(D,K){W=U(function(){D(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(D){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var de=y;y=K;try{return D()}finally{y=de}},e.unstable_requestPaint=function(){L=!0},e.unstable_runWithPriority=function(D,K){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var de=y;y=D;try{return K()}finally{y=de}},e.unstable_scheduleCallback=function(D,K,de){var Ce=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ce+de:Ce):de=Ce,D){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=de+_e,D={id:j++,callback:K,priorityLevel:D,startTime:de,expirationTime:_e,sortIndex:-1},de>Ce?(D.sortIndex=de,n(x,D),a(p)===null&&D===a(x)&&(P?(T(W),W=-1):P=!0,R(I,de-Ce))):(D.sortIndex=_e,n(p,D),B||_||(B=!0,J||(J=!0,Q()))),D},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(D){var K=y;return function(){var de=y;y=K;try{return D.apply(this,arguments)}finally{y=de}}}}(hh)),hh}var Xx;function j1(){return Xx||(Xx=1,uh.exports=N1()),uh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx;function S1(){if(Zx)return Co;Zx=1;var e=j1(),n=y1(),a=b1();function o(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function d(r){var s=r,i=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(i=s.return),r=s.return;while(r)}return s.tag===3?i:null}function m(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(d(r)!==r)throw Error(o(188))}function p(r){var s=r.alternate;if(!s){if(s=d(r),s===null)throw Error(o(188));return s!==r?null:r}for(var i=r,l=s;;){var u=i.return;if(u===null)break;var h=u.alternate;if(h===null){if(l=u.return,l!==null){i=l;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===i)return f(u),r;if(h===l)return f(u),s;h=h.sibling}throw Error(o(188))}if(i.return!==l.return)i=u,l=h;else{for(var g=!1,v=u.child;v;){if(v===i){g=!0,i=u,l=h;break}if(v===l){g=!0,l=u,i=h;break}v=v.sibling}if(!g){for(v=h.child;v;){if(v===i){g=!0,i=h,l=u;break}if(v===l){g=!0,l=h,i=u;break}v=v.sibling}if(!g)throw Error(o(189))}}if(i.alternate!==l)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?r:s}function x(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=x(r),s!==null)return s;r=r.sibling}return null}var j=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),S=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=X&&r[X]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Symbol.for("react.client.reference");function me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ie?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case L:return"Profiler";case P:return"StrictMode";case I:return"Suspense";case J:return"SuspenseList";case $:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case _:return"Portal";case S:return(r.displayName||"Context")+".Provider";case T:return(r._context.displayName||"Context")+".Consumer";case w:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case W:return s=r.displayName||null,s!==null?s:me(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return me(r(s))}catch{}}return null}var R=Array.isArray,D=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ce=[],_e=-1;function Re(r){return{current:r}}function pe(r){0>_e||(r.current=Ce[_e],Ce[_e]=null,_e--)}function ve(r,s){_e++,Ce[_e]=r.current,r.current=s}var Le=Re(null),je=Re(null),De=Re(null),Be=Re(null);function ze(r,s){switch(ve(De,s),ve(je,r),ve(Le,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?vx(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=vx(s),r=yx(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}pe(Le),ve(Le,r)}function ut(){pe(Le),pe(je),pe(De)}function ur(r){r.memoizedState!==null&&ve(Be,r);var s=Le.current,i=yx(s,r.type);s!==i&&(ve(je,r),ve(Le,i))}function fn(r){je.current===r&&(pe(Le),pe(je)),Be.current===r&&(pe(Be),wo._currentValue=de)}var Gn=Object.prototype.hasOwnProperty,pn=e.unstable_scheduleCallback,Ps=e.unstable_cancelCallback,Wt=e.unstable_shouldYield,Ni=e.unstable_requestPaint,Qt=e.unstable_now,xn=e.unstable_getCurrentPriorityLevel,Qn=e.unstable_ImmediatePriority,$e=e.unstable_UserBlockingPriority,ot=e.unstable_NormalPriority,Bt=e.unstable_LowPriority,Br=e.unstable_IdlePriority,er=e.log,Fo=e.unstable_setDisableYieldValue,Jn=null,zt=null;function zr(r){if(typeof er=="function"&&Fo(r),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Jn,r)}catch{}}var qt=Math.clz32?Math.clz32:Go,$o=Math.log,Vo=Math.LN2;function Go(r){return r>>>=0,r===0?32:31-($o(r)/Vo|0)|0}var Ls=256,Yn=4194304;function gn(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ja(r,s,i){var l=r.pendingLanes;if(l===0)return 0;var u=0,h=r.suspendedLanes,g=r.pingedLanes;r=r.warmLanes;var v=l&134217727;return v!==0?(l=v&~h,l!==0?u=gn(l):(g&=v,g!==0?u=gn(g):i||(i=v&~r,i!==0&&(u=gn(i))))):(v=l&~h,v!==0?u=gn(v):g!==0?u=gn(g):i||(i=l&~r,i!==0&&(u=gn(i)))),u===0?0:s!==0&&s!==u&&(s&h)===0&&(h=u&-u,i=s&-s,h>=i||h===32&&(i&4194048)!==0)?s:u}function vn(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Qo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var r=Ls;return Ls<<=1,(Ls&4194048)===0&&(Ls=256),r}function qr(){var r=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),r}function ji(r){for(var s=[],i=0;31>i;i++)s.push(r);return s}function Bs(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Yo(r,s,i,l,u,h){var g=r.pendingLanes;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=i,r.entangledLanes&=i,r.errorRecoveryDisabledLanes&=i,r.shellSuspendCounter=0;var v=r.entanglements,E=r.expirationTimes,G=r.hiddenUpdates;for(i=g&~i;0<i;){var te=31-qt(i),oe=1<<te;v[te]=0,E[te]=-1;var Y=G[te];if(Y!==null)for(G[te]=null,te=0;te<Y.length;te++){var Z=Y[te];Z!==null&&(Z.lane&=-536870913)}i&=~oe}l!==0&&Ko(r,l,0),h!==0&&u===0&&r.tag!==0&&(r.suspendedLanes|=h&~(g&~s))}function Ko(r,s,i){r.pendingLanes|=s,r.suspendedLanes&=~s;var l=31-qt(s);r.entangledLanes|=s,r.entanglements[l]=r.entanglements[l]|1073741824|i&4194090}function Xo(r,s){var i=r.entangledLanes|=s;for(r=r.entanglements;i;){var l=31-qt(i),u=1<<l;u&s|r[l]&s&&(r[l]|=s),i&=~u}}function Si(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ki(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Zo(){var r=K.p;return r!==0?r:(r=window.event,r===void 0?32:Lx(r.type))}function sd(r,s){var i=K.p;try{return K.p=r,s()}finally{K.p=i}}var Yr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Yr,Ht="__reactProps$"+Yr,Kn="__reactContainer$"+Yr,Sa="__reactEvents$"+Yr,ad="__reactListeners$"+Yr,id="__reactHandles$"+Yr,Wo="__reactResources$"+Yr,zs="__reactMarker$"+Yr;function Ai(r){delete r[Tt],delete r[Ht],delete r[Sa],delete r[ad],delete r[id]}function Xn(r){var s=r[Tt];if(s)return s;for(var i=r.parentNode;i;){if(s=i[Kn]||i[Tt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(r=jx(r);r!==null;){if(i=r[Tt])return i;r=jx(r)}return s}r=i,i=r.parentNode}return null}function Zn(r){if(r=r[Tt]||r[Kn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function qs(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(o(33))}function Wn(r){var s=r[Wo];return s||(s=r[Wo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(r){r[zs]=!0}var el=new Set,tl={};function yn(r,s){es(r,s),es(r+"Capture",s)}function es(r,s){for(tl[r]=s,r=0;r<s.length;r++)el.add(s[r])}var od=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ci={},ts={};function rl(r){return Gn.call(ts,r)?!0:Gn.call(Ci,r)?!1:od.test(r)?ts[r]=!0:(Ci[r]=!0,!1)}function Hr(r,s,i){if(rl(s))if(i===null)r.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+i)}}function ka(r,s,i){if(i===null)r.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+i)}}function tr(r,s,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttributeNS(s,i,""+l)}}var Hs,nl;function rs(r){if(Hs===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);Hs=s&&s[1]||"",nl=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+r+nl}var Fs=!1;function Ri(r,s){if(!r||Fs)return"";Fs=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Z){var Y=Z}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(Z){Y=Z}r.call(oe.prototype)}}else{try{throw Error()}catch(Z){Y=Z}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Z){if(Z&&Y&&typeof Z.stack=="string")return[Z.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),g=h[0],v=h[1];if(g&&v){var E=g.split(`
`),G=v.split(`
`);for(u=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;u<G.length&&!G[u].includes("DetermineComponentFrameRoot");)u++;if(l===E.length||u===G.length)for(l=E.length-1,u=G.length-1;1<=l&&0<=u&&E[l]!==G[u];)u--;for(;1<=l&&0<=u;l--,u--)if(E[l]!==G[u]){if(l!==1||u!==1)do if(l--,u--,0>u||E[l]!==G[u]){var te=`
`+E[l].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=l&&0<=u);break}}}finally{Fs=!1,Error.prepareStackTrace=i}return(i=r?r.displayName||r.name:"")?rs(i):""}function ld(r){switch(r.tag){case 26:case 27:case 5:return rs(r.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return Ri(r.type,!1);case 11:return Ri(r.type.render,!1);case 1:return Ri(r.type,!0);case 31:return rs("Activity");default:return""}}function N(r){try{var s="";do s+=ld(r),r=r.return;while(r);return s}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function M(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function A(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function q(r){var s=A(r)?"checked":"value",i=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),l=""+r[s];if(!r.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,h=i.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return u.call(this)},set:function(g){l=""+g,h.call(this,g)}}),Object.defineProperty(r,s,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function F(r){r._valueTracker||(r._valueTracker=q(r))}function z(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var i=s.getValue(),l="";return r&&(l=A(r)?r.checked?"true":"false":r.value),r=l,r!==i?(s.setValue(r),!0):!1}function se(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ce=/[\n"\\]/g;function le(r){return r.replace(ce,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ue(r,s,i,l,u,h,g,v){r.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?r.type=g:r.removeAttribute("type"),s!=null?g==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+M(s)):r.value!==""+M(s)&&(r.value=""+M(s)):g!=="submit"&&g!=="reset"||r.removeAttribute("value"),s!=null?ye(r,g,M(s)):i!=null?ye(r,g,M(i)):l!=null&&r.removeAttribute("value"),u==null&&h!=null&&(r.defaultChecked=!!h),u!=null&&(r.checked=u&&typeof u!="function"&&typeof u!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.name=""+M(v):r.removeAttribute("name")}function fe(r,s,i,l,u,h,g,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(r.type=h),s!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||s!=null))return;i=i!=null?""+M(i):"",s=s!=null?""+M(s):i,v||s===r.value||(r.value=s),r.defaultValue=s}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,r.checked=v?r.checked:!!l,r.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.name=g)}function ye(r,s,i){s==="number"&&se(r.ownerDocument)===r||r.defaultValue===""+i||(r.defaultValue=""+i)}function Oe(r,s,i,l){if(r=r.options,s){s={};for(var u=0;u<i.length;u++)s["$"+i[u]]=!0;for(i=0;i<r.length;i++)u=s.hasOwnProperty("$"+r[i].value),r[i].selected!==u&&(r[i].selected=u),u&&l&&(r[i].defaultSelected=!0)}else{for(i=""+M(i),s=null,u=0;u<r.length;u++){if(r[u].value===i){r[u].selected=!0,l&&(r[u].defaultSelected=!0);return}s!==null||r[u].disabled||(s=r[u])}s!==null&&(s.selected=!0)}}function Je(r,s,i){if(s!=null&&(s=""+M(s),s!==r.value&&(r.value=s),i==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=i!=null?""+M(i):""}function Ye(r,s,i,l){if(s==null){if(l!=null){if(i!=null)throw Error(o(92));if(R(l)){if(1<l.length)throw Error(o(93));l=l[0]}i=l}i==null&&(i=""),s=i}i=M(s),r.defaultValue=i,l=r.textContent,l===i&&l!==""&&l!==null&&(r.value=l)}function lt(r,s){if(s){var i=r.firstChild;if(i&&i===r.lastChild&&i.nodeType===3){i.nodeValue=s;return}}r.textContent=s}var pt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jt(r,s,i){var l=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":l?r.setProperty(s,i):typeof i!="number"||i===0||pt.has(s)?s==="float"?r.cssFloat=i:r[s]=(""+i).trim():r[s]=i+"px"}function ns(r,s,i){if(s!=null&&typeof s!="object")throw Error(o(62));if(r=r.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="");for(var u in s)l=s[u],s.hasOwnProperty(u)&&i[u]!==l&&Jt(r,u,l)}else for(var h in s)s.hasOwnProperty(h)&&Jt(r,h,s[h])}function $s(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ti=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(r){return Ti.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ui=null;function Ii(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var bn=null,Aa=null;function ym(r){var s=Zn(r);if(s&&(r=s.stateNode)){var i=r[Ht]||null;e:switch(r=s.stateNode,s.type){case"input":if(ue(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=r;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+le(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var l=i[s];if(l!==r&&l.form===r.form){var u=l[Ht]||null;if(!u)throw Error(o(90));ue(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(s=0;s<i.length;s++)l=i[s],l.form===r.form&&z(l)}break e;case"textarea":Je(r,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&Oe(r,!!i.multiple,s,!1)}}}var dd=!1;function bm(r,s,i){if(dd)return r(s,i);dd=!0;try{var l=r(s);return l}finally{if(dd=!1,(bn!==null||Aa!==null)&&(Hl(),bn&&(s=bn,r=Aa,Aa=bn=null,ym(s),r)))for(s=0;s<r.length;s++)ym(r[s])}}function Mi(r,s){var i=r.stateNode;if(i===null)return null;var l=i[Ht]||null;if(l===null)return null;i=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(r=r.type,l=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!l;break e;default:r=!1}if(r)return null;if(i&&typeof i!="function")throw Error(o(231,s,typeof i));return i}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ud=!1;if(wn)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){ud=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{ud=!1}var ss=null,hd=null,sl=null;function wm(){if(sl)return sl;var r,s=hd,i=s.length,l,u="value"in ss?ss.value:ss.textContent,h=u.length;for(r=0;r<i&&s[r]===u[r];r++);var g=i-r;for(l=1;l<=g&&s[i-l]===u[h-l];l++);return sl=u.slice(r,1<l?1-l:void 0)}function al(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function il(){return!0}function Nm(){return!1}function rr(r){function s(i,l,u,h,g){this._reactName=i,this._targetInst=u,this.type=l,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var v in r)r.hasOwnProperty(v)&&(i=r[v],this[v]=i?i(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?il:Nm,this.isPropagationStopped=Nm,this}return j(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),s}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=rr(Vs),Di=j({},Vs,{view:0,detail:0}),wy=rr(Di),md,fd,Oi,ll=j({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Oi&&(Oi&&r.type==="mousemove"?(md=r.screenX-Oi.screenX,fd=r.screenY-Oi.screenY):fd=md=0,Oi=r),md)},movementY:function(r){return"movementY"in r?r.movementY:fd}}),jm=rr(ll),Ny=j({},ll,{dataTransfer:0}),jy=rr(Ny),Sy=j({},Di,{relatedTarget:0}),pd=rr(Sy),ky=j({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ay=rr(ky),Cy=j({},Vs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ry=rr(Cy),Ty=j({},Vs,{data:0}),Sm=rr(Ty),Ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function My(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Iy[r])?!!s[r]:!1}function xd(){return My}var _y=j({},Di,{key:function(r){if(r.key){var s=Ey[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=al(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Uy[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(r){return r.type==="keypress"?al(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?al(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Dy=rr(_y),Oy=j({},ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),km=rr(Oy),Py=j({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),Ly=rr(Py),By=j({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),zy=rr(By),qy=j({},ll,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=rr(qy),Fy=j({},Vs,{newState:0,oldState:0}),$y=rr(Fy),Vy=[9,13,27,32],gd=wn&&"CompositionEvent"in window,Pi=null;wn&&"documentMode"in document&&(Pi=document.documentMode);var Gy=wn&&"TextEvent"in window&&!Pi,Am=wn&&(!gd||Pi&&8<Pi&&11>=Pi),Cm=" ",Rm=!1;function Tm(r,s){switch(r){case"keyup":return Vy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ca=!1;function Qy(r,s){switch(r){case"compositionend":return Em(s);case"keypress":return s.which!==32?null:(Rm=!0,Cm);case"textInput":return r=s.data,r===Cm&&Rm?null:r;default:return null}}function Jy(r,s){if(Ca)return r==="compositionend"||!gd&&Tm(r,s)?(r=wm(),sl=hd=ss=null,Ca=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Am&&s.locale!=="ko"?null:s.data;default:return null}}var Yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Um(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Yy[r.type]:s==="textarea"}function Im(r,s,i,l){bn?Aa?Aa.push(l):Aa=[l]:bn=l,s=Jl(s,"onChange"),0<s.length&&(i=new ol("onChange","change",null,i,l),r.push({event:i,listeners:s}))}var Li=null,Bi=null;function Ky(r){mx(r,0)}function cl(r){var s=qs(r);if(z(s))return r}function Mm(r,s){if(r==="change")return s}var _m=!1;if(wn){var vd;if(wn){var yd="oninput"in document;if(!yd){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),yd=typeof Dm.oninput=="function"}vd=yd}else vd=!1;_m=vd&&(!document.documentMode||9<document.documentMode)}function Om(){Li&&(Li.detachEvent("onpropertychange",Pm),Bi=Li=null)}function Pm(r){if(r.propertyName==="value"&&cl(Bi)){var s=[];Im(s,Bi,r,Ii(r)),bm(Ky,s)}}function Xy(r,s,i){r==="focusin"?(Om(),Li=s,Bi=i,Li.attachEvent("onpropertychange",Pm)):r==="focusout"&&Om()}function Zy(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return cl(Bi)}function Wy(r,s){if(r==="click")return cl(s)}function eb(r,s){if(r==="input"||r==="change")return cl(s)}function tb(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var hr=typeof Object.is=="function"?Object.is:tb;function zi(r,s){if(hr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var i=Object.keys(r),l=Object.keys(s);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var u=i[l];if(!Gn.call(s,u)||!hr(r[u],s[u]))return!1}return!0}function Lm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bm(r,s){var i=Lm(r);r=0;for(var l;i;){if(i.nodeType===3){if(l=r+i.textContent.length,r<=s&&l>=s)return{node:i,offset:s-r};r=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Lm(i)}}function zm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?zm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function qm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=se(r.document);s instanceof r.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)r=s.contentWindow;else break;s=se(r.document)}return s}function bd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var rb=wn&&"documentMode"in document&&11>=document.documentMode,Ra=null,wd=null,qi=null,Nd=!1;function Hm(r,s,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Nd||Ra==null||Ra!==se(l)||(l=Ra,"selectionStart"in l&&bd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qi&&zi(qi,l)||(qi=l,l=Jl(wd,"onSelect"),0<l.length&&(s=new ol("onSelect","select",null,s,i),r.push({event:s,listeners:l}),s.target=Ra)))}function Gs(r,s){var i={};return i[r.toLowerCase()]=s.toLowerCase(),i["Webkit"+r]="webkit"+s,i["Moz"+r]="moz"+s,i}var Ta={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},jd={},Fm={};wn&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Qs(r){if(jd[r])return jd[r];if(!Ta[r])return r;var s=Ta[r],i;for(i in s)if(s.hasOwnProperty(i)&&i in Fm)return jd[r]=s[i];return r}var $m=Qs("animationend"),Vm=Qs("animationiteration"),Gm=Qs("animationstart"),nb=Qs("transitionrun"),sb=Qs("transitionstart"),ab=Qs("transitioncancel"),Qm=Qs("transitionend"),Jm=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function Fr(r,s){Jm.set(r,s),yn(s,[r])}var Ym=new WeakMap;function wr(r,s){if(typeof r=="object"&&r!==null){var i=Ym.get(r);return i!==void 0?i:(s={value:r,source:s,stack:N(s)},Ym.set(r,s),s)}return{value:r,source:s,stack:N(s)}}var Nr=[],Ea=0,kd=0;function dl(){for(var r=Ea,s=kd=Ea=0;s<r;){var i=Nr[s];Nr[s++]=null;var l=Nr[s];Nr[s++]=null;var u=Nr[s];Nr[s++]=null;var h=Nr[s];if(Nr[s++]=null,l!==null&&u!==null){var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}h!==0&&Km(i,u,h)}}function ul(r,s,i,l){Nr[Ea++]=r,Nr[Ea++]=s,Nr[Ea++]=i,Nr[Ea++]=l,kd|=l,r.lanes|=l,r=r.alternate,r!==null&&(r.lanes|=l)}function Ad(r,s,i,l){return ul(r,s,i,l),hl(r)}function Ua(r,s){return ul(r,null,null,s),hl(r)}function Km(r,s,i){r.lanes|=i;var l=r.alternate;l!==null&&(l.lanes|=i);for(var u=!1,h=r.return;h!==null;)h.childLanes|=i,l=h.alternate,l!==null&&(l.childLanes|=i),h.tag===22&&(r=h.stateNode,r===null||r._visibility&1||(u=!0)),r=h,h=h.return;return r.tag===3?(h=r.stateNode,u&&s!==null&&(u=31-qt(i),r=h.hiddenUpdates,l=r[u],l===null?r[u]=[s]:l.push(s),s.lane=i|536870912),h):null}function hl(r){if(50<mo)throw mo=0,Iu=null,Error(o(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ia={};function ib(r,s,i,l){this.tag=r,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(r,s,i,l){return new ib(r,s,i,l)}function Cd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Nn(r,s){var i=r.alternate;return i===null?(i=mr(r.tag,s,r.key,r.mode),i.elementType=r.elementType,i.type=r.type,i.stateNode=r.stateNode,i.alternate=r,r.alternate=i):(i.pendingProps=s,i.type=r.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=r.flags&65011712,i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=r.sibling,i.index=r.index,i.ref=r.ref,i.refCleanup=r.refCleanup,i}function Xm(r,s){r.flags&=65011714;var i=r.alternate;return i===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ml(r,s,i,l,u,h){var g=0;if(l=r,typeof r=="function")Cd(r)&&(g=1);else if(typeof r=="string")g=lw(r,i,Le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case $:return r=mr(31,i,s,u),r.elementType=$,r.lanes=h,r;case B:return Js(i.children,u,h,s);case P:g=8,u|=24;break;case L:return r=mr(12,i,s,u|2),r.elementType=L,r.lanes=h,r;case I:return r=mr(13,i,s,u),r.elementType=I,r.lanes=h,r;case J:return r=mr(19,i,s,u),r.elementType=J,r.lanes=h,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case U:case S:g=10;break e;case T:g=9;break e;case w:g=11;break e;case W:g=14;break e;case C:g=16,l=null;break e}g=29,i=Error(o(130,r===null?"null":typeof r,"")),l=null}return s=mr(g,i,s,u),s.elementType=r,s.type=l,s.lanes=h,s}function Js(r,s,i,l){return r=mr(7,r,l,s),r.lanes=i,r}function Rd(r,s,i){return r=mr(6,r,null,s),r.lanes=i,r}function Td(r,s,i){return s=mr(4,r.children!==null?r.children:[],r.key,s),s.lanes=i,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Ma=[],_a=0,fl=null,pl=0,jr=[],Sr=0,Ys=null,jn=1,Sn="";function Ks(r,s){Ma[_a++]=pl,Ma[_a++]=fl,fl=r,pl=s}function Zm(r,s,i){jr[Sr++]=jn,jr[Sr++]=Sn,jr[Sr++]=Ys,Ys=r;var l=jn;r=Sn;var u=32-qt(l)-1;l&=~(1<<u),i+=1;var h=32-qt(s)+u;if(30<h){var g=u-u%5;h=(l&(1<<g)-1).toString(32),l>>=g,u-=g,jn=1<<32-qt(s)+u|i<<u|l,Sn=h+r}else jn=1<<h|i<<u|l,Sn=r}function Ed(r){r.return!==null&&(Ks(r,1),Zm(r,1,0))}function Ud(r){for(;r===fl;)fl=Ma[--_a],Ma[_a]=null,pl=Ma[--_a],Ma[_a]=null;for(;r===Ys;)Ys=jr[--Sr],jr[Sr]=null,Sn=jr[--Sr],jr[Sr]=null,jn=jr[--Sr],jr[Sr]=null}var Yt=null,vt=null,Xe=!1,Xs=null,Kr=!1,Id=Error(o(519));function Zs(r){var s=Error(o(418,""));throw $i(wr(s,r)),Id}function Wm(r){var s=r.stateNode,i=r.type,l=r.memoizedProps;switch(s[Tt]=r,s[Ht]=l,i){case"dialog":Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":case"embed":Ge("load",s);break;case"video":case"audio":for(i=0;i<po.length;i++)Ge(po[i],s);break;case"source":Ge("error",s);break;case"img":case"image":case"link":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"input":Ge("invalid",s),fe(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),F(s);break;case"select":Ge("invalid",s);break;case"textarea":Ge("invalid",s),Ye(s,l.value,l.defaultValue,l.children),F(s)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||l.suppressHydrationWarning===!0||gx(s.textContent,i)?(l.popover!=null&&(Ge("beforetoggle",s),Ge("toggle",s)),l.onScroll!=null&&Ge("scroll",s),l.onScrollEnd!=null&&Ge("scrollend",s),l.onClick!=null&&(s.onclick=Yl),s=!0):s=!1,s||Zs(r)}function ef(r){for(Yt=r.return;Yt;)switch(Yt.tag){case 5:case 13:Kr=!1;return;case 27:case 3:Kr=!0;return;default:Yt=Yt.return}}function Hi(r){if(r!==Yt)return!1;if(!Xe)return ef(r),Xe=!0,!1;var s=r.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=r.type,i=!(i!=="form"&&i!=="button")||Ju(r.type,r.memoizedProps)),i=!i),i&&vt&&Zs(r),ef(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(o(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(i=r.data,i==="/$"){if(s===0){vt=Vr(r.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++;r=r.nextSibling}vt=null}}else s===27?(s=vt,bs(r.type)?(r=Zu,Zu=null,vt=r):vt=s):vt=Yt?Vr(r.stateNode.nextSibling):null;return!0}function Fi(){vt=Yt=null,Xe=!1}function tf(){var r=Xs;return r!==null&&(ar===null?ar=r:ar.push.apply(ar,r),Xs=null),r}function $i(r){Xs===null?Xs=[r]:Xs.push(r)}var Md=Re(null),Ws=null,kn=null;function as(r,s,i){ve(Md,s._currentValue),s._currentValue=i}function An(r){r._currentValue=Md.current,pe(Md)}function _d(r,s,i){for(;r!==null;){var l=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),r===i)break;r=r.return}}function Dd(r,s,i,l){var u=r.child;for(u!==null&&(u.return=r);u!==null;){var h=u.dependencies;if(h!==null){var g=u.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=u;for(var E=0;E<s.length;E++)if(v.context===s[E]){h.lanes|=i,v=h.alternate,v!==null&&(v.lanes|=i),_d(h.return,i,r),l||(g=null);break e}h=v.next}}else if(u.tag===18){if(g=u.return,g===null)throw Error(o(341));g.lanes|=i,h=g.alternate,h!==null&&(h.lanes|=i),_d(g,i,r),g=null}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===r){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}}function Vi(r,s,i,l){r=null;for(var u=s,h=!1;u!==null;){if(!h){if((u.flags&524288)!==0)h=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var g=u.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var v=u.type;hr(u.pendingProps.value,g.value)||(r!==null?r.push(v):r=[v])}}else if(u===Be.current){if(g=u.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(r!==null?r.push(wo):r=[wo])}u=u.return}r!==null&&Dd(s,r,i,l),s.flags|=262144}function xl(r){for(r=r.firstContext;r!==null;){if(!hr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ea(r){Ws=r,kn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ft(r){return rf(Ws,r)}function gl(r,s){return Ws===null&&ea(r),rf(r,s)}function rf(r,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},kn===null){if(r===null)throw Error(o(308));kn=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else kn=kn.next=s;return i}var ob=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(i,l){r.push(l)}};this.abort=function(){s.aborted=!0,r.forEach(function(i){return i()})}},lb=e.unstable_scheduleCallback,cb=e.unstable_NormalPriority,Ct={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new ob,data:new Map,refCount:0}}function Gi(r){r.refCount--,r.refCount===0&&lb(cb,function(){r.controller.abort()})}var Qi=null,Pd=0,Da=0,Oa=null;function db(r,s){if(Qi===null){var i=Qi=[];Pd=0,Da=Bu(),Oa={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Pd++,s.then(nf,nf),s}function nf(){if(--Pd===0&&Qi!==null){Oa!==null&&(Oa.status="fulfilled");var r=Qi;Qi=null,Da=0,Oa=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function ub(r,s){var i=[],l={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return r.then(function(){l.status="fulfilled",l.value=s;for(var u=0;u<i.length;u++)(0,i[u])(s)},function(u){for(l.status="rejected",l.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),l}var sf=D.S;D.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&db(r,s),sf!==null&&sf(r,s)};var ta=Re(null);function Ld(){var r=ta.current;return r!==null?r:dt.pooledCache}function vl(r,s){s===null?ve(ta,ta.current):ve(ta,s.pool)}function af(){var r=Ld();return r===null?null:{parent:Ct._currentValue,pool:r}}var Ji=Error(o(460)),of=Error(o(474)),yl=Error(o(542)),Bd={then:function(){}};function lf(r){return r=r.status,r==="fulfilled"||r==="rejected"}function bl(){}function cf(r,s,i){switch(i=r[i],i===void 0?r.push(s):i!==s&&(s.then(bl,bl),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,uf(r),r;default:if(typeof s.status=="string")s.then(bl,bl);else{if(r=dt,r!==null&&100<r.shellSuspendCounter)throw Error(o(482));r=s,r.status="pending",r.then(function(l){if(s.status==="pending"){var u=s;u.status="fulfilled",u.value=l}},function(l){if(s.status==="pending"){var u=s;u.status="rejected",u.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,uf(r),r}throw Yi=s,Ji}}var Yi=null;function df(){if(Yi===null)throw Error(o(459));var r=Yi;return Yi=null,r}function uf(r){if(r===Ji||r===yl)throw Error(o(483))}var is=!1;function zd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function os(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ls(r,s,i){var l=r.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var u=l.pending;return u===null?s.next=s:(s.next=u.next,u.next=s),l.pending=s,s=hl(r),Km(r,null,i),s}return ul(r,l,s,i),hl(r)}function Ki(r,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var l=s.lanes;l&=r.pendingLanes,i|=l,s.lanes=i,Xo(r,i)}}function Hd(r,s){var i=r.updateQueue,l=r.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var u=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var g={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?u=h=g:h=h.next=g,i=i.next}while(i!==null);h===null?u=h=s:h=h.next=s}else u=h=s;i={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},r.updateQueue=i;return}r=i.lastBaseUpdate,r===null?i.firstBaseUpdate=s:r.next=s,i.lastBaseUpdate=s}var Fd=!1;function Xi(){if(Fd){var r=Oa;if(r!==null)throw r}}function Zi(r,s,i,l){Fd=!1;var u=r.updateQueue;is=!1;var h=u.firstBaseUpdate,g=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var E=v,G=E.next;E.next=null,g===null?h=G:g.next=G,g=E;var te=r.alternate;te!==null&&(te=te.updateQueue,v=te.lastBaseUpdate,v!==g&&(v===null?te.firstBaseUpdate=G:v.next=G,te.lastBaseUpdate=E))}if(h!==null){var oe=u.baseState;g=0,te=G=E=null,v=h;do{var Y=v.lane&-536870913,Z=Y!==v.lane;if(Z?(Qe&Y)===Y:(l&Y)===Y){Y!==0&&Y===Da&&(Fd=!0),te!==null&&(te=te.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var Me=r,Te=v;Y=s;var st=i;switch(Te.tag){case 1:if(Me=Te.payload,typeof Me=="function"){oe=Me.call(st,oe,Y);break e}oe=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Te.payload,Y=typeof Me=="function"?Me.call(st,oe,Y):Me,Y==null)break e;oe=j({},oe,Y);break e;case 2:is=!0}}Y=v.callback,Y!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=u.callbacks,Z===null?u.callbacks=[Y]:Z.push(Y))}else Z={lane:Y,tag:v.tag,payload:v.payload,callback:v.callback,next:null},te===null?(G=te=Z,E=oe):te=te.next=Z,g|=Y;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;Z=v,v=Z.next,Z.next=null,u.lastBaseUpdate=Z,u.shared.pending=null}}while(!0);te===null&&(E=oe),u.baseState=E,u.firstBaseUpdate=G,u.lastBaseUpdate=te,h===null&&(u.shared.lanes=0),xs|=g,r.lanes=g,r.memoizedState=oe}}function hf(r,s){if(typeof r!="function")throw Error(o(191,r));r.call(s)}function mf(r,s){var i=r.callbacks;if(i!==null)for(r.callbacks=null,r=0;r<i.length;r++)hf(i[r],s)}var Pa=Re(null),wl=Re(0);function ff(r,s){r=Mn,ve(wl,r),ve(Pa,s),Mn=r|s.baseLanes}function $d(){ve(wl,Mn),ve(Pa,Pa.current)}function Vd(){Mn=wl.current,pe(Pa),pe(wl)}var cs=0,qe=null,rt=null,St=null,Nl=!1,La=!1,ra=!1,jl=0,Wi=0,Ba=null,hb=0;function bt(){throw Error(o(321))}function Gd(r,s){if(s===null)return!1;for(var i=0;i<s.length&&i<r.length;i++)if(!hr(r[i],s[i]))return!1;return!0}function Qd(r,s,i,l,u,h){return cs=h,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=r===null||r.memoizedState===null?Xf:Zf,ra=!1,h=i(l,u),ra=!1,La&&(h=xf(s,i,l,u)),pf(r),h}function pf(r){D.H=Tl;var s=rt!==null&&rt.next!==null;if(cs=0,St=rt=qe=null,Nl=!1,Wi=0,Ba=null,s)throw Error(o(300));r===null||Et||(r=r.dependencies,r!==null&&xl(r)&&(Et=!0))}function xf(r,s,i,l){qe=r;var u=0;do{if(La&&(Ba=null),Wi=0,La=!1,25<=u)throw Error(o(301));if(u+=1,St=rt=null,r.updateQueue!=null){var h=r.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}D.H=yb,h=s(i,l)}while(La);return h}function mb(){var r=D.H,s=r.useState()[0];return s=typeof s.then=="function"?eo(s):s,r=r.useState()[0],(rt!==null?rt.memoizedState:null)!==r&&(qe.flags|=1024),s}function Jd(){var r=jl!==0;return jl=0,r}function Yd(r,s,i){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~i}function Kd(r){if(Nl){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nl=!1}cs=0,St=rt=qe=null,La=!1,Wi=jl=0,Ba=null}function nr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?qe.memoizedState=St=r:St=St.next=r,St}function kt(){if(rt===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=rt.next;var s=St===null?qe.memoizedState:St.next;if(s!==null)St=s,rt=r;else{if(r===null)throw qe.alternate===null?Error(o(467)):Error(o(310));rt=r,r={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},St===null?qe.memoizedState=St=r:St=St.next=r}return St}function Xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eo(r){var s=Wi;return Wi+=1,Ba===null&&(Ba=[]),r=cf(Ba,r,s),s=qe,(St===null?s.memoizedState:St.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?Xf:Zf),r}function Sl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return eo(r);if(r.$$typeof===S)return Ft(r)}throw Error(o(438,String(r)))}function Zd(r){var s=null,i=qe.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var l=qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(u){return u.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=Xd(),qe.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(r),l=0;l<r;l++)i[l]=ee;return s.index++,i}function Cn(r,s){return typeof s=="function"?s(r):s}function kl(r){var s=kt();return Wd(s,rt,r)}function Wd(r,s,i){var l=r.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=i;var u=r.baseQueue,h=l.pending;if(h!==null){if(u!==null){var g=u.next;u.next=h.next,h.next=g}s.baseQueue=u=h,l.pending=null}if(h=r.baseState,u===null)r.memoizedState=h;else{s=u.next;var v=g=null,E=null,G=s,te=!1;do{var oe=G.lane&-536870913;if(oe!==G.lane?(Qe&oe)===oe:(cs&oe)===oe){var Y=G.revertLane;if(Y===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),oe===Da&&(te=!0);else if((cs&Y)===Y){G=G.next,Y===Da&&(te=!0);continue}else oe={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},E===null?(v=E=oe,g=h):E=E.next=oe,qe.lanes|=Y,xs|=Y;oe=G.action,ra&&i(h,oe),h=G.hasEagerState?G.eagerState:i(h,oe)}else Y={lane:oe,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},E===null?(v=E=Y,g=h):E=E.next=Y,qe.lanes|=oe,xs|=oe;G=G.next}while(G!==null&&G!==s);if(E===null?g=h:E.next=v,!hr(h,r.memoizedState)&&(Et=!0,te&&(i=Oa,i!==null)))throw i;r.memoizedState=h,r.baseState=g,r.baseQueue=E,l.lastRenderedState=h}return u===null&&(l.lanes=0),[r.memoizedState,l.dispatch]}function eu(r){var s=kt(),i=s.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=r;var l=i.dispatch,u=i.pending,h=s.memoizedState;if(u!==null){i.pending=null;var g=u=u.next;do h=r(h,g.action),g=g.next;while(g!==u);hr(h,s.memoizedState)||(Et=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),i.lastRenderedState=h}return[h,l]}function gf(r,s,i){var l=qe,u=kt(),h=Xe;if(h){if(i===void 0)throw Error(o(407));i=i()}else i=s();var g=!hr((rt||u).memoizedState,i);g&&(u.memoizedState=i,Et=!0),u=u.queue;var v=bf.bind(null,l,u,r);if(to(2048,8,v,[r]),u.getSnapshot!==s||g||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,za(9,Al(),yf.bind(null,l,u,i,s),null),dt===null)throw Error(o(349));h||(cs&124)!==0||vf(l,s,i)}return i}function vf(r,s,i){r.flags|=16384,r={getSnapshot:s,value:i},s=qe.updateQueue,s===null?(s=Xd(),qe.updateQueue=s,s.stores=[r]):(i=s.stores,i===null?s.stores=[r]:i.push(r))}function yf(r,s,i,l){s.value=i,s.getSnapshot=l,wf(s)&&Nf(r)}function bf(r,s,i){return i(function(){wf(s)&&Nf(r)})}function wf(r){var s=r.getSnapshot;r=r.value;try{var i=s();return!hr(r,i)}catch{return!0}}function Nf(r){var s=Ua(r,2);s!==null&&vr(s,r,2)}function tu(r){var s=nr();if(typeof r=="function"){var i=r;if(r=i(),ra){zr(!0);try{i()}finally{zr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:r},s}function jf(r,s,i,l){return r.baseState=i,Wd(r,rt,typeof l=="function"?l:Cn)}function fb(r,s,i,l,u){if(Rl(r))throw Error(o(485));if(r=s.action,r!==null){var h={payload:u,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};D.T!==null?i(!0):h.isTransition=!1,l(h),i=s.pending,i===null?(h.next=s.pending=h,Sf(s,h)):(h.next=i.next,s.pending=i.next=h)}}function Sf(r,s){var i=s.action,l=s.payload,u=r.state;if(s.isTransition){var h=D.T,g={};D.T=g;try{var v=i(u,l),E=D.S;E!==null&&E(g,v),kf(r,s,v)}catch(G){ru(r,s,G)}finally{D.T=h}}else try{h=i(u,l),kf(r,s,h)}catch(G){ru(r,s,G)}}function kf(r,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){Af(r,s,l)},function(l){return ru(r,s,l)}):Af(r,s,i)}function Af(r,s,i){s.status="fulfilled",s.value=i,Cf(s),r.state=i,s=r.pending,s!==null&&(i=s.next,i===s?r.pending=null:(i=i.next,s.next=i,Sf(r,i)))}function ru(r,s,i){var l=r.pending;if(r.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=i,Cf(s),s=s.next;while(s!==l)}r.action=null}function Cf(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Rf(r,s){return s}function Tf(r,s){if(Xe){var i=dt.formState;if(i!==null){e:{var l=qe;if(Xe){if(vt){t:{for(var u=vt,h=Kr;u.nodeType!==8;){if(!h){u=null;break t}if(u=Vr(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){vt=Vr(u.nextSibling),l=u.data==="F!";break e}}Zs(l)}l=!1}l&&(s=i[0])}}return i=nr(),i.memoizedState=i.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rf,lastRenderedState:s},i.queue=l,i=Jf.bind(null,qe,l),l.dispatch=i,l=tu(!1),h=ou.bind(null,qe,!1,l.queue),l=nr(),u={state:s,dispatch:null,action:r,pending:null},l.queue=u,i=fb.bind(null,qe,u,h,i),u.dispatch=i,l.memoizedState=r,[s,i,!1]}function Ef(r){var s=kt();return Uf(s,rt,r)}function Uf(r,s,i){if(s=Wd(r,s,Rf)[0],r=kl(Cn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=eo(s)}catch(g){throw g===Ji?yl:g}else l=s;s=kt();var u=s.queue,h=u.dispatch;return i!==s.memoizedState&&(qe.flags|=2048,za(9,Al(),pb.bind(null,u,i),null)),[l,h,r]}function pb(r,s){r.action=s}function If(r){var s=kt(),i=rt;if(i!==null)return Uf(s,i,r);kt(),s=s.memoizedState,i=kt();var l=i.queue.dispatch;return i.memoizedState=r,[s,l,!1]}function za(r,s,i,l){return r={tag:r,create:i,deps:l,inst:s,next:null},s=qe.updateQueue,s===null&&(s=Xd(),qe.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=r.next=r:(l=i.next,i.next=r,r.next=l,s.lastEffect=r),r}function Al(){return{destroy:void 0,resource:void 0}}function Mf(){return kt().memoizedState}function Cl(r,s,i,l){var u=nr();l=l===void 0?null:l,qe.flags|=r,u.memoizedState=za(1|s,Al(),i,l)}function to(r,s,i,l){var u=kt();l=l===void 0?null:l;var h=u.memoizedState.inst;rt!==null&&l!==null&&Gd(l,rt.memoizedState.deps)?u.memoizedState=za(s,h,i,l):(qe.flags|=r,u.memoizedState=za(1|s,h,i,l))}function _f(r,s){Cl(8390656,8,r,s)}function Df(r,s){to(2048,8,r,s)}function Of(r,s){return to(4,2,r,s)}function Pf(r,s){return to(4,4,r,s)}function Lf(r,s){if(typeof s=="function"){r=r();var i=s(r);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Bf(r,s,i){i=i!=null?i.concat([r]):null,to(4,4,Lf.bind(null,s,r),i)}function nu(){}function zf(r,s){var i=kt();s=s===void 0?null:s;var l=i.memoizedState;return s!==null&&Gd(s,l[1])?l[0]:(i.memoizedState=[r,s],r)}function qf(r,s){var i=kt();s=s===void 0?null:s;var l=i.memoizedState;if(s!==null&&Gd(s,l[1]))return l[0];if(l=r(),ra){zr(!0);try{r()}finally{zr(!1)}}return i.memoizedState=[l,s],l}function su(r,s,i){return i===void 0||(cs&1073741824)!==0?r.memoizedState=s:(r.memoizedState=i,r=$p(),qe.lanes|=r,xs|=r,i)}function Hf(r,s,i,l){return hr(i,s)?i:Pa.current!==null?(r=su(r,i,l),hr(r,s)||(Et=!0),r):(cs&42)===0?(Et=!0,r.memoizedState=i):(r=$p(),qe.lanes|=r,xs|=r,s)}function Ff(r,s,i,l,u){var h=K.p;K.p=h!==0&&8>h?h:8;var g=D.T,v={};D.T=v,ou(r,!1,s,i);try{var E=u(),G=D.S;if(G!==null&&G(v,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var te=ub(E,l);ro(r,s,te,gr(r))}else ro(r,s,l,gr(r))}catch(oe){ro(r,s,{then:function(){},status:"rejected",reason:oe},gr())}finally{K.p=h,D.T=g}}function xb(){}function au(r,s,i,l){if(r.tag!==5)throw Error(o(476));var u=$f(r).queue;Ff(r,u,s,de,i===null?xb:function(){return Vf(r),i(l)})}function $f(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:de},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:i},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Vf(r){var s=$f(r).next.queue;ro(r,s,{},gr())}function iu(){return Ft(wo)}function Gf(){return kt().memoizedState}function Qf(){return kt().memoizedState}function gb(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var i=gr();r=os(i);var l=ls(s,r,i);l!==null&&(vr(l,s,i),Ki(l,s,i)),s={cache:Od()},r.payload=s;return}s=s.return}}function vb(r,s,i){var l=gr();i={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Rl(r)?Yf(s,i):(i=Ad(r,s,i,l),i!==null&&(vr(i,r,l),Kf(i,s,l)))}function Jf(r,s,i){var l=gr();ro(r,s,i,l)}function ro(r,s,i,l){var u={lane:l,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Rl(r))Yf(s,u);else{var h=r.alternate;if(r.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var g=s.lastRenderedState,v=h(g,i);if(u.hasEagerState=!0,u.eagerState=v,hr(v,g))return ul(r,s,u,0),dt===null&&dl(),!1}catch{}finally{}if(i=Ad(r,s,u,l),i!==null)return vr(i,r,l),Kf(i,s,l),!0}return!1}function ou(r,s,i,l){if(l={lane:2,revertLane:Bu(),action:l,hasEagerState:!1,eagerState:null,next:null},Rl(r)){if(s)throw Error(o(479))}else s=Ad(r,i,l,2),s!==null&&vr(s,r,2)}function Rl(r){var s=r.alternate;return r===qe||s!==null&&s===qe}function Yf(r,s){La=Nl=!0;var i=r.pending;i===null?s.next=s:(s.next=i.next,i.next=s),r.pending=s}function Kf(r,s,i){if((i&4194048)!==0){var l=s.lanes;l&=r.pendingLanes,i|=l,s.lanes=i,Xo(r,i)}}var Tl={readContext:Ft,use:Sl,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt},Xf={readContext:Ft,use:Sl,useCallback:function(r,s){return nr().memoizedState=[r,s===void 0?null:s],r},useContext:Ft,useEffect:_f,useImperativeHandle:function(r,s,i){i=i!=null?i.concat([r]):null,Cl(4194308,4,Lf.bind(null,s,r),i)},useLayoutEffect:function(r,s){return Cl(4194308,4,r,s)},useInsertionEffect:function(r,s){Cl(4,2,r,s)},useMemo:function(r,s){var i=nr();s=s===void 0?null:s;var l=r();if(ra){zr(!0);try{r()}finally{zr(!1)}}return i.memoizedState=[l,s],l},useReducer:function(r,s,i){var l=nr();if(i!==void 0){var u=i(s);if(ra){zr(!0);try{i(s)}finally{zr(!1)}}}else u=s;return l.memoizedState=l.baseState=u,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:u},l.queue=r,r=r.dispatch=vb.bind(null,qe,r),[l.memoizedState,r]},useRef:function(r){var s=nr();return r={current:r},s.memoizedState=r},useState:function(r){r=tu(r);var s=r.queue,i=Jf.bind(null,qe,s);return s.dispatch=i,[r.memoizedState,i]},useDebugValue:nu,useDeferredValue:function(r,s){var i=nr();return su(i,r,s)},useTransition:function(){var r=tu(!1);return r=Ff.bind(null,qe,r.queue,!0,!1),nr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,i){var l=qe,u=nr();if(Xe){if(i===void 0)throw Error(o(407));i=i()}else{if(i=s(),dt===null)throw Error(o(349));(Qe&124)!==0||vf(l,s,i)}u.memoizedState=i;var h={value:i,getSnapshot:s};return u.queue=h,_f(bf.bind(null,l,h,r),[r]),l.flags|=2048,za(9,Al(),yf.bind(null,l,h,i,s),null),i},useId:function(){var r=nr(),s=dt.identifierPrefix;if(Xe){var i=Sn,l=jn;i=(l&~(1<<32-qt(l)-1)).toString(32)+i,s="«"+s+"R"+i,i=jl++,0<i&&(s+="H"+i.toString(32)),s+="»"}else i=hb++,s="«"+s+"r"+i.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:iu,useFormState:Tf,useActionState:Tf,useOptimistic:function(r){var s=nr();s.memoizedState=s.baseState=r;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=ou.bind(null,qe,!0,i),i.dispatch=s,[r,s]},useMemoCache:Zd,useCacheRefresh:function(){return nr().memoizedState=gb.bind(null,qe)}},Zf={readContext:Ft,use:Sl,useCallback:zf,useContext:Ft,useEffect:Df,useImperativeHandle:Bf,useInsertionEffect:Of,useLayoutEffect:Pf,useMemo:qf,useReducer:kl,useRef:Mf,useState:function(){return kl(Cn)},useDebugValue:nu,useDeferredValue:function(r,s){var i=kt();return Hf(i,rt.memoizedState,r,s)},useTransition:function(){var r=kl(Cn)[0],s=kt().memoizedState;return[typeof r=="boolean"?r:eo(r),s]},useSyncExternalStore:gf,useId:Gf,useHostTransitionStatus:iu,useFormState:Ef,useActionState:Ef,useOptimistic:function(r,s){var i=kt();return jf(i,rt,r,s)},useMemoCache:Zd,useCacheRefresh:Qf},yb={readContext:Ft,use:Sl,useCallback:zf,useContext:Ft,useEffect:Df,useImperativeHandle:Bf,useInsertionEffect:Of,useLayoutEffect:Pf,useMemo:qf,useReducer:eu,useRef:Mf,useState:function(){return eu(Cn)},useDebugValue:nu,useDeferredValue:function(r,s){var i=kt();return rt===null?su(i,r,s):Hf(i,rt.memoizedState,r,s)},useTransition:function(){var r=eu(Cn)[0],s=kt().memoizedState;return[typeof r=="boolean"?r:eo(r),s]},useSyncExternalStore:gf,useId:Gf,useHostTransitionStatus:iu,useFormState:If,useActionState:If,useOptimistic:function(r,s){var i=kt();return rt!==null?jf(i,rt,r,s):(i.baseState=r,[r,i.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:Qf},qa=null,no=0;function El(r){var s=no;return no+=1,qa===null&&(qa=[]),cf(qa,r,s)}function so(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ul(r,s){throw s.$$typeof===b?Error(o(525)):(r=Object.prototype.toString.call(s),Error(o(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Wf(r){var s=r._init;return s(r._payload)}function ep(r){function s(H,O){if(r){var V=H.deletions;V===null?(H.deletions=[O],H.flags|=16):V.push(O)}}function i(H,O){if(!r)return null;for(;O!==null;)s(H,O),O=O.sibling;return null}function l(H){for(var O=new Map;H!==null;)H.key!==null?O.set(H.key,H):O.set(H.index,H),H=H.sibling;return O}function u(H,O){return H=Nn(H,O),H.index=0,H.sibling=null,H}function h(H,O,V){return H.index=V,r?(V=H.alternate,V!==null?(V=V.index,V<O?(H.flags|=67108866,O):V):(H.flags|=67108866,O)):(H.flags|=1048576,O)}function g(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function v(H,O,V,ae){return O===null||O.tag!==6?(O=Rd(V,H.mode,ae),O.return=H,O):(O=u(O,V),O.return=H,O)}function E(H,O,V,ae){var be=V.type;return be===B?te(H,O,V.props.children,ae,V.key):O!==null&&(O.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===C&&Wf(be)===O.type)?(O=u(O,V.props),so(O,V),O.return=H,O):(O=ml(V.type,V.key,V.props,null,H.mode,ae),so(O,V),O.return=H,O)}function G(H,O,V,ae){return O===null||O.tag!==4||O.stateNode.containerInfo!==V.containerInfo||O.stateNode.implementation!==V.implementation?(O=Td(V,H.mode,ae),O.return=H,O):(O=u(O,V.children||[]),O.return=H,O)}function te(H,O,V,ae,be){return O===null||O.tag!==7?(O=Js(V,H.mode,ae,be),O.return=H,O):(O=u(O,V),O.return=H,O)}function oe(H,O,V){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Rd(""+O,H.mode,V),O.return=H,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case y:return V=ml(O.type,O.key,O.props,null,H.mode,V),so(V,O),V.return=H,V;case _:return O=Td(O,H.mode,V),O.return=H,O;case C:var ae=O._init;return O=ae(O._payload),oe(H,O,V)}if(R(O)||Q(O))return O=Js(O,H.mode,V,null),O.return=H,O;if(typeof O.then=="function")return oe(H,El(O),V);if(O.$$typeof===S)return oe(H,gl(H,O),V);Ul(H,O)}return null}function Y(H,O,V,ae){var be=O!==null?O.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return be!==null?null:v(H,O,""+V,ae);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return V.key===be?E(H,O,V,ae):null;case _:return V.key===be?G(H,O,V,ae):null;case C:return be=V._init,V=be(V._payload),Y(H,O,V,ae)}if(R(V)||Q(V))return be!==null?null:te(H,O,V,ae,null);if(typeof V.then=="function")return Y(H,O,El(V),ae);if(V.$$typeof===S)return Y(H,O,gl(H,V),ae);Ul(H,V)}return null}function Z(H,O,V,ae,be){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return H=H.get(V)||null,v(O,H,""+ae,be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return H=H.get(ae.key===null?V:ae.key)||null,E(O,H,ae,be);case _:return H=H.get(ae.key===null?V:ae.key)||null,G(O,H,ae,be);case C:var Fe=ae._init;return ae=Fe(ae._payload),Z(H,O,V,ae,be)}if(R(ae)||Q(ae))return H=H.get(V)||null,te(O,H,ae,be,null);if(typeof ae.then=="function")return Z(H,O,V,El(ae),be);if(ae.$$typeof===S)return Z(H,O,V,gl(O,ae),be);Ul(O,ae)}return null}function Me(H,O,V,ae){for(var be=null,Fe=null,Se=O,Ue=O=0,It=null;Se!==null&&Ue<V.length;Ue++){Se.index>Ue?(It=Se,Se=null):It=Se.sibling;var Ke=Y(H,Se,V[Ue],ae);if(Ke===null){Se===null&&(Se=It);break}r&&Se&&Ke.alternate===null&&s(H,Se),O=h(Ke,O,Ue),Fe===null?be=Ke:Fe.sibling=Ke,Fe=Ke,Se=It}if(Ue===V.length)return i(H,Se),Xe&&Ks(H,Ue),be;if(Se===null){for(;Ue<V.length;Ue++)Se=oe(H,V[Ue],ae),Se!==null&&(O=h(Se,O,Ue),Fe===null?be=Se:Fe.sibling=Se,Fe=Se);return Xe&&Ks(H,Ue),be}for(Se=l(Se);Ue<V.length;Ue++)It=Z(Se,H,Ue,V[Ue],ae),It!==null&&(r&&It.alternate!==null&&Se.delete(It.key===null?Ue:It.key),O=h(It,O,Ue),Fe===null?be=It:Fe.sibling=It,Fe=It);return r&&Se.forEach(function(ks){return s(H,ks)}),Xe&&Ks(H,Ue),be}function Te(H,O,V,ae){if(V==null)throw Error(o(151));for(var be=null,Fe=null,Se=O,Ue=O=0,It=null,Ke=V.next();Se!==null&&!Ke.done;Ue++,Ke=V.next()){Se.index>Ue?(It=Se,Se=null):It=Se.sibling;var ks=Y(H,Se,Ke.value,ae);if(ks===null){Se===null&&(Se=It);break}r&&Se&&ks.alternate===null&&s(H,Se),O=h(ks,O,Ue),Fe===null?be=ks:Fe.sibling=ks,Fe=ks,Se=It}if(Ke.done)return i(H,Se),Xe&&Ks(H,Ue),be;if(Se===null){for(;!Ke.done;Ue++,Ke=V.next())Ke=oe(H,Ke.value,ae),Ke!==null&&(O=h(Ke,O,Ue),Fe===null?be=Ke:Fe.sibling=Ke,Fe=Ke);return Xe&&Ks(H,Ue),be}for(Se=l(Se);!Ke.done;Ue++,Ke=V.next())Ke=Z(Se,H,Ue,Ke.value,ae),Ke!==null&&(r&&Ke.alternate!==null&&Se.delete(Ke.key===null?Ue:Ke.key),O=h(Ke,O,Ue),Fe===null?be=Ke:Fe.sibling=Ke,Fe=Ke);return r&&Se.forEach(function(bw){return s(H,bw)}),Xe&&Ks(H,Ue),be}function st(H,O,V,ae){if(typeof V=="object"&&V!==null&&V.type===B&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case y:e:{for(var be=V.key;O!==null;){if(O.key===be){if(be=V.type,be===B){if(O.tag===7){i(H,O.sibling),ae=u(O,V.props.children),ae.return=H,H=ae;break e}}else if(O.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===C&&Wf(be)===O.type){i(H,O.sibling),ae=u(O,V.props),so(ae,V),ae.return=H,H=ae;break e}i(H,O);break}else s(H,O);O=O.sibling}V.type===B?(ae=Js(V.props.children,H.mode,ae,V.key),ae.return=H,H=ae):(ae=ml(V.type,V.key,V.props,null,H.mode,ae),so(ae,V),ae.return=H,H=ae)}return g(H);case _:e:{for(be=V.key;O!==null;){if(O.key===be)if(O.tag===4&&O.stateNode.containerInfo===V.containerInfo&&O.stateNode.implementation===V.implementation){i(H,O.sibling),ae=u(O,V.children||[]),ae.return=H,H=ae;break e}else{i(H,O);break}else s(H,O);O=O.sibling}ae=Td(V,H.mode,ae),ae.return=H,H=ae}return g(H);case C:return be=V._init,V=be(V._payload),st(H,O,V,ae)}if(R(V))return Me(H,O,V,ae);if(Q(V)){if(be=Q(V),typeof be!="function")throw Error(o(150));return V=be.call(V),Te(H,O,V,ae)}if(typeof V.then=="function")return st(H,O,El(V),ae);if(V.$$typeof===S)return st(H,O,gl(H,V),ae);Ul(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,O!==null&&O.tag===6?(i(H,O.sibling),ae=u(O,V),ae.return=H,H=ae):(i(H,O),ae=Rd(V,H.mode,ae),ae.return=H,H=ae),g(H)):i(H,O)}return function(H,O,V,ae){try{no=0;var be=st(H,O,V,ae);return qa=null,be}catch(Se){if(Se===Ji||Se===yl)throw Se;var Fe=mr(29,Se,null,H.mode);return Fe.lanes=ae,Fe.return=H,Fe}finally{}}}var Ha=ep(!0),tp=ep(!1),kr=Re(null),Xr=null;function ds(r){var s=r.alternate;ve(Rt,Rt.current&1),ve(kr,r),Xr===null&&(s===null||Pa.current!==null||s.memoizedState!==null)&&(Xr=r)}function rp(r){if(r.tag===22){if(ve(Rt,Rt.current),ve(kr,r),Xr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Xr=r)}}else us()}function us(){ve(Rt,Rt.current),ve(kr,kr.current)}function Rn(r){pe(kr),Xr===r&&(Xr=null),pe(Rt)}var Rt=Re(0);function Il(r){for(var s=r;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Xu(i)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function lu(r,s,i,l){s=r.memoizedState,i=i(l,s),i=i==null?s:j({},s,i),r.memoizedState=i,r.lanes===0&&(r.updateQueue.baseState=i)}var cu={enqueueSetState:function(r,s,i){r=r._reactInternals;var l=gr(),u=os(l);u.payload=s,i!=null&&(u.callback=i),s=ls(r,u,l),s!==null&&(vr(s,r,l),Ki(s,r,l))},enqueueReplaceState:function(r,s,i){r=r._reactInternals;var l=gr(),u=os(l);u.tag=1,u.payload=s,i!=null&&(u.callback=i),s=ls(r,u,l),s!==null&&(vr(s,r,l),Ki(s,r,l))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var i=gr(),l=os(i);l.tag=2,s!=null&&(l.callback=s),s=ls(r,l,i),s!==null&&(vr(s,r,i),Ki(s,r,i))}};function np(r,s,i,l,u,h,g){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(l,h,g):s.prototype&&s.prototype.isPureReactComponent?!zi(i,l)||!zi(u,h):!0}function sp(r,s,i,l){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,l),s.state!==r&&cu.enqueueReplaceState(s,s.state,null)}function na(r,s){var i=s;if("ref"in s){i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}if(r=r.defaultProps){i===s&&(i=j({},i));for(var u in r)i[u]===void 0&&(i[u]=r[u])}return i}var Ml=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ap(r){Ml(r)}function ip(r){console.error(r)}function op(r){Ml(r)}function _l(r,s){try{var i=r.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function lp(r,s,i){try{var l=r.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function du(r,s,i){return i=os(i),i.tag=3,i.payload={element:null},i.callback=function(){_l(r,s)},i}function cp(r){return r=os(r),r.tag=3,r}function dp(r,s,i,l){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var h=l.value;r.payload=function(){return u(h)},r.callback=function(){lp(s,i,l)}}var g=i.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){lp(s,i,l),typeof u!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function bb(r,s,i,l,u){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=i.alternate,s!==null&&Vi(s,i,u,!0),i=kr.current,i!==null){switch(i.tag){case 13:return Xr===null?_u():i.alternate===null&&yt===0&&(yt=3),i.flags&=-257,i.flags|=65536,i.lanes=u,l===Bd?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([l]):s.add(l),Ou(r,l,u)),!1;case 22:return i.flags|=65536,l===Bd?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([l]):i.add(l)),Ou(r,l,u)),!1}throw Error(o(435,i.tag))}return Ou(r,l,u),_u(),!1}if(Xe)return s=kr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=u,l!==Id&&(r=Error(o(422),{cause:l}),$i(wr(r,i)))):(l!==Id&&(s=Error(o(423),{cause:l}),$i(wr(s,i))),r=r.current.alternate,r.flags|=65536,u&=-u,r.lanes|=u,l=wr(l,i),u=du(r.stateNode,l,u),Hd(r,u),yt!==4&&(yt=2)),!1;var h=Error(o(520),{cause:l});if(h=wr(h,i),ho===null?ho=[h]:ho.push(h),yt!==4&&(yt=2),s===null)return!0;l=wr(l,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,r=u&-u,i.lanes|=r,r=du(i.stateNode,l,r),Hd(i,r),!1;case 1:if(s=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(gs===null||!gs.has(h))))return i.flags|=65536,u&=-u,i.lanes|=u,u=cp(u),dp(u,r,i,l),Hd(i,u),!1}i=i.return}while(i!==null);return!1}var up=Error(o(461)),Et=!1;function Dt(r,s,i,l){s.child=r===null?tp(s,null,i,l):Ha(s,r.child,i,l)}function hp(r,s,i,l,u){i=i.render;var h=s.ref;if("ref"in l){var g={};for(var v in l)v!=="ref"&&(g[v]=l[v])}else g=l;return ea(s),l=Qd(r,s,i,g,h,u),v=Jd(),r!==null&&!Et?(Yd(r,s,u),Tn(r,s,u)):(Xe&&v&&Ed(s),s.flags|=1,Dt(r,s,l,u),s.child)}function mp(r,s,i,l,u){if(r===null){var h=i.type;return typeof h=="function"&&!Cd(h)&&h.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=h,fp(r,s,h,l,u)):(r=ml(i.type,null,l,s,s.mode,u),r.ref=s.ref,r.return=s,s.child=r)}if(h=r.child,!vu(r,u)){var g=h.memoizedProps;if(i=i.compare,i=i!==null?i:zi,i(g,l)&&r.ref===s.ref)return Tn(r,s,u)}return s.flags|=1,r=Nn(h,l),r.ref=s.ref,r.return=s,s.child=r}function fp(r,s,i,l,u){if(r!==null){var h=r.memoizedProps;if(zi(h,l)&&r.ref===s.ref)if(Et=!1,s.pendingProps=l=h,vu(r,u))(r.flags&131072)!==0&&(Et=!0);else return s.lanes=r.lanes,Tn(r,s,u)}return uu(r,s,i,l,u)}function pp(r,s,i){var l=s.pendingProps,u=l.children,h=r!==null?r.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=h!==null?h.baseLanes|i:i,r!==null){for(u=s.child=r.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;s.childLanes=h&~l}else s.childLanes=0,s.child=null;return xp(r,s,l,i)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&vl(s,h!==null?h.cachePool:null),h!==null?ff(s,h):$d(),rp(s);else return s.lanes=s.childLanes=536870912,xp(r,s,h!==null?h.baseLanes|i:i,i)}else h!==null?(vl(s,h.cachePool),ff(s,h),us(),s.memoizedState=null):(r!==null&&vl(s,null),$d(),us());return Dt(r,s,u,i),s.child}function xp(r,s,i,l){var u=Ld();return u=u===null?null:{parent:Ct._currentValue,pool:u},s.memoizedState={baseLanes:i,cachePool:u},r!==null&&vl(s,null),$d(),rp(s),r!==null&&Vi(r,s,l,!0),null}function Dl(r,s){var i=s.ref;if(i===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(r===null||r.ref!==i)&&(s.flags|=4194816)}}function uu(r,s,i,l,u){return ea(s),i=Qd(r,s,i,l,void 0,u),l=Jd(),r!==null&&!Et?(Yd(r,s,u),Tn(r,s,u)):(Xe&&l&&Ed(s),s.flags|=1,Dt(r,s,i,u),s.child)}function gp(r,s,i,l,u,h){return ea(s),s.updateQueue=null,i=xf(s,l,i,u),pf(r),l=Jd(),r!==null&&!Et?(Yd(r,s,h),Tn(r,s,h)):(Xe&&l&&Ed(s),s.flags|=1,Dt(r,s,i,h),s.child)}function vp(r,s,i,l,u){if(ea(s),s.stateNode===null){var h=Ia,g=i.contextType;typeof g=="object"&&g!==null&&(h=Ft(g)),h=new i(l,h),s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=cu,s.stateNode=h,h._reactInternals=s,h=s.stateNode,h.props=l,h.state=s.memoizedState,h.refs={},zd(s),g=i.contextType,h.context=typeof g=="object"&&g!==null?Ft(g):Ia,h.state=s.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(lu(s,i,g,l),h.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&cu.enqueueReplaceState(h,h.state,null),Zi(s,l,h,u),Xi(),h.state=s.memoizedState),typeof h.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(r===null){h=s.stateNode;var v=s.memoizedProps,E=na(i,v);h.props=E;var G=h.context,te=i.contextType;g=Ia,typeof te=="object"&&te!==null&&(g=Ft(te));var oe=i.getDerivedStateFromProps;te=typeof oe=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=s.pendingProps!==v,te||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||G!==g)&&sp(s,h,l,g),is=!1;var Y=s.memoizedState;h.state=Y,Zi(s,l,h,u),Xi(),G=s.memoizedState,v||Y!==G||is?(typeof oe=="function"&&(lu(s,i,oe,l),G=s.memoizedState),(E=is||np(s,i,E,l,Y,G,g))?(te||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=G),h.props=l,h.state=G,h.context=g,l=E):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{h=s.stateNode,qd(r,s),g=s.memoizedProps,te=na(i,g),h.props=te,oe=s.pendingProps,Y=h.context,G=i.contextType,E=Ia,typeof G=="object"&&G!==null&&(E=Ft(G)),v=i.getDerivedStateFromProps,(G=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==oe||Y!==E)&&sp(s,h,l,E),is=!1,Y=s.memoizedState,h.state=Y,Zi(s,l,h,u),Xi();var Z=s.memoizedState;g!==oe||Y!==Z||is||r!==null&&r.dependencies!==null&&xl(r.dependencies)?(typeof v=="function"&&(lu(s,i,v,l),Z=s.memoizedState),(te=is||np(s,i,te,l,Y,Z,E)||r!==null&&r.dependencies!==null&&xl(r.dependencies))?(G||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,Z,E),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,Z,E)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Z),h.props=l,h.state=Z,h.context=E,l=te):(typeof h.componentDidUpdate!="function"||g===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),l=!1)}return h=l,Dl(r,s),l=(s.flags&128)!==0,h||l?(h=s.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:h.render(),s.flags|=1,r!==null&&l?(s.child=Ha(s,r.child,null,u),s.child=Ha(s,null,i,u)):Dt(r,s,i,u),s.memoizedState=h.state,r=s.child):r=Tn(r,s,u),r}function yp(r,s,i,l){return Fi(),s.flags|=256,Dt(r,s,i,l),s.child}var hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mu(r){return{baseLanes:r,cachePool:af()}}function fu(r,s,i){return r=r!==null?r.childLanes&~i:0,s&&(r|=Ar),r}function bp(r,s,i){var l=s.pendingProps,u=!1,h=(s.flags&128)!==0,g;if((g=h)||(g=r!==null&&r.memoizedState===null?!1:(Rt.current&2)!==0),g&&(u=!0,s.flags&=-129),g=(s.flags&32)!==0,s.flags&=-33,r===null){if(Xe){if(u?ds(s):us(),Xe){var v=vt,E;if(E=v){e:{for(E=v,v=Kr;E.nodeType!==8;){if(!v){v=null;break e}if(E=Vr(E.nextSibling),E===null){v=null;break e}}v=E}v!==null?(s.memoizedState={dehydrated:v,treeContext:Ys!==null?{id:jn,overflow:Sn}:null,retryLane:536870912,hydrationErrors:null},E=mr(18,null,null,0),E.stateNode=v,E.return=s,s.child=E,Yt=s,vt=null,E=!0):E=!1}E||Zs(s)}if(v=s.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return Xu(v)?s.lanes=32:s.lanes=536870912,null;Rn(s)}return v=l.children,l=l.fallback,u?(us(),u=s.mode,v=Ol({mode:"hidden",children:v},u),l=Js(l,u,i,null),v.return=s,l.return=s,v.sibling=l,s.child=v,u=s.child,u.memoizedState=mu(i),u.childLanes=fu(r,g,i),s.memoizedState=hu,l):(ds(s),pu(s,v))}if(E=r.memoizedState,E!==null&&(v=E.dehydrated,v!==null)){if(h)s.flags&256?(ds(s),s.flags&=-257,s=xu(r,s,i)):s.memoizedState!==null?(us(),s.child=r.child,s.flags|=128,s=null):(us(),u=l.fallback,v=s.mode,l=Ol({mode:"visible",children:l.children},v),u=Js(u,v,i,null),u.flags|=2,l.return=s,u.return=s,l.sibling=u,s.child=l,Ha(s,r.child,null,i),l=s.child,l.memoizedState=mu(i),l.childLanes=fu(r,g,i),s.memoizedState=hu,s=u);else if(ds(s),Xu(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var G=g.dgst;g=G,l=Error(o(419)),l.stack="",l.digest=g,$i({value:l,source:null,stack:null}),s=xu(r,s,i)}else if(Et||Vi(r,s,i,!1),g=(i&r.childLanes)!==0,Et||g){if(g=dt,g!==null&&(l=i&-i,l=(l&42)!==0?1:Si(l),l=(l&(g.suspendedLanes|i))!==0?0:l,l!==0&&l!==E.retryLane))throw E.retryLane=l,Ua(r,l),vr(g,r,l),up;v.data==="$?"||_u(),s=xu(r,s,i)}else v.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=E.treeContext,vt=Vr(v.nextSibling),Yt=s,Xe=!0,Xs=null,Kr=!1,r!==null&&(jr[Sr++]=jn,jr[Sr++]=Sn,jr[Sr++]=Ys,jn=r.id,Sn=r.overflow,Ys=s),s=pu(s,l.children),s.flags|=4096);return s}return u?(us(),u=l.fallback,v=s.mode,E=r.child,G=E.sibling,l=Nn(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&65011712,G!==null?u=Nn(G,u):(u=Js(u,v,i,null),u.flags|=2),u.return=s,l.return=s,l.sibling=u,s.child=l,l=u,u=s.child,v=r.child.memoizedState,v===null?v=mu(i):(E=v.cachePool,E!==null?(G=Ct._currentValue,E=E.parent!==G?{parent:G,pool:G}:E):E=af(),v={baseLanes:v.baseLanes|i,cachePool:E}),u.memoizedState=v,u.childLanes=fu(r,g,i),s.memoizedState=hu,l):(ds(s),i=r.child,r=i.sibling,i=Nn(i,{mode:"visible",children:l.children}),i.return=s,i.sibling=null,r!==null&&(g=s.deletions,g===null?(s.deletions=[r],s.flags|=16):g.push(r)),s.child=i,s.memoizedState=null,i)}function pu(r,s){return s=Ol({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ol(r,s){return r=mr(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function xu(r,s,i){return Ha(s,r.child,null,i),r=pu(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function wp(r,s,i){r.lanes|=s;var l=r.alternate;l!==null&&(l.lanes|=s),_d(r.return,s,i)}function gu(r,s,i,l,u){var h=r.memoizedState;h===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:u}:(h.isBackwards=s,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=i,h.tailMode=u)}function Np(r,s,i){var l=s.pendingProps,u=l.revealOrder,h=l.tail;if(Dt(r,s,l.children,i),l=Rt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wp(r,i,s);else if(r.tag===19)wp(r,i,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}l&=1}switch(ve(Rt,l),u){case"forwards":for(i=s.child,u=null;i!==null;)r=i.alternate,r!==null&&Il(r)===null&&(u=i),i=i.sibling;i=u,i===null?(u=s.child,s.child=null):(u=i.sibling,i.sibling=null),gu(s,!1,u,i,h);break;case"backwards":for(i=null,u=s.child,s.child=null;u!==null;){if(r=u.alternate,r!==null&&Il(r)===null){s.child=u;break}r=u.sibling,u.sibling=i,i=u,u=r}gu(s,!0,i,null,h);break;case"together":gu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tn(r,s,i){if(r!==null&&(s.dependencies=r.dependencies),xs|=s.lanes,(i&s.childLanes)===0)if(r!==null){if(Vi(r,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(o(153));if(s.child!==null){for(r=s.child,i=Nn(r,r.pendingProps),s.child=i,i.return=s;r.sibling!==null;)r=r.sibling,i=i.sibling=Nn(r,r.pendingProps),i.return=s;i.sibling=null}return s.child}function vu(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&xl(r)))}function wb(r,s,i){switch(s.tag){case 3:ze(s,s.stateNode.containerInfo),as(s,Ct,r.memoizedState.cache),Fi();break;case 27:case 5:ur(s);break;case 4:ze(s,s.stateNode.containerInfo);break;case 10:as(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ds(s),s.flags|=128,null):(i&s.child.childLanes)!==0?bp(r,s,i):(ds(s),r=Tn(r,s,i),r!==null?r.sibling:null);ds(s);break;case 19:var u=(r.flags&128)!==0;if(l=(i&s.childLanes)!==0,l||(Vi(r,s,i,!1),l=(i&s.childLanes)!==0),u){if(l)return Np(r,s,i);s.flags|=128}if(u=s.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ve(Rt,Rt.current),l)break;return null;case 22:case 23:return s.lanes=0,pp(r,s,i);case 24:as(s,Ct,r.memoizedState.cache)}return Tn(r,s,i)}function jp(r,s,i){if(r!==null)if(r.memoizedProps!==s.pendingProps)Et=!0;else{if(!vu(r,i)&&(s.flags&128)===0)return Et=!1,wb(r,s,i);Et=(r.flags&131072)!==0}else Et=!1,Xe&&(s.flags&1048576)!==0&&Zm(s,pl,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var l=s.elementType,u=l._init;if(l=u(l._payload),s.type=l,typeof l=="function")Cd(l)?(r=na(l,r),s.tag=1,s=vp(null,s,l,r,i)):(s.tag=0,s=uu(null,s,l,r,i));else{if(l!=null){if(u=l.$$typeof,u===w){s.tag=11,s=hp(null,s,l,r,i);break e}else if(u===W){s.tag=14,s=mp(null,s,l,r,i);break e}}throw s=me(l)||l,Error(o(306,s,""))}}return s;case 0:return uu(r,s,s.type,s.pendingProps,i);case 1:return l=s.type,u=na(l,s.pendingProps),vp(r,s,l,u,i);case 3:e:{if(ze(s,s.stateNode.containerInfo),r===null)throw Error(o(387));l=s.pendingProps;var h=s.memoizedState;u=h.element,qd(r,s),Zi(s,l,null,i);var g=s.memoizedState;if(l=g.cache,as(s,Ct,l),l!==h.cache&&Dd(s,[Ct],i,!0),Xi(),l=g.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:g.cache},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){s=yp(r,s,l,i);break e}else if(l!==u){u=wr(Error(o(424)),s),$i(u),s=yp(r,s,l,i);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(vt=Vr(r.firstChild),Yt=s,Xe=!0,Xs=null,Kr=!0,i=tp(s,null,l,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Fi(),l===u){s=Tn(r,s,i);break e}Dt(r,s,l,i)}s=s.child}return s;case 26:return Dl(r,s),r===null?(i=Cx(s.type,null,s.pendingProps,null))?s.memoizedState=i:Xe||(i=s.type,r=s.pendingProps,l=Kl(De.current).createElement(i),l[Tt]=s,l[Ht]=r,Pt(l,i,r),jt(l),s.stateNode=l):s.memoizedState=Cx(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return ur(s),r===null&&Xe&&(l=s.stateNode=Sx(s.type,s.pendingProps,De.current),Yt=s,Kr=!0,u=vt,bs(s.type)?(Zu=u,vt=Vr(l.firstChild)):vt=u),Dt(r,s,s.pendingProps.children,i),Dl(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Xe&&((u=l=vt)&&(l=Yb(l,s.type,s.pendingProps,Kr),l!==null?(s.stateNode=l,Yt=s,vt=Vr(l.firstChild),Kr=!1,u=!0):u=!1),u||Zs(s)),ur(s),u=s.type,h=s.pendingProps,g=r!==null?r.memoizedProps:null,l=h.children,Ju(u,h)?l=null:g!==null&&Ju(u,g)&&(s.flags|=32),s.memoizedState!==null&&(u=Qd(r,s,mb,null,null,i),wo._currentValue=u),Dl(r,s),Dt(r,s,l,i),s.child;case 6:return r===null&&Xe&&((r=i=vt)&&(i=Kb(i,s.pendingProps,Kr),i!==null?(s.stateNode=i,Yt=s,vt=null,r=!0):r=!1),r||Zs(s)),null;case 13:return bp(r,s,i);case 4:return ze(s,s.stateNode.containerInfo),l=s.pendingProps,r===null?s.child=Ha(s,null,l,i):Dt(r,s,l,i),s.child;case 11:return hp(r,s,s.type,s.pendingProps,i);case 7:return Dt(r,s,s.pendingProps,i),s.child;case 8:return Dt(r,s,s.pendingProps.children,i),s.child;case 12:return Dt(r,s,s.pendingProps.children,i),s.child;case 10:return l=s.pendingProps,as(s,s.type,l.value),Dt(r,s,l.children,i),s.child;case 9:return u=s.type._context,l=s.pendingProps.children,ea(s),u=Ft(u),l=l(u),s.flags|=1,Dt(r,s,l,i),s.child;case 14:return mp(r,s,s.type,s.pendingProps,i);case 15:return fp(r,s,s.type,s.pendingProps,i);case 19:return Np(r,s,i);case 31:return l=s.pendingProps,i=s.mode,l={mode:l.mode,children:l.children},r===null?(i=Ol(l,i),i.ref=s.ref,s.child=i,i.return=s,s=i):(i=Nn(r.child,l),i.ref=s.ref,s.child=i,i.return=s,s=i),s;case 22:return pp(r,s,i);case 24:return ea(s),l=Ft(Ct),r===null?(u=Ld(),u===null&&(u=dt,h=Od(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=i),u=h),s.memoizedState={parent:l,cache:u},zd(s),as(s,Ct,u)):((r.lanes&i)!==0&&(qd(r,s),Zi(s,null,null,i),Xi()),u=r.memoizedState,h=s.memoizedState,u.parent!==l?(u={parent:l,cache:l},s.memoizedState=u,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=u),as(s,Ct,l)):(l=h.cache,as(s,Ct,l),l!==u.cache&&Dd(s,[Ct],i,!0))),Dt(r,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function En(r){r.flags|=4}function Sp(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ix(s)){if(s=kr.current,s!==null&&((Qe&4194048)===Qe?Xr!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||s!==Xr))throw Yi=Bd,of;r.flags|=8192}}function Pl(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?qr():536870912,r.lanes|=s,Ga|=s)}function ao(r,s){if(!Xe)switch(r.tailMode){case"hidden":s=r.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?r.tail=null:i.sibling=null;break;case"collapsed":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:l.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,i=0,l=0;if(s)for(var u=r.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=r,u=u.sibling;else for(u=r.child;u!==null;)i|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=r,u=u.sibling;return r.subtreeFlags|=l,r.childLanes=i,s}function Nb(r,s,i){var l=s.pendingProps;switch(Ud(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return i=s.stateNode,l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),An(Ct),ut(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(r===null||r.child===null)&&(Hi(s)?En(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,tf())),xt(s),null;case 26:return i=s.memoizedState,r===null?(En(s),i!==null?(xt(s),Sp(s,i)):(xt(s),s.flags&=-16777217)):i?i!==r.memoizedState?(En(s),xt(s),Sp(s,i)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==l&&En(s),xt(s),s.flags&=-16777217),null;case 27:fn(s),i=De.current;var u=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==l&&En(s);else{if(!l){if(s.stateNode===null)throw Error(o(166));return xt(s),null}r=Le.current,Hi(s)?Wm(s):(r=Sx(u,l,i),s.stateNode=r,En(s))}return xt(s),null;case 5:if(fn(s),i=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==l&&En(s);else{if(!l){if(s.stateNode===null)throw Error(o(166));return xt(s),null}if(r=Le.current,Hi(s))Wm(s);else{switch(u=Kl(De.current),r){case 1:r=u.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=u.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=u.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=u.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?u.createElement(i,{is:l.is}):u.createElement(i)}}r[Tt]=s,r[Ht]=l;e:for(u=s.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}s.stateNode=r;e:switch(Pt(r,i,l),i){case"button":case"input":case"select":case"textarea":r=!!l.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&En(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==l&&En(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(o(166));if(r=De.current,Hi(s)){if(r=s.stateNode,i=s.memoizedProps,l=null,u=Yt,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}r[Tt]=s,r=!!(r.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||gx(r.nodeValue,i)),r||Zs(s)}else r=Kl(r).createTextNode(l),r[Tt]=s,s.stateNode=r}return xt(s),null;case 13:if(l=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(u=Hi(s),l!==null&&l.dehydrated!==null){if(r===null){if(!u)throw Error(o(318));if(u=s.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));u[Tt]=s}else Fi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),u=!1}else u=tf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),u=!0;if(!u)return s.flags&256?(Rn(s),s):(Rn(s),null)}if(Rn(s),(s.flags&128)!==0)return s.lanes=i,s;if(i=l!==null,r=r!==null&&r.memoizedState!==null,i){l=s.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048)}return i!==r&&i&&(s.child.flags|=8192),Pl(s,s.updateQueue),xt(s),null;case 4:return ut(),r===null&&Fu(s.stateNode.containerInfo),xt(s),null;case 10:return An(s.type),xt(s),null;case 19:if(pe(Rt),u=s.memoizedState,u===null)return xt(s),null;if(l=(s.flags&128)!==0,h=u.rendering,h===null)if(l)ao(u,!1);else{if(yt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(h=Il(r),h!==null){for(s.flags|=128,ao(u,!1),r=h.updateQueue,s.updateQueue=r,Pl(s,r),s.subtreeFlags=0,r=i,i=s.child;i!==null;)Xm(i,r),i=i.sibling;return ve(Rt,Rt.current&1|2),s.child}r=r.sibling}u.tail!==null&&Qt()>zl&&(s.flags|=128,l=!0,ao(u,!1),s.lanes=4194304)}else{if(!l)if(r=Il(h),r!==null){if(s.flags|=128,l=!0,r=r.updateQueue,s.updateQueue=r,Pl(s,r),ao(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Xe)return xt(s),null}else 2*Qt()-u.renderingStartTime>zl&&i!==536870912&&(s.flags|=128,l=!0,ao(u,!1),s.lanes=4194304);u.isBackwards?(h.sibling=s.child,s.child=h):(r=u.last,r!==null?r.sibling=h:s.child=h,u.last=h)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Qt(),s.sibling=null,r=Rt.current,ve(Rt,l?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return Rn(s),Vd(),l=s.memoizedState!==null,r!==null?r.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(i&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),i=s.updateQueue,i!==null&&Pl(s,i.retryQueue),i=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==i&&(s.flags|=2048),r!==null&&pe(ta),null;case 24:return i=null,r!==null&&(i=r.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),An(Ct),xt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function jb(r,s){switch(Ud(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return An(Ct),ut(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return fn(s),null;case 13:if(Rn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Fi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return pe(Rt),null;case 4:return ut(),null;case 10:return An(s.type),null;case 22:case 23:return Rn(s),Vd(),r!==null&&pe(ta),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return An(Ct),null;case 25:return null;default:return null}}function kp(r,s){switch(Ud(s),s.tag){case 3:An(Ct),ut();break;case 26:case 27:case 5:fn(s);break;case 4:ut();break;case 13:Rn(s);break;case 19:pe(Rt);break;case 10:An(s.type);break;case 22:case 23:Rn(s),Vd(),r!==null&&pe(ta);break;case 24:An(Ct)}}function io(r,s){try{var i=s.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var u=l.next;i=u;do{if((i.tag&r)===r){l=void 0;var h=i.create,g=i.inst;l=h(),g.destroy=l}i=i.next}while(i!==u)}}catch(v){ct(s,s.return,v)}}function hs(r,s,i){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&r)===r){var g=l.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,u=s;var E=i,G=v;try{G()}catch(te){ct(u,E,te)}}}l=l.next}while(l!==h)}}catch(te){ct(s,s.return,te)}}function Ap(r){var s=r.updateQueue;if(s!==null){var i=r.stateNode;try{mf(s,i)}catch(l){ct(r,r.return,l)}}}function Cp(r,s,i){i.props=na(r.type,r.memoizedProps),i.state=r.memoizedState;try{i.componentWillUnmount()}catch(l){ct(r,s,l)}}function oo(r,s){try{var i=r.ref;if(i!==null){switch(r.tag){case 26:case 27:case 5:var l=r.stateNode;break;case 30:l=r.stateNode;break;default:l=r.stateNode}typeof i=="function"?r.refCleanup=i(l):i.current=l}}catch(u){ct(r,s,u)}}function Zr(r,s){var i=r.ref,l=r.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(u){ct(r,s,u)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){ct(r,s,u)}else i.current=null}function Rp(r){var s=r.type,i=r.memoizedProps,l=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(u){ct(r,r.return,u)}}function yu(r,s,i){try{var l=r.stateNode;$b(l,r.type,i,s),l[Ht]=s}catch(u){ct(r,r.return,u)}}function Tp(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&bs(r.type)||r.tag===4}function bu(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Tp(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&bs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function wu(r,s,i){var l=r.tag;if(l===5||l===6)r=r.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(r,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(r),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Yl));else if(l!==4&&(l===27&&bs(r.type)&&(i=r.stateNode,s=null),r=r.child,r!==null))for(wu(r,s,i),r=r.sibling;r!==null;)wu(r,s,i),r=r.sibling}function Ll(r,s,i){var l=r.tag;if(l===5||l===6)r=r.stateNode,s?i.insertBefore(r,s):i.appendChild(r);else if(l!==4&&(l===27&&bs(r.type)&&(i=r.stateNode),r=r.child,r!==null))for(Ll(r,s,i),r=r.sibling;r!==null;)Ll(r,s,i),r=r.sibling}function Ep(r){var s=r.stateNode,i=r.memoizedProps;try{for(var l=r.type,u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Pt(s,l,i),s[Tt]=r,s[Ht]=i}catch(h){ct(r,r.return,h)}}var Un=!1,wt=!1,Nu=!1,Up=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Sb(r,s){if(r=r.containerInfo,Gu=rc,r=qm(r),bd(r)){if("selectionStart"in r)var i={start:r.selectionStart,end:r.selectionEnd};else e:{i=(i=r.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var g=0,v=-1,E=-1,G=0,te=0,oe=r,Y=null;t:for(;;){for(var Z;oe!==i||u!==0&&oe.nodeType!==3||(v=g+u),oe!==h||l!==0&&oe.nodeType!==3||(E=g+l),oe.nodeType===3&&(g+=oe.nodeValue.length),(Z=oe.firstChild)!==null;)Y=oe,oe=Z;for(;;){if(oe===r)break t;if(Y===i&&++G===u&&(v=g),Y===h&&++te===l&&(E=g),(Z=oe.nextSibling)!==null)break;oe=Y,Y=oe.parentNode}oe=Z}i=v===-1||E===-1?null:{start:v,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for(Qu={focusedElem:r,selectionRange:i},rc=!1,Ut=s;Ut!==null;)if(s=Ut,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Ut=r;else for(;Ut!==null;){switch(s=Ut,h=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&h!==null){r=void 0,i=s,u=h.memoizedProps,h=h.memoizedState,l=i.stateNode;try{var Me=na(i.type,u,i.elementType===i.type);r=l.getSnapshotBeforeUpdate(Me,h),l.__reactInternalSnapshotBeforeUpdate=r}catch(Te){ct(i,i.return,Te)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,i=r.nodeType,i===9)Ku(r);else if(i===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ku(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(o(163))}if(r=s.sibling,r!==null){r.return=s.return,Ut=r;break}Ut=s.return}}function Ip(r,s,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:ms(r,i),l&4&&io(5,i);break;case 1:if(ms(r,i),l&4)if(r=i.stateNode,s===null)try{r.componentDidMount()}catch(g){ct(i,i.return,g)}else{var u=na(i.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(u,s,r.__reactInternalSnapshotBeforeUpdate)}catch(g){ct(i,i.return,g)}}l&64&&Ap(i),l&512&&oo(i,i.return);break;case 3:if(ms(r,i),l&64&&(r=i.updateQueue,r!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{mf(r,s)}catch(g){ct(i,i.return,g)}}break;case 27:s===null&&l&4&&Ep(i);case 26:case 5:ms(r,i),s===null&&l&4&&Rp(i),l&512&&oo(i,i.return);break;case 12:ms(r,i);break;case 13:ms(r,i),l&4&&Dp(r,i),l&64&&(r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(i=Mb.bind(null,i),Xb(r,i))));break;case 22:if(l=i.memoizedState!==null||Un,!l){s=s!==null&&s.memoizedState!==null||wt,u=Un;var h=wt;Un=l,(wt=s)&&!h?fs(r,i,(i.subtreeFlags&8772)!==0):ms(r,i),Un=u,wt=h}break;case 30:break;default:ms(r,i)}}function Mp(r){var s=r.alternate;s!==null&&(r.alternate=null,Mp(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ai(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var mt=null,sr=!1;function In(r,s,i){for(i=i.child;i!==null;)_p(r,s,i),i=i.sibling}function _p(r,s,i){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Jn,i)}catch{}switch(i.tag){case 26:wt||Zr(i,s),In(r,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:wt||Zr(i,s);var l=mt,u=sr;bs(i.type)&&(mt=i.stateNode,sr=!1),In(r,s,i),go(i.stateNode),mt=l,sr=u;break;case 5:wt||Zr(i,s);case 6:if(l=mt,u=sr,mt=null,In(r,s,i),mt=l,sr=u,mt!==null)if(sr)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(i.stateNode)}catch(h){ct(i,s,h)}else try{mt.removeChild(i.stateNode)}catch(h){ct(i,s,h)}break;case 18:mt!==null&&(sr?(r=mt,Nx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.stateNode),ko(r)):Nx(mt,i.stateNode));break;case 4:l=mt,u=sr,mt=i.stateNode.containerInfo,sr=!0,In(r,s,i),mt=l,sr=u;break;case 0:case 11:case 14:case 15:wt||hs(2,i,s),wt||hs(4,i,s),In(r,s,i);break;case 1:wt||(Zr(i,s),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Cp(i,s,l)),In(r,s,i);break;case 21:In(r,s,i);break;case 22:wt=(l=wt)||i.memoizedState!==null,In(r,s,i),wt=l;break;default:In(r,s,i)}}function Dp(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ko(r)}catch(i){ct(s,s.return,i)}}function kb(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Up),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Up),s;default:throw Error(o(435,r.tag))}}function ju(r,s){var i=kb(r);s.forEach(function(l){var u=_b.bind(null,r,l);i.has(l)||(i.add(l),l.then(u,u))})}function fr(r,s){var i=s.deletions;if(i!==null)for(var l=0;l<i.length;l++){var u=i[l],h=r,g=s,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(bs(v.type)){mt=v.stateNode,sr=!1;break e}break;case 5:mt=v.stateNode,sr=!1;break e;case 3:case 4:mt=v.stateNode.containerInfo,sr=!0;break e}v=v.return}if(mt===null)throw Error(o(160));_p(h,g,u),mt=null,sr=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Op(s,r),s=s.sibling}var $r=null;function Op(r,s){var i=r.alternate,l=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:fr(s,r),pr(r),l&4&&(hs(3,r,r.return),io(3,r),hs(5,r,r.return));break;case 1:fr(s,r),pr(r),l&512&&(wt||i===null||Zr(i,i.return)),l&64&&Un&&(r=r.updateQueue,r!==null&&(l=r.callbacks,l!==null&&(i=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var u=$r;if(fr(s,r),pr(r),l&512&&(wt||i===null||Zr(i,i.return)),l&4){var h=i!==null?i.memoizedState:null;if(l=r.memoizedState,i===null)if(l===null)if(r.stateNode===null){e:{l=r.type,i=r.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":h=u.getElementsByTagName("title")[0],(!h||h[zs]||h[Tt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(l),u.head.insertBefore(h,u.querySelector("head > title"))),Pt(h,l,i),h[Tt]=r,jt(h),l=h;break e;case"link":var g=Ex("link","href",u).get(l+(i.href||""));if(g){for(var v=0;v<g.length;v++)if(h=g[v],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){g.splice(v,1);break t}}h=u.createElement(l),Pt(h,l,i),u.head.appendChild(h);break;case"meta":if(g=Ex("meta","content",u).get(l+(i.content||""))){for(v=0;v<g.length;v++)if(h=g[v],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){g.splice(v,1);break t}}h=u.createElement(l),Pt(h,l,i),u.head.appendChild(h);break;default:throw Error(o(468,l))}h[Tt]=r,jt(h),l=h}r.stateNode=l}else Ux(u,r.type,r.stateNode);else r.stateNode=Tx(u,l,r.memoizedProps);else h!==l?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,l===null?Ux(u,r.type,r.stateNode):Tx(u,l,r.memoizedProps)):l===null&&r.stateNode!==null&&yu(r,r.memoizedProps,i.memoizedProps)}break;case 27:fr(s,r),pr(r),l&512&&(wt||i===null||Zr(i,i.return)),i!==null&&l&4&&yu(r,r.memoizedProps,i.memoizedProps);break;case 5:if(fr(s,r),pr(r),l&512&&(wt||i===null||Zr(i,i.return)),r.flags&32){u=r.stateNode;try{lt(u,"")}catch(Z){ct(r,r.return,Z)}}l&4&&r.stateNode!=null&&(u=r.memoizedProps,yu(r,u,i!==null?i.memoizedProps:u)),l&1024&&(Nu=!0);break;case 6:if(fr(s,r),pr(r),l&4){if(r.stateNode===null)throw Error(o(162));l=r.memoizedProps,i=r.stateNode;try{i.nodeValue=l}catch(Z){ct(r,r.return,Z)}}break;case 3:if(Wl=null,u=$r,$r=Xl(s.containerInfo),fr(s,r),$r=u,pr(r),l&4&&i!==null&&i.memoizedState.isDehydrated)try{ko(s.containerInfo)}catch(Z){ct(r,r.return,Z)}Nu&&(Nu=!1,Pp(r));break;case 4:l=$r,$r=Xl(r.stateNode.containerInfo),fr(s,r),pr(r),$r=l;break;case 12:fr(s,r),pr(r);break;case 13:fr(s,r),pr(r),r.child.flags&8192&&r.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Tu=Qt()),l&4&&(l=r.updateQueue,l!==null&&(r.updateQueue=null,ju(r,l)));break;case 22:u=r.memoizedState!==null;var E=i!==null&&i.memoizedState!==null,G=Un,te=wt;if(Un=G||u,wt=te||E,fr(s,r),wt=te,Un=G,pr(r),l&8192)e:for(s=r.stateNode,s._visibility=u?s._visibility&-2:s._visibility|1,u&&(i===null||E||Un||wt||sa(r)),i=null,s=r;;){if(s.tag===5||s.tag===26){if(i===null){E=i=s;try{if(h=E.stateNode,u)g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=E.stateNode;var oe=E.memoizedProps.style,Y=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;v.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Z){ct(E,E.return,Z)}}}else if(s.tag===6){if(i===null){E=s;try{E.stateNode.nodeValue=u?"":E.memoizedProps}catch(Z){ct(E,E.return,Z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=r.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,ju(r,i))));break;case 19:fr(s,r),pr(r),l&4&&(l=r.updateQueue,l!==null&&(r.updateQueue=null,ju(r,l)));break;case 30:break;case 21:break;default:fr(s,r),pr(r)}}function pr(r){var s=r.flags;if(s&2){try{for(var i,l=r.return;l!==null;){if(Tp(l)){i=l;break}l=l.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var u=i.stateNode,h=bu(r);Ll(r,h,u);break;case 5:var g=i.stateNode;i.flags&32&&(lt(g,""),i.flags&=-33);var v=bu(r);Ll(r,v,g);break;case 3:case 4:var E=i.stateNode.containerInfo,G=bu(r);wu(r,G,E);break;default:throw Error(o(161))}}catch(te){ct(r,r.return,te)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Pp(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Pp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ms(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ip(r,s.alternate,s),s=s.sibling}function sa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:hs(4,s,s.return),sa(s);break;case 1:Zr(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&Cp(s,s.return,i),sa(s);break;case 27:go(s.stateNode);case 26:case 5:Zr(s,s.return),sa(s);break;case 22:s.memoizedState===null&&sa(s);break;case 30:sa(s);break;default:sa(s)}r=r.sibling}}function fs(r,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,u=r,h=s,g=h.flags;switch(h.tag){case 0:case 11:case 15:fs(u,h,i),io(4,h);break;case 1:if(fs(u,h,i),l=h,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(G){ct(l,l.return,G)}if(l=h,u=l.updateQueue,u!==null){var v=l.stateNode;try{var E=u.shared.hiddenCallbacks;if(E!==null)for(u.shared.hiddenCallbacks=null,u=0;u<E.length;u++)hf(E[u],v)}catch(G){ct(l,l.return,G)}}i&&g&64&&Ap(h),oo(h,h.return);break;case 27:Ep(h);case 26:case 5:fs(u,h,i),i&&l===null&&g&4&&Rp(h),oo(h,h.return);break;case 12:fs(u,h,i);break;case 13:fs(u,h,i),i&&g&4&&Dp(u,h);break;case 22:h.memoizedState===null&&fs(u,h,i),oo(h,h.return);break;case 30:break;default:fs(u,h,i)}s=s.sibling}}function Su(r,s){var i=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(r!=null&&r.refCount++,i!=null&&Gi(i))}function ku(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Gi(r))}function Wr(r,s,i,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Lp(r,s,i,l),s=s.sibling}function Lp(r,s,i,l){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Wr(r,s,i,l),u&2048&&io(9,s);break;case 1:Wr(r,s,i,l);break;case 3:Wr(r,s,i,l),u&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Gi(r)));break;case 12:if(u&2048){Wr(r,s,i,l),r=s.stateNode;try{var h=s.memoizedProps,g=h.id,v=h.onPostCommit;typeof v=="function"&&v(g,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(E){ct(s,s.return,E)}}else Wr(r,s,i,l);break;case 13:Wr(r,s,i,l);break;case 23:break;case 22:h=s.stateNode,g=s.alternate,s.memoizedState!==null?h._visibility&2?Wr(r,s,i,l):lo(r,s):h._visibility&2?Wr(r,s,i,l):(h._visibility|=2,Fa(r,s,i,l,(s.subtreeFlags&10256)!==0)),u&2048&&Su(g,s);break;case 24:Wr(r,s,i,l),u&2048&&ku(s.alternate,s);break;default:Wr(r,s,i,l)}}function Fa(r,s,i,l,u){for(u=u&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var h=r,g=s,v=i,E=l,G=g.flags;switch(g.tag){case 0:case 11:case 15:Fa(h,g,v,E,u),io(8,g);break;case 23:break;case 22:var te=g.stateNode;g.memoizedState!==null?te._visibility&2?Fa(h,g,v,E,u):lo(h,g):(te._visibility|=2,Fa(h,g,v,E,u)),u&&G&2048&&Su(g.alternate,g);break;case 24:Fa(h,g,v,E,u),u&&G&2048&&ku(g.alternate,g);break;default:Fa(h,g,v,E,u)}s=s.sibling}}function lo(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=r,l=s,u=l.flags;switch(l.tag){case 22:lo(i,l),u&2048&&Su(l.alternate,l);break;case 24:lo(i,l),u&2048&&ku(l.alternate,l);break;default:lo(i,l)}s=s.sibling}}var co=8192;function $a(r){if(r.subtreeFlags&co)for(r=r.child;r!==null;)Bp(r),r=r.sibling}function Bp(r){switch(r.tag){case 26:$a(r),r.flags&co&&r.memoizedState!==null&&dw($r,r.memoizedState,r.memoizedProps);break;case 5:$a(r);break;case 3:case 4:var s=$r;$r=Xl(r.stateNode.containerInfo),$a(r),$r=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=co,co=16777216,$a(r),co=s):$a(r));break;default:$a(r)}}function zp(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function uo(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var l=s[i];Ut=l,Hp(l,r)}zp(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qp(r),r=r.sibling}function qp(r){switch(r.tag){case 0:case 11:case 15:uo(r),r.flags&2048&&hs(9,r,r.return);break;case 3:uo(r);break;case 12:uo(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Bl(r)):uo(r);break;default:uo(r)}}function Bl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var l=s[i];Ut=l,Hp(l,r)}zp(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:hs(8,s,s.return),Bl(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Bl(s));break;default:Bl(s)}r=r.sibling}}function Hp(r,s){for(;Ut!==null;){var i=Ut;switch(i.tag){case 0:case 11:case 15:hs(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Gi(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Ut=l;else e:for(i=r;Ut!==null;){l=Ut;var u=l.sibling,h=l.return;if(Mp(l),l===i){Ut=null;break e}if(u!==null){u.return=h,Ut=u;break e}Ut=h}}}var Ab={getCacheForType:function(r){var s=Ft(Ct),i=s.data.get(r);return i===void 0&&(i=r(),s.data.set(r,i)),i}},Cb=typeof WeakMap=="function"?WeakMap:Map,We=0,dt=null,Ve=null,Qe=0,et=0,xr=null,ps=!1,Va=!1,Au=!1,Mn=0,yt=0,xs=0,aa=0,Cu=0,Ar=0,Ga=0,ho=null,ar=null,Ru=!1,Tu=0,zl=1/0,ql=null,gs=null,Ot=0,vs=null,Qa=null,Ja=0,Eu=0,Uu=null,Fp=null,mo=0,Iu=null;function gr(){if((We&2)!==0&&Qe!==0)return Qe&-Qe;if(D.T!==null){var r=Da;return r!==0?r:Bu()}return Zo()}function $p(){Ar===0&&(Ar=(Qe&536870912)===0||Xe?Jo():536870912);var r=kr.current;return r!==null&&(r.flags|=32),Ar}function vr(r,s,i){(r===dt&&(et===2||et===9)||r.cancelPendingCommit!==null)&&(Ya(r,0),ys(r,Qe,Ar,!1)),Bs(r,i),((We&2)===0||r!==dt)&&(r===dt&&((We&2)===0&&(aa|=i),yt===4&&ys(r,Qe,Ar,!1)),en(r))}function Vp(r,s,i){if((We&6)!==0)throw Error(o(327));var l=!i&&(s&124)===0&&(s&r.expiredLanes)===0||vn(r,s),u=l?Eb(r,s):Du(r,s,!0),h=l;do{if(u===0){Va&&!l&&ys(r,s,0,!1);break}else{if(i=r.current.alternate,h&&!Rb(i)){u=Du(r,s,!1),h=!1;continue}if(u===2){if(h=s,r.errorRecoveryDisabledLanes&h)var g=0;else g=r.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){s=g;e:{var v=r;u=ho;var E=v.current.memoizedState.isDehydrated;if(E&&(Ya(v,g).flags|=256),g=Du(v,g,!1),g!==2){if(Au&&!E){v.errorRecoveryDisabledLanes|=h,aa|=h,u=4;break e}h=ar,ar=u,h!==null&&(ar===null?ar=h:ar.push.apply(ar,h))}u=g}if(h=!1,u!==2)continue}}if(u===1){Ya(r,0),ys(r,s,0,!0);break}e:{switch(l=r,h=u,h){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:ys(l,s,Ar,!ps);break e;case 2:ar=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(u=Tu+300-Qt(),10<u)){if(ys(l,s,Ar,!ps),ja(l,0,!0)!==0)break e;l.timeoutHandle=bx(Gp.bind(null,l,i,ar,ql,Ru,s,Ar,aa,Ga,ps,h,2,-0,0),u);break e}Gp(l,i,ar,ql,Ru,s,Ar,aa,Ga,ps,h,0,-0,0)}}break}while(!0);en(r)}function Gp(r,s,i,l,u,h,g,v,E,G,te,oe,Y,Z){if(r.timeoutHandle=-1,oe=s.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(bo={stylesheets:null,count:0,unsuspend:cw},Bp(s),oe=uw(),oe!==null)){r.cancelPendingCommit=oe(Wp.bind(null,r,s,h,i,l,u,g,v,E,te,1,Y,Z)),ys(r,h,g,!G);return}Wp(r,s,h,i,l,u,g,v,E)}function Rb(r){for(var s=r;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var u=i[l],h=u.getSnapshot;u=u.value;try{if(!hr(h(),u))return!1}catch{return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ys(r,s,i,l){s&=~Cu,s&=~aa,r.suspendedLanes|=s,r.pingedLanes&=~s,l&&(r.warmLanes|=s),l=r.expirationTimes;for(var u=s;0<u;){var h=31-qt(u),g=1<<h;l[h]=-1,u&=~g}i!==0&&Ko(r,i,s)}function Hl(){return(We&6)===0?(fo(0),!1):!0}function Mu(){if(Ve!==null){if(et===0)var r=Ve.return;else r=Ve,kn=Ws=null,Kd(r),qa=null,no=0,r=Ve;for(;r!==null;)kp(r.alternate,r),r=r.return;Ve=null}}function Ya(r,s){var i=r.timeoutHandle;i!==-1&&(r.timeoutHandle=-1,Gb(i)),i=r.cancelPendingCommit,i!==null&&(r.cancelPendingCommit=null,i()),Mu(),dt=r,Ve=i=Nn(r.current,null),Qe=s,et=0,xr=null,ps=!1,Va=vn(r,s),Au=!1,Ga=Ar=Cu=aa=xs=yt=0,ar=ho=null,Ru=!1,(s&8)!==0&&(s|=s&32);var l=r.entangledLanes;if(l!==0)for(r=r.entanglements,l&=s;0<l;){var u=31-qt(l),h=1<<u;s|=r[u],l&=~h}return Mn=s,dl(),i}function Qp(r,s){qe=null,D.H=Tl,s===Ji||s===yl?(s=df(),et=3):s===of?(s=df(),et=4):et=s===up?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xr=s,Ve===null&&(yt=1,_l(r,wr(s,r.current)))}function Jp(){var r=D.H;return D.H=Tl,r===null?Tl:r}function Yp(){var r=D.A;return D.A=Ab,r}function _u(){yt=4,ps||(Qe&4194048)!==Qe&&kr.current!==null||(Va=!0),(xs&134217727)===0&&(aa&134217727)===0||dt===null||ys(dt,Qe,Ar,!1)}function Du(r,s,i){var l=We;We|=2;var u=Jp(),h=Yp();(dt!==r||Qe!==s)&&(ql=null,Ya(r,s)),s=!1;var g=yt;e:do try{if(et!==0&&Ve!==null){var v=Ve,E=xr;switch(et){case 8:Mu(),g=6;break e;case 3:case 2:case 9:case 6:kr.current===null&&(s=!0);var G=et;if(et=0,xr=null,Ka(r,v,E,G),i&&Va){g=0;break e}break;default:G=et,et=0,xr=null,Ka(r,v,E,G)}}Tb(),g=yt;break}catch(te){Qp(r,te)}while(!0);return s&&r.shellSuspendCounter++,kn=Ws=null,We=l,D.H=u,D.A=h,Ve===null&&(dt=null,Qe=0,dl()),g}function Tb(){for(;Ve!==null;)Kp(Ve)}function Eb(r,s){var i=We;We|=2;var l=Jp(),u=Yp();dt!==r||Qe!==s?(ql=null,zl=Qt()+500,Ya(r,s)):Va=vn(r,s);e:do try{if(et!==0&&Ve!==null){s=Ve;var h=xr;t:switch(et){case 1:et=0,xr=null,Ka(r,s,h,1);break;case 2:case 9:if(lf(h)){et=0,xr=null,Xp(s);break}s=function(){et!==2&&et!==9||dt!==r||(et=7),en(r)},h.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:lf(h)?(et=0,xr=null,Xp(s)):(et=0,xr=null,Ka(r,s,h,7));break;case 5:var g=null;switch(Ve.tag){case 26:g=Ve.memoizedState;case 5:case 27:var v=Ve;if(!g||Ix(g)){et=0,xr=null;var E=v.sibling;if(E!==null)Ve=E;else{var G=v.return;G!==null?(Ve=G,Fl(G)):Ve=null}break t}}et=0,xr=null,Ka(r,s,h,5);break;case 6:et=0,xr=null,Ka(r,s,h,6);break;case 8:Mu(),yt=6;break e;default:throw Error(o(462))}}Ub();break}catch(te){Qp(r,te)}while(!0);return kn=Ws=null,D.H=l,D.A=u,We=i,Ve!==null?0:(dt=null,Qe=0,dl(),yt)}function Ub(){for(;Ve!==null&&!Wt();)Kp(Ve)}function Kp(r){var s=jp(r.alternate,r,Mn);r.memoizedProps=r.pendingProps,s===null?Fl(r):Ve=s}function Xp(r){var s=r,i=s.alternate;switch(s.tag){case 15:case 0:s=gp(i,s,s.pendingProps,s.type,void 0,Qe);break;case 11:s=gp(i,s,s.pendingProps,s.type.render,s.ref,Qe);break;case 5:Kd(s);default:kp(i,s),s=Ve=Xm(s,Mn),s=jp(i,s,Mn)}r.memoizedProps=r.pendingProps,s===null?Fl(r):Ve=s}function Ka(r,s,i,l){kn=Ws=null,Kd(s),qa=null,no=0;var u=s.return;try{if(bb(r,u,s,i,Qe)){yt=1,_l(r,wr(i,r.current)),Ve=null;return}}catch(h){if(u!==null)throw Ve=u,h;yt=1,_l(r,wr(i,r.current)),Ve=null;return}s.flags&32768?(Xe||l===1?r=!0:Va||(Qe&536870912)!==0?r=!1:(ps=r=!0,(l===2||l===9||l===3||l===6)&&(l=kr.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zp(s,r)):Fl(s)}function Fl(r){var s=r;do{if((s.flags&32768)!==0){Zp(s,ps);return}r=s.return;var i=Nb(s.alternate,s,Mn);if(i!==null){Ve=i;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=r}while(s!==null);yt===0&&(yt=5)}function Zp(r,s){do{var i=jb(r.alternate,r);if(i!==null){i.flags&=32767,Ve=i;return}if(i=r.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=i}while(r!==null);yt=6,Ve=null}function Wp(r,s,i,l,u,h,g,v,E){r.cancelPendingCommit=null;do $l();while(Ot!==0);if((We&6)!==0)throw Error(o(327));if(s!==null){if(s===r.current)throw Error(o(177));if(h=s.lanes|s.childLanes,h|=kd,Yo(r,i,h,g,v,E),r===dt&&(Ve=dt=null,Qe=0),Qa=s,vs=r,Ja=i,Eu=h,Uu=u,Fp=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Db(ot,function(){return sx(),null})):(r.callbackNode=null,r.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=D.T,D.T=null,u=K.p,K.p=2,g=We,We|=4;try{Sb(r,s,i)}finally{We=g,K.p=u,D.T=l}}Ot=1,ex(),tx(),rx()}}function ex(){if(Ot===1){Ot=0;var r=vs,s=Qa,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=D.T,D.T=null;var l=K.p;K.p=2;var u=We;We|=4;try{Op(s,r);var h=Qu,g=qm(r.containerInfo),v=h.focusedElem,E=h.selectionRange;if(g!==v&&v&&v.ownerDocument&&zm(v.ownerDocument.documentElement,v)){if(E!==null&&bd(v)){var G=E.start,te=E.end;if(te===void 0&&(te=G),"selectionStart"in v)v.selectionStart=G,v.selectionEnd=Math.min(te,v.value.length);else{var oe=v.ownerDocument||document,Y=oe&&oe.defaultView||window;if(Y.getSelection){var Z=Y.getSelection(),Me=v.textContent.length,Te=Math.min(E.start,Me),st=E.end===void 0?Te:Math.min(E.end,Me);!Z.extend&&Te>st&&(g=st,st=Te,Te=g);var H=Bm(v,Te),O=Bm(v,st);if(H&&O&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==O.node||Z.focusOffset!==O.offset)){var V=oe.createRange();V.setStart(H.node,H.offset),Z.removeAllRanges(),Te>st?(Z.addRange(V),Z.extend(O.node,O.offset)):(V.setEnd(O.node,O.offset),Z.addRange(V))}}}}for(oe=[],Z=v;Z=Z.parentNode;)Z.nodeType===1&&oe.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<oe.length;v++){var ae=oe[v];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}rc=!!Gu,Qu=Gu=null}finally{We=u,K.p=l,D.T=i}}r.current=s,Ot=2}}function tx(){if(Ot===2){Ot=0;var r=vs,s=Qa,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=D.T,D.T=null;var l=K.p;K.p=2;var u=We;We|=4;try{Ip(r,s.alternate,s)}finally{We=u,K.p=l,D.T=i}}Ot=3}}function rx(){if(Ot===4||Ot===3){Ot=0,Ni();var r=vs,s=Qa,i=Ja,l=Fp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ot=5:(Ot=0,Qa=vs=null,nx(r,r.pendingLanes));var u=r.pendingLanes;if(u===0&&(gs=null),ki(i),s=s.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Jn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=D.T,u=K.p,K.p=2,D.T=null;try{for(var h=r.onRecoverableError,g=0;g<l.length;g++){var v=l[g];h(v.value,{componentStack:v.stack})}}finally{D.T=s,K.p=u}}(Ja&3)!==0&&$l(),en(r),u=r.pendingLanes,(i&4194090)!==0&&(u&42)!==0?r===Iu?mo++:(mo=0,Iu=r):mo=0,fo(0)}}function nx(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Gi(s)))}function $l(r){return ex(),tx(),rx(),sx()}function sx(){if(Ot!==5)return!1;var r=vs,s=Eu;Eu=0;var i=ki(Ja),l=D.T,u=K.p;try{K.p=32>i?32:i,D.T=null,i=Uu,Uu=null;var h=vs,g=Ja;if(Ot=0,Qa=vs=null,Ja=0,(We&6)!==0)throw Error(o(331));var v=We;if(We|=4,qp(h.current),Lp(h,h.current,g,i),We=v,fo(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Jn,h)}catch{}return!0}finally{K.p=u,D.T=l,nx(r,s)}}function ax(r,s,i){s=wr(i,s),s=du(r.stateNode,s,2),r=ls(r,s,2),r!==null&&(Bs(r,2),en(r))}function ct(r,s,i){if(r.tag===3)ax(r,r,i);else for(;s!==null;){if(s.tag===3){ax(s,r,i);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gs===null||!gs.has(l))){r=wr(i,r),i=cp(2),l=ls(s,i,2),l!==null&&(dp(i,l,s,r),Bs(l,2),en(l));break}}s=s.return}}function Ou(r,s,i){var l=r.pingCache;if(l===null){l=r.pingCache=new Cb;var u=new Set;l.set(s,u)}else u=l.get(s),u===void 0&&(u=new Set,l.set(s,u));u.has(i)||(Au=!0,u.add(i),r=Ib.bind(null,r,s,i),s.then(r,r))}function Ib(r,s,i){var l=r.pingCache;l!==null&&l.delete(s),r.pingedLanes|=r.suspendedLanes&i,r.warmLanes&=~i,dt===r&&(Qe&i)===i&&(yt===4||yt===3&&(Qe&62914560)===Qe&&300>Qt()-Tu?(We&2)===0&&Ya(r,0):Cu|=i,Ga===Qe&&(Ga=0)),en(r)}function ix(r,s){s===0&&(s=qr()),r=Ua(r,s),r!==null&&(Bs(r,s),en(r))}function Mb(r){var s=r.memoizedState,i=0;s!==null&&(i=s.retryLane),ix(r,i)}function _b(r,s){var i=0;switch(r.tag){case 13:var l=r.stateNode,u=r.memoizedState;u!==null&&(i=u.retryLane);break;case 19:l=r.stateNode;break;case 22:l=r.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(s),ix(r,i)}function Db(r,s){return pn(r,s)}var Vl=null,Xa=null,Pu=!1,Gl=!1,Lu=!1,ia=0;function en(r){r!==Xa&&r.next===null&&(Xa===null?Vl=Xa=r:Xa=Xa.next=r),Gl=!0,Pu||(Pu=!0,Pb())}function fo(r,s){if(!Lu&&Gl){Lu=!0;do for(var i=!1,l=Vl;l!==null;){if(r!==0){var u=l.pendingLanes;if(u===0)var h=0;else{var g=l.suspendedLanes,v=l.pingedLanes;h=(1<<31-qt(42|r)+1)-1,h&=u&~(g&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,dx(l,h))}else h=Qe,h=ja(l,l===dt?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||vn(l,h)||(i=!0,dx(l,h));l=l.next}while(i);Lu=!1}}function Ob(){ox()}function ox(){Gl=Pu=!1;var r=0;ia!==0&&(Vb()&&(r=ia),ia=0);for(var s=Qt(),i=null,l=Vl;l!==null;){var u=l.next,h=lx(l,s);h===0?(l.next=null,i===null?Vl=u:i.next=u,u===null&&(Xa=i)):(i=l,(r!==0||(h&3)!==0)&&(Gl=!0)),l=u}fo(r)}function lx(r,s){for(var i=r.suspendedLanes,l=r.pingedLanes,u=r.expirationTimes,h=r.pendingLanes&-62914561;0<h;){var g=31-qt(h),v=1<<g,E=u[g];E===-1?((v&i)===0||(v&l)!==0)&&(u[g]=Qo(v,s)):E<=s&&(r.expiredLanes|=v),h&=~v}if(s=dt,i=Qe,i=ja(r,r===s?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),l=r.callbackNode,i===0||r===s&&(et===2||et===9)||r.cancelPendingCommit!==null)return l!==null&&l!==null&&Ps(l),r.callbackNode=null,r.callbackPriority=0;if((i&3)===0||vn(r,i)){if(s=i&-i,s===r.callbackPriority)return s;switch(l!==null&&Ps(l),ki(i)){case 2:case 8:i=$e;break;case 32:i=ot;break;case 268435456:i=Br;break;default:i=ot}return l=cx.bind(null,r),i=pn(i,l),r.callbackPriority=s,r.callbackNode=i,s}return l!==null&&l!==null&&Ps(l),r.callbackPriority=2,r.callbackNode=null,2}function cx(r,s){if(Ot!==0&&Ot!==5)return r.callbackNode=null,r.callbackPriority=0,null;var i=r.callbackNode;if($l()&&r.callbackNode!==i)return null;var l=Qe;return l=ja(r,r===dt?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),l===0?null:(Vp(r,l,s),lx(r,Qt()),r.callbackNode!=null&&r.callbackNode===i?cx.bind(null,r):null)}function dx(r,s){if($l())return null;Vp(r,s,!0)}function Pb(){Qb(function(){(We&6)!==0?pn(Qn,Ob):ox()})}function Bu(){return ia===0&&(ia=Jo()),ia}function ux(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ei(""+r)}function hx(r,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,r.id&&i.setAttribute("form",r.id),s.parentNode.insertBefore(i,s),r=new FormData(r),i.parentNode.removeChild(i),r}function Lb(r,s,i,l,u){if(s==="submit"&&i&&i.stateNode===u){var h=ux((u[Ht]||null).action),g=l.submitter;g&&(s=(s=g[Ht]||null)?ux(s.formAction):g.getAttribute("formAction"),s!==null&&(h=s,g=null));var v=new ol("action","action",null,l,u);r.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ia!==0){var E=g?hx(u,g):new FormData(u);au(i,{pending:!0,data:E,method:u.method,action:h},null,E)}}else typeof h=="function"&&(v.preventDefault(),E=g?hx(u,g):new FormData(u),au(i,{pending:!0,data:E,method:u.method,action:h},h,E))},currentTarget:u}]})}}for(var zu=0;zu<Sd.length;zu++){var qu=Sd[zu],Bb=qu.toLowerCase(),zb=qu[0].toUpperCase()+qu.slice(1);Fr(Bb,"on"+zb)}Fr($m,"onAnimationEnd"),Fr(Vm,"onAnimationIteration"),Fr(Gm,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(nb,"onTransitionRun"),Fr(sb,"onTransitionStart"),Fr(ab,"onTransitionCancel"),Fr(Qm,"onTransitionEnd"),es("onMouseEnter",["mouseout","mouseover"]),es("onMouseLeave",["mouseout","mouseover"]),es("onPointerEnter",["pointerout","pointerover"]),es("onPointerLeave",["pointerout","pointerover"]),yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(po));function mx(r,s){s=(s&4)!==0;for(var i=0;i<r.length;i++){var l=r[i],u=l.event;l=l.listeners;e:{var h=void 0;if(s)for(var g=l.length-1;0<=g;g--){var v=l[g],E=v.instance,G=v.currentTarget;if(v=v.listener,E!==h&&u.isPropagationStopped())break e;h=v,u.currentTarget=G;try{h(u)}catch(te){Ml(te)}u.currentTarget=null,h=E}else for(g=0;g<l.length;g++){if(v=l[g],E=v.instance,G=v.currentTarget,v=v.listener,E!==h&&u.isPropagationStopped())break e;h=v,u.currentTarget=G;try{h(u)}catch(te){Ml(te)}u.currentTarget=null,h=E}}}}function Ge(r,s){var i=s[Sa];i===void 0&&(i=s[Sa]=new Set);var l=r+"__bubble";i.has(l)||(fx(s,r,2,!1),i.add(l))}function Hu(r,s,i){var l=0;s&&(l|=4),fx(i,r,l,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Fu(r){if(!r[Ql]){r[Ql]=!0,el.forEach(function(i){i!=="selectionchange"&&(qb.has(i)||Hu(i,!1,r),Hu(i,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,Hu("selectionchange",!1,s))}}function fx(r,s,i,l){switch(Lx(s)){case 2:var u=fw;break;case 8:u=pw;break;default:u=nh}i=u.bind(null,s,i,r),u=void 0,!ud||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(u=!0),l?u!==void 0?r.addEventListener(s,i,{capture:!0,passive:u}):r.addEventListener(s,i,!0):u!==void 0?r.addEventListener(s,i,{passive:u}):r.addEventListener(s,i,!1)}function $u(r,s,i,l,u){var h=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var v=l.stateNode.containerInfo;if(v===u)break;if(g===4)for(g=l.return;g!==null;){var E=g.tag;if((E===3||E===4)&&g.stateNode.containerInfo===u)return;g=g.return}for(;v!==null;){if(g=Xn(v),g===null)return;if(E=g.tag,E===5||E===6||E===26||E===27){l=h=g;continue e}v=v.parentNode}}l=l.return}bm(function(){var G=h,te=Ii(i),oe=[];e:{var Y=Jm.get(r);if(Y!==void 0){var Z=ol,Me=r;switch(r){case"keypress":if(al(i)===0)break e;case"keydown":case"keyup":Z=Dy;break;case"focusin":Me="focus",Z=pd;break;case"focusout":Me="blur",Z=pd;break;case"beforeblur":case"afterblur":Z=pd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Ly;break;case $m:case Vm:case Gm:Z=Ay;break;case Qm:Z=zy;break;case"scroll":case"scrollend":Z=wy;break;case"wheel":Z=Hy;break;case"copy":case"cut":case"paste":Z=Ry;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=km;break;case"toggle":case"beforetoggle":Z=$y}var Te=(s&4)!==0,st=!Te&&(r==="scroll"||r==="scrollend"),H=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var O=G,V;O!==null;){var ae=O;if(V=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||V===null||H===null||(ae=Mi(O,H),ae!=null&&Te.push(xo(O,ae,V))),st)break;O=O.return}0<Te.length&&(Y=new Z(Y,Me,null,i,te),oe.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",Y&&i!==Ui&&(Me=i.relatedTarget||i.fromElement)&&(Xn(Me)||Me[Kn]))break e;if((Z||Y)&&(Y=te.window===te?te:(Y=te.ownerDocument)?Y.defaultView||Y.parentWindow:window,Z?(Me=i.relatedTarget||i.toElement,Z=G,Me=Me?Xn(Me):null,Me!==null&&(st=d(Me),Te=Me.tag,Me!==st||Te!==5&&Te!==27&&Te!==6)&&(Me=null)):(Z=null,Me=G),Z!==Me)){if(Te=jm,ae="onMouseLeave",H="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(Te=km,ae="onPointerLeave",H="onPointerEnter",O="pointer"),st=Z==null?Y:qs(Z),V=Me==null?Y:qs(Me),Y=new Te(ae,O+"leave",Z,i,te),Y.target=st,Y.relatedTarget=V,ae=null,Xn(te)===G&&(Te=new Te(H,O+"enter",Me,i,te),Te.target=V,Te.relatedTarget=st,ae=Te),st=ae,Z&&Me)t:{for(Te=Z,H=Me,O=0,V=Te;V;V=Za(V))O++;for(V=0,ae=H;ae;ae=Za(ae))V++;for(;0<O-V;)Te=Za(Te),O--;for(;0<V-O;)H=Za(H),V--;for(;O--;){if(Te===H||H!==null&&Te===H.alternate)break t;Te=Za(Te),H=Za(H)}Te=null}else Te=null;Z!==null&&px(oe,Y,Z,Te,!1),Me!==null&&st!==null&&px(oe,st,Me,Te,!0)}}e:{if(Y=G?qs(G):window,Z=Y.nodeName&&Y.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Y.type==="file")var be=Mm;else if(Um(Y))if(_m)be=eb;else{be=Zy;var Fe=Xy}else Z=Y.nodeName,!Z||Z.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&$s(G.elementType)&&(be=Mm):be=Wy;if(be&&(be=be(r,G))){Im(oe,be,i,te);break e}Fe&&Fe(r,Y,G),r==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&ye(Y,"number",Y.value)}switch(Fe=G?qs(G):window,r){case"focusin":(Um(Fe)||Fe.contentEditable==="true")&&(Ra=Fe,wd=G,qi=null);break;case"focusout":qi=wd=Ra=null;break;case"mousedown":Nd=!0;break;case"contextmenu":case"mouseup":case"dragend":Nd=!1,Hm(oe,i,te);break;case"selectionchange":if(rb)break;case"keydown":case"keyup":Hm(oe,i,te)}var Se;if(gd)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ca?Tm(r,i)&&(Ue="onCompositionEnd"):r==="keydown"&&i.keyCode===229&&(Ue="onCompositionStart");Ue&&(Am&&i.locale!=="ko"&&(Ca||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ca&&(Se=wm()):(ss=te,hd="value"in ss?ss.value:ss.textContent,Ca=!0)),Fe=Jl(G,Ue),0<Fe.length&&(Ue=new Sm(Ue,r,null,i,te),oe.push({event:Ue,listeners:Fe}),Se?Ue.data=Se:(Se=Em(i),Se!==null&&(Ue.data=Se)))),(Se=Gy?Qy(r,i):Jy(r,i))&&(Ue=Jl(G,"onBeforeInput"),0<Ue.length&&(Fe=new Sm("onBeforeInput","beforeinput",null,i,te),oe.push({event:Fe,listeners:Ue}),Fe.data=Se)),Lb(oe,r,G,i,te)}mx(oe,s)})}function xo(r,s,i){return{instance:r,listener:s,currentTarget:i}}function Jl(r,s){for(var i=s+"Capture",l=[];r!==null;){var u=r,h=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=Mi(r,i),u!=null&&l.unshift(xo(r,u,h)),u=Mi(r,s),u!=null&&l.push(xo(r,u,h))),r.tag===3)return l;r=r.return}return[]}function Za(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function px(r,s,i,l,u){for(var h=s._reactName,g=[];i!==null&&i!==l;){var v=i,E=v.alternate,G=v.stateNode;if(v=v.tag,E!==null&&E===l)break;v!==5&&v!==26&&v!==27||G===null||(E=G,u?(G=Mi(i,h),G!=null&&g.unshift(xo(i,G,E))):u||(G=Mi(i,h),G!=null&&g.push(xo(i,G,E)))),i=i.return}g.length!==0&&r.push({event:s,listeners:g})}var Hb=/\r\n?/g,Fb=/\u0000|\uFFFD/g;function xx(r){return(typeof r=="string"?r:""+r).replace(Hb,`
`).replace(Fb,"")}function gx(r,s){return s=xx(s),xx(r)===s}function Yl(){}function nt(r,s,i,l,u,h){switch(i){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||lt(r,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&lt(r,""+l);break;case"className":ka(r,"class",l);break;case"tabIndex":ka(r,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ka(r,i,l);break;case"style":ns(r,l,h);break;case"data":if(s!=="object"){ka(r,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||i!=="href")){r.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){r.removeAttribute(i);break}l=Ei(""+l),r.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){r.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(s!=="input"&&nt(r,s,"name",u.name,u,null),nt(r,s,"formEncType",u.formEncType,u,null),nt(r,s,"formMethod",u.formMethod,u,null),nt(r,s,"formTarget",u.formTarget,u,null)):(nt(r,s,"encType",u.encType,u,null),nt(r,s,"method",u.method,u,null),nt(r,s,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){r.removeAttribute(i);break}l=Ei(""+l),r.setAttribute(i,l);break;case"onClick":l!=null&&(r.onclick=Yl);break;case"onScroll":l!=null&&Ge("scroll",r);break;case"onScrollEnd":l!=null&&Ge("scrollend",r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(o(60));r.innerHTML=i}}break;case"multiple":r.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":r.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){r.removeAttribute("xlink:href");break}i=Ei(""+l),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(i,""+l):r.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(i,""):r.removeAttribute(i);break;case"capture":case"download":l===!0?r.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?r.setAttribute(i,l):r.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?r.setAttribute(i,l):r.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?r.removeAttribute(i):r.setAttribute(i,l);break;case"popover":Ge("beforetoggle",r),Ge("toggle",r),Hr(r,"popover",l);break;case"xlinkActuate":tr(r,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":tr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":tr(r,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":tr(r,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":tr(r,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":tr(r,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":tr(r,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":tr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":tr(r,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Hr(r,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=cd.get(i)||i,Hr(r,i,l))}}function Vu(r,s,i,l,u,h){switch(i){case"style":ns(r,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(i=l.__html,i!=null){if(u.children!=null)throw Error(o(60));r.innerHTML=i}}break;case"children":typeof l=="string"?lt(r,l):(typeof l=="number"||typeof l=="bigint")&&lt(r,""+l);break;case"onScroll":l!=null&&Ge("scroll",r);break;case"onScrollEnd":l!=null&&Ge("scrollend",r);break;case"onClick":l!=null&&(r.onclick=Yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),s=i.slice(2,u?i.length-7:void 0),h=r[Ht]||null,h=h!=null?h[i]:null,typeof h=="function"&&r.removeEventListener(s,h,u),typeof l=="function")){typeof h!="function"&&h!==null&&(i in r?r[i]=null:r.hasAttribute(i)&&r.removeAttribute(i)),r.addEventListener(s,l,u);break e}i in r?r[i]=l:l===!0?r.setAttribute(i,""):Hr(r,i,l)}}}function Pt(r,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",r),Ge("load",r);var l=!1,u=!1,h;for(h in i)if(i.hasOwnProperty(h)){var g=i[h];if(g!=null)switch(h){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:nt(r,s,h,g,i,null)}}u&&nt(r,s,"srcSet",i.srcSet,i,null),l&&nt(r,s,"src",i.src,i,null);return;case"input":Ge("invalid",r);var v=h=g=u=null,E=null,G=null;for(l in i)if(i.hasOwnProperty(l)){var te=i[l];if(te!=null)switch(l){case"name":u=te;break;case"type":g=te;break;case"checked":E=te;break;case"defaultChecked":G=te;break;case"value":h=te;break;case"defaultValue":v=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(o(137,s));break;default:nt(r,s,l,te,i,null)}}fe(r,h,v,E,G,g,u,!1),F(r);return;case"select":Ge("invalid",r),l=g=h=null;for(u in i)if(i.hasOwnProperty(u)&&(v=i[u],v!=null))switch(u){case"value":h=v;break;case"defaultValue":g=v;break;case"multiple":l=v;default:nt(r,s,u,v,i,null)}s=h,i=g,r.multiple=!!l,s!=null?Oe(r,!!l,s,!1):i!=null&&Oe(r,!!l,i,!0);return;case"textarea":Ge("invalid",r),h=u=l=null;for(g in i)if(i.hasOwnProperty(g)&&(v=i[g],v!=null))switch(g){case"value":l=v;break;case"defaultValue":u=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:nt(r,s,g,v,i,null)}Ye(r,l,u,h),F(r);return;case"option":for(E in i)if(i.hasOwnProperty(E)&&(l=i[E],l!=null))switch(E){case"selected":r.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(r,s,E,l,i,null)}return;case"dialog":Ge("beforetoggle",r),Ge("toggle",r),Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":Ge("load",r);break;case"video":case"audio":for(l=0;l<po.length;l++)Ge(po[l],r);break;case"image":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"embed":case"source":case"link":Ge("error",r),Ge("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in i)if(i.hasOwnProperty(G)&&(l=i[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:nt(r,s,G,l,i,null)}return;default:if($s(s)){for(te in i)i.hasOwnProperty(te)&&(l=i[te],l!==void 0&&Vu(r,s,te,l,i,void 0));return}}for(v in i)i.hasOwnProperty(v)&&(l=i[v],l!=null&&nt(r,s,v,l,i,null))}function $b(r,s,i,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,g=null,v=null,E=null,G=null,te=null;for(Z in i){var oe=i[Z];if(i.hasOwnProperty(Z)&&oe!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":E=oe;default:l.hasOwnProperty(Z)||nt(r,s,Z,null,l,oe)}}for(var Y in l){var Z=l[Y];if(oe=i[Y],l.hasOwnProperty(Y)&&(Z!=null||oe!=null))switch(Y){case"type":h=Z;break;case"name":u=Z;break;case"checked":G=Z;break;case"defaultChecked":te=Z;break;case"value":g=Z;break;case"defaultValue":v=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(o(137,s));break;default:Z!==oe&&nt(r,s,Y,Z,l,oe)}}ue(r,g,v,E,G,te,h,u);return;case"select":Z=g=v=Y=null;for(h in i)if(E=i[h],i.hasOwnProperty(h)&&E!=null)switch(h){case"value":break;case"multiple":Z=E;default:l.hasOwnProperty(h)||nt(r,s,h,null,l,E)}for(u in l)if(h=l[u],E=i[u],l.hasOwnProperty(u)&&(h!=null||E!=null))switch(u){case"value":Y=h;break;case"defaultValue":v=h;break;case"multiple":g=h;default:h!==E&&nt(r,s,u,h,l,E)}s=v,i=g,l=Z,Y!=null?Oe(r,!!i,Y,!1):!!l!=!!i&&(s!=null?Oe(r,!!i,s,!0):Oe(r,!!i,i?[]:"",!1));return;case"textarea":Z=Y=null;for(v in i)if(u=i[v],i.hasOwnProperty(v)&&u!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:nt(r,s,v,null,l,u)}for(g in l)if(u=l[g],h=i[g],l.hasOwnProperty(g)&&(u!=null||h!=null))switch(g){case"value":Y=u;break;case"defaultValue":Z=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(o(91));break;default:u!==h&&nt(r,s,g,u,l,h)}Je(r,Y,Z);return;case"option":for(var Me in i)if(Y=i[Me],i.hasOwnProperty(Me)&&Y!=null&&!l.hasOwnProperty(Me))switch(Me){case"selected":r.selected=!1;break;default:nt(r,s,Me,null,l,Y)}for(E in l)if(Y=l[E],Z=i[E],l.hasOwnProperty(E)&&Y!==Z&&(Y!=null||Z!=null))switch(E){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:nt(r,s,E,Y,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in i)Y=i[Te],i.hasOwnProperty(Te)&&Y!=null&&!l.hasOwnProperty(Te)&&nt(r,s,Te,null,l,Y);for(G in l)if(Y=l[G],Z=i[G],l.hasOwnProperty(G)&&Y!==Z&&(Y!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:nt(r,s,G,Y,l,Z)}return;default:if($s(s)){for(var st in i)Y=i[st],i.hasOwnProperty(st)&&Y!==void 0&&!l.hasOwnProperty(st)&&Vu(r,s,st,void 0,l,Y);for(te in l)Y=l[te],Z=i[te],!l.hasOwnProperty(te)||Y===Z||Y===void 0&&Z===void 0||Vu(r,s,te,Y,l,Z);return}}for(var H in i)Y=i[H],i.hasOwnProperty(H)&&Y!=null&&!l.hasOwnProperty(H)&&nt(r,s,H,null,l,Y);for(oe in l)Y=l[oe],Z=i[oe],!l.hasOwnProperty(oe)||Y===Z||Y==null&&Z==null||nt(r,s,oe,Y,l,Z)}var Gu=null,Qu=null;function Kl(r){return r.nodeType===9?r:r.ownerDocument}function vx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yx(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Ju(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yu=null;function Vb(){var r=window.event;return r&&r.type==="popstate"?r===Yu?!1:(Yu=r,!0):(Yu=null,!1)}var bx=typeof setTimeout=="function"?setTimeout:void 0,Gb=typeof clearTimeout=="function"?clearTimeout:void 0,wx=typeof Promise=="function"?Promise:void 0,Qb=typeof queueMicrotask=="function"?queueMicrotask:typeof wx<"u"?function(r){return wx.resolve(null).then(r).catch(Jb)}:bx;function Jb(r){setTimeout(function(){throw r})}function bs(r){return r==="head"}function Nx(r,s){var i=s,l=0,u=0;do{var h=i.nextSibling;if(r.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(0<l&&8>l){i=l;var g=r.ownerDocument;if(i&1&&go(g.documentElement),i&2&&go(g.body),i&4)for(i=g.head,go(i),g=i.firstChild;g;){var v=g.nextSibling,E=g.nodeName;g[zs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=v}}if(u===0){r.removeChild(h),ko(s);return}u--}else i==="$"||i==="$?"||i==="$!"?u++:l=i.charCodeAt(0)-48;else l=0;i=h}while(i);ko(s)}function Ku(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ku(i),Ai(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}r.removeChild(i)}}function Yb(r,s,i,l){for(;r.nodeType===1;){var u=i;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(l){if(!r[zs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(h=r.getAttribute("rel"),h==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(h!==u.rel||r.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||r.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||r.getAttribute("title")!==(u.title==null?null:u.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(h=r.getAttribute("src"),(h!==(u.src==null?null:u.src)||r.getAttribute("type")!==(u.type==null?null:u.type)||r.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&r.getAttribute("name")===h)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function Kb(r,s,i){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Vr(r.nextSibling),r===null))return null;return r}function Xu(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Xb(r,s){var i=r.ownerDocument;if(r.data!=="$?"||i.readyState==="complete")s();else{var l=function(){s(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),r._reactRetry=l}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Zu=null;function jx(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var i=r.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return r;s--}else i==="/$"&&s++}r=r.previousSibling}return null}function Sx(r,s,i){switch(s=Kl(i),r){case"html":if(r=s.documentElement,!r)throw Error(o(452));return r;case"head":if(r=s.head,!r)throw Error(o(453));return r;case"body":if(r=s.body,!r)throw Error(o(454));return r;default:throw Error(o(451))}}function go(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ai(r)}var Cr=new Map,kx=new Set;function Xl(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _n=K.d;K.d={f:Zb,r:Wb,D:ew,C:tw,L:rw,m:nw,X:aw,S:sw,M:iw};function Zb(){var r=_n.f(),s=Hl();return r||s}function Wb(r){var s=Zn(r);s!==null&&s.tag===5&&s.type==="form"?Vf(s):_n.r(r)}var Wa=typeof document>"u"?null:document;function Ax(r,s,i){var l=Wa;if(l&&typeof s=="string"&&s){var u=le(s);u='link[rel="'+r+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),kx.has(u)||(kx.add(u),r={rel:r,crossOrigin:i,href:s},l.querySelector(u)===null&&(s=l.createElement("link"),Pt(s,"link",r),jt(s),l.head.appendChild(s)))}}function ew(r){_n.D(r),Ax("dns-prefetch",r,null)}function tw(r,s){_n.C(r,s),Ax("preconnect",r,s)}function rw(r,s,i){_n.L(r,s,i);var l=Wa;if(l&&r&&s){var u='link[rel="preload"][as="'+le(s)+'"]';s==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+le(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+le(i.imageSizes)+'"]')):u+='[href="'+le(r)+'"]';var h=u;switch(s){case"style":h=ei(r);break;case"script":h=ti(r)}Cr.has(h)||(r=j({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:r,as:s},i),Cr.set(h,r),l.querySelector(u)!==null||s==="style"&&l.querySelector(vo(h))||s==="script"&&l.querySelector(yo(h))||(s=l.createElement("link"),Pt(s,"link",r),jt(s),l.head.appendChild(s)))}}function nw(r,s){_n.m(r,s);var i=Wa;if(i&&r){var l=s&&typeof s.as=="string"?s.as:"script",u='link[rel="modulepreload"][as="'+le(l)+'"][href="'+le(r)+'"]',h=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ti(r)}if(!Cr.has(h)&&(r=j({rel:"modulepreload",href:r},s),Cr.set(h,r),i.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(yo(h)))return}l=i.createElement("link"),Pt(l,"link",r),jt(l),i.head.appendChild(l)}}}function sw(r,s,i){_n.S(r,s,i);var l=Wa;if(l&&r){var u=Wn(l).hoistableStyles,h=ei(r);s=s||"default";var g=u.get(h);if(!g){var v={loading:0,preload:null};if(g=l.querySelector(vo(h)))v.loading=5;else{r=j({rel:"stylesheet",href:r,"data-precedence":s},i),(i=Cr.get(h))&&Wu(r,i);var E=g=l.createElement("link");jt(E),Pt(E,"link",r),E._p=new Promise(function(G,te){E.onload=G,E.onerror=te}),E.addEventListener("load",function(){v.loading|=1}),E.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Zl(g,s,l)}g={type:"stylesheet",instance:g,count:1,state:v},u.set(h,g)}}}function aw(r,s){_n.X(r,s);var i=Wa;if(i&&r){var l=Wn(i).hoistableScripts,u=ti(r),h=l.get(u);h||(h=i.querySelector(yo(u)),h||(r=j({src:r,async:!0},s),(s=Cr.get(u))&&eh(r,s),h=i.createElement("script"),jt(h),Pt(h,"link",r),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(u,h))}}function iw(r,s){_n.M(r,s);var i=Wa;if(i&&r){var l=Wn(i).hoistableScripts,u=ti(r),h=l.get(u);h||(h=i.querySelector(yo(u)),h||(r=j({src:r,async:!0,type:"module"},s),(s=Cr.get(u))&&eh(r,s),h=i.createElement("script"),jt(h),Pt(h,"link",r),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(u,h))}}function Cx(r,s,i,l){var u=(u=De.current)?Xl(u):null;if(!u)throw Error(o(446));switch(r){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=ei(i.href),i=Wn(u).hoistableStyles,l=i.get(s),l||(l={type:"style",instance:null,count:0,state:null},i.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){r=ei(i.href);var h=Wn(u).hoistableStyles,g=h.get(r);if(g||(u=u.ownerDocument||u,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(r,g),(h=u.querySelector(vo(r)))&&!h._p&&(g.instance=h,g.state.loading=5),Cr.has(r)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Cr.set(r,i),h||ow(u,r,i,g.state))),s&&l===null)throw Error(o(528,""));return g}if(s&&l!==null)throw Error(o(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ti(i),i=Wn(u).hoistableScripts,l=i.get(s),l||(l={type:"script",instance:null,count:0,state:null},i.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,r))}}function ei(r){return'href="'+le(r)+'"'}function vo(r){return'link[rel="stylesheet"]['+r+"]"}function Rx(r){return j({},r,{"data-precedence":r.precedence,precedence:null})}function ow(r,s,i,l){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Pt(s,"link",i),jt(s),r.head.appendChild(s))}function ti(r){return'[src="'+le(r)+'"]'}function yo(r){return"script[async]"+r}function Tx(r,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var l=r.querySelector('style[data-href~="'+le(i.href)+'"]');if(l)return s.instance=l,jt(l),l;var u=j({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(r.ownerDocument||r).createElement("style"),jt(l),Pt(l,"style",u),Zl(l,i.precedence,r),s.instance=l;case"stylesheet":u=ei(i.href);var h=r.querySelector(vo(u));if(h)return s.state.loading|=4,s.instance=h,jt(h),h;l=Rx(i),(u=Cr.get(u))&&Wu(l,u),h=(r.ownerDocument||r).createElement("link"),jt(h);var g=h;return g._p=new Promise(function(v,E){g.onload=v,g.onerror=E}),Pt(h,"link",l),s.state.loading|=4,Zl(h,i.precedence,r),s.instance=h;case"script":return h=ti(i.src),(u=r.querySelector(yo(h)))?(s.instance=u,jt(u),u):(l=i,(u=Cr.get(h))&&(l=j({},i),eh(l,u)),r=r.ownerDocument||r,u=r.createElement("script"),jt(u),Pt(u,"link",l),r.head.appendChild(u),s.instance=u);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Zl(l,i.precedence,r));return s.instance}function Zl(r,s,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,h=u,g=0;g<l.length;g++){var v=l[g];if(v.dataset.precedence===s)h=v;else if(h!==u)break}h?h.parentNode.insertBefore(r,h.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(r,s.firstChild))}function Wu(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function eh(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Wl=null;function Ex(r,s,i){if(Wl===null){var l=new Map,u=Wl=new Map;u.set(i,l)}else u=Wl,l=u.get(i),l||(l=new Map,u.set(i,l));if(l.has(r))return l;for(l.set(r,null),i=i.getElementsByTagName(r),u=0;u<i.length;u++){var h=i[u];if(!(h[zs]||h[Tt]||r==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(s)||"";g=r+g;var v=l.get(g);v?v.push(h):l.set(g,[h])}}return l}function Ux(r,s,i){r=r.ownerDocument||r,r.head.insertBefore(i,s==="title"?r.querySelector("head > title"):null)}function lw(r,s,i){if(i===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ix(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var bo=null;function cw(){}function dw(r,s,i){if(bo===null)throw Error(o(475));var l=bo;if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var u=ei(i.href),h=r.querySelector(vo(u));if(h){r=h._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(l.count++,l=ec.bind(l),r.then(l,l)),s.state.loading|=4,s.instance=h,jt(h);return}h=r.ownerDocument||r,i=Rx(i),(u=Cr.get(u))&&Wu(i,u),h=h.createElement("link"),jt(h);var g=h;g._p=new Promise(function(v,E){g.onload=v,g.onerror=E}),Pt(h,"link",i),s.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=ec.bind(l),r.addEventListener("load",s),r.addEventListener("error",s))}}function uw(){if(bo===null)throw Error(o(475));var r=bo;return r.stylesheets&&r.count===0&&th(r,r.stylesheets),0<r.count?function(s){var i=setTimeout(function(){if(r.stylesheets&&th(r,r.stylesheets),r.unsuspend){var l=r.unsuspend;r.unsuspend=null,l()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(i)}}:null}function ec(){if(this.count--,this.count===0){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var tc=null;function th(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,tc=new Map,s.forEach(hw,r),tc=null,ec.call(r))}function hw(r,s){if(!(s.state.loading&4)){var i=tc.get(r);if(i)var l=i.get(null);else{i=new Map,tc.set(r,i);for(var u=r.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var g=u[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(i.set(g.dataset.precedence,g),l=g)}l&&i.set(null,l)}u=s.instance,g=u.getAttribute("data-precedence"),h=i.get(g)||l,h===l&&i.set(null,u),i.set(g,u),this.count++,l=ec.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),h?h.parentNode.insertBefore(u,h.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(u,r.firstChild)),s.state.loading|=4}}var wo={$$typeof:S,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function mw(r,s,i,l,u,h,g,v){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Mx(r,s,i,l,u,h,g,v,E,G,te,oe){return r=new mw(r,s,i,g,v,E,G,oe),s=1,h===!0&&(s|=24),h=mr(3,null,null,s),r.current=h,h.stateNode=r,s=Od(),s.refCount++,r.pooledCache=s,s.refCount++,h.memoizedState={element:l,isDehydrated:i,cache:s},zd(h),r}function _x(r){return r?(r=Ia,r):Ia}function Dx(r,s,i,l,u,h){u=_x(u),l.context===null?l.context=u:l.pendingContext=u,l=os(s),l.payload={element:i},h=h===void 0?null:h,h!==null&&(l.callback=h),i=ls(r,l,s),i!==null&&(vr(i,r,s),Ki(i,r,s))}function Ox(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var i=r.retryLane;r.retryLane=i!==0&&i<s?i:s}}function rh(r,s){Ox(r,s),(r=r.alternate)&&Ox(r,s)}function Px(r){if(r.tag===13){var s=Ua(r,67108864);s!==null&&vr(s,r,67108864),rh(r,67108864)}}var rc=!0;function fw(r,s,i,l){var u=D.T;D.T=null;var h=K.p;try{K.p=2,nh(r,s,i,l)}finally{K.p=h,D.T=u}}function pw(r,s,i,l){var u=D.T;D.T=null;var h=K.p;try{K.p=8,nh(r,s,i,l)}finally{K.p=h,D.T=u}}function nh(r,s,i,l){if(rc){var u=sh(l);if(u===null)$u(r,s,l,nc,i),Bx(r,l);else if(gw(u,r,s,i,l))l.stopPropagation();else if(Bx(r,l),s&4&&-1<xw.indexOf(r)){for(;u!==null;){var h=Zn(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=gn(h.pendingLanes);if(g!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var E=1<<31-qt(g);v.entanglements[1]|=E,g&=~E}en(h),(We&6)===0&&(zl=Qt()+500,fo(0))}}break;case 13:v=Ua(h,2),v!==null&&vr(v,h,2),Hl(),rh(h,2)}if(h=sh(l),h===null&&$u(r,s,l,nc,i),h===u)break;u=h}u!==null&&l.stopPropagation()}else $u(r,s,l,null,i)}}function sh(r){return r=Ii(r),ah(r)}var nc=null;function ah(r){if(nc=null,r=Xn(r),r!==null){var s=d(r);if(s===null)r=null;else{var i=s.tag;if(i===13){if(r=m(s),r!==null)return r;r=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return nc=r,null}function Lx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xn()){case Qn:return 2;case $e:return 8;case ot:case Bt:return 32;case Br:return 268435456;default:return 32}default:return 32}}var ih=!1,ws=null,Ns=null,js=null,No=new Map,jo=new Map,Ss=[],xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bx(r,s){switch(r){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":No.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(s.pointerId)}}function So(r,s,i,l,u,h){return r===null||r.nativeEvent!==h?(r={blockedOn:s,domEventName:i,eventSystemFlags:l,nativeEvent:h,targetContainers:[u]},s!==null&&(s=Zn(s),s!==null&&Px(s)),r):(r.eventSystemFlags|=l,s=r.targetContainers,u!==null&&s.indexOf(u)===-1&&s.push(u),r)}function gw(r,s,i,l,u){switch(s){case"focusin":return ws=So(ws,r,s,i,l,u),!0;case"dragenter":return Ns=So(Ns,r,s,i,l,u),!0;case"mouseover":return js=So(js,r,s,i,l,u),!0;case"pointerover":var h=u.pointerId;return No.set(h,So(No.get(h)||null,r,s,i,l,u)),!0;case"gotpointercapture":return h=u.pointerId,jo.set(h,So(jo.get(h)||null,r,s,i,l,u)),!0}return!1}function zx(r){var s=Xn(r.target);if(s!==null){var i=d(s);if(i!==null){if(s=i.tag,s===13){if(s=m(i),s!==null){r.blockedOn=s,sd(r.priority,function(){if(i.tag===13){var l=gr();l=Si(l);var u=Ua(i,l);u!==null&&vr(u,i,l),rh(i,l)}});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){r.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}r.blockedOn=null}function sc(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var i=sh(r.nativeEvent);if(i===null){i=r.nativeEvent;var l=new i.constructor(i.type,i);Ui=l,i.target.dispatchEvent(l),Ui=null}else return s=Zn(i),s!==null&&Px(s),r.blockedOn=i,!1;s.shift()}return!0}function qx(r,s,i){sc(r)&&i.delete(s)}function vw(){ih=!1,ws!==null&&sc(ws)&&(ws=null),Ns!==null&&sc(Ns)&&(Ns=null),js!==null&&sc(js)&&(js=null),No.forEach(qx),jo.forEach(qx)}function ac(r,s){r.blockedOn===s&&(r.blockedOn=null,ih||(ih=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vw)))}var ic=null;function Hx(r){ic!==r&&(ic=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ic===r&&(ic=null);for(var s=0;s<r.length;s+=3){var i=r[s],l=r[s+1],u=r[s+2];if(typeof l!="function"){if(ah(l||i)===null)continue;break}var h=Zn(i);h!==null&&(r.splice(s,3),s-=3,au(h,{pending:!0,data:u,method:i.method,action:l},l,u))}}))}function ko(r){function s(E){return ac(E,r)}ws!==null&&ac(ws,r),Ns!==null&&ac(Ns,r),js!==null&&ac(js,r),No.forEach(s),jo.forEach(s);for(var i=0;i<Ss.length;i++){var l=Ss[i];l.blockedOn===r&&(l.blockedOn=null)}for(;0<Ss.length&&(i=Ss[0],i.blockedOn===null);)zx(i),i.blockedOn===null&&Ss.shift();if(i=(r.ownerDocument||r).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var u=i[l],h=i[l+1],g=u[Ht]||null;if(typeof h=="function")g||Hx(i);else if(g){var v=null;if(h&&h.hasAttribute("formAction")){if(u=h,g=h[Ht]||null)v=g.formAction;else if(ah(u)!==null)continue}else v=g.action;typeof v=="function"?i[l+1]=v:(i.splice(l,3),l-=3),Hx(i)}}}function oh(r){this._internalRoot=r}oc.prototype.render=oh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(o(409));var i=s.current,l=gr();Dx(i,l,r,s,null,null)},oc.prototype.unmount=oh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Dx(r.current,2,null,r,null,null),Hl(),s[Kn]=null}};function oc(r){this._internalRoot=r}oc.prototype.unstable_scheduleHydration=function(r){if(r){var s=Zo();r={blockedOn:null,target:r,priority:s};for(var i=0;i<Ss.length&&s!==0&&s<Ss[i].priority;i++);Ss.splice(i,0,r),i===0&&zx(r)}};var Fx=n.version;if(Fx!=="19.1.1")throw Error(o(527,Fx,"19.1.1"));K.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(o(188)):(r=Object.keys(r).join(","),Error(o(268,r)));return r=p(s),r=r!==null?x(r):null,r=r===null?null:r.stateNode,r};var yw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Jn=lc.inject(yw),zt=lc}catch{}}return Co.createRoot=function(r,s){if(!c(r))throw Error(o(299));var i=!1,l="",u=ap,h=ip,g=op,v=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(u=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(g=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(v=s.unstable_transitionCallbacks)),s=Mx(r,1,!1,null,null,i,l,u,h,g,v,null),r[Kn]=s.current,Fu(r),new oh(s)},Co.hydrateRoot=function(r,s,i){if(!c(r))throw Error(o(299));var l=!1,u="",h=ap,g=ip,v=op,E=null,G=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks),i.formState!==void 0&&(G=i.formState)),s=Mx(r,1,!0,s,i??null,l,u,h,g,v,E,G),s.context=_x(null),i=s.current,l=gr(),l=Si(l),u=os(l),u.callback=null,ls(i,u,l),i=l,s.current.lanes=i,Bs(s,i),en(s),r[Kn]=s.current,Fu(r),new oc(s)},Co.version="19.1.1",Co}var Wx;function k1(){if(Wx)return dh.exports;Wx=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),dh.exports=S1(),dh.exports}var A1=k1();const eg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tg=d0,Vh=(e,n)=>a=>{var o;if(n?.variants==null)return tg(e,a?.class,a?.className);const{variants:c,defaultVariants:d}=n,m=Object.keys(c).map(x=>{const j=a?.[x],b=d?.[x];if(j===null)return null;const y=eg(j)||eg(b);return c[x][y]}),f=a&&Object.entries(a).reduce((x,j)=>{let[b,y]=j;return y===void 0||(x[b]=y),x},{}),p=n==null||(o=n.compoundVariants)===null||o===void 0?void 0:o.reduce((x,j)=>{let{class:b,className:y,..._}=j;return Object.entries(_).every(B=>{let[P,L]=B;return Array.isArray(L)?L.includes({...d,...f}[P]):{...d,...f}[P]===L})?[...x,b,y]:x},[]);return tg(e,m,p,a?.class,a?.className)};var C1=ww();const Ah=A0(C1);function Ie(...e){return Nw(d0(e))}const R0=()=>"your-encryption-secret",R1=e=>{try{return Ah.AES.encrypt(e,R0()).toString()}catch(n){return console.error("Encryption failed:",n),e}},T1=e=>{try{const a=Ah.AES.decrypt(e,R0()).toString(Ah.enc.Utf8);return a||(console.warn("Decryption failed, returning original text"),e)}catch(n){return console.error("Decryption failed:",n),e}},E1=Vh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ne({className:e,variant:n,size:a,asChild:o=!1,...c}){const d=o?u0:"button";return t.jsx(d,{"data-slot":"button",className:Ie(E1({variant:n,size:a,className:e})),...c})}const U1=Vh("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ge({className:e,variant:n,asChild:a=!1,...o}){const c=a?u0:"span";return t.jsx(c,{"data-slot":"badge",className:Ie(U1({variant:n}),e),...o})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M1=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,a,o)=>o?o.toUpperCase():a.toLowerCase()),rg=e=>{const n=M1(e);return n.charAt(0).toUpperCase()+n.slice(1)},T0=(...e)=>e.filter((n,a,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===a).join(" ").trim(),_1=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=k.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:m,...f},p)=>k.createElement("svg",{ref:p,...D1,width:n,height:n,stroke:e,strokeWidth:o?Number(a)*24/Number(n):a,className:T0("lucide",c),...!d&&!_1(f)&&{"aria-hidden":"true"},...f},[...m.map(([x,j])=>k.createElement(x,j)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(e,n)=>{const a=k.forwardRef(({className:o,...c},d)=>k.createElement(O1,{ref:d,iconNode:n,className:T0(`lucide-${I1(rg(e))}`,`lucide-${e}`,o),...c}));return a.displayName=rg(e),a};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fa=xe("activity",P1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],B1=xe("arrow-right",L1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Uo=xe("bot",z1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],ng=xe("brain",q1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],F1=xe("bug",H1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],V1=xe("building-2",$1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Q1=xe("calendar",G1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ci=xe("chart-column",J1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qn=xe("check",Y1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bc=xe("chevron-down",K1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],E0=xe("chevron-up",X1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tt=xe("circle-alert",Z1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nt=xe("circle-check-big",W1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Es=xe("circle-x",eN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jc=xe("clock",tN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],nN=xe("code-xml",rN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],sg=xe("code",sN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ts=xe("copy",aN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Lt=xe("database",iN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],lN=xe("download",oN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Gh=xe("ellipsis",cN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Sc=xe("external-link",dN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Io=xe("eye",uN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Bn=xe("file-text",hN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],zn=xe("globe",mN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Qh=xe("heart",fN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xa=xe("info",pN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],kc=xe("key",xN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],vN=xe("languages",gN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],bN=xe("layers",yN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],mh=xe("layout-dashboard",wN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],jN=xe("lightbulb",NN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Mt=xe("loader-circle",SN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],AN=xe("log-in",kN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],U0=xe("lock",CN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],TN=xe("log-out",RN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],UN=xe("mic-off",EN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],MN=xe("mic",IN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],DN=xe("minimize-2",_N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],PN=xe("monitor",ON);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],BN=xe("moon",LN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],qN=xe("network",zN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ag=xe("pause",HN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],zc=xe("play",FN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],At=xe("plus",$N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],GN=xe("power",VN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Dr=xe("refresh-cw",QN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Ch=xe("rocket",JN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],I0=xe("rotate-ccw",YN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],XN=xe("save",KN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ac=xe("search",ZN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ej=xe("send",WN);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],_t=xe("server",tj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jr=xe("settings",rj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Pe=xe("shield",nj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],_o=xe("sparkles",sj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_s=xe("square-pen",aj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Jh=xe("stethoscope",ij);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],lj=xe("sun",oj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ga=xe("target",cj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],M0=xe("test-tube",dj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],hj=xe("timer",uj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],va=xe("trash-2",mj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ig=xe("trending-up",fj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vt=xe("triangle-alert",pj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],fh=xe("upload",xj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vj=xe("user-check",gj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bj=xe("user-plus",yj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Nj=xe("user-x",wj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],_0=xe("user",jj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yr=xe("users",Sj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Aj=xe("wand-sparkles",kj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$n=xe("x",Cj);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Yh=xe("zap",Rj),cr=kw,Tj=jw,D0=k.forwardRef(({className:e,...n},a)=>t.jsx(h0,{ref:a,className:Ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n}));D0.displayName=h0.displayName;const Kt=k.forwardRef(({className:e,children:n,...a},o)=>t.jsxs(Tj,{children:[t.jsx(D0,{}),t.jsxs(m0,{ref:o,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[n,t.jsxs(Sw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx($n,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Kt.displayName=m0.displayName;const Xt=({className:e,...n})=>t.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...n});Xt.displayName="DialogHeader";const Ds=({className:e,...n})=>t.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...n});Ds.displayName="DialogFooter";const Zt=k.forwardRef(({className:e,...n},a)=>t.jsx(f0,{ref:a,className:Ie("text-lg font-semibold leading-none tracking-tight",e),...n}));Zt.displayName=f0.displayName;const dr=k.forwardRef(({className:e,...n},a)=>t.jsx(p0,{ref:a,className:Ie("text-sm text-muted-foreground",e),...n}));dr.displayName=p0.displayName;function Er({className:e,...n}){return t.jsx("div",{"data-slot":"card",className:Ie("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...n})}function Ur({className:e,...n}){return t.jsx("div",{"data-slot":"card-header",className:Ie("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...n})}function Ir({className:e,...n}){return t.jsx("div",{"data-slot":"card-title",className:Ie("leading-none font-semibold",e),...n})}function gc({className:e,...n}){return t.jsx("div",{"data-slot":"card-description",className:Ie("text-muted-foreground text-sm",e),...n})}function Mr({className:e,...n}){return t.jsx("div",{"data-slot":"card-content",className:Ie("px-6",e),...n})}const Kh=k.createContext({}),vi=k.forwardRef(({className:e,defaultValue:n,value:a,onValueChange:o,...c},d)=>{const[m,f]=k.useState(n||""),p=a!==void 0?a:m,x=k.useCallback(j=>{a===void 0&&f(j),o?.(j)},[a,o]);return t.jsx(Kh.Provider,{value:{value:p,onValueChange:x},children:t.jsx("div",{ref:d,className:Ie("",e),...c})})});vi.displayName="Tabs";const yi=k.forwardRef(({className:e,...n},a)=>t.jsx("div",{ref:a,className:Ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...n}));yi.displayName="TabsList";const or=k.forwardRef(({className:e,value:n,...a},o)=>{const{value:c,onValueChange:d}=k.useContext(Kh),m=c===n;return t.jsx("button",{ref:o,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",m?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground",e),onClick:()=>d?.(n),...a})});or.displayName="TabsTrigger";const lr=k.forwardRef(({className:e,value:n,...a},o)=>{const{value:c}=k.useContext(Kh);return c!==n?null:t.jsx("div",{ref:o,className:Ie("mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a})});lr.displayName="TabsContent";function Ae({className:e,type:n,...a}){return t.jsx("input",{type:n,"data-slot":"input",className:Ie("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}function re({className:e,...n}){return t.jsx(Aw,{"data-slot":"label",className:Ie("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...n})}const og=e=>{let n;const a=new Set,o=(x,j)=>{const b=typeof x=="function"?x(n):x;if(!Object.is(b,n)){const y=n;n=j??(typeof b!="object"||b===null)?b:Object.assign({},n,b),a.forEach(_=>_(n,y))}},c=()=>n,f={setState:o,getState:c,getInitialState:()=>p,subscribe:x=>(a.add(x),()=>a.delete(x))},p=n=e(o,c,f);return f},Ej=e=>e?og(e):og,Uj=e=>e;function Ij(e,n=Uj){const a=ma.useSyncExternalStore(e.subscribe,ma.useCallback(()=>n(e.getState()),[e,n]),ma.useCallback(()=>n(e.getInitialState()),[e,n]));return ma.useDebugValue(a),a}const lg=e=>{const n=Ej(e),a=o=>Ij(n,o);return Object.assign(a,n),a},qc=e=>e?lg(e):lg;function Hc(e,n){let a;try{a=e()}catch{return}return{getItem:c=>{var d;const m=p=>p===null?null:JSON.parse(p,void 0),f=(d=a.getItem(c))!=null?d:null;return f instanceof Promise?f.then(m):m(f)},setItem:(c,d)=>a.setItem(c,JSON.stringify(d,void 0)),removeItem:c=>a.removeItem(c)}}const Rh=e=>n=>{try{const a=e(n);return a instanceof Promise?a:{then(o){return Rh(o)(a)},catch(o){return this}}}catch(a){return{then(o){return this},catch(o){return Rh(o)(a)}}}},Mj=(e,n)=>(a,o,c)=>{let d={storage:Hc(()=>localStorage),partialize:P=>P,version:0,merge:(P,L)=>({...L,...P}),...n},m=!1;const f=new Set,p=new Set;let x=d.storage;if(!x)return e((...P)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),a(...P)},o,c);const j=()=>{const P=d.partialize({...o()});return x.setItem(d.name,{state:P,version:d.version})},b=c.setState;c.setState=(P,L)=>{b(P,L),j()};const y=e((...P)=>{a(...P),j()},o,c);c.getInitialState=()=>y;let _;const B=()=>{var P,L;if(!x)return;m=!1,f.forEach(T=>{var S;return T((S=o())!=null?S:y)});const U=((L=d.onRehydrateStorage)==null?void 0:L.call(d,(P=o())!=null?P:y))||void 0;return Rh(x.getItem.bind(x))(d.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==d.version){if(d.migrate){const S=d.migrate(T.state,T.version);return S instanceof Promise?S.then(w=>[!0,w]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var S;const[w,I]=T;if(_=d.merge(I,(S=o())!=null?S:y),a(_,!0),w)return j()}).then(()=>{U?.(_,void 0),_=o(),m=!0,p.forEach(T=>T(_))}).catch(T=>{U?.(void 0,T)})};return c.persist={setOptions:P=>{d={...d,...P},P.storage&&(x=P.storage)},clearStorage:()=>{x?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>B(),hasHydrated:()=>m,onHydrate:P=>(f.add(P),()=>{f.delete(P)}),onFinishHydration:P=>(p.add(P),()=>{p.delete(P)})},d.skipHydration||B(),_||y},Xh=Mj,_j="modulepreload",Dj=function(e){return"/webapp/"+e},cg={},Oj=function(n,a,o){let c=Promise.resolve();if(a&&a.length>0){let p=function(x){return Promise.all(x.map(j=>Promise.resolve(j).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),f=m?.nonce||m?.getAttribute("nonce");c=p(a.map(x=>{if(x=Dj(x),x in cg)return;cg[x]=!0;const j=x.endsWith(".css"),b=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${b}`))return;const y=document.createElement("link");if(y.rel=j?"stylesheet":_j,j||(y.as="script"),y.crossOrigin="",y.href=x,f&&y.setAttribute("nonce",f),document.head.appendChild(y),j)return new Promise((_,B)=>{y.addEventListener("load",_),y.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(m){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=m,window.dispatchEvent(f),!f.defaultPrevented)throw m}return c.then(m=>{for(const f of m||[])f.status==="rejected"&&d(f.reason);return n().catch(d)})},Pj="proxy-smart-ui",Lj="Proxy Smart Admin UI",Bj="A web-based administration interface for managing healthcare applications and resources via Proxy Smart.",zj="0.0.1-alpha.202508090910.2bd122b",Ro={name:Pj,displayName:Lj,description:Bj,version:zj},un={name:Ro.name,displayName:Ro.displayName,version:Ro.version,api:{baseUrl:"http://localhost:8445"},app:{baseUrl:"/webapp/",title:Ro.displayName,description:Ro.description,environment:"production",isDevelopment:!1,isProduction:!0},encryption:{secret:"your-encryption-secret"}};var ph={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var dg;function qj(){return dg||(dg=1,function(e,n){(function(a){e.exports=a()})(function(){return function a(o,c,d){function m(x,j){if(!c[x]){if(!o[x]){var b=typeof cc=="function"&&cc;if(!j&&b)return b(x,!0);if(f)return f(x,!0);var y=new Error("Cannot find module '"+x+"'");throw y.code="MODULE_NOT_FOUND",y}var _=c[x]={exports:{}};o[x][0].call(_.exports,function(B){var P=o[x][1][B];return m(P||B)},_,_.exports,a,o,c,d)}return c[x].exports}for(var f=typeof cc=="function"&&cc,p=0;p<d.length;p++)m(d[p]);return m}({1:[function(a,o,c){(function(d){var m=d.MutationObserver||d.WebKitMutationObserver,f;if(m){var p=0,x=new m(B),j=d.document.createTextNode("");x.observe(j,{characterData:!0}),f=function(){j.data=p=++p%2}}else if(!d.setImmediate&&typeof d.MessageChannel<"u"){var b=new d.MessageChannel;b.port1.onmessage=B,f=function(){b.port2.postMessage(0)}}else"document"in d&&"onreadystatechange"in d.document.createElement("script")?f=function(){var L=d.document.createElement("script");L.onreadystatechange=function(){B(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},d.document.documentElement.appendChild(L)}:f=function(){setTimeout(B,0)};var y,_=[];function B(){y=!0;for(var L,U,T=_.length;T;){for(U=_,_=[],L=-1;++L<T;)U[L]();T=_.length}y=!1}o.exports=P;function P(L){_.push(L)===1&&!y&&f()}}).call(this,typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(a,o,c){var d=a(1);function m(){}var f={},p=["REJECTED"],x=["FULFILLED"],j=["PENDING"];o.exports=b;function b(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,I!==m&&P(this,I)}b.prototype.catch=function(I){return this.then(null,I)},b.prototype.then=function(I,J){if(typeof I!="function"&&this.state===x||typeof J!="function"&&this.state===p)return this;var W=new this.constructor(m);if(this.state!==j){var C=this.state===x?I:J;_(W,C,this.outcome)}else this.queue.push(new y(W,I,J));return W};function y(I,J,W){this.promise=I,typeof J=="function"&&(this.onFulfilled=J,this.callFulfilled=this.otherCallFulfilled),typeof W=="function"&&(this.onRejected=W,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(I){f.resolve(this.promise,I)},y.prototype.otherCallFulfilled=function(I){_(this.promise,this.onFulfilled,I)},y.prototype.callRejected=function(I){f.reject(this.promise,I)},y.prototype.otherCallRejected=function(I){_(this.promise,this.onRejected,I)};function _(I,J,W){d(function(){var C;try{C=J(W)}catch($){return f.reject(I,$)}C===I?f.reject(I,new TypeError("Cannot resolve promise with itself")):f.resolve(I,C)})}f.resolve=function(I,J){var W=L(B,J);if(W.status==="error")return f.reject(I,W.value);var C=W.value;if(C)P(I,C);else{I.state=x,I.outcome=J;for(var $=-1,ee=I.queue.length;++$<ee;)I.queue[$].callFulfilled(J)}return I},f.reject=function(I,J){I.state=p,I.outcome=J;for(var W=-1,C=I.queue.length;++W<C;)I.queue[W].callRejected(J);return I};function B(I){var J=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof J=="function")return function(){J.apply(I,arguments)}}function P(I,J){var W=!1;function C(Q){W||(W=!0,f.reject(I,Q))}function $(Q){W||(W=!0,f.resolve(I,Q))}function ee(){J($,C)}var X=L(ee);X.status==="error"&&C(X.value)}function L(I,J){var W={};try{W.value=I(J),W.status="success"}catch(C){W.status="error",W.value=C}return W}b.resolve=U;function U(I){return I instanceof this?I:f.resolve(new this(m),I)}b.reject=T;function T(I){var J=new this(m);return f.reject(J,I)}b.all=S;function S(I){var J=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=I.length,C=!1;if(!W)return this.resolve([]);for(var $=new Array(W),ee=0,X=-1,Q=new this(m);++X<W;)ie(I[X],X);return Q;function ie(me,R){J.resolve(me).then(D,function(K){C||(C=!0,f.reject(Q,K))});function D(K){$[R]=K,++ee===W&&!C&&(C=!0,f.resolve(Q,$))}}}b.race=w;function w(I){var J=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var W=I.length,C=!1;if(!W)return this.resolve([]);for(var $=-1,ee=new this(m);++$<W;)X(I[$]);return ee;function X(Q){J.resolve(Q).then(function(ie){C||(C=!0,f.resolve(ee,ie))},function(ie){C||(C=!0,f.reject(ee,ie))})}}},{1:1}],3:[function(a,o,c){(function(d){typeof d.Promise!="function"&&(d.Promise=a(2))}).call(this,typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(a,o,c){var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N};function m(N,M){if(!(N instanceof M))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var p=f();function x(){try{if(!p||!p.open)return!1;var N=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),M=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!N||M)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function j(N,M){N=N||[],M=M||{};try{return new Blob(N,M)}catch(z){if(z.name!=="TypeError")throw z;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,q=new A,F=0;F<N.length;F+=1)q.append(N[F]);return q.getBlob(M.type)}}typeof Promise>"u"&&a(3);var b=Promise;function y(N,M){M&&N.then(function(A){M(null,A)},function(A){M(A)})}function _(N,M,A){typeof M=="function"&&N.then(M),typeof A=="function"&&N.catch(A)}function B(N){return typeof N!="string"&&(console.warn(N+" used as a key, but it is not a string."),N=String(N)),N}function P(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var L="local-forage-detect-blob-support",U=void 0,T={},S=Object.prototype.toString,w="readonly",I="readwrite";function J(N){for(var M=N.length,A=new ArrayBuffer(M),q=new Uint8Array(A),F=0;F<M;F++)q[F]=N.charCodeAt(F);return A}function W(N){return new b(function(M){var A=N.transaction(L,I),q=j([""]);A.objectStore(L).put(q,"key"),A.onabort=function(F){F.preventDefault(),F.stopPropagation(),M(!1)},A.oncomplete=function(){var F=navigator.userAgent.match(/Chrome\/(\d+)/),z=navigator.userAgent.match(/Edge\//);M(z||!F||parseInt(F[1],10)>=43)}}).catch(function(){return!1})}function C(N){return typeof U=="boolean"?b.resolve(U):W(N).then(function(M){return U=M,U})}function $(N){var M=T[N.name],A={};A.promise=new b(function(q,F){A.resolve=q,A.reject=F}),M.deferredOperations.push(A),M.dbReady?M.dbReady=M.dbReady.then(function(){return A.promise}):M.dbReady=A.promise}function ee(N){var M=T[N.name],A=M.deferredOperations.pop();if(A)return A.resolve(),A.promise}function X(N,M){var A=T[N.name],q=A.deferredOperations.pop();if(q)return q.reject(M),q.promise}function Q(N,M){return new b(function(A,q){if(T[N.name]=T[N.name]||pe(),N.db)if(M)$(N),N.db.close();else return A(N.db);var F=[N.name];M&&F.push(N.version);var z=p.open.apply(p,F);M&&(z.onupgradeneeded=function(se){var ce=z.result;try{ce.createObjectStore(N.storeName),se.oldVersion<=1&&ce.createObjectStore(L)}catch(le){if(le.name==="ConstraintError")console.warn('The database "'+N.name+'" has been upgraded from version '+se.oldVersion+" to version "+se.newVersion+', but the storage "'+N.storeName+'" already exists.');else throw le}}),z.onerror=function(se){se.preventDefault(),q(z.error)},z.onsuccess=function(){var se=z.result;se.onversionchange=function(ce){ce.target.close()},A(se),ee(N)}})}function ie(N){return Q(N,!1)}function me(N){return Q(N,!0)}function R(N,M){if(!N.db)return!0;var A=!N.db.objectStoreNames.contains(N.storeName),q=N.version<N.db.version,F=N.version>N.db.version;if(q&&(N.version!==M&&console.warn('The database "'+N.name+`" can't be downgraded from version `+N.db.version+" to version "+N.version+"."),N.version=N.db.version),F||A){if(A){var z=N.db.version+1;z>N.version&&(N.version=z)}return!0}return!1}function D(N){return new b(function(M,A){var q=new FileReader;q.onerror=A,q.onloadend=function(F){var z=btoa(F.target.result||"");M({__local_forage_encoded_blob:!0,data:z,type:N.type})},q.readAsBinaryString(N)})}function K(N){var M=J(atob(N.data));return j([M],{type:N.type})}function de(N){return N&&N.__local_forage_encoded_blob}function Ce(N){var M=this,A=M._initReady().then(function(){var q=T[M._dbInfo.name];if(q&&q.dbReady)return q.dbReady});return _(A,N,N),A}function _e(N){$(N);for(var M=T[N.name],A=M.forages,q=0;q<A.length;q++){var F=A[q];F._dbInfo.db&&(F._dbInfo.db.close(),F._dbInfo.db=null)}return N.db=null,ie(N).then(function(z){return N.db=z,R(N)?me(N):z}).then(function(z){N.db=M.db=z;for(var se=0;se<A.length;se++)A[se]._dbInfo.db=z}).catch(function(z){throw X(N,z),z})}function Re(N,M,A,q){q===void 0&&(q=1);try{var F=N.db.transaction(N.storeName,M);A(null,F)}catch(z){if(q>0&&(!N.db||z.name==="InvalidStateError"||z.name==="NotFoundError"))return b.resolve().then(function(){if(!N.db||z.name==="NotFoundError"&&!N.db.objectStoreNames.contains(N.storeName)&&N.version<=N.db.version)return N.db&&(N.version=N.db.version+1),me(N)}).then(function(){return _e(N).then(function(){Re(N,M,A,q-1)})}).catch(A);A(z)}}function pe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ve(N){var M=this,A={db:null};if(N)for(var q in N)A[q]=N[q];var F=T[A.name];F||(F=pe(),T[A.name]=F),F.forages.push(M),M._initReady||(M._initReady=M.ready,M.ready=Ce);var z=[];function se(){return b.resolve()}for(var ce=0;ce<F.forages.length;ce++){var le=F.forages[ce];le!==M&&z.push(le._initReady().catch(se))}var ue=F.forages.slice(0);return b.all(z).then(function(){return A.db=F.db,ie(A)}).then(function(fe){return A.db=fe,R(A,M._defaultConfig.version)?me(A):fe}).then(function(fe){A.db=F.db=fe,M._dbInfo=A;for(var ye=0;ye<ue.length;ye++){var Oe=ue[ye];Oe!==M&&(Oe._dbInfo.db=A.db,Oe._dbInfo.version=A.version)}})}function Le(N,M){var A=this;N=B(N);var q=new b(function(F,z){A.ready().then(function(){Re(A._dbInfo,w,function(se,ce){if(se)return z(se);try{var le=ce.objectStore(A._dbInfo.storeName),ue=le.get(N);ue.onsuccess=function(){var fe=ue.result;fe===void 0&&(fe=null),de(fe)&&(fe=K(fe)),F(fe)},ue.onerror=function(){z(ue.error)}}catch(fe){z(fe)}})}).catch(z)});return y(q,M),q}function je(N,M){var A=this,q=new b(function(F,z){A.ready().then(function(){Re(A._dbInfo,w,function(se,ce){if(se)return z(se);try{var le=ce.objectStore(A._dbInfo.storeName),ue=le.openCursor(),fe=1;ue.onsuccess=function(){var ye=ue.result;if(ye){var Oe=ye.value;de(Oe)&&(Oe=K(Oe));var Je=N(Oe,ye.key,fe++);Je!==void 0?F(Je):ye.continue()}else F()},ue.onerror=function(){z(ue.error)}}catch(ye){z(ye)}})}).catch(z)});return y(q,M),q}function De(N,M,A){var q=this;N=B(N);var F=new b(function(z,se){var ce;q.ready().then(function(){return ce=q._dbInfo,S.call(M)==="[object Blob]"?C(ce.db).then(function(le){return le?M:D(M)}):M}).then(function(le){Re(q._dbInfo,I,function(ue,fe){if(ue)return se(ue);try{var ye=fe.objectStore(q._dbInfo.storeName);le===null&&(le=void 0);var Oe=ye.put(le,N);fe.oncomplete=function(){le===void 0&&(le=null),z(le)},fe.onabort=fe.onerror=function(){var Je=Oe.error?Oe.error:Oe.transaction.error;se(Je)}}catch(Je){se(Je)}})}).catch(se)});return y(F,A),F}function Be(N,M){var A=this;N=B(N);var q=new b(function(F,z){A.ready().then(function(){Re(A._dbInfo,I,function(se,ce){if(se)return z(se);try{var le=ce.objectStore(A._dbInfo.storeName),ue=le.delete(N);ce.oncomplete=function(){F()},ce.onerror=function(){z(ue.error)},ce.onabort=function(){var fe=ue.error?ue.error:ue.transaction.error;z(fe)}}catch(fe){z(fe)}})}).catch(z)});return y(q,M),q}function ze(N){var M=this,A=new b(function(q,F){M.ready().then(function(){Re(M._dbInfo,I,function(z,se){if(z)return F(z);try{var ce=se.objectStore(M._dbInfo.storeName),le=ce.clear();se.oncomplete=function(){q()},se.onabort=se.onerror=function(){var ue=le.error?le.error:le.transaction.error;F(ue)}}catch(ue){F(ue)}})}).catch(F)});return y(A,N),A}function ut(N){var M=this,A=new b(function(q,F){M.ready().then(function(){Re(M._dbInfo,w,function(z,se){if(z)return F(z);try{var ce=se.objectStore(M._dbInfo.storeName),le=ce.count();le.onsuccess=function(){q(le.result)},le.onerror=function(){F(le.error)}}catch(ue){F(ue)}})}).catch(F)});return y(A,N),A}function ur(N,M){var A=this,q=new b(function(F,z){if(N<0){F(null);return}A.ready().then(function(){Re(A._dbInfo,w,function(se,ce){if(se)return z(se);try{var le=ce.objectStore(A._dbInfo.storeName),ue=!1,fe=le.openKeyCursor();fe.onsuccess=function(){var ye=fe.result;if(!ye){F(null);return}N===0||ue?F(ye.key):(ue=!0,ye.advance(N))},fe.onerror=function(){z(fe.error)}}catch(ye){z(ye)}})}).catch(z)});return y(q,M),q}function fn(N){var M=this,A=new b(function(q,F){M.ready().then(function(){Re(M._dbInfo,w,function(z,se){if(z)return F(z);try{var ce=se.objectStore(M._dbInfo.storeName),le=ce.openKeyCursor(),ue=[];le.onsuccess=function(){var fe=le.result;if(!fe){q(ue);return}ue.push(fe.key),fe.continue()},le.onerror=function(){F(le.error)}}catch(fe){F(fe)}})}).catch(F)});return y(A,N),A}function Gn(N,M){M=P.apply(this,arguments);var A=this.config();N=typeof N!="function"&&N||{},N.name||(N.name=N.name||A.name,N.storeName=N.storeName||A.storeName);var q=this,F;if(!N.name)F=b.reject("Invalid arguments");else{var z=N.name===A.name&&q._dbInfo.db,se=z?b.resolve(q._dbInfo.db):ie(N).then(function(ce){var le=T[N.name],ue=le.forages;le.db=ce;for(var fe=0;fe<ue.length;fe++)ue[fe]._dbInfo.db=ce;return ce});N.storeName?F=se.then(function(ce){if(ce.objectStoreNames.contains(N.storeName)){var le=ce.version+1;$(N);var ue=T[N.name],fe=ue.forages;ce.close();for(var ye=0;ye<fe.length;ye++){var Oe=fe[ye];Oe._dbInfo.db=null,Oe._dbInfo.version=le}var Je=new b(function(Ye,lt){var pt=p.open(N.name,le);pt.onerror=function(Jt){var ns=pt.result;ns.close(),lt(Jt)},pt.onupgradeneeded=function(){var Jt=pt.result;Jt.deleteObjectStore(N.storeName)},pt.onsuccess=function(){var Jt=pt.result;Jt.close(),Ye(Jt)}});return Je.then(function(Ye){ue.db=Ye;for(var lt=0;lt<fe.length;lt++){var pt=fe[lt];pt._dbInfo.db=Ye,ee(pt._dbInfo)}}).catch(function(Ye){throw(X(N,Ye)||b.resolve()).catch(function(){}),Ye})}}):F=se.then(function(ce){$(N);var le=T[N.name],ue=le.forages;ce.close();for(var fe=0;fe<ue.length;fe++){var ye=ue[fe];ye._dbInfo.db=null}var Oe=new b(function(Je,Ye){var lt=p.deleteDatabase(N.name);lt.onerror=function(){var pt=lt.result;pt&&pt.close(),Ye(lt.error)},lt.onblocked=function(){console.warn('dropInstance blocked for database "'+N.name+'" until all open connections are closed')},lt.onsuccess=function(){var pt=lt.result;pt&&pt.close(),Je(pt)}});return Oe.then(function(Je){le.db=Je;for(var Ye=0;Ye<ue.length;Ye++){var lt=ue[Ye];ee(lt._dbInfo)}}).catch(function(Je){throw(X(N,Je)||b.resolve()).catch(function(){}),Je})})}return y(F,M),F}var pn={_driver:"asyncStorage",_initStorage:ve,_support:x(),iterate:je,getItem:Le,setItem:De,removeItem:Be,clear:ze,length:ut,key:ur,keys:fn,dropInstance:Gn};function Ps(){return typeof openDatabase=="function"}var Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ni="~~local_forage_type~",Qt=/^~~local_forage_type~([^~]+)~/,xn="__lfsc__:",Qn=xn.length,$e="arbf",ot="blob",Bt="si08",Br="ui08",er="uic8",Fo="si16",Jn="si32",zt="ur16",zr="ui32",qt="fl32",$o="fl64",Vo=Qn+$e.length,Go=Object.prototype.toString;function Ls(N){var M=N.length*.75,A=N.length,q,F=0,z,se,ce,le;N[N.length-1]==="="&&(M--,N[N.length-2]==="="&&M--);var ue=new ArrayBuffer(M),fe=new Uint8Array(ue);for(q=0;q<A;q+=4)z=Wt.indexOf(N[q]),se=Wt.indexOf(N[q+1]),ce=Wt.indexOf(N[q+2]),le=Wt.indexOf(N[q+3]),fe[F++]=z<<2|se>>4,fe[F++]=(se&15)<<4|ce>>2,fe[F++]=(ce&3)<<6|le&63;return ue}function Yn(N){var M=new Uint8Array(N),A="",q;for(q=0;q<M.length;q+=3)A+=Wt[M[q]>>2],A+=Wt[(M[q]&3)<<4|M[q+1]>>4],A+=Wt[(M[q+1]&15)<<2|M[q+2]>>6],A+=Wt[M[q+2]&63];return M.length%3===2?A=A.substring(0,A.length-1)+"=":M.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function gn(N,M){var A="";if(N&&(A=Go.call(N)),N&&(A==="[object ArrayBuffer]"||N.buffer&&Go.call(N.buffer)==="[object ArrayBuffer]")){var q,F=xn;N instanceof ArrayBuffer?(q=N,F+=$e):(q=N.buffer,A==="[object Int8Array]"?F+=Bt:A==="[object Uint8Array]"?F+=Br:A==="[object Uint8ClampedArray]"?F+=er:A==="[object Int16Array]"?F+=Fo:A==="[object Uint16Array]"?F+=zt:A==="[object Int32Array]"?F+=Jn:A==="[object Uint32Array]"?F+=zr:A==="[object Float32Array]"?F+=qt:A==="[object Float64Array]"?F+=$o:M(new Error("Failed to get type for BinaryArray"))),M(F+Yn(q))}else if(A==="[object Blob]"){var z=new FileReader;z.onload=function(){var se=Ni+N.type+"~"+Yn(this.result);M(xn+ot+se)},z.readAsArrayBuffer(N)}else try{M(JSON.stringify(N))}catch(se){console.error("Couldn't convert value into a JSON string: ",N),M(null,se)}}function ja(N){if(N.substring(0,Qn)!==xn)return JSON.parse(N);var M=N.substring(Vo),A=N.substring(Qn,Vo),q;if(A===ot&&Qt.test(M)){var F=M.match(Qt);q=F[1],M=M.substring(F[0].length)}var z=Ls(M);switch(A){case $e:return z;case ot:return j([z],{type:q});case Bt:return new Int8Array(z);case Br:return new Uint8Array(z);case er:return new Uint8ClampedArray(z);case Fo:return new Int16Array(z);case zt:return new Uint16Array(z);case Jn:return new Int32Array(z);case zr:return new Uint32Array(z);case qt:return new Float32Array(z);case $o:return new Float64Array(z);default:throw new Error("Unkown type: "+A)}}var vn={serialize:gn,deserialize:ja,stringToBuffer:Ls,bufferToString:Yn};function Qo(N,M,A,q){N.executeSql("CREATE TABLE IF NOT EXISTS "+M.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,q)}function Jo(N){var M=this,A={db:null};if(N)for(var q in N)A[q]=typeof N[q]!="string"?N[q].toString():N[q];var F=new b(function(z,se){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch(ce){return se(ce)}A.db.transaction(function(ce){Qo(ce,A,function(){M._dbInfo=A,z()},function(le,ue){se(ue)})},se)});return A.serializer=vn,F}function qr(N,M,A,q,F,z){N.executeSql(A,q,F,function(se,ce){ce.code===ce.SYNTAX_ERR?se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[M.storeName],function(le,ue){ue.rows.length?z(le,ce):Qo(le,M,function(){le.executeSql(A,q,F,z)},z)},z):z(se,ce)},z)}function ji(N,M){var A=this;N=B(N);var q=new b(function(F,z){A.ready().then(function(){var se=A._dbInfo;se.db.transaction(function(ce){qr(ce,se,"SELECT * FROM "+se.storeName+" WHERE key = ? LIMIT 1",[N],function(le,ue){var fe=ue.rows.length?ue.rows.item(0).value:null;fe&&(fe=se.serializer.deserialize(fe)),F(fe)},function(le,ue){z(ue)})})}).catch(z)});return y(q,M),q}function Bs(N,M){var A=this,q=new b(function(F,z){A.ready().then(function(){var se=A._dbInfo;se.db.transaction(function(ce){qr(ce,se,"SELECT * FROM "+se.storeName,[],function(le,ue){for(var fe=ue.rows,ye=fe.length,Oe=0;Oe<ye;Oe++){var Je=fe.item(Oe),Ye=Je.value;if(Ye&&(Ye=se.serializer.deserialize(Ye)),Ye=N(Ye,Je.key,Oe+1),Ye!==void 0){F(Ye);return}}F()},function(le,ue){z(ue)})})}).catch(z)});return y(q,M),q}function Yo(N,M,A,q){var F=this;N=B(N);var z=new b(function(se,ce){F.ready().then(function(){M===void 0&&(M=null);var le=M,ue=F._dbInfo;ue.serializer.serialize(M,function(fe,ye){ye?ce(ye):ue.db.transaction(function(Oe){qr(Oe,ue,"INSERT OR REPLACE INTO "+ue.storeName+" (key, value) VALUES (?, ?)",[N,fe],function(){se(le)},function(Je,Ye){ce(Ye)})},function(Oe){if(Oe.code===Oe.QUOTA_ERR){if(q>0){se(Yo.apply(F,[N,le,A,q-1]));return}ce(Oe)}})})}).catch(ce)});return y(z,A),z}function Ko(N,M,A){return Yo.apply(this,[N,M,A,1])}function Xo(N,M){var A=this;N=B(N);var q=new b(function(F,z){A.ready().then(function(){var se=A._dbInfo;se.db.transaction(function(ce){qr(ce,se,"DELETE FROM "+se.storeName+" WHERE key = ?",[N],function(){F()},function(le,ue){z(ue)})})}).catch(z)});return y(q,M),q}function Si(N){var M=this,A=new b(function(q,F){M.ready().then(function(){var z=M._dbInfo;z.db.transaction(function(se){qr(se,z,"DELETE FROM "+z.storeName,[],function(){q()},function(ce,le){F(le)})})}).catch(F)});return y(A,N),A}function ki(N){var M=this,A=new b(function(q,F){M.ready().then(function(){var z=M._dbInfo;z.db.transaction(function(se){qr(se,z,"SELECT COUNT(key) as c FROM "+z.storeName,[],function(ce,le){var ue=le.rows.item(0).c;q(ue)},function(ce,le){F(le)})})}).catch(F)});return y(A,N),A}function Zo(N,M){var A=this,q=new b(function(F,z){A.ready().then(function(){var se=A._dbInfo;se.db.transaction(function(ce){qr(ce,se,"SELECT key FROM "+se.storeName+" WHERE id = ? LIMIT 1",[N+1],function(le,ue){var fe=ue.rows.length?ue.rows.item(0).key:null;F(fe)},function(le,ue){z(ue)})})}).catch(z)});return y(q,M),q}function sd(N){var M=this,A=new b(function(q,F){M.ready().then(function(){var z=M._dbInfo;z.db.transaction(function(se){qr(se,z,"SELECT key FROM "+z.storeName,[],function(ce,le){for(var ue=[],fe=0;fe<le.rows.length;fe++)ue.push(le.rows.item(fe).key);q(ue)},function(ce,le){F(le)})})}).catch(F)});return y(A,N),A}function Yr(N){return new b(function(M,A){N.transaction(function(q){q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(F,z){for(var se=[],ce=0;ce<z.rows.length;ce++)se.push(z.rows.item(ce).name);M({db:N,storeNames:se})},function(F,z){A(z)})},function(q){A(q)})})}function Tt(N,M){M=P.apply(this,arguments);var A=this.config();N=typeof N!="function"&&N||{},N.name||(N.name=N.name||A.name,N.storeName=N.storeName||A.storeName);var q=this,F;return N.name?F=new b(function(z){var se;N.name===A.name?se=q._dbInfo.db:se=openDatabase(N.name,"","",0),N.storeName?z({db:se,storeNames:[N.storeName]}):z(Yr(se))}).then(function(z){return new b(function(se,ce){z.db.transaction(function(le){function ue(Je){return new b(function(Ye,lt){le.executeSql("DROP TABLE IF EXISTS "+Je,[],function(){Ye()},function(pt,Jt){lt(Jt)})})}for(var fe=[],ye=0,Oe=z.storeNames.length;ye<Oe;ye++)fe.push(ue(z.storeNames[ye]));b.all(fe).then(function(){se()}).catch(function(Je){ce(Je)})},function(le){ce(le)})})}):F=b.reject("Invalid arguments"),y(F,M),F}var Ht={_driver:"webSQLStorage",_initStorage:Jo,_support:Ps(),iterate:Bs,getItem:ji,setItem:Ko,removeItem:Xo,clear:Si,length:ki,key:Zo,keys:sd,dropInstance:Tt};function Kn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Sa(N,M){var A=N.name+"/";return N.storeName!==M.storeName&&(A+=N.storeName+"/"),A}function ad(){var N="_localforage_support_test";try{return localStorage.setItem(N,!0),localStorage.removeItem(N),!1}catch{return!0}}function id(){return!ad()||localStorage.length>0}function Wo(N){var M=this,A={};if(N)for(var q in N)A[q]=N[q];return A.keyPrefix=Sa(N,M._defaultConfig),id()?(M._dbInfo=A,A.serializer=vn,b.resolve()):b.reject()}function zs(N){var M=this,A=M.ready().then(function(){for(var q=M._dbInfo.keyPrefix,F=localStorage.length-1;F>=0;F--){var z=localStorage.key(F);z.indexOf(q)===0&&localStorage.removeItem(z)}});return y(A,N),A}function Ai(N,M){var A=this;N=B(N);var q=A.ready().then(function(){var F=A._dbInfo,z=localStorage.getItem(F.keyPrefix+N);return z&&(z=F.serializer.deserialize(z)),z});return y(q,M),q}function Xn(N,M){var A=this,q=A.ready().then(function(){for(var F=A._dbInfo,z=F.keyPrefix,se=z.length,ce=localStorage.length,le=1,ue=0;ue<ce;ue++){var fe=localStorage.key(ue);if(fe.indexOf(z)===0){var ye=localStorage.getItem(fe);if(ye&&(ye=F.serializer.deserialize(ye)),ye=N(ye,fe.substring(se),le++),ye!==void 0)return ye}}});return y(q,M),q}function Zn(N,M){var A=this,q=A.ready().then(function(){var F=A._dbInfo,z;try{z=localStorage.key(N)}catch{z=null}return z&&(z=z.substring(F.keyPrefix.length)),z});return y(q,M),q}function qs(N){var M=this,A=M.ready().then(function(){for(var q=M._dbInfo,F=localStorage.length,z=[],se=0;se<F;se++){var ce=localStorage.key(se);ce.indexOf(q.keyPrefix)===0&&z.push(ce.substring(q.keyPrefix.length))}return z});return y(A,N),A}function Wn(N){var M=this,A=M.keys().then(function(q){return q.length});return y(A,N),A}function jt(N,M){var A=this;N=B(N);var q=A.ready().then(function(){var F=A._dbInfo;localStorage.removeItem(F.keyPrefix+N)});return y(q,M),q}function el(N,M,A){var q=this;N=B(N);var F=q.ready().then(function(){M===void 0&&(M=null);var z=M;return new b(function(se,ce){var le=q._dbInfo;le.serializer.serialize(M,function(ue,fe){if(fe)ce(fe);else try{localStorage.setItem(le.keyPrefix+N,ue),se(z)}catch(ye){(ye.name==="QuotaExceededError"||ye.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ce(ye),ce(ye)}})})});return y(F,A),F}function tl(N,M){if(M=P.apply(this,arguments),N=typeof N!="function"&&N||{},!N.name){var A=this.config();N.name=N.name||A.name,N.storeName=N.storeName||A.storeName}var q=this,F;return N.name?F=new b(function(z){N.storeName?z(Sa(N,q._defaultConfig)):z(N.name+"/")}).then(function(z){for(var se=localStorage.length-1;se>=0;se--){var ce=localStorage.key(se);ce.indexOf(z)===0&&localStorage.removeItem(ce)}}):F=b.reject("Invalid arguments"),y(F,M),F}var yn={_driver:"localStorageWrapper",_initStorage:Wo,_support:Kn(),iterate:Xn,getItem:Ai,setItem:el,removeItem:jt,clear:zs,length:Wn,key:Zn,keys:qs,dropInstance:tl},es=function(M,A){return M===A||typeof M=="number"&&typeof A=="number"&&isNaN(M)&&isNaN(A)},od=function(M,A){for(var q=M.length,F=0;F<q;){if(es(M[F],A))return!0;F++}return!1},Ci=Array.isArray||function(N){return Object.prototype.toString.call(N)==="[object Array]"},ts={},rl={},Hr={INDEXEDDB:pn,WEBSQL:Ht,LOCALSTORAGE:yn},ka=[Hr.INDEXEDDB._driver,Hr.WEBSQL._driver,Hr.LOCALSTORAGE._driver],tr=["dropInstance"],Hs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tr),nl={description:"",driver:ka.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rs(N,M){N[M]=function(){var A=arguments;return N.ready().then(function(){return N[M].apply(N,A)})}}function Fs(){for(var N=1;N<arguments.length;N++){var M=arguments[N];if(M)for(var A in M)M.hasOwnProperty(A)&&(Ci(M[A])?arguments[0][A]=M[A].slice():arguments[0][A]=M[A])}return arguments[0]}var Ri=function(){function N(M){m(this,N);for(var A in Hr)if(Hr.hasOwnProperty(A)){var q=Hr[A],F=q._driver;this[A]=F,ts[F]||this.defineDriver(q)}this._defaultConfig=Fs({},nl),this._config=Fs({},this._defaultConfig,M),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return N.prototype.config=function(A){if((typeof A>"u"?"undefined":d(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var q in A){if(q==="storeName"&&(A[q]=A[q].replace(/\W/g,"_")),q==="version"&&typeof A[q]!="number")return new Error("Database version must be a number.");this._config[q]=A[q]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},N.prototype.defineDriver=function(A,q,F){var z=new b(function(se,ce){try{var le=A._driver,ue=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){ce(ue);return}for(var fe=Hs.concat("_initStorage"),ye=0,Oe=fe.length;ye<Oe;ye++){var Je=fe[ye],Ye=!od(tr,Je);if((Ye||A[Je])&&typeof A[Je]!="function"){ce(ue);return}}var lt=function(){for(var ns=function(Ui){return function(){var Ii=new Error("Method "+Ui+" is not implemented by the current driver"),bn=b.reject(Ii);return y(bn,arguments[arguments.length-1]),bn}},$s=0,cd=tr.length;$s<cd;$s++){var Ti=tr[$s];A[Ti]||(A[Ti]=ns(Ti))}};lt();var pt=function(ns){ts[le]&&console.info("Redefining LocalForage driver: "+le),ts[le]=A,rl[le]=ns,se()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(pt,ce):pt(!!A._support):pt(!0)}catch(Jt){ce(Jt)}});return _(z,q,F),z},N.prototype.driver=function(){return this._driver||null},N.prototype.getDriver=function(A,q,F){var z=ts[A]?b.resolve(ts[A]):b.reject(new Error("Driver not found."));return _(z,q,F),z},N.prototype.getSerializer=function(A){var q=b.resolve(vn);return _(q,A),q},N.prototype.ready=function(A){var q=this,F=q._driverSet.then(function(){return q._ready===null&&(q._ready=q._initDriver()),q._ready});return _(F,A,A),F},N.prototype.setDriver=function(A,q,F){var z=this;Ci(A)||(A=[A]);var se=this._getSupportedDrivers(A);function ce(){z._config.driver=z.driver()}function le(ye){return z._extend(ye),ce(),z._ready=z._initStorage(z._config),z._ready}function ue(ye){return function(){var Oe=0;function Je(){for(;Oe<ye.length;){var Ye=ye[Oe];return Oe++,z._dbInfo=null,z._ready=null,z.getDriver(Ye).then(le).catch(Je)}ce();var lt=new Error("No available storage method found.");return z._driverSet=b.reject(lt),z._driverSet}return Je()}}var fe=this._driverSet!==null?this._driverSet.catch(function(){return b.resolve()}):b.resolve();return this._driverSet=fe.then(function(){var ye=se[0];return z._dbInfo=null,z._ready=null,z.getDriver(ye).then(function(Oe){z._driver=Oe._driver,ce(),z._wrapLibraryMethodsWithReady(),z._initDriver=ue(se)})}).catch(function(){ce();var ye=new Error("No available storage method found.");return z._driverSet=b.reject(ye),z._driverSet}),_(this._driverSet,q,F),this._driverSet},N.prototype.supports=function(A){return!!rl[A]},N.prototype._extend=function(A){Fs(this,A)},N.prototype._getSupportedDrivers=function(A){for(var q=[],F=0,z=A.length;F<z;F++){var se=A[F];this.supports(se)&&q.push(se)}return q},N.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,q=Hs.length;A<q;A++)rs(this,Hs[A])},N.prototype.createInstance=function(A){return new N(A)},N}(),ld=new Ri;o.exports=ld},{3:3}]},{},[4])(4)})}(ph)),ph.exports}var Hj=qj();const Fc=A0(Hj);Fc.config({name:"proxy-smart"});const Hn=async e=>{let n=await Fc.getItem(e);if(n){n=T1(n);try{return JSON.parse(n)}catch{return n}}return null},vc=async(e,n)=>{const a=JSON.stringify(n);await Fj(e,a)},Fj=async(e,n)=>{const a=R1(n);await Fc.setItem(e,a)},Cc=async e=>{await Fc.removeItem(e)},pa=e=>{try{return sessionStorage.getItem(e)}catch(n){return console.warn("Failed to get session storage item:",n),null}},ug=(e,n)=>{try{sessionStorage.setItem(e,n)}catch(a){console.warn("Failed to set session storage item:",a)}},hi=e=>{try{sessionStorage.removeItem(e)}catch(n){console.warn("Failed to remove session storage item:",n)}},$j=(e,n)=>{try{return localStorage.getItem(e)||n}catch(a){return console.warn("Failed to get theme from storage:",a),n}},Vj=(e,n)=>{try{localStorage.setItem(e,n)}catch(a){console.warn("Failed to set theme in storage:",a)}},Gj=async()=>{try{await Cc("openid_tokens")}catch(e){console.warn("Failed to clear encrypted tokens:",e)}hi("pkce_code_verifier"),hi("oauth_state");try{Object.keys(localStorage).forEach(e=>{(e.includes("oauth")||e.includes("pkce")||e.includes("auth"))&&localStorage.removeItem(e)})}catch(e){console.warn("Failed to clear localStorage oauth data:",e)}},Qj="http://localhost:3001".replace(/\/+$/,"");class Zh{constructor(n={}){this.configuration=n}set config(n){this.configuration=n}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:Qj}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||P0}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const n=this.configuration.apiKey;if(n)return typeof n=="function"?n:()=>n}get accessToken(){const n=this.configuration.accessToken;if(n)return typeof n=="function"?n:async()=>n}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const Jj=new Zh;class Pr{constructor(n=Jj){this.configuration=n,this.middleware=n.middleware}static jsonRegex=new RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i");middleware;withMiddleware(...n){const a=this.clone();return a.middleware=a.middleware.concat(...n),a}withPreMiddleware(...n){const a=n.map(o=>({pre:o}));return this.withMiddleware(...a)}withPostMiddleware(...n){const a=n.map(o=>({post:o}));return this.withMiddleware(...a)}isJsonMime(n){return n?Pr.jsonRegex.test(n):!1}async request(n,a){const{url:o,init:c}=await this.createFetchParams(n,a),d=await this.fetchApi(o,c);if(d&&d.status>=200&&d.status<300)return d;throw new O0(d,"Response returned an error code")}async createFetchParams(n,a){let o=this.configuration.basePath+n.path;n.query!==void 0&&Object.keys(n.query).length!==0&&(o+="?"+this.configuration.queryParamsStringify(n.query));const c=Object.assign({},this.configuration.headers,n.headers);Object.keys(c).forEach(j=>c[j]===void 0?delete c[j]:{});const d=typeof a=="function"?a:async()=>a,m={method:n.method,headers:c,body:n.body,credentials:this.configuration.credentials},f={...m,...await d({init:m,context:n})};let p;Kj(f.body)||f.body instanceof URLSearchParams||Yj(f.body)?p=f.body:this.isJsonMime(c["Content-Type"])?p=JSON.stringify(f.body):p=f.body;const x={...f,body:p};return{url:o,init:x}}fetchApi=async(n,a)=>{let o={url:n,init:a};for(const d of this.middleware)d.pre&&(o=await d.pre({fetch:this.fetchApi,...o})||o);let c;try{c=await(this.configuration.fetchApi||fetch)(o.url,o.init)}catch(d){for(const m of this.middleware)m.onError&&(c=await m.onError({fetch:this.fetchApi,url:o.url,init:o.init,error:d,response:c?c.clone():void 0})||c);if(c===void 0)throw d instanceof Error?new Xj(d,"The request failed and the interceptors did not return an alternative response"):d}for(const d of this.middleware)d.post&&(c=await d.post({fetch:this.fetchApi,url:o.url,init:o.init,response:c.clone()})||c);return c};clone(){const n=this.constructor,a=new n(this.configuration);return a.middleware=this.middleware.slice(),a}}function Yj(e){return typeof Blob<"u"&&e instanceof Blob}function Kj(e){return typeof FormData<"u"&&e instanceof FormData}class O0 extends Error{constructor(n,a){super(a),this.response=n}name="ResponseError"}class Xj extends Error{constructor(n,a){super(a),this.cause=n}name="FetchError"}class we extends Error{constructor(n,a){super(a),this.field=n}name="RequiredError"}function P0(e,n=""){return Object.keys(e).map(a=>L0(a,e[a],n)).filter(a=>a.length>0).join("&")}function L0(e,n,a=""){const o=a+(a.length?`[${e}]`:e);if(n instanceof Array){const c=n.map(d=>encodeURIComponent(String(d))).join(`&${encodeURIComponent(o)}=`);return`${encodeURIComponent(o)}=${c}`}if(n instanceof Set){const c=Array.from(n);return L0(e,c,a)}return n instanceof Date?`${encodeURIComponent(o)}=${encodeURIComponent(n.toISOString())}`:n instanceof Object?P0(n,o):`${encodeURIComponent(o)}=${encodeURIComponent(String(n))}`}class Ne{constructor(n,a=o=>o){this.raw=n,this.transformer=a}async value(){return this.transformer(await this.raw.json())}}class Tr{constructor(n){this.raw=n}async value(){}}function an(e){return Zj(e)}function Zj(e,n){return e==null?e:{success:e.success}}function Wh(e){return Wj(e)}function Wj(e,n){return e==null?e:{base:e.base,smartConfig:e.smartConfig,metadata:e.metadata}}function B0(e){return e2(e)}function e2(e,n){return e==null?e:{id:e.id,name:e.name,url:e.url,fhirVersion:e.fhirVersion,serverVersion:e.serverVersion==null?void 0:e.serverVersion,serverName:e.serverName==null?void 0:e.serverName,supported:e.supported,endpoints:Wh(e.endpoints)}}function t2(e){return r2(e)}function r2(e,n){return e==null?e:{enabled:e.enabled,requireHttps:e.requireHttps,allowedScopes:e.allowedScopes,maxClientLifetime:e.maxClientLifetime,requireTermsOfService:e.requireTermsOfService,requirePrivacyPolicy:e.requirePrivacyPolicy,allowPublicClients:e.allowPublicClients,allowConfidentialClients:e.allowConfidentialClients,allowBackendServices:e.allowBackendServices,adminApprovalRequired:e.adminApprovalRequired,rateLimitPerMinute:e.rateLimitPerMinute,maxRedirectUris:e.maxRedirectUris,allowedRedirectUriPatterns:e.allowedRedirectUriPatterns,notificationEmail:e.notificationEmail==null?void 0:e.notificationEmail}}function n2(e){return s2(e,!1)}function s2(e,n=!1){return e==null?e:{enabled:e.enabled,requireHttps:e.requireHttps,allowedScopes:e.allowedScopes,maxClientLifetime:e.maxClientLifetime,requireTermsOfService:e.requireTermsOfService,requirePrivacyPolicy:e.requirePrivacyPolicy,allowPublicClients:e.allowPublicClients,allowConfidentialClients:e.allowConfidentialClients,allowBackendServices:e.allowBackendServices,adminApprovalRequired:e.adminApprovalRequired,rateLimitPerMinute:e.rateLimitPerMinute,maxRedirectUris:e.maxRedirectUris,allowedRedirectUriPatterns:e.allowedRedirectUriPatterns,notificationEmail:e.notificationEmail}}function uc(e){return a2(e)}function a2(e,n){return e==null?e:{id:e.id,username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,enabled:e.enabled,attributes:e.attributes==null?void 0:e.attributes,createdTimestamp:e.createdTimestamp==null?void 0:e.createdTimestamp,lastLogin:e.lastLogin==null?void 0:e.lastLogin,realmRoles:e.realmRoles==null?void 0:e.realmRoles,clientRoles:e.clientRoles==null?void 0:e.clientRoles,organization:e.organization==null?void 0:e.organization,fhirUser:e.fhirUser==null?void 0:e.fhirUser}}function xh(e){return i2(e)}function i2(e,n){return e==null?e:{alias:e.alias,providerId:e.providerId,displayName:e.displayName==null?void 0:e.displayName,enabled:e.enabled==null?void 0:e.enabled,config:e.config==null?void 0:e.config}}function o2(e){return l2(e)}function l2(e,n){return e==null?e:{count:e.count,total:e.total}}function c2(e){return d2(e)}function d2(e,n){return e==null?e:{baseUrl:e.baseUrl,realm:e.realm,hasAdminClient:e.hasAdminClient,adminClientId:e.adminClientId}}function u2(e){return h2(e)}function h2(e,n){return e==null?e:{userId:e.userId,username:e.username,fhirUser:e.fhirUser,patient:e.patient,encounter:e.encounter,fhirContext:e.fhirContext,intent:e.intent,smartStyleUrl:e.smartStyleUrl,tenant:e.tenant,needPatientBanner:e.needPatientBanner,launchPatient:e.launchPatient,launchEncounter:e.launchEncounter}}function gh(e){return m2(e)}function m2(e,n){return e==null?e:{id:e.id==null?void 0:e.id,name:e.name==null?void 0:e.name,description:e.description==null?void 0:e.description,attributes:e.attributes==null?void 0:e.attributes}}function vh(e){return f2(e)}function f2(e,n){return e==null?e:{id:e.id==null?void 0:e.id,clientId:e.clientId==null?void 0:e.clientId,name:e.name==null?void 0:e.name,description:e.description==null?void 0:e.description,enabled:e.enabled==null?void 0:e.enabled,protocol:e.protocol==null?void 0:e.protocol,publicClient:e.publicClient==null?void 0:e.publicClient,redirectUris:e.redirectUris==null?void 0:e.redirectUris,webOrigins:e.webOrigins==null?void 0:e.webOrigins,attributes:e.attributes==null?void 0:e.attributes,clientAuthenticatorType:e.clientAuthenticatorType==null?void 0:e.clientAuthenticatorType,serviceAccountsEnabled:e.serviceAccountsEnabled==null?void 0:e.serviceAccountsEnabled,standardFlowEnabled:e.standardFlowEnabled==null?void 0:e.standardFlowEnabled,implicitFlowEnabled:e.implicitFlowEnabled==null?void 0:e.implicitFlowEnabled,directAccessGrantsEnabled:e.directAccessGrantsEnabled==null?void 0:e.directAccessGrantsEnabled,defaultClientScopes:e.defaultClientScopes==null?void 0:e.defaultClientScopes,optionalClientScopes:e.optionalClientScopes==null?void 0:e.optionalClientScopes,access:e.access==null?void 0:e.access}}function p2(e){return x2(e)}function x2(e,n){return e==null?e:{isConfigured:e.isConfigured,baseUrl:e.baseUrl,realm:e.realm,authorizationEndpoint:e.authorizationEndpoint,tokenEndpoint:e.tokenEndpoint}}function g2(e){return v2(e)}function v2(e,n){return e==null?e:{keycloak:p2(e.keycloak)}}function y2(e){return b2(e)}function b2(e,n){return e==null?e:{alias:e.alias,providerId:e.providerId,displayName:e.displayName,enabled:e.enabled}}function w2(e){return N2(e)}function N2(e,n){return e==null?e:{text:e.text}}function j2(e){return S2(e)}function S2(e,n){return e==null?e:{id:e.id,fhirUser:e.fhirUser==null?void 0:e.fhirUser,name:e.name.map(w2),username:e.username,email:e.email==null?void 0:e.email,firstName:e.firstName==null?void 0:e.firstName,lastName:e.lastName==null?void 0:e.lastName,roles:e.roles}}function k2(e){return A2(e)}function A2(e,n){return e==null?e:{id:e.id,name:e.name,url:e.url,fhirVersion:e.fhirVersion,serverVersion:e.serverVersion==null?void 0:e.serverVersion,serverName:e.serverName==null?void 0:e.serverName,supported:e.supported,error:e.error==null?void 0:e.error,endpoints:Wh(e.endpoints)}}function C2(e){return R2(e)}function R2(e,n){return e==null?e:{totalServers:e.totalServers,servers:e.servers.map(k2)}}function T2(e){return E2(e)}function E2(e,n){return e==null?e:{name:e.name,url:e.url,fhirVersion:e.fhirVersion,serverVersion:e.serverVersion==null?void 0:e.serverVersion,serverName:e.serverName==null?void 0:e.serverName,supported:e.supported,endpoints:Wh(e.endpoints)}}function z0(e){return U2(e)}function U2(e,n){return e==null?e:{clientCert:e.clientCert,clientKey:e.clientKey,caCert:e.caCert}}function q0(e){return I2(e)}function I2(e,n){return e==null?e:{subject:e.subject,issuer:e.issuer,validFrom:e.validFrom,validTo:e.validTo,fingerprint:e.fingerprint}}function M2(e){return _2(e)}function _2(e,n){return e==null?e:{enabled:e.enabled,hasCertificates:z0(e.hasCertificates),certDetails:e.certDetails==null?void 0:q0(e.certDetails)}}function D2(e){return O2(e)}function O2(e,n){return e==null?e:{status:e.status,timestamp:e.timestamp,uptime:e.uptime}}function P2(e){return L2(e)}function L2(e,n){return e==null?e:{clientId:e.clientId,clientName:e.clientName,count:e.count,successRate:e.successRate}}function B2(e){return z2(e)}function z2(e,n){return e==null?e:{hour:e.hour,success:e.success,error:e.error,total:e.total}}function q2(e){return H2(e)}function H2(e,n){return e==null?e:{totalFlows:e.totalFlows,successRate:e.successRate,averageResponseTime:e.averageResponseTime,activeTokens:e.activeTokens,topClients:e.topClients.map(P2),flowsByType:e.flowsByType,errorsByType:e.errorsByType,hourlyStats:e.hourlyStats.map(B2),timestamp:e.timestamp}}function F2(e){return $2(e)}function $2(e,n){return e==null?e:{patient:e.patient==null?void 0:e.patient,encounter:e.encounter==null?void 0:e.encounter,location:e.location==null?void 0:e.location,fhirUser:e.fhirUser==null?void 0:e.fhirUser}}function V2(e){return G2(e)}function G2(e,n){return e==null?e:{id:e.id,timestamp:e.timestamp,type:e.type,status:e.status,clientId:e.clientId,clientName:e.clientName==null?void 0:e.clientName,userId:e.userId==null?void 0:e.userId,userName:e.userName==null?void 0:e.userName,scopes:e.scopes,grantType:e.grantType,responseTime:e.responseTime,ipAddress:e.ipAddress,userAgent:e.userAgent,errorMessage:e.errorMessage==null?void 0:e.errorMessage,errorCode:e.errorCode==null?void 0:e.errorCode,tokenType:e.tokenType==null?void 0:e.tokenType,expiresIn:e.expiresIn==null?void 0:e.expiresIn,refreshToken:e.refreshToken==null?void 0:e.refreshToken,fhirContext:e.fhirContext==null?void 0:F2(e.fhirContext)}}function Q2(e){return J2(e)}function J2(e,n){return e==null?e:{events:e.events.map(V2),total:e.total,timestamp:e.timestamp}}function Y2(e){return K2(e)}function K2(e,n){return e==null?e:{name:e.name,url:e.url,status:e.status,accessible:e.accessible,version:e.version,serverName:e.serverName==null?void 0:e.serverName,serverVersion:e.serverVersion==null?void 0:e.serverVersion,error:e.error==null?void 0:e.error}}function X2(e){return Z2(e)}function Z2(e,n){return e==null?e:{status:e.status,totalServers:e.totalServers,healthyServers:e.healthyServers,servers:e.servers.map(Y2)}}function W2(e){return eS(e)}function eS(e,n){return e==null?e:{used:e.used,total:e.total}}function tS(e){return rS(e)}function rS(e,n){return e==null?e:{status:e.status,accessible:e.accessible,realm:e.realm}}function nS(e){return sS(e)}function sS(e,n){return e==null?e:{version:e.version,timestamp:e.timestamp,uptime:e.uptime,overall:e.overall,fhir:X2(e.fhir),keycloak:tS(e.keycloak),memory:W2(e.memory)}}function aS(e){return iS(e,!1)}function iS(e,n=!1){return e==null?e:{username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,organization:e.organization,fhirUser:e.fhirUser,password:e.password,temporaryPassword:e.temporaryPassword,realmRoles:e.realmRoles,clientRoles:e.clientRoles}}function H0(e){return oS(e,!1)}function oS(e,n=!1){return e==null?e:{displayName:e.displayName,entityId:e.entityId,singleSignOnServiceUrl:e.singleSignOnServiceUrl,singleLogoutServiceUrl:e.singleLogoutServiceUrl,metadataDescriptorUrl:e.metadataDescriptorUrl,enabled:e.enabled,clientSecret:e.clientSecret,tokenUrl:e.tokenUrl,userInfoUrl:e.userInfoUrl,issuer:e.issuer,defaultScopes:e.defaultScopes,logoutUrl:e.logoutUrl,signatureAlgorithm:e.signatureAlgorithm,nameIdPolicyFormat:e.nameIdPolicyFormat,signingCertificate:e.signingCertificate,validateSignature:e.validateSignature,wantAuthnRequestsSigned:e.wantAuthnRequestsSigned,additionalConfig:e.additionalConfig}}function lS(e){return cS(e,!1)}function cS(e,n=!1){return e==null?e:{alias:e.alias,providerId:e.providerId,displayName:e.displayName,enabled:e.enabled,config:H0(e.config)}}function dS(e){return uS(e)}function uS(e,n){return e==null?e:{success:e.success,message:e.message==null?void 0:e.message,error:e.error==null?void 0:e.error,restartRequired:e.restartRequired==null?void 0:e.restartRequired}}function hS(e){return mS(e,!1)}function mS(e,n=!1){return e==null?e:{baseUrl:e.baseUrl,realm:e.realm,adminClientId:e.adminClientId,adminClientSecret:e.adminClientSecret}}function fS(e){return pS(e)}function pS(e,n){return e==null?e:{success:e.success,message:e.message==null?void 0:e.message,error:e.error==null?void 0:e.error}}function xS(e){return gS(e,!1)}function gS(e,n=!1){return e==null?e:{baseUrl:e.baseUrl,realm:e.realm}}function vS(e){return yS(e,!1)}function yS(e,n=!1){return e==null?e:{fhirContext:e.fhirContext}}function bS(e){return wS(e,!1)}function wS(e,n=!1){return e==null?e:{name:e.name,description:e.description,fhirScopes:e.fhirScopes}}function hg(e){return NS(e)}function NS(e,n){return e==null?e:{success:e.success,message:e.message,timestamp:e.timestamp}}function jS(e){return SS(e,!1)}function SS(e,n=!1){return e}function kS(e){return AS(e,!1)}function AS(e,n=!1){return e==null?e:{clientId:e.clientId,name:e.name,description:e.description,publicClient:e.publicClient,redirectUris:e.redirectUris,webOrigins:e.webOrigins,defaultScopes:e.defaultScopes,optionalScopes:e.optionalScopes,smartVersion:e.smartVersion,fhirVersion:e.fhirVersion,clientType:jS(e.clientType),publicKey:e.publicKey,jwksUri:e.jwksUri,systemScopes:e.systemScopes}}function CS(e){return RS(e)}function RS(e,n){return e==null?e:{active:e.active,sub:e.sub==null?void 0:e.sub,aud:e.aud==null?void 0:e.aud,exp:e.exp==null?void 0:e.exp,scope:e.scope==null?void 0:e.scope}}function TS(e){return ES(e,!1)}function ES(e,n=!1){return e==null?e:{token:e.token,token_type_hint:e.tokenTypeHint,client_id:e.clientId,client_secret:e.clientSecret}}function US(e){return IS(e,!1)}function IS(e,n=!1){return e==null?e:{redirect_uris:e.redirectUris,client_name:e.clientName,client_uri:e.clientUri,logo_uri:e.logoUri,scope:e.scope,contacts:e.contacts,tos_uri:e.tosUri,policy_uri:e.policyUri,jwks_uri:e.jwksUri,jwks:e.jwks,software_id:e.softwareId,software_version:e.softwareVersion,fhir_versions:e.fhirVersions,launch_uris:e.launchUris}}function F0(e){return MS(e)}function MS(e,n){return e==null?e:{reference:e.reference==null?void 0:e.reference,canonical:e.canonical==null?void 0:e.canonical,identifier:e.identifier==null?void 0:e.identifier,type:e.type==null?void 0:e.type,role:e.role==null?void 0:e.role}}function _S(e){return DS(e)}function DS(e,n){return e==null?e:{type:e.type,locations:e.locations,fhirVersions:e.fhirVersions,scope:e.scope==null?void 0:e.scope,patient:e.patient==null?void 0:e.patient,encounter:e.encounter==null?void 0:e.encounter,fhirContext:e.fhirContext==null?void 0:e.fhirContext.map(F0)}}function OS(e){return PS(e)}function PS(e,n){return e==null?e:{accessToken:e.access_token==null?void 0:e.access_token,tokenType:e.token_type==null?void 0:e.token_type,expiresIn:e.expires_in==null?void 0:e.expires_in,refreshToken:e.refresh_token==null?void 0:e.refresh_token,refreshExpiresIn:e.refresh_expires_in==null?void 0:e.refresh_expires_in,idToken:e.id_token==null?void 0:e.id_token,scope:e.scope==null?void 0:e.scope,sessionState:e.session_state==null?void 0:e.session_state,notBeforePolicy:e["not-before-policy"]==null?void 0:e["not-before-policy"],patient:e.patient==null?void 0:e.patient,encounter:e.encounter==null?void 0:e.encounter,fhirUser:e.fhirUser==null?void 0:e.fhirUser,fhirContext:e.fhirContext==null?void 0:e.fhirContext.map(F0),intent:e.intent==null?void 0:e.intent,smartStyleUrl:e.smart_style_url==null?void 0:e.smart_style_url,tenant:e.tenant==null?void 0:e.tenant,needPatientBanner:e.need_patient_banner==null?void 0:e.need_patient_banner,authorizationDetails:e.authorization_details==null?void 0:e.authorization_details.map(_S),error:e.error==null?void 0:e.error,errorDescription:e.error_description==null?void 0:e.error_description}}function LS(e){return BS(e,!1)}function BS(e,n=!1){return e==null?e:{grant_type:e.grantType,code:e.code,redirect_uri:e.redirectUri,client_id:e.clientId,client_secret:e.clientSecret,code_verifier:e.codeVerifier,refresh_token:e.refreshToken,scope:e.scope,audience:e.audience,username:e.username,password:e.password,client_assertion_type:e.clientAssertionType,client_assertion:e.clientAssertion}}function zS(e){return qS(e)}function qS(e,n){return e==null?e:{success:e.success,message:e.message,server:B0(e.server)}}function HS(e){return FS(e)}function FS(e,n){return e==null?e:{success:e.success,message:e.message,certDetails:e.certDetails==null?void 0:q0(e.certDetails)}}function $S(e){return VS(e,!1)}function VS(e,n=!1){return e==null?e:{type:e.type,content:e.content,filename:e.filename}}function GS(e){return QS(e,!1)}function QS(e,n=!1){return e==null?e:{url:e.url,name:e.name}}function JS(e){return YS(e,!1)}function YS(e,n=!1){return e==null?e:{firstName:e.firstName,lastName:e.lastName,email:e.email,enabled:e.enabled,organization:e.organization,fhirUser:e.fhirUser,realmRoles:e.realmRoles,clientRoles:e.clientRoles}}function KS(e){return XS(e,!1)}function XS(e,n=!1){return e==null?e:{displayName:e.displayName,enabled:e.enabled,config:H0(e.config)}}function ZS(e){return WS(e,!1)}function WS(e,n=!1){return e==null?e:{intent:e.intent}}function ek(e){return tk(e,!1)}function tk(e,n=!1){return e==null?e:{needPatientBanner:e.needPatientBanner}}function rk(e){return nk(e,!1)}function nk(e,n=!1){return e==null?e:{styleUrl:e.styleUrl}}function sk(e){return ak(e,!1)}function ak(e,n=!1){return e==null?e:{tenant:e.tenant}}function on(e){return ik(e)}function ik(e,n){return e==null?e:{success:e.success}}function ok(e){return lk(e,!1)}function lk(e,n=!1){return e==null?e:{description:e.description,fhirScopes:e.fhirScopes}}function Do(e){return ck(e)}function ck(e,n){return e==null?e:{success:e.success,message:e.message==null?void 0:e.message}}function dk(e){return uk(e,!1)}function uk(e,n=!1){return e==null?e:{name:e.name,description:e.description,enabled:e.enabled,redirectUris:e.redirectUris,webOrigins:e.webOrigins,defaultScopes:e.defaultScopes,optionalScopes:e.optionalScopes,smartVersion:e.smartVersion,fhirVersion:e.fhirVersion}}function hk(e){return mk(e)}function mk(e,n){return e==null?e:{success:e.success,message:e.message,server:B0(e.server)}}function fk(e){return pk(e)}function pk(e,n){return e==null?e:{enabled:e.enabled,hasCertificates:z0(e.hasCertificates)}}function xk(e){return gk(e)}function gk(e,n){return e==null?e:{success:e.success,message:e.message,config:fk(e.config)}}function vk(e){return yk(e,!1)}function yk(e,n=!1){return e==null?e:{enabled:e.enabled}}function bk(e){return wk(e,!1)}function wk(e,n=!1){return e==null?e:{url:e.url,name:e.name}}class Nk extends Pr{async getAdminClientRegistrationSettingsRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/client-registration/settings",method:"GET",headers:o,query:a},n);return new Ne(d,m=>t2(m))}async getAdminClientRegistrationSettings(n){return await(await this.getAdminClientRegistrationSettingsRaw(n)).value()}async getAdminKeycloakConfigStatusRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/keycloak-config/status",method:"GET",headers:o,query:a},n);return new Ne(d,m=>c2(m))}async getAdminKeycloakConfigStatus(n){return await(await this.getAdminKeycloakConfigStatusRaw(n)).value()}async postAdminClientRegistrationResetDefaultsRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/client-registration/reset-defaults",method:"POST",headers:o,query:a},n);return new Ne(d,m=>Do(m))}async postAdminClientRegistrationResetDefaults(n){return await(await this.postAdminClientRegistrationResetDefaultsRaw(n)).value()}async postAdminKeycloakConfigConfigureRaw(n,a){if(n.postAdminKeycloakConfigConfigureRequest==null)throw new we("postAdminKeycloakConfigConfigureRequest",'Required parameter "postAdminKeycloakConfigConfigureRequest" was null or undefined when calling postAdminKeycloakConfigConfigure().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/keycloak-config/configure",method:"POST",headers:c,query:o,body:hS(n.postAdminKeycloakConfigConfigureRequest)},a);return new Ne(m,f=>dS(f))}async postAdminKeycloakConfigConfigure(n,a){return await(await this.postAdminKeycloakConfigConfigureRaw(n,a)).value()}async postAdminKeycloakConfigTestRaw(n,a){if(n.postAdminKeycloakConfigTestRequest==null)throw new we("postAdminKeycloakConfigTestRequest",'Required parameter "postAdminKeycloakConfigTestRequest" was null or undefined when calling postAdminKeycloakConfigTest().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/keycloak-config/test",method:"POST",headers:c,query:o,body:xS(n.postAdminKeycloakConfigTestRequest)},a);return new Ne(m,f=>fS(f))}async postAdminKeycloakConfigTest(n,a){return await(await this.postAdminKeycloakConfigTestRaw(n,a)).value()}async postAdminRestartRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/restart",method:"POST",headers:o,query:a},n);return new Ne(d,m=>hg(m))}async postAdminRestart(n){return await(await this.postAdminRestartRaw(n)).value()}async postAdminShutdownRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/shutdown",method:"POST",headers:o,query:a},n);return new Ne(d,m=>hg(m))}async postAdminShutdown(n){return await(await this.postAdminShutdownRaw(n)).value()}async postAdminSmartConfigRefreshRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/smart-config/refresh",method:"POST",headers:o,query:a},n);return new Tr(d)}async postAdminSmartConfigRefresh(n){await this.postAdminSmartConfigRefreshRaw(n)}async putAdminClientRegistrationSettingsRaw(n,a){if(n.getAdminClientRegistrationSettings200Response==null)throw new we("getAdminClientRegistrationSettings200Response",'Required parameter "getAdminClientRegistrationSettings200Response" was null or undefined when calling putAdminClientRegistrationSettings().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/client-registration/settings",method:"PUT",headers:c,query:o,body:n2(n.getAdminClientRegistrationSettings200Response)},a);return new Ne(m,f=>Do(f))}async putAdminClientRegistrationSettings(n,a){return await(await this.putAdminClientRegistrationSettingsRaw(n,a)).value()}}class $0 extends Pr{async getAuthAuthorizeRaw(n,a){const o={};n.responseType!=null&&(o.response_type=n.responseType),n.clientId!=null&&(o.client_id=n.clientId),n.redirectUri!=null&&(o.redirect_uri=n.redirectUri),n.scope!=null&&(o.scope=n.scope),n.state!=null&&(o.state=n.state),n.codeChallenge!=null&&(o.code_challenge=n.codeChallenge),n.codeChallengeMethod!=null&&(o.code_challenge_method=n.codeChallengeMethod),n.authorizationDetails!=null&&(o.authorization_details=n.authorizationDetails),n.kcIdpHint!=null&&(o.kc_idp_hint=n.kcIdpHint);const c={},m=await this.request({path:"/auth/authorize",method:"GET",headers:c,query:o},a);return new Tr(m)}async getAuthAuthorize(n={},a){await this.getAuthAuthorizeRaw(n,a)}async getAuthConfigRaw(n){const a={},o={},d=await this.request({path:"/auth/config",method:"GET",headers:o,query:a},n);return new Ne(d,m=>g2(m))}async getAuthConfig(n){return await(await this.getAuthConfigRaw(n)).value()}async getAuthIdentityProvidersRaw(n){const a={},o={},d=await this.request({path:"/auth/identity-providers",method:"GET",headers:o,query:a},n);return new Ne(d,m=>m.map(y2))}async getAuthIdentityProviders(n){return await(await this.getAuthIdentityProvidersRaw(n)).value()}async getAuthLoginRaw(n,a){const o={};n.clientId!=null&&(o.client_id=n.clientId),n.redirectUri!=null&&(o.redirect_uri=n.redirectUri),n.scope!=null&&(o.scope=n.scope),n.state!=null&&(o.state=n.state),n.codeChallenge!=null&&(o.code_challenge=n.codeChallenge),n.codeChallengeMethod!=null&&(o.code_challenge_method=n.codeChallengeMethod),n.authorizationDetails!=null&&(o.authorization_details=n.authorizationDetails);const c={},m=await this.request({path:"/auth/login",method:"GET",headers:c,query:o},a);return new Tr(m)}async getAuthLogin(n={},a){await this.getAuthLoginRaw(n,a)}async getAuthLogoutRaw(n,a){const o={};n.postLogoutRedirectUri!=null&&(o.post_logout_redirect_uri=n.postLogoutRedirectUri),n.idTokenHint!=null&&(o.id_token_hint=n.idTokenHint),n.clientId!=null&&(o.client_id=n.clientId);const c={},m=await this.request({path:"/auth/logout",method:"GET",headers:c,query:o},a);return new Tr(m)}async getAuthLogout(n={},a){await this.getAuthLogoutRaw(n,a)}async getAuthUserinfoRaw(n,a){if(n.authorization==null)throw new we("authorization",'Required parameter "authorization" was null or undefined when calling getAuthUserinfo().');const o={},c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/auth/userinfo",method:"GET",headers:c,query:o},a);return new Ne(m,f=>j2(f))}async getAuthUserinfo(n,a){return await(await this.getAuthUserinfoRaw(n,a)).value()}async postAuthIntrospectRaw(n,a){if(n.postAuthIntrospectRequest==null)throw new we("postAuthIntrospectRequest",'Required parameter "postAuthIntrospectRequest" was null or undefined when calling postAuthIntrospect().');const o={},c={};c["Content-Type"]="application/json";const m=await this.request({path:"/auth/introspect",method:"POST",headers:c,query:o,body:TS(n.postAuthIntrospectRequest)},a);return new Ne(m,f=>CS(f))}async postAuthIntrospect(n,a){return await(await this.postAuthIntrospectRaw(n,a)).value()}async postAuthRegisterRaw(n,a){if(n.postAuthRegisterRequest==null)throw new we("postAuthRegisterRequest",'Required parameter "postAuthRegisterRequest" was null or undefined when calling postAuthRegister().');const o={},c={};c["Content-Type"]="application/json";const m=await this.request({path:"/auth/register",method:"POST",headers:c,query:o,body:US(n.postAuthRegisterRequest)},a);return new Tr(m)}async postAuthRegister(n,a){await this.postAuthRegisterRaw(n,a)}async postAuthTokenRaw(n,a){if(n.postAuthTokenRequest==null)throw new we("postAuthTokenRequest",'Required parameter "postAuthTokenRequest" was null or undefined when calling postAuthToken().');const o={},c={};c["Content-Type"]="application/json";const m=await this.request({path:"/auth/token",method:"POST",headers:c,query:o,body:LS(n.postAuthTokenRequest)},a);return new Ne(m,f=>OS(f))}async postAuthToken(n,a){return await(await this.postAuthTokenRaw(n,a)).value()}}class jk extends Pr{async deleteAdminHealthcareUsersByUserIdRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminHealthcareUsersByUserId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/healthcare-users/{userId}";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>Do(f))}async deleteAdminHealthcareUsersByUserId(n,a){return await(await this.deleteAdminHealthcareUsersByUserIdRaw(n,a)).value()}async getAdminHealthcareUsersRaw(n,a){const o={};n.limit!=null&&(o.limit=n.limit),n.offset!=null&&(o.offset=n.offset);const c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/healthcare-users/",method:"GET",headers:c,query:o},a);return new Ne(m,f=>f.map(uc))}async getAdminHealthcareUsers(n={},a){return await(await this.getAdminHealthcareUsersRaw(n,a)).value()}async getAdminHealthcareUsersByUserIdRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling getAdminHealthcareUsersByUserId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/healthcare-users/{userId}";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"GET",headers:c,query:o},a);return new Ne(m,f=>uc(f))}async getAdminHealthcareUsersByUserId(n,a){return await(await this.getAdminHealthcareUsersByUserIdRaw(n,a)).value()}async postAdminHealthcareUsersRaw(n,a){if(n.postAdminHealthcareUsersRequest==null)throw new we("postAdminHealthcareUsersRequest",'Required parameter "postAdminHealthcareUsersRequest" was null or undefined when calling postAdminHealthcareUsers().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/healthcare-users/",method:"POST",headers:c,query:o,body:aS(n.postAdminHealthcareUsersRequest)},a);return new Ne(m,f=>uc(f))}async postAdminHealthcareUsers(n,a){return await(await this.postAdminHealthcareUsersRaw(n,a)).value()}async putAdminHealthcareUsersByUserIdRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling putAdminHealthcareUsersByUserId().');if(n.putAdminHealthcareUsersByUserIdRequest==null)throw new we("putAdminHealthcareUsersByUserIdRequest",'Required parameter "putAdminHealthcareUsersByUserIdRequest" was null or undefined when calling putAdminHealthcareUsersByUserId().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/healthcare-users/{userId}";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:JS(n.putAdminHealthcareUsersByUserIdRequest)},a);return new Ne(m,f=>uc(f))}async putAdminHealthcareUsersByUserId(n,a){return await(await this.putAdminHealthcareUsersByUserIdRaw(n,a)).value()}}class Sk extends Pr{async deleteAdminIdpsByAliasRaw(n,a){if(n.alias==null)throw new we("alias",'Required parameter "alias" was null or undefined when calling deleteAdminIdpsByAlias().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/idps/{alias}";d=d.replace("{alias}",encodeURIComponent(String(n.alias)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminIdpsByAlias(n,a){return await(await this.deleteAdminIdpsByAliasRaw(n,a)).value()}async getAdminIdpsRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/idps/",method:"GET",headers:o,query:a},n);return new Ne(d,m=>m.map(xh))}async getAdminIdps(n){return await(await this.getAdminIdpsRaw(n)).value()}async getAdminIdpsByAliasRaw(n,a){if(n.alias==null)throw new we("alias",'Required parameter "alias" was null or undefined when calling getAdminIdpsByAlias().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/idps/{alias}";d=d.replace("{alias}",encodeURIComponent(String(n.alias)));const m=await this.request({path:d,method:"GET",headers:c,query:o},a);return new Ne(m,f=>xh(f))}async getAdminIdpsByAlias(n,a){return await(await this.getAdminIdpsByAliasRaw(n,a)).value()}async getAdminIdpsCountRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/idps/count",method:"GET",headers:o,query:a},n);return new Ne(d,m=>o2(m))}async getAdminIdpsCount(n){return await(await this.getAdminIdpsCountRaw(n)).value()}async postAdminIdpsRaw(n,a){if(n.postAdminIdpsRequest==null)throw new we("postAdminIdpsRequest",'Required parameter "postAdminIdpsRequest" was null or undefined when calling postAdminIdps().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/idps/",method:"POST",headers:c,query:o,body:lS(n.postAdminIdpsRequest)},a);return new Ne(m,f=>xh(f))}async postAdminIdps(n,a){return await(await this.postAdminIdpsRaw(n,a)).value()}async putAdminIdpsByAliasRaw(n,a){if(n.alias==null)throw new we("alias",'Required parameter "alias" was null or undefined when calling putAdminIdpsByAlias().');if(n.putAdminIdpsByAliasRequest==null)throw new we("putAdminIdpsByAliasRequest",'Required parameter "putAdminIdpsByAliasRequest" was null or undefined when calling putAdminIdpsByAlias().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/idps/{alias}";d=d.replace("{alias}",encodeURIComponent(String(n.alias)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:KS(n.putAdminIdpsByAliasRequest)},a);return new Ne(m,f=>on(f))}async putAdminIdpsByAlias(n,a){return await(await this.putAdminIdpsByAliasRaw(n,a)).value()}}class kk extends Pr{async deleteAdminLaunchContextsByUserIdEncounterRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdEncounter().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/encounter";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdEncounter(n,a){return await(await this.deleteAdminLaunchContextsByUserIdEncounterRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdFhirContextRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdFhirContext().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/fhir-context";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdFhirContext(n,a){return await(await this.deleteAdminLaunchContextsByUserIdFhirContextRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdFhirUserRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdFhirUser().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/fhir-user";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdFhirUser(n,a){return await(await this.deleteAdminLaunchContextsByUserIdFhirUserRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdIntentRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdIntent().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/intent";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdIntent(n,a){return await(await this.deleteAdminLaunchContextsByUserIdIntentRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdNeedPatientBannerRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdNeedPatientBanner().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/need-patient-banner";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdNeedPatientBanner(n,a){return await(await this.deleteAdminLaunchContextsByUserIdNeedPatientBannerRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdPatientRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdPatient().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/patient";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdPatient(n,a){return await(await this.deleteAdminLaunchContextsByUserIdPatientRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdSmartStyleUrlRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdSmartStyleUrl().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/smart-style-url";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdSmartStyleUrl(n,a){return await(await this.deleteAdminLaunchContextsByUserIdSmartStyleUrlRaw(n,a)).value()}async deleteAdminLaunchContextsByUserIdTenantRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling deleteAdminLaunchContextsByUserIdTenant().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/tenant";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminLaunchContextsByUserIdTenant(n,a){return await(await this.deleteAdminLaunchContextsByUserIdTenantRaw(n,a)).value()}async getAdminLaunchContextsRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/launch-contexts/",method:"GET",headers:o,query:a},n);return new Ne(d,m=>m.map(u2))}async getAdminLaunchContexts(n){return await(await this.getAdminLaunchContextsRaw(n)).value()}async postAdminLaunchContextsByUserIdEncounterByEncounterIdRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling postAdminLaunchContextsByUserIdEncounterByEncounterId().');if(n.encounterId==null)throw new we("encounterId",'Required parameter "encounterId" was null or undefined when calling postAdminLaunchContextsByUserIdEncounterByEncounterId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/encounter/{encounterId}";d=d.replace("{userId}",encodeURIComponent(String(n.userId))),d=d.replace("{encounterId}",encodeURIComponent(String(n.encounterId)));const m=await this.request({path:d,method:"POST",headers:c,query:o},a);return new Ne(m,f=>on(f))}async postAdminLaunchContextsByUserIdEncounterByEncounterId(n,a){return await(await this.postAdminLaunchContextsByUserIdEncounterByEncounterIdRaw(n,a)).value()}async postAdminLaunchContextsByUserIdFhirContextRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling postAdminLaunchContextsByUserIdFhirContext().');if(n.postAdminLaunchContextsByUserIdFhirContextRequest==null)throw new we("postAdminLaunchContextsByUserIdFhirContextRequest",'Required parameter "postAdminLaunchContextsByUserIdFhirContextRequest" was null or undefined when calling postAdminLaunchContextsByUserIdFhirContext().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/fhir-context";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"POST",headers:c,query:o,body:vS(n.postAdminLaunchContextsByUserIdFhirContextRequest)},a);return new Ne(m,f=>on(f))}async postAdminLaunchContextsByUserIdFhirContext(n,a){return await(await this.postAdminLaunchContextsByUserIdFhirContextRaw(n,a)).value()}async postAdminLaunchContextsByUserIdFhirUserByFhirUserIdRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling postAdminLaunchContextsByUserIdFhirUserByFhirUserId().');if(n.fhirUserId==null)throw new we("fhirUserId",'Required parameter "fhirUserId" was null or undefined when calling postAdminLaunchContextsByUserIdFhirUserByFhirUserId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/fhir-user/{fhirUserId}";d=d.replace("{userId}",encodeURIComponent(String(n.userId))),d=d.replace("{fhirUserId}",encodeURIComponent(String(n.fhirUserId)));const m=await this.request({path:d,method:"POST",headers:c,query:o},a);return new Ne(m,f=>on(f))}async postAdminLaunchContextsByUserIdFhirUserByFhirUserId(n,a){return await(await this.postAdminLaunchContextsByUserIdFhirUserByFhirUserIdRaw(n,a)).value()}async postAdminLaunchContextsByUserIdPatientByPatientIdRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling postAdminLaunchContextsByUserIdPatientByPatientId().');if(n.patientId==null)throw new we("patientId",'Required parameter "patientId" was null or undefined when calling postAdminLaunchContextsByUserIdPatientByPatientId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/patient/{patientId}";d=d.replace("{userId}",encodeURIComponent(String(n.userId))),d=d.replace("{patientId}",encodeURIComponent(String(n.patientId)));const m=await this.request({path:d,method:"POST",headers:c,query:o},a);return new Ne(m,f=>on(f))}async postAdminLaunchContextsByUserIdPatientByPatientId(n,a){return await(await this.postAdminLaunchContextsByUserIdPatientByPatientIdRaw(n,a)).value()}async putAdminLaunchContextsByUserIdIntentRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling putAdminLaunchContextsByUserIdIntent().');if(n.putAdminLaunchContextsByUserIdIntentRequest==null)throw new we("putAdminLaunchContextsByUserIdIntentRequest",'Required parameter "putAdminLaunchContextsByUserIdIntentRequest" was null or undefined when calling putAdminLaunchContextsByUserIdIntent().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/intent";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:ZS(n.putAdminLaunchContextsByUserIdIntentRequest)},a);return new Ne(m,f=>on(f))}async putAdminLaunchContextsByUserIdIntent(n,a){return await(await this.putAdminLaunchContextsByUserIdIntentRaw(n,a)).value()}async putAdminLaunchContextsByUserIdNeedPatientBannerRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling putAdminLaunchContextsByUserIdNeedPatientBanner().');if(n.putAdminLaunchContextsByUserIdNeedPatientBannerRequest==null)throw new we("putAdminLaunchContextsByUserIdNeedPatientBannerRequest",'Required parameter "putAdminLaunchContextsByUserIdNeedPatientBannerRequest" was null or undefined when calling putAdminLaunchContextsByUserIdNeedPatientBanner().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/need-patient-banner";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:ek(n.putAdminLaunchContextsByUserIdNeedPatientBannerRequest)},a);return new Ne(m,f=>on(f))}async putAdminLaunchContextsByUserIdNeedPatientBanner(n,a){return await(await this.putAdminLaunchContextsByUserIdNeedPatientBannerRaw(n,a)).value()}async putAdminLaunchContextsByUserIdSmartStyleUrlRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling putAdminLaunchContextsByUserIdSmartStyleUrl().');if(n.putAdminLaunchContextsByUserIdSmartStyleUrlRequest==null)throw new we("putAdminLaunchContextsByUserIdSmartStyleUrlRequest",'Required parameter "putAdminLaunchContextsByUserIdSmartStyleUrlRequest" was null or undefined when calling putAdminLaunchContextsByUserIdSmartStyleUrl().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/smart-style-url";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:rk(n.putAdminLaunchContextsByUserIdSmartStyleUrlRequest)},a);return new Ne(m,f=>on(f))}async putAdminLaunchContextsByUserIdSmartStyleUrl(n,a){return await(await this.putAdminLaunchContextsByUserIdSmartStyleUrlRaw(n,a)).value()}async putAdminLaunchContextsByUserIdTenantRaw(n,a){if(n.userId==null)throw new we("userId",'Required parameter "userId" was null or undefined when calling putAdminLaunchContextsByUserIdTenant().');if(n.putAdminLaunchContextsByUserIdTenantRequest==null)throw new we("putAdminLaunchContextsByUserIdTenantRequest",'Required parameter "putAdminLaunchContextsByUserIdTenantRequest" was null or undefined when calling putAdminLaunchContextsByUserIdTenant().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/launch-contexts/{userId}/tenant";d=d.replace("{userId}",encodeURIComponent(String(n.userId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:sk(n.putAdminLaunchContextsByUserIdTenantRequest)},a);return new Ne(m,f=>on(f))}async putAdminLaunchContextsByUserIdTenant(n,a){return await(await this.putAdminLaunchContextsByUserIdTenantRaw(n,a)).value()}}class Ak extends Pr{async getMonitoringOauthAnalyticsRaw(n,a){const o={},c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/analytics",method:"GET",headers:c,query:o},a);return new Ne(m,f=>q2(f))}async getMonitoringOauthAnalytics(n={},a){return await(await this.getMonitoringOauthAnalyticsRaw(n,a)).value()}async getMonitoringOauthAnalyticsExportRaw(n,a){if(n.authorization==null)throw new we("authorization",'Required parameter "authorization" was null or undefined when calling getMonitoringOauthAnalyticsExport().');const o={},c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/analytics/export",method:"GET",headers:c,query:o},a);return new Tr(m)}async getMonitoringOauthAnalyticsExport(n,a){await this.getMonitoringOauthAnalyticsExportRaw(n,a)}async getMonitoringOauthAnalyticsStreamRaw(n,a){const o={};n.token!=null&&(o.token=n.token);const c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/analytics/stream",method:"GET",headers:c,query:o},a);return new Tr(m)}async getMonitoringOauthAnalyticsStream(n={},a){await this.getMonitoringOauthAnalyticsStreamRaw(n,a)}async getMonitoringOauthEventsRaw(n,a){const o={};n.limit!=null&&(o.limit=n.limit),n.type!=null&&(o.type=n.type),n.status!=null&&(o.status=n.status),n.clientId!=null&&(o.clientId=n.clientId),n.since!=null&&(o.since=n.since);const c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/events",method:"GET",headers:c,query:o},a);return new Ne(m,f=>Q2(f))}async getMonitoringOauthEvents(n={},a){return await(await this.getMonitoringOauthEventsRaw(n,a)).value()}async getMonitoringOauthEventsExportRaw(n,a){if(n.authorization==null)throw new we("authorization",'Required parameter "authorization" was null or undefined when calling getMonitoringOauthEventsExport().');const o={},c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/events/export",method:"GET",headers:c,query:o},a);return new Tr(m)}async getMonitoringOauthEventsExport(n,a){await this.getMonitoringOauthEventsExportRaw(n,a)}async getMonitoringOauthEventsStreamRaw(n,a){const o={};n.token!=null&&(o.token=n.token);const c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/events/stream",method:"GET",headers:c,query:o},a);return new Tr(m)}async getMonitoringOauthEventsStream(n={},a){await this.getMonitoringOauthEventsStreamRaw(n,a)}async getMonitoringOauthHealthRaw(n,a){const o={},c={};if(n.authorization!=null&&(c.authorization=String(n.authorization)),this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/monitoring/oauth/health",method:"GET",headers:c,query:o},a);return new Tr(m)}async getMonitoringOauthHealth(n={},a){await this.getMonitoringOauthHealthRaw(n,a)}async getOauthMonitoringWebsocketInfoRaw(n){const a={},o={},d=await this.request({path:"/oauth/monitoring/websocket/info",method:"GET",headers:o,query:a},n);return new Tr(d)}async getOauthMonitoringWebsocketInfo(n){await this.getOauthMonitoringWebsocketInfoRaw(n)}}class Ck extends Pr{async deleteAdminRolesByRoleNameRaw(n,a){if(n.roleName==null)throw new we("roleName",'Required parameter "roleName" was null or undefined when calling deleteAdminRolesByRoleName().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/roles/{roleName}";d=d.replace("{roleName}",encodeURIComponent(String(n.roleName)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>an(f))}async deleteAdminRolesByRoleName(n,a){return await(await this.deleteAdminRolesByRoleNameRaw(n,a)).value()}async getAdminRolesRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/roles/",method:"GET",headers:o,query:a},n);return new Ne(d,m=>m.map(gh))}async getAdminRoles(n){return await(await this.getAdminRolesRaw(n)).value()}async getAdminRolesByRoleNameRaw(n,a){if(n.roleName==null)throw new we("roleName",'Required parameter "roleName" was null or undefined when calling getAdminRolesByRoleName().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/roles/{roleName}";d=d.replace("{roleName}",encodeURIComponent(String(n.roleName)));const m=await this.request({path:d,method:"GET",headers:c,query:o},a);return new Ne(m,f=>gh(f))}async getAdminRolesByRoleName(n,a){return await(await this.getAdminRolesByRoleNameRaw(n,a)).value()}async postAdminRolesRaw(n,a){if(n.postAdminRolesRequest==null)throw new we("postAdminRolesRequest",'Required parameter "postAdminRolesRequest" was null or undefined when calling postAdminRoles().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/roles/",method:"POST",headers:c,query:o,body:bS(n.postAdminRolesRequest)},a);return new Ne(m,f=>gh(f))}async postAdminRoles(n,a){return await(await this.postAdminRolesRaw(n,a)).value()}async putAdminRolesByRoleNameRaw(n,a){if(n.roleName==null)throw new we("roleName",'Required parameter "roleName" was null or undefined when calling putAdminRolesByRoleName().');if(n.putAdminRolesByRoleNameRequest==null)throw new we("putAdminRolesByRoleNameRequest",'Required parameter "putAdminRolesByRoleNameRequest" was null or undefined when calling putAdminRolesByRoleName().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/roles/{roleName}";d=d.replace("{roleName}",encodeURIComponent(String(n.roleName)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:ok(n.putAdminRolesByRoleNameRequest)},a);return new Ne(m,f=>on(f))}async putAdminRolesByRoleName(n,a){return await(await this.putAdminRolesByRoleNameRaw(n,a)).value()}}class Rk extends Pr{async getHealthRaw(n,a){const o={};n.force!=null&&(o.force=n.force);const c={},m=await this.request({path:"/health",method:"GET",headers:c,query:o},a);return new Ne(m,f=>D2(f))}async getHealth(n={},a){return await(await this.getHealthRaw(n,a)).value()}async getStatusRaw(n){const a={},o={},d=await this.request({path:"/status",method:"GET",headers:o,query:a},n);return new Ne(d,m=>nS(m))}async getStatus(n){return await(await this.getStatusRaw(n)).value()}}class Tk extends Pr{async getFhirServersRaw(n){const a={},o={},d=await this.request({path:"/fhir-servers/",method:"GET",headers:o,query:a},n);return new Ne(d,m=>C2(m))}async getFhirServers(n){return await(await this.getFhirServersRaw(n)).value()}async getFhirServersByServerIdRaw(n,a){if(n.serverId==null)throw new we("serverId",'Required parameter "serverId" was null or undefined when calling getFhirServersByServerId().');const o={},c={};let d="/fhir-servers/{server_id}";d=d.replace("{server_id}",encodeURIComponent(String(n.serverId)));const m=await this.request({path:d,method:"GET",headers:c,query:o},a);return new Ne(m,f=>T2(f))}async getFhirServersByServerId(n,a){return await(await this.getFhirServersByServerIdRaw(n,a)).value()}async getFhirServersByServerIdMtlsRaw(n,a){if(n.serverId==null)throw new we("serverId",'Required parameter "serverId" was null or undefined when calling getFhirServersByServerIdMtls().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/fhir-servers/{server_id}/mtls";d=d.replace("{server_id}",encodeURIComponent(String(n.serverId)));const m=await this.request({path:d,method:"GET",headers:c,query:o},a);return new Ne(m,f=>M2(f))}async getFhirServersByServerIdMtls(n,a){return await(await this.getFhirServersByServerIdMtlsRaw(n,a)).value()}async postFhirServersRaw(n,a){if(n.postFhirServersRequest==null)throw new we("postFhirServersRequest",'Required parameter "postFhirServersRequest" was null or undefined when calling postFhirServers().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/fhir-servers/",method:"POST",headers:c,query:o,body:GS(n.postFhirServersRequest)},a);return new Ne(m,f=>zS(f))}async postFhirServers(n,a){return await(await this.postFhirServersRaw(n,a)).value()}async postFhirServersByServerIdMtlsCertificatesRaw(n,a){if(n.serverId==null)throw new we("serverId",'Required parameter "serverId" was null or undefined when calling postFhirServersByServerIdMtlsCertificates().');if(n.postFhirServersByServerIdMtlsCertificatesRequest==null)throw new we("postFhirServersByServerIdMtlsCertificatesRequest",'Required parameter "postFhirServersByServerIdMtlsCertificatesRequest" was null or undefined when calling postFhirServersByServerIdMtlsCertificates().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/fhir-servers/{server_id}/mtls/certificates";d=d.replace("{server_id}",encodeURIComponent(String(n.serverId)));const m=await this.request({path:d,method:"POST",headers:c,query:o,body:$S(n.postFhirServersByServerIdMtlsCertificatesRequest)},a);return new Ne(m,f=>HS(f))}async postFhirServersByServerIdMtlsCertificates(n,a){return await(await this.postFhirServersByServerIdMtlsCertificatesRaw(n,a)).value()}async putFhirServersByServerIdRaw(n,a){if(n.serverId==null)throw new we("serverId",'Required parameter "serverId" was null or undefined when calling putFhirServersByServerId().');if(n.putFhirServersByServerIdRequest==null)throw new we("putFhirServersByServerIdRequest",'Required parameter "putFhirServersByServerIdRequest" was null or undefined when calling putFhirServersByServerId().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/fhir-servers/{server_id}";d=d.replace("{server_id}",encodeURIComponent(String(n.serverId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:bk(n.putFhirServersByServerIdRequest)},a);return new Ne(m,f=>hk(f))}async putFhirServersByServerId(n,a){return await(await this.putFhirServersByServerIdRaw(n,a)).value()}async putFhirServersByServerIdMtlsRaw(n,a){if(n.serverId==null)throw new we("serverId",'Required parameter "serverId" was null or undefined when calling putFhirServersByServerIdMtls().');if(n.putFhirServersByServerIdMtlsRequest==null)throw new we("putFhirServersByServerIdMtlsRequest",'Required parameter "putFhirServersByServerIdMtlsRequest" was null or undefined when calling putFhirServersByServerIdMtls().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/fhir-servers/{server_id}/mtls";d=d.replace("{server_id}",encodeURIComponent(String(n.serverId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:vk(n.putFhirServersByServerIdMtlsRequest)},a);return new Ne(m,f=>xk(f))}async putFhirServersByServerIdMtls(n,a){return await(await this.putFhirServersByServerIdMtlsRaw(n,a)).value()}}class Ek extends Pr{async deleteAdminSmartAppsByClientIdRaw(n,a){if(n.clientId==null)throw new we("clientId",'Required parameter "clientId" was null or undefined when calling deleteAdminSmartAppsByClientId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/smart-apps/{clientId}";d=d.replace("{clientId}",encodeURIComponent(String(n.clientId)));const m=await this.request({path:d,method:"DELETE",headers:c,query:o},a);return new Ne(m,f=>Do(f))}async deleteAdminSmartAppsByClientId(n,a){return await(await this.deleteAdminSmartAppsByClientIdRaw(n,a)).value()}async getAdminSmartAppsRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/smart-apps/",method:"GET",headers:o,query:a},n);return new Ne(d,m=>m.map(vh))}async getAdminSmartApps(n){return await(await this.getAdminSmartAppsRaw(n)).value()}async getAdminSmartAppsByClientIdRaw(n,a){if(n.clientId==null)throw new we("clientId",'Required parameter "clientId" was null or undefined when calling getAdminSmartAppsByClientId().');const o={},c={};if(this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/smart-apps/{clientId}";d=d.replace("{clientId}",encodeURIComponent(String(n.clientId)));const m=await this.request({path:d,method:"GET",headers:c,query:o},a);return new Ne(m,f=>vh(f))}async getAdminSmartAppsByClientId(n,a){return await(await this.getAdminSmartAppsByClientIdRaw(n,a)).value()}async postAdminSmartAppsRaw(n,a){if(n.postAdminSmartAppsRequest==null)throw new we("postAdminSmartAppsRequest",'Required parameter "postAdminSmartAppsRequest" was null or undefined when calling postAdminSmartApps().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}const m=await this.request({path:"/admin/smart-apps/",method:"POST",headers:c,query:o,body:kS(n.postAdminSmartAppsRequest)},a);return new Ne(m,f=>vh(f))}async postAdminSmartApps(n,a){return await(await this.postAdminSmartAppsRaw(n,a)).value()}async postAdminSmartConfigRefreshRaw(n){const a={},o={};if(this.configuration&&this.configuration.accessToken){const m=this.configuration.accessToken,f=await m("BearerAuth",[]);f&&(o.Authorization=`Bearer ${f}`)}const d=await this.request({path:"/admin/smart-config/refresh",method:"POST",headers:o,query:a},n);return new Tr(d)}async postAdminSmartConfigRefresh(n){await this.postAdminSmartConfigRefreshRaw(n)}async putAdminSmartAppsByClientIdRaw(n,a){if(n.clientId==null)throw new we("clientId",'Required parameter "clientId" was null or undefined when calling putAdminSmartAppsByClientId().');if(n.putAdminSmartAppsByClientIdRequest==null)throw new we("putAdminSmartAppsByClientIdRequest",'Required parameter "putAdminSmartAppsByClientIdRequest" was null or undefined when calling putAdminSmartAppsByClientId().');const o={},c={};if(c["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken){const f=this.configuration.accessToken,p=await f("BearerAuth",[]);p&&(c.Authorization=`Bearer ${p}`)}let d="/admin/smart-apps/{clientId}";d=d.replace("{clientId}",encodeURIComponent(String(n.clientId)));const m=await this.request({path:d,method:"PUT",headers:c,query:o,body:dk(n.putAdminSmartAppsByClientIdRequest)},a);return new Ne(m,f=>Do(f))}async putAdminSmartAppsByClientId(n,a){return await(await this.putAdminSmartAppsByClientIdRaw(n,a)).value()}}let Eo=null;const mg=e=>{Eo=e};let oa=!1;const Uk=async e=>{console.info("handleApiError called with:",e);let n=!1;if(e instanceof O0&&(e.response.status===401||e.response.status===403)&&(console.warn("Authentication error detected (ResponseError)"),n=!0),!n&&e&&typeof e=="object"){const a=e,o=a.status||a.response?.status||a.responseData?.status;if((o===401||o===403)&&(console.warn("Authentication error detected (status check)"),n=!0),!n&&typeof a.message=="string"&&a.message.includes("401")&&(console.warn("Authentication error detected (message check)"),n=!0),!n){const c=a.responseData;c&&typeof c.error=="string"&&c.error.includes("401")&&(console.warn("Authentication error detected (responseData check)"),n=!0)}}if(n&&!oa){console.debug("🔄 Attempting token refresh before logout..."),oa=!0;try{if((await Hn("openid_tokens"))?.refresh_token){const{useAuthStore:o}=await Oj(async()=>{const{useAuthStore:m}=await Promise.resolve().then(()=>Yk);return{useAuthStore:m}},void 0);if(await o.getState().refreshTokens(),await ha())throw console.debug("✅ Token refreshed successfully, retry might succeed"),oa=!1,new Error("TOKEN_REFRESHED")}console.warn("❌ Token refresh failed or no refresh token, triggering logout")}catch(a){if(a instanceof Error&&a.message==="TOKEN_REFRESHED")throw a;console.error("❌ Error during refresh attempt:",a)}finally{oa=!1}if(console.warn("🚪 Authentication failed after refresh attempt, logging out"),Eo){Eo();return}}else if(n&&oa){console.debug("🔄 Refresh already in progress, waiting and then triggering logout"),setTimeout(()=>{Eo&&oa&&(console.warn("🚪 Refresh timeout, forcing logout"),oa=!1,Eo())},3e3);return}throw e},mn=e=>{const n=un.api.baseUrl;return new Zh({basePath:n,accessToken:e})},Ik=e=>new Nk(mn(e)),Mk=e=>new $0(mn(e)),_k=e=>new jk(mn(e)),Dk=e=>new Sk(mn(e)),Ok=e=>new kk(mn(e)),yc=e=>new Ak(mn(e)),Pk=e=>new Ck(mn(e)),Lk=e=>new Ek(mn(e)),Bk=e=>new Tk(mn(e)),zk=e=>new Rk(mn(e)),tn=e=>new Proxy(e,{get(n,a,o){const c=Reflect.get(n,a,o);return typeof c=="function"?async(...d)=>{try{return await c.apply(n,d)}catch(m){try{throw await Uk(m),m}catch(f){throw f instanceof Error&&f.message==="TOKEN_REFRESHED"?m:f}}}:c}}),ln=e=>({admin:tn(Ik(e)),auth:tn(Mk(e)),healthcareUsers:tn(_k(e)),identityProviders:tn(Dk(e)),launchContexts:tn(Ok(e)),oauthMonitoring:tn(yc(e)),roles:tn(Pk(e)),smartApps:tn(Lk(e)),servers:tn(Bk(e)),server:tn(zk(e))}),ha=async()=>{try{return(await Hn("openid_tokens"))?.access_token||null}catch(e){return console.error("❌ Error retrieving stored token:",e),null}},fg=async()=>{const e=await ha();return ln(e||void 0)},pg=300*1e3,V0=qc()(Xh((e,n)=>({servers:[],serversLoading:!1,serversError:null,serversLastFetched:null,healthcareUsers:[],healthcareUsersLoading:!1,healthcareUsersError:null,healthcareUsersLastFetched:null,launchContextSets:[],launchContextSetsLastUpdated:null,fetchServers:async()=>{if(n().isServersCacheValid()&&n().servers.length>0){console.debug("🎯 Using cached FHIR servers data");return}e({serversLoading:!0,serversError:null});try{console.debug("🔄 Fetching FHIR servers from API...");const{servers:a}=await fg(),o=await a.getFhirServers();console.debug("✅ FHIR servers fetched successfully:",{totalServers:o.totalServers,servers:o.servers.map(c=>({name:c.name,url:c.url,supported:c.supported}))}),e({servers:o.servers,serversLoading:!1,serversError:null,serversLastFetched:Date.now()})}catch(a){console.error("❌ Failed to fetch FHIR servers:",a);const o=a instanceof Error?a.message:"Failed to fetch FHIR servers";throw e({serversLoading:!1,serversError:o}),a}},fetchHealthcareUsers:async()=>{if(n().isHealthcareUsersCacheValid()&&n().healthcareUsers.length>0){console.debug("🎯 Using cached healthcare users data");return}e({healthcareUsersLoading:!0,healthcareUsersError:null});try{console.debug("🔄 Fetching healthcare users from API...");const{healthcareUsers:a}=await fg(),o=await a.getAdminHealthcareUsers();console.debug("✅ Healthcare users fetched successfully:",{totalUsers:o.length,usernames:o.map(c=>c.username)}),e({healthcareUsers:o,healthcareUsersLoading:!1,healthcareUsersError:null,healthcareUsersLastFetched:Date.now()})}catch(a){console.error("❌ Failed to fetch healthcare users:",a);const o=a instanceof Error?a.message:"Failed to fetch healthcare users";throw e({healthcareUsersLoading:!1,healthcareUsersError:o}),a}},clearServersError:()=>e({serversError:null}),clearHealthcareUsersError:()=>e({healthcareUsersError:null}),updateHealthcareUser:(a,o)=>{const{healthcareUsers:c}=n(),d=c.map(m=>m.id===a?o:m);e({healthcareUsers:d}),console.debug("✅ Healthcare user updated in store:",{userId:a,username:o.username})},addLaunchContextSet:a=>{const{launchContextSets:o}=n(),c=[...o,a];e({launchContextSets:c,launchContextSetsLastUpdated:Date.now()}),console.debug("✅ Launch context set added:",{id:a.id,name:a.name})},updateLaunchContextSet:(a,o)=>{const{launchContextSets:c}=n(),d=c.map(m=>m.id===a?o:m);e({launchContextSets:d,launchContextSetsLastUpdated:Date.now()}),console.debug("✅ Launch context set updated:",{id:a,name:o.name})},deleteLaunchContextSet:a=>{const{launchContextSets:o}=n(),c=o.filter(d=>d.id!==a);e({launchContextSets:c,launchContextSetsLastUpdated:Date.now()}),console.debug("✅ Launch context set deleted:",{id:a})},getLaunchContextSets:()=>n().launchContextSets,refreshAll:async()=>{console.debug("🔄 Refreshing all FHIR data...");const a=[n().fetchServers(),n().fetchHealthcareUsers()];try{await Promise.allSettled(a),console.debug("✅ All FHIR data refreshed")}catch(o){console.error("❌ Some data failed to refresh:",o)}},invalidateServers:()=>e({serversLastFetched:null}),invalidateHealthcareUsers:()=>e({healthcareUsersLastFetched:null}),isServersCacheValid:()=>{const{serversLastFetched:a}=n();return a?Date.now()-a<pg:!1},isHealthcareUsersCacheValid:()=>{const{healthcareUsersLastFetched:a}=n();return a?Date.now()-a<pg:!1}}),{name:"fhir-store",storage:Hc(()=>localStorage),partialize:e=>({servers:e.servers,serversLastFetched:e.serversLastFetched,healthcareUsers:e.healthcareUsers,healthcareUsersLastFetched:e.healthcareUsersLastFetched,launchContextSets:e.launchContextSets,launchContextSetsLastUpdated:e.launchContextSetsLastUpdated})})),G0=()=>{const e=V0();return ma.useEffect(()=>{!e.isServersCacheValid()&&!e.serversLoading&&e.servers.length===0&&e.fetchServers().catch(console.error)},[e]),{servers:e.servers,loading:e.serversLoading,error:e.serversError,refresh:e.fetchServers,clearError:e.clearServersError}},qk=()=>{const e=V0();return{contextSets:e.launchContextSets,lastUpdated:e.launchContextSetsLastUpdated,addContextSet:e.addLaunchContextSet,updateContextSet:e.updateLaunchContextSet,deleteContextSet:e.deleteLaunchContextSet,getContextSets:e.getLaunchContextSets}};function Hk({open:e,onClose:n,onAddApp:a,scopeSets:o}){const{servers:c,loading:d}=G0(),[m,f]=k.useState({name:"",clientId:"",redirectUris:[],description:"",defaultScopes:[],scopeSetId:"",optionalScopes:[],appType:"standalone-app",authenticationType:"asymmetric",serverAccessType:"all-servers",allowedServerIds:[],publicClient:!1,webOrigins:[],smartVersion:"2.0.0",fhirVersion:"R4",systemScopes:[]}),p=S=>S?S==="standalone-app"||S==="ehr-launch":!1,x=S=>p(S),j=S=>S?S==="backend-service"||S==="agent":!1,b=S=>"asymmetric",y=S=>S==="agent"?"Agents require private key JWT for secure autonomous authentication":S==="backend-service"?"Backend services require private key JWT for secure server-to-server communication":"",_=S=>S==="backend-service"?"Backend services use client credentials flow - no redirect URI needed":S==="agent"?"Agents use client credentials flow - no interactive login or redirect URI needed":"",B=S=>S==="agent",P=S=>{switch(S){case"all-servers":return"App can access all FHIR servers behind the Proxy";case"selected-servers":return"App is restricted to specific FHIR servers only";case"user-person-servers":return"App can only access servers where the user has associated Person records (not available for backend services)";default:return""}},L=S=>{if(!S)return"Custom";const w=o.find(I=>I.id===S);return w?w.name:"Unknown"},U=S=>{S.preventDefault();let w=[...m.defaultScopes||[]];if(m.scopeSetId){const I=o.find(J=>J.id===m.scopeSetId);I&&(w=[...I.scopes,...m.optionalScopes||[]])}else w=[...m.defaultScopes||[],...m.optionalScopes||[]];a({name:m.name,clientId:m.clientId,redirectUris:m.redirectUris||[],description:m.description,defaultScopes:w,scopeSetId:m.scopeSetId,optionalScopes:m.optionalScopes||[],appType:m.appType,authenticationType:m.authenticationType,serverAccessType:m.serverAccessType,allowedServerIds:m.allowedServerIds||[]}),f({name:"",clientId:"",redirectUris:[],description:"",defaultScopes:[],scopeSetId:"",optionalScopes:[],appType:"standalone-app",authenticationType:"asymmetric",serverAccessType:"all-servers",allowedServerIds:[]}),n()},T=()=>{f({name:"",clientId:"",redirectUris:[],description:"",defaultScopes:[],scopeSetId:"",optionalScopes:[],appType:"standalone-app",authenticationType:"asymmetric",serverAccessType:"all-servers",allowedServerIds:[]}),n()};return e?t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-8 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(At,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Register New SMART on FHIR Application"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Add a new healthcare application to your system"})]})]})}),t.jsxs("form",{onSubmit:U,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"name",className:"text-sm font-semibold text-foreground",children:"Application Name"}),t.jsx(Ae,{id:"name",placeholder:"e.g., Clinical Decision Support",value:m.name,onChange:S=>f({...m,name:S.target.value}),className:"rounded-xl border-input focus:border-ring focus:ring-ring shadow-sm",required:!0})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"clientId",className:"text-sm font-semibold text-foreground",children:"Client ID"}),t.jsx(Ae,{id:"clientId",placeholder:"e.g., app-client-123",value:m.clientId,onChange:S=>f({...m,clientId:S.target.value}),className:"rounded-xl border-input focus:border-ring focus:ring-ring shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"appType",className:"text-sm font-semibold text-foreground",children:"Application Type"}),t.jsxs("select",{id:"appType",value:m.appType,onChange:S=>{const w=S.target.value;f({...m,appType:w,redirectUris:x(w)?m.redirectUris:[],authenticationType:j(w)?b(w):m.authenticationType})},className:"flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",required:!0,children:[t.jsx("option",{value:"standalone-app",children:"Standalone App (Interactive)"}),t.jsx("option",{value:"ehr-launch",children:"EHR Launch App (Interactive)"}),t.jsx("option",{value:"backend-service",children:"Backend Service (Non-interactive, Deterministic)"}),t.jsx("option",{value:"agent",children:"AI Agent (Non-interactive, Autonomous)"})]})]}),p(m.appType)&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"authenticationType",className:"text-sm font-semibold text-foreground",children:"Authentication Type"}),t.jsxs("select",{id:"authenticationType",value:m.authenticationType,onChange:S=>f({...m,authenticationType:S.target.value}),className:"flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",required:!0,children:[t.jsx("option",{value:"asymmetric",children:"Asymmetric Client Authentication"}),t.jsx("option",{value:"symmetric",children:"Symmetric Client Authentication"})]})]}),j(m.appType)&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground",children:"Authentication Type"}),t.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",children:"Asymmetric (Required)"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:y(m.appType)})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"redirectUri",className:"text-sm font-semibold text-foreground",children:"Redirect URI"}),t.jsx(Ae,{id:"redirectUri",type:"url",placeholder:"https://your-app.com/callback",value:(m.redirectUris||[])[0]||"",onChange:S=>f({...m,redirectUris:S.target.value?[S.target.value]:[]}),className:"rounded-xl border-input focus:border-ring focus:ring-ring shadow-sm",required:x(m.appType),disabled:!x(m.appType)}),!x(m.appType)&&t.jsx("p",{className:"text-xs text-muted-foreground",children:_(m.appType)}),B(m.appType)&&t.jsx("div",{className:"mt-3 p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(tt,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-1",children:"Agent Flow Characteristics"}),t.jsx("p",{className:"text-purple-700 dark:text-purple-400 mb-2",children:"Autonomous agents operate like backend services (no user login) but with non-deterministic, self-initiated behavior:"}),t.jsxs("ul",{className:"text-purple-700 dark:text-purple-400 text-xs space-y-1 ml-4 list-disc",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"No interactive login"})," - Uses client credentials like backend services"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Non-deterministic"})," - Makes autonomous decisions based on environmental triggers"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Dynamic identity"})," - fhirUser resolved to specific Device resource at runtime"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Self-initiated"})," - Actions triggered by AI/ML algorithms, not scheduled tasks"]})]})]})]})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"description",className:"text-sm font-semibold text-foreground",children:"Description"}),t.jsx(Ae,{id:"description",placeholder:"Brief description of the application",value:m.description,onChange:S=>f({...m,description:S.target.value}),className:"rounded-xl border-input focus:border-ring focus:ring-ring shadow-sm"})]}),t.jsxs("div",{className:"space-y-6 p-6 bg-orange-500/10 rounded-xl border border-orange-500/20",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-500/10 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(_t,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:"Server Access Configuration"}),t.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Control which FHIR servers this application can access"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"serverAccessType",className:"text-sm font-semibold text-foreground",children:"Server Access Type"}),t.jsxs("select",{id:"serverAccessType",value:m.serverAccessType,onChange:S=>{const w=S.target.value;f({...m,serverAccessType:w,allowedServerIds:w==="selected-servers"?m.allowedServerIds:[]})},className:"flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",required:!0,children:[t.jsx("option",{value:"all-servers",children:"All Available Servers"}),t.jsx("option",{value:"selected-servers",children:"Specific Servers Only"}),m.appType!=="backend-service"&&t.jsx("option",{value:"user-person-servers",children:"Servers with User Person Records"})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:P(m.serverAccessType)})]}),m.serverAccessType==="selected-servers"&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground",children:"Select Allowed Servers"}),d?t.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[t.jsx("div",{className:"animate-spin inline-block w-4 h-4 border-2 border-border border-t-primary rounded-full mr-2"}),"Loading available servers..."]}):c.length===0?t.jsxs("div",{className:"p-4 text-center text-muted-foreground bg-muted/50 rounded-lg border border-border",children:[t.jsx(_t,{className:"w-6 h-6 mx-auto mb-2 text-muted-foreground"}),t.jsx("p",{className:"text-sm",children:"No FHIR servers available"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure FHIR servers first"})]}):t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto p-3 bg-card rounded-lg border border-border",children:c.map(S=>t.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-muted/50 rounded-lg cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:(m.allowedServerIds||[]).includes(S.id),onChange:w=>{const I=w.target.checked?[...m.allowedServerIds||[],S.id]:(m.allowedServerIds||[]).filter(J=>J!==S.id);f({...m,allowedServerIds:I})},className:"w-4 h-4 text-primary border-border rounded focus:ring-ring"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-sm font-medium text-foreground truncate",children:S.name}),S.supported?t.jsx(Nt,{className:"w-4 h-4 text-green-500 dark:text-green-400 flex-shrink-0"}):t.jsx(tt,{className:"w-4 h-4 text-red-500 dark:text-red-400 flex-shrink-0"})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[t.jsx("span",{className:"truncate",children:S.url}),t.jsx(ge,{variant:"outline",className:"text-xs",children:S.fhirVersion})]})]})]},S.id))}),(m.allowedServerIds||[]).length>0&&t.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 bg-green-500/10 p-2 rounded-lg border border-green-500/20",children:["✓ ",(m.allowedServerIds||[]).length," server(s) selected"]})]}),m.serverAccessType==="user-person-servers"&&t.jsx("div",{className:"p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(yr,{className:"w-4 h-4 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"font-semibold text-purple-800 dark:text-purple-300 mb-1",children:"User Person Server Access"}),t.jsx("p",{className:"text-purple-700 dark:text-purple-400 mb-2",children:"This app will only be able to access FHIR servers where the authenticated user has an associated Person resource."}),t.jsxs("ul",{className:"text-purple-700 dark:text-purple-400 text-xs space-y-1 ml-4 list-disc",children:[t.jsx("li",{children:"Server access is determined dynamically at runtime"}),t.jsx("li",{children:"Based on the user's Person resource links"}),t.jsx("li",{children:"Provides automatic data governance and access control"}),t.jsx("li",{children:"Only available for interactive applications (not backend services)"})]})]})]})}),m.serverAccessType==="all-servers"&&t.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(zn,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"font-semibold text-green-800 dark:text-green-300 mb-1",children:"All Server Access"}),t.jsx("p",{className:"text-green-700 dark:text-green-400 text-xs",children:"This app will have access to all FHIR servers configured behind the Proxy. Use this option for apps that need broad access across all healthcare data sources."})]})]})})]})]}),t.jsxs("div",{className:"space-y-6 p-6 bg-blue-500/10 rounded-xl border border-blue-500/20",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:"Scope Configuration"}),t.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Define what data this application can access"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"scopeSet",className:"text-sm font-semibold text-foreground",children:"Scope Template"}),t.jsxs("select",{id:"scopeSet",value:m.scopeSetId,onChange:S=>f({...m,scopeSetId:S.target.value}),className:"flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",children:[t.jsx("option",{value:"",children:"Custom Scopes"}),o.map(S=>t.jsx("option",{value:S.id,children:S.name},S.id))]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"customScopes",className:"text-sm font-semibold text-foreground",children:"Additional Scopes"}),t.jsx(Ae,{id:"customScopes",placeholder:"patient/Patient.read, user/Observation.read",value:(m.optionalScopes||[]).join(", "),onChange:S=>f({...m,optionalScopes:S.target.value.split(",").map(w=>w.trim()).filter(Boolean)}),className:"rounded-xl border-input focus:border-ring focus:ring-ring shadow-sm"})]})]}),(m.scopeSetId||(m.optionalScopes||[]).length>0)&&t.jsxs("div",{className:"bg-card/50 p-4 rounded-lg border border-border",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-2 block",children:"Current Scope Preview"}),t.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["Template: ",t.jsx("span",{className:"font-medium",children:L(m.scopeSetId)})]}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.scopeSetId&&o.find(S=>S.id===m.scopeSetId)?.scopes.map((S,w)=>t.jsx(ge,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/20 font-mono",children:S},w)),(m.optionalScopes||[]).map((S,w)=>t.jsx(ge,{variant:"outline",className:"text-xs bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/20 font-mono",children:S},`optional-${w}`))]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx(ne,{type:"button",variant:"outline",onClick:T,className:"flex-1 rounded-xl py-3 font-semibold",children:"Cancel"}),t.jsxs(ne,{type:"submit",className:"flex-1 bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary text-primary-foreground font-semibold rounded-xl py-3 shadow-lg hover:shadow-xl transition-all duration-200",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Register Application"]})]})]})]}):null}function $c({className:e,...n}){return t.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:t.jsx("table",{"data-slot":"table",className:Ie("w-full caption-bottom text-sm",e),...n})})}function Vc({className:e,...n}){return t.jsx("thead",{"data-slot":"table-header",className:Ie("[&_tr]:border-b",e),...n})}function Gc({className:e,...n}){return t.jsx("tbody",{"data-slot":"table-body",className:Ie("[&_tr:last-child]:border-0",e),...n})}function Us({className:e,...n}){return t.jsx("tr",{"data-slot":"table-row",className:Ie("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...n})}function at({className:e,...n}){return t.jsx("th",{"data-slot":"table-head",className:Ie("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function it({className:e,...n}){return t.jsx("td",{"data-slot":"table-cell",className:Ie("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function mi({...e}){return t.jsx(Cw,{"data-slot":"dropdown-menu",...e})}function fi({...e}){return t.jsx(Rw,{"data-slot":"dropdown-menu-trigger",...e})}function pi({className:e,sideOffset:n=4,...a}){return t.jsx(Tw,{children:t.jsx(Ew,{"data-slot":"dropdown-menu-content",sideOffset:n,className:Ie("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...a})})}function ft({className:e,inset:n,variant:a="default",...o}){return t.jsx(Uw,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":a,className:Ie("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o})}function hc({className:e,...n}){return t.jsx(Iw,{"data-slot":"dropdown-menu-separator",className:Ie("bg-border -mx-1 my-1 h-px",e),...n})}function Fk({apps:e,scopeSets:n,onToggleAppStatus:a,onOpenScopeEditor:o,onDeleteApp:c}){const d=x=>{switch(x.serverAccessType){case"all-servers":return{label:"All Servers",className:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",icon:zn};case"selected-servers":return{label:`${x.allowedServerIds?.length||0} Servers`,className:"bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",icon:_t};case"user-person-servers":return{label:"User Person Servers",className:"bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-800",icon:yr};default:return{label:"Unknown",className:"bg-muted/50 text-muted-foreground border-border",icon:tt}}},m=(x,j)=>{switch(x){case"backend-service":return{label:"Backend Service",className:"bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800"};case"standalone-app":return{label:`Standalone (${j==="asymmetric"?"Asymmetric":"Symmetric"})`,className:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800"};case"ehr-launch":return{label:`EHR Launch (${j==="asymmetric"?"Asymmetric":"Symmetric"})`,className:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800"};case"agent":return{label:`AI Agent (${j==="asymmetric"?"Asymmetric":"Symmetric"})`,className:"bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-800"};default:return{label:"Unknown",className:"bg-muted/50 text-muted-foreground border-border"}}},f=x=>{switch(x){case"backend-service":return"🔧";case"standalone-app":return"📱";case"ehr-launch":return"🏥";case"agent":return"🤖";default:return"❓"}},p=x=>{if(!x)return"Custom";const j=n.find(b=>b.id===x);return j?j.name:"Unknown"};return t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:t.jsxs("div",{className:"p-8 pb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 dark:bg-primary/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Registered Applications"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"View and manage all SMART on FHIR applications"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs($c,{children:[t.jsx(Vc,{children:t.jsxs(Us,{className:"border-border/50",children:[t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Application"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Type & Auth"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Server Access"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Client ID"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Status"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Scopes"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Last Used"}),t.jsx(at,{className:"w-12"})]})}),t.jsx(Gc,{children:e.map(x=>{const j=m(x.appType||"standalone-app",x.authenticationType||"symmetric");return t.jsxs(Us,{className:"border-border/50 hover:bg-muted/50 transition-colors duration-200",children:[t.jsx(it,{children:t.jsx("div",{className:"py-2",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("span",{className:"text-lg",children:f(x.appType||"standalone-app")}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-foreground",children:x.name}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:x.description})]})]})})}),t.jsx(it,{children:t.jsx(ge,{className:`${j.className} shadow-sm`,children:j.label})}),t.jsx(it,{children:(()=>{const b=d(x),y=b.icon;return t.jsxs("div",{className:"space-y-1",children:[t.jsxs(ge,{className:`${b.className} shadow-sm`,children:[t.jsx(y,{className:"w-3 h-3 mr-1"}),b.label]}),x.serverAccessType==="selected-servers"&&x.allowedServerIds&&t.jsx("div",{className:"text-xs text-muted-foreground",children:x.allowedServerIds.join(", ")})]})})()}),t.jsx(it,{children:t.jsx("code",{className:"bg-muted/50 px-3 py-2 rounded-lg text-sm font-medium text-foreground shadow-sm border border-border",children:x.clientId})}),t.jsx(it,{children:t.jsx(ge,{variant:x.status==="active"?"default":"secondary",className:x.status==="active"?"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800":"bg-muted/50 text-muted-foreground border-border",children:x.status})}),t.jsx(it,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",children:p(x.scopeSetId)}),t.jsxs(ge,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:[(x.defaultClientScopes||[]).length+(x.optionalClientScopes||[]).length," scopes"]})]}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[(x.defaultClientScopes||[]).slice(0,2).map((b,y)=>t.jsx(ge,{variant:"outline",className:"text-xs bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800 font-mono",children:b.split("/")[1]?.split(".")[0]||b},`default-${y}`)),(x.defaultClientScopes||[]).length<2&&(x.optionalClientScopes||[]).slice(0,2-(x.defaultClientScopes||[]).length).map((b,y)=>t.jsxs(ge,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800 font-mono",children:[b.split("/")[1]?.split(".")[0]||b," (opt)"]},`optional-${y}`)),(x.defaultClientScopes||[]).length+(x.optionalClientScopes||[]).length>2&&t.jsxs(ge,{variant:"outline",className:"text-xs bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-800",children:["+",(x.defaultClientScopes||[]).length+(x.optionalClientScopes||[]).length-2]})]}),(x.optionalClientScopes||[]).length>0&&t.jsx("div",{className:"flex items-center space-x-1",children:t.jsxs(ge,{variant:"outline",className:"text-xs bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:[(x.optionalClientScopes||[]).length," optional"]})})]})}),t.jsx(it,{className:"text-sm text-muted-foreground font-medium",children:x.lastUsed}),t.jsx(it,{children:t.jsxs(mi,{children:[t.jsx(fi,{asChild:!0,children:t.jsx(ne,{variant:"ghost",className:"h-10 w-10 p-0 rounded-xl hover:bg-muted transition-colors duration-200",children:t.jsx(Gh,{className:"h-4 w-4"})})}),t.jsxs(pi,{align:"end",className:"rounded-xl border-border/50 shadow-lg",children:[t.jsx(ft,{onClick:()=>x.id&&a(x.id),className:"rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[x.status==="active"?t.jsx($n,{className:"w-4 h-4 mr-2 text-red-600 dark:text-red-400"}):t.jsx(Nt,{className:"w-4 h-4 mr-2 text-green-600 dark:text-green-400"}),x.status==="active"?"Deactivate":"Activate"]})}),t.jsxs(ft,{onClick:()=>o(x),className:"rounded-lg",children:[t.jsx(Pe,{className:"w-4 h-4 mr-2 text-primary"}),"Manage Scopes"]}),t.jsxs(ft,{className:"rounded-lg",children:[t.jsx(_s,{className:"w-4 h-4 mr-2 text-muted-foreground"}),"Edit Details"]}),t.jsxs(ft,{className:"rounded-lg",children:[t.jsx(Io,{className:"w-4 h-4 mr-2 text-muted-foreground"}),"View Configuration"]}),t.jsxs(ft,{className:"rounded-lg",children:[t.jsx(Jr,{className:"w-4 h-4 mr-2 text-muted-foreground"}),"Authentication Settings"]}),t.jsxs(ft,{onClick:()=>x.id&&c(x.id),className:"text-red-600 dark:text-red-400 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",children:[t.jsx(va,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},x.id)})})]})})]})})}function $k({apps:e}){return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/10 dark:bg-blue-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(fa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 tracking-wide",children:"Total Apps"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),t.jsx("div",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 tracking-wide",children:"EHR Launch"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.appType==="ehr-launch").length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/10 dark:bg-blue-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(fa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("div",{className:"text-sm font-semibold text-blue-700 dark:text-blue-300 tracking-wide",children:"Standalone"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.appType==="standalone-app").length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-orange-500/10 dark:bg-orange-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsx("div",{className:"text-sm font-semibold text-orange-700 dark:text-orange-300 tracking-wide",children:"Backend Service"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.appType==="backend-service").length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-violet-500/10 dark:bg-violet-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx("span",{className:"text-xl",children:"🤖"})}),t.jsx("div",{className:"text-sm font-semibold text-violet-700 dark:text-violet-300 tracking-wide",children:"AI Agents"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.appType==="agent").length})]})})})]})}const Vk=Vh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Q0=k.forwardRef(({className:e,variant:n,...a},o)=>t.jsx("div",{ref:o,role:"alert",className:Ie(Vk({variant:n}),e),...a}));Q0.displayName="Alert";const Gk=k.forwardRef(({className:e,...n},a)=>t.jsx("h5",{ref:a,className:Ie("mb-1 font-medium leading-none tracking-tight",e),...n}));Gk.displayName="AlertTitle";const J0=k.forwardRef(({className:e,...n},a)=>t.jsx("div",{ref:a,className:Ie("text-sm [&_p]:leading-relaxed",e),...n}));J0.displayName="AlertDescription";class Qk{config;authApi;constructor(){this.config={baseUrl:un.api.baseUrl,clientId:"admin-ui",redirectUri:window.location.origin+un.app.baseUrl,scope:"openid profile email"},console.debug("OpenID Service Config:",this.config);const n=new Zh({basePath:this.config.baseUrl});this.authApi=new $0(n)}async getAuthorizationUrl(n){try{if(!(await this.authApi.getAuthConfig()).keycloak.isConfigured)throw new Error("Authentication is not configured. Please contact your administrator.")}catch(m){throw console.error("Failed to check auth configuration:",m),new Error("Unable to verify authentication configuration. Please try again later.")}const a=this.generateCodeVerifier(),o=await this.generateCodeChallenge(a),c=this.generateState(),d=new URL("/auth/authorize",this.config.baseUrl);return d.searchParams.set("response_type","code"),d.searchParams.set("client_id",this.config.clientId),d.searchParams.set("redirect_uri",this.config.redirectUri),d.searchParams.set("scope",this.config.scope),d.searchParams.set("code_challenge",o),d.searchParams.set("code_challenge_method","S256"),d.searchParams.set("state",c),n&&(d.searchParams.set("kc_idp_hint",n),console.debug("Using Identity Provider hint:",n)),console.debug("Generated Authorization URL:",d.href),console.debug("Redirect URI:",this.config.redirectUri),{url:d.href,codeVerifier:a,state:c}}async exchangeCodeForTokens(n,a){console.debug("OpenID Service: Starting token exchange..."),console.debug("Token exchange request details:",{codeLength:n.length,codeVerifierLength:a.length,clientId:this.config.clientId,redirectUri:this.config.redirectUri,hasClientSecret:!!this.config.clientSecret});const o={grantType:"authorization_code",code:n,clientId:this.config.clientId,clientSecret:this.config.clientSecret,redirectUri:this.config.redirectUri,codeVerifier:a};try{const c=await this.authApi.postAuthToken({postAuthTokenRequest:o});return console.debug("Token response received:",{hasAccessToken:!!c.accessToken,hasIdToken:!!c.idToken,hasRefreshToken:!!c.refreshToken,expiresIn:c.expiresIn}),{access_token:c.accessToken||"",id_token:c.idToken||void 0,refresh_token:c.refreshToken,expires_in:c.expiresIn}}catch(c){if(console.error("Token exchange API call failed:",c),c&&typeof c=="object"){const d=c;if(d.response)try{const m=await d.response.text();console.error("🚨 Token exchange error response body:",m);try{const f=JSON.parse(m);if(console.error("📋 Parsed error details:",f),f.error){const p=`OAuth error: ${f.error}${f.error_description?` - ${f.error_description}`:""}`;throw new Error(p)}}catch(f){console.error("Could not parse error response as JSON:",f)}}catch(m){console.error("Could not read error response text:",m)}console.error("🔍 Error object details:",{name:d.name,message:d.message,status:d.status,statusText:d.statusText,url:d.url,keys:Object.keys(d)})}throw c}}async fetchUserInfo(n){return await this.authApi.getAuthUserinfo({authorization:`Bearer ${n}`})}async refreshToken(n){console.debug("OpenID Service: Starting token refresh...");try{const a=await this.authApi.postAuthToken({postAuthTokenRequest:{grantType:"refresh_token",refreshToken:n,clientId:this.config.clientId,clientSecret:this.config.clientSecret}});return console.debug("Refresh token response received:",{hasAccessToken:!!a.accessToken,hasIdToken:!!a.idToken,hasRefreshToken:!!a.refreshToken,expiresIn:a.expiresIn}),{access_token:a.accessToken||"",id_token:a.idToken,refresh_token:a.refreshToken,expires_in:a.expiresIn}}catch(a){if(console.error("Token refresh API call failed:",a),a&&typeof a=="object"){const o=a;if(o.response)try{const c=await o.response.text();console.error("🚨 Token refresh error response body:",c);try{const d=JSON.parse(c);if(console.error("📋 Parsed refresh error details:",d),d.error){const m=`Token refresh failed: ${d.error}${d.error_description?` - ${d.error_description}`:""}`;throw new Error(m)}}catch(d){console.error("Could not parse refresh error response as JSON:",d)}}catch(c){console.error("Could not read refresh error response text:",c)}}throw a}}getLogoutUrl(n){const a=new URL("/auth/logout",this.config.baseUrl);return a.searchParams.set("post_logout_redirect_uri",this.config.redirectUri),a.searchParams.set("client_id",this.config.clientId),n&&a.searchParams.set("id_token_hint",n),a.searchParams.set("logout_hint","complete"),a.searchParams.set("_t",Date.now().toString()),a.href}async isAuthenticationAvailable(){try{return(await this.authApi.getAuthConfig()).keycloak.isConfigured}catch(n){return console.error("Failed to check auth configuration:",n),!1}}generateCodeVerifier(){const n=new Uint8Array(32);return crypto.getRandomValues(n),this.base64URLEncode(n)}async generateCodeChallenge(n){const o=new TextEncoder().encode(n),c=await crypto.subtle.digest("SHA-256",o);return this.base64URLEncode(new Uint8Array(c))}generateState(){const n=new Uint8Array(16);return crypto.getRandomValues(n),this.base64URLEncode(n)}base64URLEncode(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}}const oi=new Qk,em="openid_tokens",To=async()=>{try{return await Hn(em)}catch{return null}},xg=async e=>{await vc(em,e)},ri=async()=>{await Cc(em)},gg=e=>e.access_token?e.expires_at?Date.now()<e.expires_at*1e3:!0:!1,Jk=e=>{const n=a=>typeof a=="string"?a:typeof a=="number"?String(a):"";return{id:n(e.sub)||"",name:[{text:n(e.name||e.preferred_username||e.email)||"User"}],username:n(e.preferred_username||e.email)||"",email:n(e.email)||"",firstName:n(e.given_name)||"",lastName:n(e.family_name)||"",roles:Array.isArray(e.roles)?e.roles.map(String):[]}},ba=qc()(Xh((e,n)=>({profile:null,loading:!1,error:null,isAuthenticated:!1,isInitializing:!0,clientApis:ln(),initialize:async()=>{if(n().isInitializing){e({isInitializing:!0,loading:!0});try{const a=await To();if(!a){e({isAuthenticated:!1,profile:null,isInitializing:!1,loading:!1,clientApis:ln()});return}if(gg(a)){e({isAuthenticated:!0,clientApis:ln(a.access_token),isInitializing:!1,loading:!1}),mg(async()=>{console.log("Auth error handler triggered, logging out..."),await n().logout()}),n().profile||await n().fetchProfile();return}if(a.refresh_token){console.log("🔄 Tokens expired, attempting refresh...");try{await n().refreshTokens(),e({isInitializing:!1}),n().profile||await n().fetchProfile()}catch(o){console.warn("❌ Token refresh failed during initialization:",o),await ri(),e({isAuthenticated:!1,profile:null,isInitializing:!1,loading:!1,clientApis:ln()})}}else console.log("❌ No refresh token available, clearing auth state"),await ri(),e({isAuthenticated:!1,profile:null,isInitializing:!1,loading:!1,clientApis:ln()})}catch(a){console.error("❌ Error during auth initialization:",a),await ri(),e({isAuthenticated:!1,profile:null,isInitializing:!1,loading:!1,error:"Initialization failed",clientApis:ln()})}}},updateClientApis:async()=>{const o=(await To())?.access_token||void 0;e({clientApis:ln(o)}),mg(async()=>{console.log("Auth error handler triggered, logging out..."),await n().logout()})},initiateLogin:async a=>{e({loading:!0,error:null});try{const{url:o,codeVerifier:c,state:d}=await oi.getAuthorizationUrl(a);ug("pkce_code_verifier",c),ug("oauth_state",d),a&&console.log(`Initiating login with Identity Provider: ${a}`),window.location.href=o}catch(o){const c=o instanceof Error?o.message:"Failed to initiate login";e({loading:!1,error:c})}},exchangeCodeForToken:async(a,o)=>{console.log("🔄 Starting token exchange with code:",a.substring(0,10)+"..."),console.log("🔑 Using code verifier:",o.substring(0,10)+"..."),console.log("📍 Current URL:",window.location.href),console.log("🔗 Stored code verifier:",pa("pkce_code_verifier")?.substring(0,10)+"..."),e({loading:!0,error:null});try{const c=await oi.exchangeCodeForTokens(a,o),d={access_token:c.access_token,id_token:c.id_token,refresh_token:c.refresh_token,expires_at:c.expires_in?Math.floor(Date.now()/1e3)+c.expires_in:void 0};await xg(d),e({isAuthenticated:!0}),await n().updateClientApis(),await n().fetchProfile(),hi("pkce_code_verifier"),hi("oauth_state"),console.log("✅ Token exchange successful!")}catch(c){console.error("❌ Token exchange failed:",c),console.log("🔍 Failed with code:",a.substring(0,10)+"..."),console.log("🔍 Failed with verifier:",o.substring(0,10)+"...");const d=c instanceof Error?c.message:"Token exchange failed";throw e({profile:null,isAuthenticated:!1,loading:!1,error:d}),await ri(),c}finally{e({loading:!1})}},fetchProfile:async()=>{const a=await To();if(!a||!gg(a)){e({profile:null,isAuthenticated:!1}),await ri();return}e({loading:!0,error:null});try{const o=await oi.fetchUserInfo(a.access_token),c=Jk(o);e({profile:c,isAuthenticated:!0,loading:!1})}catch(o){const c=o instanceof Error?o.message:"Failed to fetch user profile";e({profile:null,isAuthenticated:!1,loading:!1,error:c}),await ri()}},refreshTokens:async()=>{const a=await To();if(!a?.refresh_token)throw console.warn("No refresh token available"),new Error("No refresh token available");e({loading:!0,error:null});try{const o=await oi.refreshToken(a.refresh_token),c={access_token:o.access_token,id_token:o.id_token||a.id_token,refresh_token:o.refresh_token||a.refresh_token,expires_at:o.expires_in?Math.floor(Date.now()/1e3)+o.expires_in:void 0};await xg(c),e({isAuthenticated:!0,loading:!1}),await n().updateClientApis(),console.debug("✅ Tokens refreshed successfully")}catch(o){throw console.error("❌ Token refresh failed:",o),e({loading:!1}),o}},logout:async()=>{const a=await To();console.log("🚪 Initiating logout with tokens:",{hasAccessToken:!!a?.access_token,hasIdToken:!!a?.id_token,hasRefreshToken:!!a?.refresh_token}),e({profile:null,isAuthenticated:!1,error:null,loading:!1,isInitializing:!0}),await n().updateClientApis(),await Gj(),await new Promise(c=>setTimeout(c,100));const o=oi.getLogoutUrl(a?.id_token);console.log("🔗 Logout URL:",o),window.location.href=o},clearError:()=>{e({error:null})}}),{name:"auth-store",storage:Hc(()=>localStorage),partialize:e=>({profile:e.profile,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{e&&(e.isInitializing=!0,e.clientApis=ln(),setTimeout(()=>{ba.getState().initialize()},0))}})),Vn=()=>{const e=ba();return ma.useEffect(()=>{e.isInitializing&&!e.loading&&e.initialize()},[e]),e},Yk=Object.freeze(Object.defineProperty({__proto__:null,useAuth:Vn,useAuthStore:ba},Symbol.toStringTag,{value:"Module"})),As=({id:e,checked:n,onCheckedChange:a})=>t.jsxs("label",{htmlFor:e,className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",id:e,className:"sr-only",checked:n,onChange:o=>a(o.target.checked)}),t.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${n?"bg-blue-600":"bg-gray-200"}`,children:t.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${n?"translate-x-5":"translate-x-0"} m-0.5`})})]}),Kk=["openid","profile","fhirUser","launch","launch/patient","launch/encounter","patient/*.read","patient/*.rs","user/*.read","user/*.rs","online_access"],Xk=["https://.*","http://localhost:.*","http://127\\.0\\.0\\.1:.*"];function Zk(){const{clientApis:e}=Vn(),[n,a]=k.useState({enabled:!0,requireHttps:!0,allowedScopes:Kk,maxClientLifetime:365,requireTermsOfService:!1,requirePrivacyPolicy:!1,allowPublicClients:!0,allowConfidentialClients:!0,allowBackendServices:!1,adminApprovalRequired:!1,rateLimitPerMinute:10,maxRedirectUris:5,allowedRedirectUriPatterns:Xk,notificationEmail:""}),[o,c]=k.useState(!0),[d,m]=k.useState(!1),[f,p]=k.useState(null),[x,j]=k.useState(""),[b,y]=k.useState(""),_=k.useCallback(async()=>{try{c(!0),p(null);const w=await e.admin.getAdminClientRegistrationSettings();a(w),p({type:"success",text:"Settings loaded successfully"})}catch(w){console.error("Failed to load settings:",w),p({type:"error",text:w instanceof Error?w.message:"Failed to load settings"})}finally{c(!1)}},[e]);k.useEffect(()=>{_()},[_]);const B=async()=>{try{m(!0),p(null),await e.admin.putAdminClientRegistrationSettings({getAdminClientRegistrationSettings200Response:n}),p({type:"success",text:"Settings saved successfully"})}catch(w){console.error("Failed to save settings:",w),p({type:"error",text:w instanceof Error?w.message:"Failed to save settings"})}finally{m(!1)}},P=async()=>{try{m(!0),p(null),await e.admin.postAdminClientRegistrationResetDefaults(),await _(),p({type:"success",text:"Settings reset to defaults successfully"})}catch(w){console.error("Failed to reset settings:",w),p({type:"error",text:w instanceof Error?w.message:"Failed to reset settings"})}finally{m(!1)}},L=()=>{x&&!n.allowedScopes.includes(x)&&(a(w=>({...w,allowedScopes:[...w.allowedScopes,x]})),j(""))},U=w=>{a(I=>({...I,allowedScopes:I.allowedScopes.filter(J=>J!==w)}))},T=()=>{b&&!n.allowedRedirectUriPatterns.includes(b)&&(a(w=>({...w,allowedRedirectUriPatterns:[...w.allowedRedirectUriPatterns,b]})),y(""))},S=w=>{a(I=>({...I,allowedRedirectUriPatterns:I.allowedRedirectUriPatterns.filter(J=>J!==w)}))};return o?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading registration settings..."})]}):t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"bg-card/80 backdrop-blur-sm p-8 rounded-3xl border border-border/50 shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2 tracking-tight",children:"Dynamic Client Registration"}),t.jsxs("div",{className:"flex items-center text-muted-foreground text-lg",children:[t.jsx("div",{className:"w-6 h-6 bg-primary/10 rounded-lg flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Pe,{className:"w-4 h-4 text-primary"})}),t.jsx("span",{children:"Configure RFC 7591 automated app registration settings"})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-6 ml-16",children:[t.jsx(ge,{variant:n.enabled?"default":"secondary",className:"px-3 py-1",children:n.enabled?"Enabled":"Disabled"}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[t.jsx(Sc,{className:"w-4 h-4"}),t.jsxs("span",{children:["Public endpoint: ",t.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"/auth/register"})]})]})]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs(ne,{variant:"outline",onClick:P,disabled:d,className:"px-8 py-3 rounded-xl",children:[t.jsx(I0,{className:"w-4 h-4 mr-2"}),"Reset Defaults"]}),t.jsxs(ne,{onClick:B,disabled:d,className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[d?t.jsx(Dr,{className:"w-4 h-4 mr-2 animate-spin"}):t.jsx(XN,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})]})}),f&&t.jsxs(Q0,{className:f.type==="success"?"border-emerald-500/20 bg-emerald-500/10 dark:bg-emerald-400/10":"border-destructive/20 bg-destructive/10",children:[f.type==="success"?t.jsx(Nt,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):t.jsx(tt,{className:"w-4 h-4 text-destructive"}),t.jsx(J0,{className:f.type==="success"?"text-emerald-700 dark:text-emerald-300":"text-destructive",children:f.text})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-6 h-6 text-primary"})}),t.jsx("div",{className:"text-sm font-semibold text-primary tracking-wide",children:"Registration"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:n.enabled?"Active":"Inactive"})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),t.jsx("div",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 tracking-wide",children:"Allowed Scopes"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:n.allowedScopes.length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-violet-500/10 dark:bg-violet-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(jc,{className:"w-6 h-6 text-violet-600 dark:text-violet-400"})}),t.jsx("div",{className:"text-sm font-semibold text-violet-700 dark:text-violet-300 tracking-wide",children:"Client Lifetime"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:n.maxClientLifetime||"∞"}),t.jsx("div",{className:"text-sm text-violet-600 dark:text-violet-400",children:n.maxClientLifetime?"days":"unlimited"})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-orange-500/10 dark:bg-orange-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(zn,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsx("div",{className:"text-sm font-semibold text-orange-700 dark:text-orange-300 tracking-wide",children:"URI Patterns"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:n.allowedRedirectUriPatterns.length})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Er,{className:"bg-card/70 backdrop-blur-sm border border-border/50 shadow-lg",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Basic Settings"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Core configuration for dynamic client registration"})]})]})}),t.jsxs(Mr,{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"enabled",children:"Enable Dynamic Registration"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow apps to register automatically via public endpoint"})]}),t.jsx(As,{id:"enabled",checked:n.enabled,onCheckedChange:w=>a(I=>({...I,enabled:w}))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"requireHttps",children:"Require HTTPS"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Enforce HTTPS for redirect URIs (localhost exempted)"})]}),t.jsx(As,{id:"requireHttps",checked:n.requireHttps,onCheckedChange:w=>a(I=>({...I,requireHttps:w}))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"adminApproval",children:"Admin Approval Required"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"New clients need manual approval before activation"})]}),t.jsx(As,{id:"adminApproval",checked:n.adminApprovalRequired,onCheckedChange:w=>a(I=>({...I,adminApprovalRequired:w}))})]}),"            ",t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(re,{htmlFor:"rateLimit",children:"Rate Limit (per minute)"}),t.jsx(Ae,{id:"rateLimit",type:"number",min:"1",max:"100",value:n.rateLimitPerMinute,onChange:w=>a(I=>({...I,rateLimitPerMinute:parseInt(w.target.value)||10}))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(re,{htmlFor:"maxRedirectUris",children:"Max Redirect URIs"}),t.jsx(Ae,{id:"maxRedirectUris",type:"number",min:"1",max:"20",value:n.maxRedirectUris,onChange:w=>a(I=>({...I,maxRedirectUris:parseInt(w.target.value)||5}))})]})]})]})]}),t.jsxs(Er,{className:"bg-card/70 backdrop-blur-sm border border-border/50 shadow-lg",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(zn,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Allowed Client Types"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Which types of OAuth2 clients can register"})]})]})}),t.jsxs(Mr,{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"allowPublic",children:"Public Clients"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Web apps, mobile apps (no client secret)"})]}),t.jsx(As,{id:"allowPublic",checked:n.allowPublicClients,onCheckedChange:w=>a(I=>({...I,allowPublicClients:w}))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"allowConfidential",children:"Confidential Clients"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Server-side apps with client secret"})]}),t.jsx(As,{id:"allowConfidential",checked:n.allowConfidentialClients,onCheckedChange:w=>a(I=>({...I,allowConfidentialClients:w}))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"allowBackend",children:"Backend Services"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"System-to-system integrations (client_credentials)"})]}),t.jsx(As,{id:"allowBackend",checked:n.allowBackendServices,onCheckedChange:w=>a(I=>({...I,allowBackendServices:w}))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"requireTos",children:"Require Terms of Service"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Apps must provide TOS URI"})]}),t.jsx(As,{id:"requireTos",checked:n.requireTermsOfService,onCheckedChange:w=>a(I=>({...I,requireTermsOfService:w}))})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx(re,{htmlFor:"requirePrivacy",children:"Require Privacy Policy"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Apps must provide privacy policy URI"})]}),t.jsx(As,{id:"requirePrivacy",checked:n.requirePrivacyPolicy,onCheckedChange:w=>a(I=>({...I,requirePrivacyPolicy:w}))})]})]})]}),t.jsxs(Er,{className:"bg-card/70 backdrop-blur-sm border border-border/50 shadow-lg",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-violet-500/10 dark:bg-violet-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(jc,{className:"w-5 h-5 text-violet-600 dark:text-violet-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Lifetime & Notifications"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Client expiration and notification settings"})]})]})}),t.jsxs(Mr,{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(re,{htmlFor:"lifetime",children:"Client Lifetime (days)"}),t.jsx(Ae,{id:"lifetime",type:"number",min:"0",max:"3650",value:n.maxClientLifetime,onChange:w=>a(I=>({...I,maxClientLifetime:parseInt(w.target.value)||0})),placeholder:"0 = no expiration"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:n.maxClientLifetime===0?"Clients never expire":`Clients expire after ${n.maxClientLifetime} days`})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(re,{htmlFor:"notificationEmail",children:"Notification Email"}),t.jsx(Ae,{id:"notificationEmail",type:"email",value:n.notificationEmail||"",onChange:w=>a(I=>({...I,notificationEmail:w.target.value})),placeholder:"admin@example.com"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when new clients register"})]})]})]}),t.jsxs(Er,{className:"bg-card/70 backdrop-blur-sm border border-border/50 shadow-lg",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500/10 dark:bg-blue-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Allowed Scopes"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"SMART scopes that can be requested during registration"})]})]})}),t.jsxs(Mr,{className:"space-y-4",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Ae,{value:x,onChange:w=>j(w.target.value),placeholder:"e.g., patient/*.write",onKeyDown:w=>w.key==="Enter"&&L()}),t.jsx(ne,{onClick:L,size:"sm",children:"Add"})]}),t.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:n.allowedScopes.map(w=>t.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-2 rounded-lg",children:[t.jsx("code",{className:"text-sm",children:w}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>U(w),className:"text-destructive hover:text-destructive",children:"Remove"})]},w))})]})]})]}),t.jsxs(Er,{className:"bg-card/70 backdrop-blur-sm border border-border/50 shadow-lg",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-orange-500/10 dark:bg-orange-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(zn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Allowed Redirect URI Patterns"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Regular expression patterns for validating redirect URIs"})]})]})}),t.jsxs(Mr,{className:"space-y-4",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Ae,{value:b,onChange:w=>y(w.target.value),placeholder:"e.g., https://myapp\\\\.example\\\\.com/.*",onKeyDown:w=>w.key==="Enter"&&T()}),t.jsx(ne,{onClick:T,size:"sm",children:"Add Pattern"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:n.allowedRedirectUriPatterns.map((w,I)=>t.jsxs("div",{className:"flex items-center justify-between bg-muted/30 p-3 rounded-lg",children:[t.jsx("code",{className:"text-sm flex-1 mr-2",children:w}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>S(w),className:"text-destructive hover:text-destructive",children:"Remove"})]},I))})]})]})]})}const Y0="Entwicklung",K0="Einstellungen",X0="Benutzer",Z0="Profil",W0="Benutzer",ev="Online",tv="Übersicht",rv="Überblick",nv="Gesund",sv="Umgebung",av="Sprache",iv="Design",ov="Hell",lv="Dunkel",cv="System",Wk={"Authenticating and preparing your clinical workspace":"Authentifizieren und Vorbereiten Ihres klinischen Arbeitsbereichs...","2min ago":"vor 2 Minuten","Loading Healthcare Administration":"Lädt Gesundheitsverwaltung","Identity Providers":"Identitätsanbieter","API Response Time":"API-Antwortzeit",Development:Y0,Preferences:K0,"Database Status":"Datenbankstatus","Recent Activity":"Aktuelle Aktivitäten","3h ago":"vor 3 Stunden","User Management":"Benutzerverwaltung","Registered users":"Registrierte Benutzer","FHIR Servers":"FHIR-Server","Sign out":"Abmelden","SMART on FHIR Platform":"SMART auf FHIR Plattform","Healthcare Administrator":"Gesundheitsadministrator","SMART Applications":"SMART-Anwendungen","System Uptime":"Systembetriebszeit","Active applications":"Aktive Anwendungen","1h ago":"vor 1 Stunde","Server Management":"Serververwaltung","Active providers":"Aktive Anbieter","Identity provider configured":"Identitätsanbieter konfiguriert",User:X0,"Refresh Data":"Daten aktualisieren","Connected servers":"Verbundene Server","IdP Management":"IdP-Verwaltung",Profile:Z0,"Healthcare Administration":"Gesundheitsverwaltung","2 hours ago":"vor 2 Stunden","Application approved":"Anwendung genehmigt","Profile Settings":"Profileinstellungen","Healthcare Admin":"Gesundheitsadmin","Retry Authentication":"Authentifizierung erneut versuchen",Users:W0,"Last Backup":"Letzte Sicherung",Online:ev,Dashboard:tv,"Healthcare Users":"Gesundheitsbenutzer","App Management":"App-Verwaltung","Healthcare System":"Gesundheitssystem","System Health":"Systemstatus","New user registered":"Neuer Benutzer registriert","5min ago":"vor 5 Minuten",Overview:rv,"FHIR server connected":"FHIR-Server verbunden","SMART on FHIR Dashboard":"SMART on FHIR Dashboard","Authentication Error":"Authentifizierungsfehler",Healthy:nv,"SMART Apps":"SMART Apps","Platform Version":"Plattformversion",Environment:sv,Language:av,Theme:iv,Light:ov,Dark:lv,System:cv},eA=Object.freeze(Object.defineProperty({__proto__:null,Dark:lv,Dashboard:tv,Development:Y0,Environment:sv,Healthy:nv,Language:av,Light:ov,Online:ev,Overview:rv,Preferences:K0,Profile:Z0,System:cv,Theme:iv,User:X0,Users:W0,default:Wk},Symbol.toStringTag,{value:"Module"})),dv="Development",uv="Preferences",hv="User",mv="Profile",fv="Users",pv="Online",xv="Dashboard",gv="Overview",vv="Healthy",yv="Environment",bv="Language",wv="Theme",Nv="Light",jv="Dark",Sv="System",tA={"2min ago":"2min ago","Loading Healthcare Administration":"Loading Healthcare Administration","Identity Providers":"Identity Providers","API Response Time":"API Response Time",Development:dv,Preferences:uv,"Database Status":"Database Status","Recent Activity":"Recent Activity","3h ago":"3h ago","User Management":"User Management","Registered users":"Registered users","FHIR Servers":"FHIR Servers","Sign out":"Sign out","SMART on FHIR Platform":"SMART on FHIR Platform","Healthcare Administrator":"Healthcare Administrator","SMART Applications":"SMART Applications","System Uptime":"System Uptime","Active applications":"Active applications","1h ago":"1h ago","Server Management":"Server Management","Active providers":"Active providers","Identity provider configured":"Identity provider configured",User:hv,"Refresh Data":"Refresh Data","Connected servers":"Connected servers","IdP Management":"IdP Management",Profile:mv,"Healthcare Administration":"Healthcare Administration","2 hours ago":"2 hours ago","Application approved":"Application approved","Profile Settings":"Profile Settings","Healthcare Admin":"Healthcare Admin","Retry Authentication":"Retry Authentication",Users:fv,"Last Backup":"Last Backup",Online:pv,Dashboard:xv,"Healthcare Users":"Healthcare Users","App Management":"App Management","Healthcare System":"Healthcare System","System Health":"System Health","New user registered":"New user registered","5min ago":"5min ago",Overview:gv,"FHIR server connected":"FHIR server connected","SMART on FHIR Dashboard":"SMART on FHIR Dashboard","Authentication Error":"Authentication Error",Healthy:vv,"SMART Apps":"SMART Apps","Platform Version":"Platform Version",Environment:yv,Language:bv,Theme:wv,Light:Nv,Dark:jv,System:Sv,"Authenticating and preparing your clinical workspace":"TODO: Translate Authenticating and preparing your clinical workspace..."},rA=Object.freeze(Object.defineProperty({__proto__:null,Dark:jv,Dashboard:xv,Development:dv,Environment:yv,Healthy:vv,Language:bv,Light:Nv,Online:pv,Overview:gv,Preferences:uv,Profile:mv,System:Sv,Theme:wv,User:hv,Users:fv,default:tA},Symbol.toStringTag,{value:"Module"})),Th=Object.assign({"../i18n/translations/de.json":eA,"../i18n/translations/en.json":rA});console.debug("🌐 Loading translations...");console.debug("🌐 Found translation files:",Object.keys(Th));const Rc={},tm=[];for(const e in Th){const n=e.split("/").pop()?.replace(".json","");if(n){console.debug("🌐 Processing language:",n,"from file:",e);const a=Th[e];console.debug("🌐 Translation module:",a);const o=a.default||a;console.debug("🌐 Translation content preview:",Object.keys(o).slice(0,5)),console.debug("🌐 Sample translation:",o["Healthcare Admin"]),tm.push(n),Rc[n]={translation:o}}}console.debug("🌐 Supported languages:",tm);console.debug("🌐 Resources loaded:",Object.keys(Rc));const nA=(async()=>{console.debug("🔧 Initializing i18n..."),console.debug("🔧 Resources structure:",JSON.stringify(Rc,null,2)),await li.use(Mw).init({resources:Rc,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1}),console.debug("✅ i18n initialized successfully"),console.debug("🌐 i18n current language:",li.language),console.debug("🌐 i18n available languages:",li.languages),console.debug("🌐 i18n resource languages:",Object.keys(li.store.data))})(),sA=()=>{const e=navigator.language.split("-")[0];return tm.includes(e)?e:"en"},Qc=qc()(Xh(e=>({language:sA(),setLanguage:async n=>{try{console.debug("🔄 Attempting to change i18n language to:",n),await li.changeLanguage(n),console.debug("✅ i18n language changed successfully to:",li.language),e({language:n}),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:n}}))}catch(a){console.error("❌ Failed to change language:",a)}},sidebarCollapsed:!1,setSidebarCollapsed:n=>e({sidebarCollapsed:n}),activeTab:"dashboard",setActiveTab:n=>e({activeTab:n}),smartAppsManagerTab:"apps",setSmartAppsManagerTab:n=>e({smartAppsManagerTab:n}),notificationsEnabled:!0,setNotificationsEnabled:n=>e({notificationsEnabled:n})}),{name:"app-store",storage:Hc(()=>localStorage),partialize:e=>({language:e.language,sidebarCollapsed:e.sidebarCollapsed,activeTab:e.activeTab,smartAppsManagerTab:e.smartAppsManagerTab,notificationsEnabled:e.notificationsEnabled})})),aA=async()=>{const{language:e,setLanguage:n}=Qc.getState();await n(e)},vg=[{id:"1",name:"Clinical Decision Support",clientId:"cds-app-123",redirectUris:["https://cds.example.com/callback"],defaultClientScopes:["patient/Patient.read","patient/Observation.read"],scopeSetId:"physician-readonly",optionalClientScopes:[],status:"active",lastUsed:"2024-12-28",description:"AI-powered clinical decision support tool",appType:"ehr-launch",authenticationType:"asymmetric",serverAccessType:"user-person-servers"},{id:"2",name:"Patient Portal",clientId:"portal-456",redirectUris:["https://portal.example.com/auth"],defaultClientScopes:["patient/Patient.read","patient/Condition.read","patient/MedicationRequest.read"],optionalClientScopes:["patient/Appointment.read"],status:"active",lastUsed:"2024-12-27",description:"Patient self-service portal",appType:"standalone-app",authenticationType:"symmetric",serverAccessType:"all-servers"},{id:"3",name:"Research Analytics",clientId:"research-789",redirectUris:["https://research.example.com/oauth"],defaultClientScopes:["user/Patient.read","user/Observation.read","user/DiagnosticReport.read"],scopeSetId:"researcher-population",optionalClientScopes:[],status:"inactive",lastUsed:"2024-12-20",description:"Clinical research data analytics platform",appType:"backend-service",authenticationType:"asymmetric",serverAccessType:"selected-servers",allowedServerIds:["hapi-fhir-org","test-server-1"]},{id:"4",name:"Mobile Health App",clientId:"mobile-health-101",redirectUris:["https://mhealth.example.com/callback"],defaultClientScopes:["patient/Patient.read","patient/Observation.read"],optionalClientScopes:["patient/ActivityDefinition.read"],status:"active",lastUsed:"2024-12-26",description:"Mobile application for patient health monitoring",appType:"standalone-app",authenticationType:"asymmetric",serverAccessType:"user-person-servers"},{id:"5",name:"Lab Results Viewer",clientId:"lab-viewer-202",redirectUris:["https://labs.example.com/auth"],defaultClientScopes:["patient/DiagnosticReport.read","patient/Observation.read"],optionalClientScopes:[],status:"active",lastUsed:"2024-12-25",description:"Laboratory results visualization tool",appType:"ehr-launch",authenticationType:"symmetric",serverAccessType:"selected-servers",allowedServerIds:["lab-server-main"]},{id:"6",name:"Autonomous Clinical AI Agent",clientId:"ai-agent-303",redirectUris:["https://ai-assistant.example.com/callback"],defaultClientScopes:["agent/Patient.read","agent/Observation.read","agent/Condition.read","agent/MedicationRequest.read","agent/CarePlan.create"],optionalClientScopes:["agent/RiskAssessment.create","agent/ClinicalImpression.create"],status:"active",lastUsed:"2024-12-28",description:"Autonomous AI agent that independently analyzes patient data and creates clinical assessments.",appType:"agent",authenticationType:"asymmetric",serverAccessType:"all-servers"},{id:"7",name:"Life Saving Lawnmower",clientId:"emergency-mower-911",redirectUris:["https://smart-lawnmower.emergency.com/callback"],defaultClientScopes:["agent/Patient.read","agent/Encounter.create","agent/Observation.create"],optionalClientScopes:["agent/EmergencyContact.read","agent/AllergyIntolerance.read","agent/MedicationStatement.read"],status:"active",lastUsed:"2024-12-29",description:"Autonomous robotic lawnmower with emergency medical response capabilities.",appType:"agent",authenticationType:"asymmetric",serverAccessType:"all-servers"}];function iA(){const{smartAppsManagerTab:e,setSmartAppsManagerTab:n}=Qc(),{clientApis:a}=Vn(),[o,c]=k.useState([]),[d,m]=k.useState(!0),[f,p]=k.useState([]),[x,j]=k.useState([]),[b,y]=k.useState(!1),[_,B]=k.useState(!1),[P,L]=k.useState(null);k.useEffect(()=>{(async()=>{try{const $=await Hn("smart-scope-sets");$&&j($)}catch($){console.error("Failed to load scope sets:",$)}})()},[]),k.useEffect(()=>{(async()=>{try{m(!0);const $=await a.smartApps.getAdminSmartApps();if(p($),$.length===0)c(vg);else{const ee=$.map(X=>({...X,scopeSetId:void 0,status:X.enabled?"active":"inactive",lastUsed:new Date().toISOString().split("T")[0],appType:X.serviceAccountsEnabled?"backend-service":"standalone-app",authenticationType:X.clientAuthenticatorType==="client-jwt"?"asymmetric":"symmetric",serverAccessType:"all-servers",allowedServerIds:void 0}));c(ee)}}catch($){console.error("Failed to fetch SMART apps:",$),c(vg)}finally{m(!1)}})()},[a.smartApps]);const U=C=>{const $={id:Date.now().toString(),name:C.name,clientId:C.clientId,redirectUris:C.redirectUris,defaultClientScopes:C.defaultScopes,optionalClientScopes:C.optionalScopes,scopeSetId:C.scopeSetId,status:"active",lastUsed:new Date().toISOString().split("T")[0],description:C.description||"",appType:C.appType||"standalone-app",authenticationType:C.authenticationType||"symmetric",serverAccessType:C.serverAccessType||"all-servers",allowedServerIds:C.allowedServerIds};c([...o,$]),y(!1)},T=f.length===0,S=(C,$,ee)=>{C&&c(X=>X.map(Q=>{if(Q.id===C){let ie=[...ee];if($){const me=x.find(R=>R.id===$);me&&(ie=[...me.scopes,...ee])}return{...Q,scopeSetId:$||void 0,defaultClientScopes:ie,optionalClientScopes:Q.optionalClientScopes||[]}}return Q}))},w=C=>{L(C),B(!0)},I=C=>{if(!C)return"Custom";const $=x.find(ee=>ee.id===C);return $?$.name:"Unknown"},J=C=>{c(o.map($=>$.id===C?{...$,status:$.status==="active"?"inactive":"active"}:$))},W=C=>{c(o.filter($=>$.id!==C))};return t.jsx("div",{className:"p-8 space-y-8 bg-background",children:d?t.jsxs("div",{className:"flex items-center justify-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading SMART applications..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-card/80 backdrop-blur-sm p-8 rounded-3xl border border-border/50 shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"SMART on FHIR Applications"}),t.jsxs("div",{className:"text-muted-foreground text-lg flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Pe,{className:"w-5 h-5 text-primary"})}),"Manage registered healthcare applications and their SMART on FHIR permissions"]}),T&&t.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm",children:[t.jsx(tt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),t.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-medium",children:"Showing sample applications - no real apps found in backend"})]}),x.length>0&&t.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm",children:[t.jsx(Nt,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),t.jsxs("span",{className:"text-emerald-700 dark:text-emerald-300 font-medium",children:[x.length," scope templates available for quick configuration"]})]})]}),t.jsxs(ne,{onClick:()=>y(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(At,{className:"h-5 h-5 mr-2"}),"Register New App"]})]})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border/50 shadow-lg",children:t.jsxs(vi,{value:e,onValueChange:n,className:"w-full",children:[t.jsxs(yi,{className:"grid w-full grid-cols-2 bg-muted/50 rounded-t-2xl",children:[t.jsxs(or,{value:"apps",className:"flex items-center space-x-2 rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:[t.jsx(Pe,{className:"w-4 h-4"}),t.jsx("span",{children:"Registered Apps"})]}),t.jsxs(or,{value:"registration",className:"flex items-center space-x-2 rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:[t.jsx(bj,{className:"w-4 h-4"}),t.jsx("span",{children:"Dynamic Registration"})]})]}),t.jsxs(lr,{value:"apps",className:"p-6 space-y-6",children:[b&&t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border/50 shadow-lg p-8 mb-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(At,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Register New Application"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Configure a new SMART on FHIR application"})]})]}),t.jsxs(ne,{variant:"outline",onClick:()=>y(!1),className:"rounded-xl",children:[t.jsx($n,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),t.jsx(Hk,{open:!0,onClose:()=>y(!1),onAddApp:U,scopeSets:x})]}),t.jsx($k,{apps:o}),t.jsx(Fk,{apps:o,scopeSets:x,onToggleAppStatus:J,onOpenScopeEditor:w,onDeleteApp:W}),t.jsx(cr,{open:_,onOpenChange:B,children:t.jsxs(Kt,{className:"max-w-4xl max-h-[85vh] overflow-y-auto",children:[t.jsx(Xt,{className:"pb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsxs(Zt,{className:"text-2xl font-bold text-foreground tracking-tight",children:["Manage Scopes: ",P?.name]}),t.jsx(dr,{className:"text-muted-foreground font-medium mt-1",children:"Configure SMART on FHIR scopes for this application"})]})]})}),P&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs(Er,{className:"bg-primary/5 border-primary/20",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"text-lg font-bold text-foreground flex items-center",children:[t.jsx(Lt,{className:"w-5 h-5 mr-2 text-primary"}),"Current Configuration"]})}),t.jsxs(Mr,{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Current Scope Set"}),t.jsxs("div",{className:"p-3 bg-background rounded-lg border border-border",children:[t.jsx("span",{className:"font-medium text-foreground",children:I(P.scopeSetId)}),P.scopeSetId&&t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:x.find(C=>C.id===P.scopeSetId)?.description})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Total Scopes"}),t.jsxs("div",{className:"p-3 bg-background rounded-lg border border-border",children:[t.jsx("span",{className:"font-bold text-2xl text-primary",children:(P.defaultClientScopes||[]).length+(P.optionalClientScopes||[]).length}),t.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"active scopes"})]})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Active Scopes"}),t.jsx("div",{className:"bg-background p-4 rounded-lg border border-border max-h-32 overflow-y-auto",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[(P.defaultClientScopes||[]).map((C,$)=>t.jsx(ge,{variant:"outline",className:"text-xs font-mono bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-500/20",children:C},`default-${$}`)),(P.optionalClientScopes||[]).map((C,$)=>t.jsxs(ge,{variant:"outline",className:"text-xs font-mono bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20",children:[C," (optional)"]},`optional-${$}`))]})})]})]})]}),t.jsxs(Er,{className:"bg-card border-border",children:[t.jsx(Ur,{className:"pb-4",children:t.jsxs(Ir,{className:"text-lg font-bold text-foreground flex items-center",children:[t.jsx(Pe,{className:"w-5 h-5 mr-2 text-violet-600 dark:text-violet-400"}),"Update Scope Configuration"]})}),t.jsx(Mr,{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground",children:"Select Scope Set"}),t.jsxs("select",{value:P.scopeSetId||"",onChange:C=>{const $=C.target.value||null,ee=P.optionalClientScopes||[];S(P.id,$,ee),L({...P,scopeSetId:$||void 0,defaultClientScopes:$?[...x.find(X=>X.id===$)?.scopes||[],...ee]:ee})},className:"flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm shadow-sm text-foreground",children:[t.jsx("option",{value:"",children:"Custom Scopes Only"}),x.map(C=>t.jsxs("option",{value:C.id,children:[C.name," (",C.scopes.length," scopes)"]},C.id))]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground",children:"Additional Optional Scopes"}),t.jsx("textarea",{value:(P.optionalClientScopes||[]).join(`
`),onChange:C=>{const $=C.target.value.split(`
`).filter(ee=>ee.trim());S(P.id,P.scopeSetId||null,[]),L({...P,optionalClientScopes:$,defaultClientScopes:P.scopeSetId?[...x.find(ee=>ee.id===P.scopeSetId)?.scopes||[]]:P.defaultClientScopes||[]})},rows:5,className:"w-full rounded-xl border border-input bg-background px-3 py-2 text-sm shadow-sm font-mono text-foreground placeholder:text-muted-foreground focus:border-ring focus:ring-ring",placeholder:`patient/Patient.read
patient/Observation.read
openid profile`})]})]})})]}),t.jsx("div",{className:"flex justify-end space-x-4 pt-4",children:t.jsx(ne,{variant:"outline",onClick:()=>B(!1),className:"px-8 py-3 rounded-xl",children:"Close"})})]})]})})]}),t.jsx(lr,{value:"registration",className:"p-6 space-y-6",children:t.jsx(Zk,{})})]})})]})})}function oA({servers:e}){return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(_t,{className:"w-6 h-6 text-primary"})}),t.jsx("div",{className:"text-sm font-semibold text-primary tracking-wide",children:"Total Servers"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(qn,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),t.jsx("div",{className:"text-sm font-semibold text-emerald-700 dark:text-emerald-300 tracking-wide",children:"Supported Servers"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.supported).length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-destructive/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx($n,{className:"w-6 h-6 text-destructive"})}),t.jsx("div",{className:"text-sm font-semibold text-destructive tracking-wide",children:"Unsupported Servers"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>!n.supported).length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-violet-500/10 dark:bg-violet-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(zc,{className:"w-6 h-6 text-violet-600 dark:text-violet-400"})}),t.jsx("div",{className:"text-sm font-semibold text-violet-700 dark:text-violet-300 tracking-wide",children:"Launch Contexts"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:"12"}),t.jsx("p",{className:"text-sm text-violet-700 dark:text-violet-300 font-medium",children:"Available contexts"})]})})})]})}function lA({server:e,securityStatus:n,onViewDetails:a,onConfigureMtls:o,onCheckSecurity:c,onEditServer:d}){const m=f=>{navigator.clipboard.writeText(f)};return t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-sm ${e.connectionStatus==="disconnected"?"bg-destructive/10":"bg-primary/10"}`,children:e.connectionStatus==="disconnected"?t.jsx(Vt,{className:"w-6 h-6 text-destructive"}):t.jsx(_t,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("h3",{className:"text-lg font-bold text-foreground tracking-tight",children:e.serverName||e.name}),e.connectionStatus==="disconnected"&&t.jsx(Vt,{className:"w-4 h-4 text-orange-500"})]}),t.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:e.name}),e.connectionStatus==="disconnected"&&t.jsx("p",{className:"text-xs text-destructive font-medium",children:"Unable to connect to server"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{variant:e.supported?"default":"destructive",className:e.supported?"bg-emerald-500/10 dark:bg-emerald-400/20 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-400/30 shadow-sm":"bg-destructive/10 text-destructive border-destructive/30 shadow-sm",children:e.supported?t.jsxs(t.Fragment,{children:[t.jsx(qn,{className:"w-3 h-3 mr-1"})," Supported"]}):t.jsxs(t.Fragment,{children:[t.jsx($n,{className:"w-3 h-3 mr-1"})," Unsupported"]})}),n==="insecure"&&t.jsxs(ge,{variant:"destructive",className:"bg-orange-500/10 dark:bg-orange-400/20 text-orange-700 dark:text-orange-300 border-orange-300 dark:border-orange-400/30 shadow-sm",children:[t.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Security Warning"]}),n==="secure"&&t.jsxs(ge,{variant:"default",className:"bg-emerald-500/10 dark:bg-emerald-400/20 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-400/30 shadow-sm",children:[t.jsx(qn,{className:"w-3 h-3 mr-1"}),"Secure"]}),n==="checking"&&t.jsxs(ge,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/30 shadow-sm",children:[t.jsx(Mt,{className:"w-3 h-3 mr-1 animate-spin"}),"Checking..."]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-muted/50 p-3 rounded-xl",children:[t.jsx("span",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"FHIR Version"}),t.jsx("p",{className:"text-sm font-bold text-foreground mt-1",children:e.fhirVersion})]}),t.jsxs("div",{className:"bg-muted/50 p-3 rounded-xl",children:[t.jsx("span",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Server Software"}),t.jsx("p",{className:"text-sm font-bold text-foreground mt-1",children:e.serverName||"Unknown"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Base URL:"}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>m(e.url),className:"h-8 px-3 rounded-lg hover:bg-muted transition-colors duration-200",children:t.jsx(Ts,{className:"w-3 h-3"})})]}),t.jsx("p",{className:"text-sm text-foreground bg-muted/50 p-3 rounded-xl font-mono break-all border border-border/50",children:e.url})]}),e.connectionStatus==="connected"&&n==="insecure"&&t.jsxs("div",{className:"bg-orange-500/10 dark:bg-orange-400/10 p-3 rounded-xl border border-orange-500/20 dark:border-orange-400/20",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(Vt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),t.jsx("span",{className:"text-sm font-semibold text-orange-700 dark:text-orange-300",children:"Security Warning"})]}),t.jsxs("div",{className:"text-xs text-orange-700 dark:text-orange-300 space-y-2",children:[t.jsx("p",{children:"This FHIR server is publicly accessible and can be reached directly, bypassing the secure proxy. It should only accept traffic from the Proxy Server."}),t.jsxs("ul",{className:"list-disc pl-5",children:[t.jsx("li",{children:"TLS everywhere: secure client-to-proxy and proxy-to-FHIR connections."}),t.jsx("li",{children:"Lock down the FHIR server to only accept proxy IPs via a private subnet or VPN—avoid relying solely on public-IP ACLs."}),t.jsx("li",{children:"Consider mutual TLS (mTLS) between proxy and FHIR server for extra assurance."})]})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Launch Contexts:"}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"3 available"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(ge,{variant:"secondary",className:"text-xs bg-emerald-500/10 dark:bg-emerald-400/20 text-emerald-700 dark:text-emerald-300 border-emerald-500/20 dark:border-emerald-400/20",children:"Global"}),t.jsx(ge,{variant:"secondary",className:"text-xs bg-primary/10 text-primary border-primary/20",children:"Patient Chart"}),t.jsx(ge,{variant:"secondary",className:"text-xs bg-violet-500/10 dark:bg-violet-400/20 text-violet-700 dark:text-violet-300 border-violet-500/20 dark:border-violet-400/20",children:"Provider Context"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[t.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>a(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-xl border-border hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(Io,{className:"w-3 h-3"}),t.jsx("span",{children:"View Details"})]}),t.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>o(e),className:"flex items-center space-x-2 px-4 py-2 rounded-xl border-emerald-500/30 text-emerald-700 dark:text-emerald-400 hover:bg-emerald-500/10 transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(Pe,{className:"w-3 h-3"}),t.jsx("span",{children:"Configure mTLS"})]}),t.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>c(e),className:"flex items-center space-x-2 px-4 py-2 rounded-xl border-primary/30 text-primary hover:bg-primary/10 transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(Dr,{className:"w-3 h-3"}),t.jsx("span",{children:"Check Security"})]}),e.connectionStatus==="disconnected"&&t.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>d(e),className:"flex items-center space-x-2 px-4 py-2 rounded-xl border-orange-500/30 text-orange-700 dark:text-orange-400 hover:bg-orange-500/10 transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(_s,{className:"w-3 h-3"}),t.jsx("span",{children:"Fix URL"})]}),e.connectionStatus==="connected"&&t.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.open(e.endpoints.metadata,"_blank"),className:"flex items-center space-x-2 px-4 py-2 rounded-xl border-border hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(Sc,{className:"w-3 h-3"}),t.jsx("span",{children:"Metadata"})]})]})]})]})}function cA({servers:e,securityChecks:n,onViewDetails:a,onConfigureMtls:o,onCheckSecurity:c,onEditServer:d}){return t.jsx("div",{className:"p-6 space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(m=>t.jsx(lA,{server:m,securityStatus:n[m.id],onViewDetails:a,onConfigureMtls:o,onCheckSecurity:c,onEditServer:d},m.id))})})}function dA(e){const n=a=>{navigator.clipboard.writeText(a)};return t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-8 rounded-2xl border border-border/50 shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center shadow-sm",children:t.jsx(_t,{className:"w-7 h-7 text-primary"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-foreground tracking-tight",children:e.serverName||e.name}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e.name})]})]}),t.jsx(ge,{variant:e.supported?"default":"destructive",className:e.supported?"bg-emerald-500/10 dark:bg-emerald-400/20 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-400/30 shadow-sm px-4 py-2":"bg-destructive/10 text-destructive border-destructive/30 shadow-sm px-4 py-2",children:e.supported?t.jsxs(t.Fragment,{children:[t.jsx(qn,{className:"w-4 h-4 mr-2"})," Supported"]}):t.jsxs(t.Fragment,{children:[t.jsx($n,{className:"w-4 h-4 mr-2"})," Unsupported"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-foreground mb-4 flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center mr-3",children:t.jsx(xa,{className:"w-4 h-4 text-primary"})}),"Server Information"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-xl",children:[t.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Server Name:"}),t.jsx("span",{className:`text-sm font-bold ${e.serverName==="Unknown FHIR Server"||!e.serverName?"text-muted-foreground":"text-foreground"}`,children:e.serverName||"Unknown"})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-xl",children:[t.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"FHIR Version:"}),t.jsx("span",{className:`text-sm font-bold ${e.fhirVersion==="Unknown"?"text-muted-foreground":"text-foreground"}`,children:e.fhirVersion})]}),t.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-xl",children:[t.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Server Version:"}),t.jsx("span",{className:`text-sm font-bold ${!e.serverVersion||e.serverVersion==="Unknown"?"text-muted-foreground":"text-foreground"}`,children:e.serverVersion||"Unknown"})]})]})]})}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-bold text-foreground mb-4 flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Lt,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),"Connection"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-semibold text-muted-foreground",children:"Base URL:"}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>n(e.url),className:"h-8 px-3 rounded-lg hover:bg-muted transition-colors duration-200",children:t.jsx(Ts,{className:"w-3 h-3"})})]}),t.jsx("p",{className:"text-sm text-foreground bg-muted/50 p-3 rounded-xl font-mono break-all border border-border",children:e.url})]})]})})]}),e.fhirVersion!=="Unknown"&&e.supported&&t.jsxs("div",{className:"mt-8",children:[t.jsxs("h3",{className:"text-lg font-bold text-foreground mb-6 flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500/10 dark:bg-purple-400/20 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Sc,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),"API Endpoints"]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(e.endpoints).map(([a,o])=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-xl border border-border hover:bg-muted/70 transition-all duration-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-foreground capitalize mb-1",children:a.replace(/([A-Z])/g," $1").trim()}),t.jsx("p",{className:"text-sm text-muted-foreground font-mono break-all",children:o})]}),t.jsxs("div",{className:"flex space-x-2 ml-4",children:[t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>n(o),className:"h-10 px-3 rounded-xl hover:bg-background transition-colors duration-200",children:t.jsx(Ts,{className:"w-4 h-4"})}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>window.open(o,"_blank"),className:"h-10 px-3 rounded-xl hover:bg-background transition-colors duration-200",children:t.jsx(Sc,{className:"w-4 h-4"})})]})]},a))})]}),(e.fhirVersion==="Unknown"||!e.supported)&&t.jsx("div",{className:"mt-8",children:t.jsxs("div",{className:"bg-destructive/10 p-6 rounded-xl border border-destructive/20",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-destructive/10 rounded-xl flex items-center justify-center",children:t.jsx(Vt,{className:"w-5 h-5 text-destructive"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-destructive",children:"Connection Error"}),t.jsx("p",{className:"text-destructive/80 text-sm",children:"Unable to connect to this FHIR server or retrieve metadata"})]})]}),t.jsx("p",{className:"text-destructive/70 text-sm",children:"This server cannot be reached or does not respond with valid FHIR metadata. API endpoints and advanced features are not available for this server."})]})}),t.jsxs("div",{className:"mt-8",children:[t.jsxs("h3",{className:"text-lg font-bold text-foreground mb-6 flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center mr-3",children:t.jsx(Lt,{className:"w-4 h-4 text-primary"})}),"Associated Launch Contexts"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 bg-blue-500/10 dark:bg-blue-400/10 rounded-xl border border-blue-500/20 dark:border-blue-400/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Patient Chart Launch"}),t.jsx(ge,{variant:"secondary",className:"bg-blue-500/10 dark:bg-blue-400/20 text-blue-800 dark:text-blue-300 border-blue-500/30 dark:border-blue-400/30",children:"Global"})]}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:"Standard patient chart context for EHR integration"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Active"})]})]}),t.jsxs("div",{className:"p-4 bg-purple-500/10 dark:bg-purple-400/10 rounded-xl border border-purple-500/20 dark:border-purple-400/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"Provider Summary"}),t.jsx(ge,{variant:"secondary",className:"bg-purple-500/10 dark:bg-purple-400/20 text-purple-800 dark:text-purple-300 border-purple-500/30 dark:border-purple-400/30",children:"Server-specific"})]}),t.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-2",children:"Provider-focused clinical decision support context"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:"Active"})]})]}),t.jsxs("div",{className:"p-4 bg-emerald-500/10 dark:bg-emerald-400/10 rounded-xl border border-emerald-500/20 dark:border-emerald-400/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-semibold text-emerald-900 dark:text-emerald-100",children:"Encounter Context"}),t.jsx(ge,{variant:"secondary",className:"bg-emerald-500/10 dark:bg-emerald-400/20 text-emerald-800 dark:text-emerald-300 border-emerald-500/30 dark:border-emerald-400/30",children:"Global"})]}),t.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mb-2",children:"Encounter-specific clinical workflow context"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:"Active"})]})]}),t.jsxs("div",{className:"p-4 bg-orange-500/10 dark:bg-orange-400/10 rounded-xl border border-orange-500/20 dark:border-orange-400/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-semibold text-orange-900 dark:text-orange-100",children:"Quality Reporting"}),t.jsx(ge,{variant:"secondary",className:"bg-orange-500/10 dark:bg-orange-400/20 text-orange-800 dark:text-orange-300 border-orange-500/30 dark:border-orange-400/30",children:"Server-specific"})]}),t.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-2",children:"Clinical quality measure reporting context"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),t.jsx("span",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium",children:"Pending"})]})]})]})]})]})}function uA({open:e,onOpenChange:n,onAddServer:a,loading:o,error:c,urlError:d}){const[m,f]=k.useState(""),[p,x]=k.useState(null),j=B=>{try{return new URL(B),!0}catch{return!1}},b=async()=>{const B=m.trim();if(!B){x("Server URL is required");return}if(!j(B)){x("Please enter a valid URL (e.g., https://hapi.fhir.org/baseR4)");return}x(null),await a(B)},y=()=>{f(""),x(null),n(!1)},_=d||p;return t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"sm:max-w-[425px]",children:[t.jsxs(Xt,{children:[t.jsx(Zt,{children:"Add New FHIR Server"}),t.jsx(dr,{children:"Enter the base URL of the FHIR server. The server name and details will be automatically retrieved from the server's metadata."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(re,{htmlFor:"server-url",className:"text-right",children:"Server URL"}),t.jsx(Ae,{id:"server-url",value:m,onChange:B=>{f(B.target.value),x(null)},placeholder:"https://hapi.fhir.org/baseR4",className:"col-span-3"})]}),_&&t.jsx("div",{className:"col-span-4 text-red-600 text-sm mt-2",children:_}),c&&t.jsx("div",{className:"col-span-4 text-red-600 text-sm mt-2",children:c})]}),t.jsxs(Ds,{children:[t.jsx(ne,{type:"button",variant:"outline",onClick:y,disabled:o,children:"Cancel"}),t.jsx(ne,{type:"button",onClick:b,disabled:o||!m.trim(),className:"bg-green-600 hover:bg-green-700",children:o?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Adding Server..."]}):t.jsxs(t.Fragment,{children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Add Server"]})})]})]})})}function hA({open:e,onOpenChange:n,server:a,onUpdateServer:o,loading:c,error:d,urlError:m}){const[f,p]=k.useState(""),[x,j]=k.useState(null);k.useEffect(()=>{a&&p(a.url)},[a]);const b=P=>{try{return new URL(P),!0}catch{return!1}},y=async()=>{if(!a)return;const P=f.trim();if(!P){j("Server URL is required");return}if(!b(P)){j("Please enter a valid URL (e.g., https://hapi.fhir.org/baseR4)");return}if(P===a.url){_();return}j(null),await o(a,P)},_=()=>{p(""),j(null),n(!1)},B=m||x;return t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"sm:max-w-[425px]",children:[t.jsxs(Xt,{children:[t.jsx(Zt,{children:"Fix Server URL"}),t.jsxs(dr,{children:['Update the URL for "',a?.serverName||a?.name,`". The server name and details will be automatically retrieved from the server's metadata.`]})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(re,{htmlFor:"edit-server-url",className:"text-right",children:"Server URL"}),t.jsx(Ae,{id:"edit-server-url",value:f,onChange:P=>{p(P.target.value),j(null)},placeholder:"https://hapi.fhir.org/baseR4",className:"col-span-3"})]}),B&&t.jsx("div",{className:"col-span-4 text-red-600 text-sm mt-2",children:B}),d&&t.jsx("div",{className:"col-span-4 text-red-600 text-sm mt-2",children:d})]}),t.jsxs(Ds,{children:[t.jsx(ne,{type:"button",variant:"outline",onClick:_,disabled:c,children:"Cancel"}),t.jsx(ne,{type:"button",onClick:y,disabled:c||!f.trim(),className:"bg-orange-600 hover:bg-orange-700",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):t.jsxs(t.Fragment,{children:[t.jsx(_s,{className:"w-4 h-4 mr-2"}),"Update Server"]})})]})]})})}function mA({open:e,onOpenChange:n,server:a,config:o,onConfigChange:c,onCertificateUpload:d,uploadingCerts:m}){const f=(b,y)=>{const _=o[b]||{enabled:!1};c(b,{..._,enabled:y})},p=()=>{n(!1)},x=()=>{n(!1)};if(!a)return null;const j=o[a.id]||{enabled:!1};return t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[t.jsxs(Xt,{children:[t.jsxs(Zt,{className:"flex items-center space-x-2",children:[t.jsx(Pe,{className:"w-5 h-5 text-emerald-600"}),t.jsx("span",{children:"Configure Mutual TLS"})]}),t.jsxs(dr,{children:['Configure mutual TLS authentication for "',a.serverName||a.name,'". This ensures secure, authenticated communication between the proxy and FHIR server.']})]}),t.jsxs("div",{className:"space-y-6 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-xl",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(U0,{className:"w-5 h-5 text-emerald-600"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground",children:"Enable Mutual TLS"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Require client certificate authentication"})]})]}),t.jsx(ne,{variant:j.enabled?"default":"outline",size:"sm",onClick:()=>f(a.id,!j.enabled),className:j.enabled?"bg-emerald-600 hover:bg-emerald-700 text-white":"border-emerald-500/30 text-emerald-700 hover:bg-emerald-500/10",children:j.enabled?"Enabled":"Disabled"})]}),j.enabled&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h4",{className:"font-semibold text-foreground flex items-center space-x-2",children:[t.jsx(kc,{className:"w-4 h-4"}),t.jsx("span",{children:"Certificates & Keys"})]}),t.jsxs("div",{className:"p-4 border border-border rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-foreground",children:"Client Certificate"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Certificate for proxy to authenticate with FHIR server"})]}),t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",accept:".crt,.pem,.cer",className:"hidden",onChange:b=>{const y=b.target.files?.[0];y&&d(a.id,"client",y)}}),t.jsxs(ne,{variant:"outline",size:"sm",className:"border-dashed",children:[t.jsx(fh,{className:"w-3 h-3 mr-2"}),"Upload .crt/.pem"]})]})]}),j.clientCert&&t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-emerald-600",children:[t.jsx(Bn,{className:"w-4 h-4"}),t.jsx("span",{children:j.clientCert.name})]})]}),t.jsxs("div",{className:"p-4 border border-border rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-foreground",children:"Private Key"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Private key corresponding to the client certificate"})]}),t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",accept:".key,.pem",className:"hidden",onChange:b=>{const y=b.target.files?.[0];y&&d(a.id,"key",y)}}),t.jsxs(ne,{variant:"outline",size:"sm",className:"border-dashed",children:[t.jsx(fh,{className:"w-3 h-3 mr-2"}),"Upload .key/.pem"]})]})]}),j.clientKey&&t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-emerald-600",children:[t.jsx(kc,{className:"w-4 h-4"}),t.jsx("span",{children:j.clientKey.name})]})]}),t.jsxs("div",{className:"p-4 border border-border rounded-xl space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h5",{className:"font-medium text-foreground",children:"CA Certificate"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Certificate Authority to verify FHIR server certificate"})]}),t.jsxs("label",{className:"cursor-pointer",children:[t.jsx("input",{type:"file",accept:".crt,.pem,.cer",className:"hidden",onChange:b=>{const y=b.target.files?.[0];y&&d(a.id,"ca",y)}}),t.jsxs(ne,{variant:"outline",size:"sm",className:"border-dashed",children:[t.jsx(fh,{className:"w-3 h-3 mr-2"}),"Upload .crt/.pem"]})]})]}),j.caCert&&t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-emerald-600",children:[t.jsx(Pe,{className:"w-4 h-4"}),t.jsx("span",{children:j.caCert.name})]})]}),j.certDetails&&t.jsxs("div",{className:"p-4 bg-emerald-500/10 rounded-xl border border-emerald-500/20",children:[t.jsxs("h5",{className:"font-medium text-emerald-800 dark:text-emerald-200 mb-3 flex items-center space-x-2",children:[t.jsx(Bn,{className:"w-4 h-4"}),t.jsx("span",{children:"Certificate Details"})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-emerald-700 dark:text-emerald-300",children:"Subject:"}),t.jsx("span",{className:"text-emerald-800 dark:text-emerald-200 font-mono text-xs",children:j.certDetails.subject})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-emerald-700 dark:text-emerald-300",children:"Issuer:"}),t.jsx("span",{className:"text-emerald-800 dark:text-emerald-200 font-mono text-xs",children:j.certDetails.issuer})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-emerald-700 dark:text-emerald-300",children:"Valid Until:"}),t.jsxs("span",{className:"text-emerald-800 dark:text-emerald-200 flex items-center space-x-1",children:[t.jsx(Q1,{className:"w-3 h-3"}),t.jsx("span",{children:new Date(j.certDetails.validTo).toLocaleDateString()})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-emerald-700 dark:text-emerald-300",children:"Fingerprint:"}),t.jsx("span",{className:"text-emerald-800 dark:text-emerald-200 font-mono text-xs",children:j.certDetails.fingerprint})]})]})]}),t.jsx("div",{className:"p-4 bg-blue-500/10 rounded-xl border border-blue-500/20",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(xa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),t.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[t.jsx("p",{className:"font-medium mb-2",children:"Security Best Practices:"}),t.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[t.jsx("li",{children:"Ensure private keys are never shared or transmitted over insecure channels"}),t.jsx("li",{children:"Use strong certificate passwords and rotate certificates regularly"}),t.jsx("li",{children:"Verify that the FHIR server is configured to require client certificates"}),t.jsx("li",{children:"Monitor certificate expiration dates and renew before expiry"})]})]})]})})]})]}),t.jsxs(Ds,{children:[t.jsx(ne,{type:"button",variant:"outline",onClick:p,disabled:m,children:"Cancel"}),t.jsx(ne,{type:"button",onClick:x,disabled:m,className:"bg-emerald-600 hover:bg-emerald-700",children:m?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})})]})]})})}function fA(){const{clientApis:e}=Vn(),[n,a]=k.useState([]),[o,c]=k.useState(!0),[d,m]=k.useState(null),[f,p]=k.useState(null),[x,j]=k.useState(!1),[b,y]=k.useState("overview"),[_,B]=k.useState(!1),[P,L]=k.useState(null),[U,T]=k.useState(!1),[S,w]=k.useState(null),[I,J]=k.useState({}),[W,C]=k.useState(!1),[$,ee]=k.useState(null),[X,Q]=k.useState({}),[ie,me]=k.useState(!1),R=k.useCallback(async je=>{J(De=>De[je.id]?De:(setTimeout(async()=>{try{const Be=new AbortController,ze=setTimeout(()=>Be.abort(),5e3),ut=await fetch(`${je.url}/metadata`,{method:"HEAD",mode:"no-cors",signal:Be.signal});clearTimeout(ze),ut.type==="opaque"?(console.log(`Marking ${je.serverName||je.name} as INSECURE`),J(ur=>({...ur,[je.id]:"insecure"}))):(console.log(`Marking ${je.serverName||je.name} as SECURE`),J(ur=>({...ur,[je.id]:"secure"})))}catch(Be){console.error(`Security check failed for ${je.serverName||je.name}:`,Be),J(ze=>({...ze,[je.id]:"secure"}))}},0),{...De,[je.id]:"checking"}))},[]),D=k.useCallback(async()=>{try{c(!0),m(null);const De=(await e.servers.getFhirServers()).servers.map(Be=>({...Be,connectionStatus:Be.serverName==="Unknown FHIR Server"||Be.serverName?.includes("Unknown")||Be.fhirVersion==="Unknown"?"disconnected":"connected",loading:!1,error:null}));a(De),J(Be=>{const ze={...Be};return De.forEach(ut=>{ut.connectionStatus==="disconnected"?delete ze[ut.id]:R(ut)}),ze})}catch(je){m("Failed to load FHIR servers"),console.error("Error fetching servers:",je)}finally{c(!1)}},[e,R]),K=async je=>{const De=n.find(Be=>Be.url===je);if(De){L(`This URL is already registered for server "${De.serverName||De.name}"`);return}try{m(null),L(null),await e.servers.postFhirServers({postFhirServersRequest:{url:je}}),B(!1),await D()}catch(Be){console.error("Failed to add FHIR server:",Be);const ze=Be;throw ze?.response?.status===409||ze?.message?.includes("duplicate")||ze?.message?.includes("already exists")?L("This URL is already registered"):ze?.response?.status===400?L("Invalid server URL or server not accessible"):m("Failed to add FHIR server. Please check if the server is accessible and supports FHIR."),Be}},de=je=>{w(je),T(!0)},Ce=async(je,De)=>{const Be=n.find(ze=>ze.url===De&&ze.id!==je.id);if(Be){L(`This URL is already registered for server "${Be.serverName||Be.name}"`);return}if(De===je.url){T(!1),w(null);return}try{m(null),L(null),await e.servers.putFhirServersByServerId({serverId:je.id,putFhirServersByServerIdRequest:{url:De}}),T(!1),w(null),await D()}catch(ze){console.error("Failed to update FHIR server:",ze);const ut=ze;throw ut?.response?.status===409||ut?.message?.includes("duplicate")||ut?.message?.includes("already exists")?L("This URL is already registered"):ut?.response?.status===400?L("Invalid server URL or server not accessible"):m("Failed to update FHIR server. Please check if the server is accessible and supports FHIR."),ze}},_e=k.useCallback(async je=>{try{j(!0);const De=await e.servers.getFhirServersByServerId({serverId:je});p({id:je,...De}),y("details")}catch(De){console.error("Error fetching server detail:",De),p(null)}finally{j(!1)}},[e]),Re=je=>{ee(je),C(!0)},pe=(je,De)=>{Q(Be=>({...Be,[je]:De}))},ve=async(je,De,Be)=>{try{me(!0),Q(ze=>({...ze,[je]:{...ze[je],[`${De}${De==="client"?"Cert":De==="key"?"Key":"Cert"}`]:Be}})),De==="client"&&Q(ze=>({...ze,[je]:{...ze[je],certDetails:{subject:"CN=proxy-client, O=MyOrg",issuer:"CN=MyOrg Test CA",validFrom:new Date().toISOString(),validTo:new Date(Date.now()+365*24*60*60*1e3).toISOString(),fingerprint:"SHA256:"+Math.random().toString(36).substring(7)}}}))}catch(ze){console.error("Failed to upload certificate:",ze)}finally{me(!1)}},Le=je=>{J(De=>{const Be={...De};return delete Be[je.id],Be}),R(je)};return k.useEffect(()=>{D()},[D]),o?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-primary/10 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),t.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Loading FHIR Servers"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Fetching server information..."})]})}):d?t.jsx("div",{className:"p-8",children:t.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-2xl p-6 shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-destructive/10 rounded-xl flex items-center justify-center",children:t.jsx(tt,{className:"h-6 w-6 text-destructive"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-destructive",children:"Error Loading Servers"}),t.jsx("p",{className:"text-destructive/80",children:d})]})]}),t.jsxs(ne,{onClick:D,className:"px-6 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[t.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Retry"]})]})}):t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsx("div",{className:"bg-card/80 backdrop-blur-sm p-8 rounded-3xl border border-border/50 shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"FHIR Server Management"}),t.jsxs("div",{className:"text-muted-foreground text-lg flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Lt,{className:"w-5 h-5 text-primary"})}),"Manage and monitor FHIR server connections"]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs(ne,{onClick:()=>B(!0),className:"px-8 py-4 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white font-semibold rounded-2xl hover:from-emerald-700 hover:to-emerald-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-emerald-500/20",children:[t.jsx(At,{className:"w-5 h-5 mr-2"}),"Add Server"]}),t.jsxs(ne,{onClick:D,className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Refresh"]})]})]})}),t.jsx(oA,{servers:n}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border/50 shadow-lg",children:t.jsxs(vi,{value:b,onValueChange:y,className:"w-full",children:[t.jsxs(yi,{className:"grid w-full grid-cols-2 bg-muted/50 rounded-t-2xl",children:[t.jsx(or,{value:"overview",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:"Server Overview"}),t.jsx(or,{value:"details",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:"Server Details"})]}),t.jsx(lr,{value:"overview",children:t.jsx(cA,{servers:n,securityChecks:I,onViewDetails:_e,onConfigureMtls:Re,onCheckSecurity:Le,onEditServer:de})}),t.jsx(lr,{value:"details",className:"p-6 space-y-6",children:f?t.jsx(dA,{...f}):t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-12 rounded-2xl border border-border shadow-lg text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-muted/50 rounded-2xl flex items-center justify-center shadow-sm",children:t.jsx(xa,{className:"w-8 h-8 text-muted-foreground"})}),t.jsx("h3",{className:"text-xl font-bold text-foreground mb-3",children:"No Server Selected"}),t.jsx("p",{className:"text-muted-foreground mb-6 font-medium",children:"Select a server from the overview tab to view detailed information"}),x&&t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})]})})]})}),t.jsx(uA,{open:_,onOpenChange:B,onAddServer:K,loading:!1,error:d,urlError:P}),t.jsx(hA,{open:U,onOpenChange:T,server:S,onUpdateServer:Ce,loading:!1,error:d,urlError:P}),t.jsx(mA,{open:W,onOpenChange:C,server:$,config:X,onConfigChange:pe,onCertificateUpload:ve,uploadingCerts:ie})]})}const yh=["Patient","Practitioner","PractitionerRole","Organization","Location","Observation","DiagnosticReport","Condition","Procedure","MedicationRequest","Medication","AllergyIntolerance","Immunization","Encounter","Appointment","DocumentReference","Binary","QuestionnaireResponse","CarePlan","Goal","List","Composition","Bundle","ValueSet","CodeSystem","StructureDefinition"],pA={c:{label:"Create",description:"Type level create",color:"bg-green-500/10 dark:bg-green-400/20 text-green-800 dark:text-green-300"},r:{label:"Read",description:"Instance level read, vread, history",color:"bg-blue-500/10 dark:bg-blue-400/20 text-blue-800 dark:text-blue-300"},u:{label:"Update",description:"Instance level update, patch",color:"bg-yellow-500/10 dark:bg-yellow-400/20 text-yellow-800 dark:text-yellow-300"},d:{label:"Delete",description:"Instance level delete",color:"bg-red-500/10 dark:bg-red-400/20 text-red-800 dark:text-red-300"},s:{label:"Search",description:"Type level search, history, system level",color:"bg-purple-500/10 dark:bg-purple-400/20 text-purple-800 dark:text-purple-300"}},xA=[{value:"patient",label:"Patient",description:"Patient-specific data access"},{value:"user",label:"User",description:"User-accessible data"},{value:"system",label:"System",description:"System-level access (no user context)"},{value:"agent",label:"Agent",description:"Access on behalf of an autonomous agent (fhirUser=Device/xyz)"}],bh=[{id:"physician-full",name:"Physician - Full Clinical Access",description:"Complete clinical data access for attending physicians with full CRUD permissions",role:"physician",color:"bg-blue-500/10 dark:bg-blue-400/20 text-blue-800 dark:text-blue-300 border-blue-500/20 dark:border-blue-400/20",scopes:["patient/Patient.cruds","patient/Observation.cruds","patient/DiagnosticReport.cruds","patient/Condition.cruds","patient/Procedure.cruds","patient/MedicationRequest.cruds","patient/AllergyIntolerance.cruds","patient/Immunization.cruds","patient/Encounter.cruds","patient/Appointment.cruds","patient/CarePlan.cruds","patient/Goal.cruds","patient/DocumentReference.cruds","user/Practitioner.rs","user/Organization.rs","user/Location.rs","launch/patient","launch/encounter","openid","profile","fhirUser","offline_access"]},{id:"physician-readonly",name:"Physician - Read-Only Access",description:"Read-only clinical data access for consulting physicians",role:"physician",color:"bg-blue-500/10 dark:bg-blue-400/20 text-blue-800 dark:text-blue-300 border-blue-500/20 dark:border-blue-400/20",scopes:["patient/Patient.rs","patient/Observation.rs","patient/DiagnosticReport.rs","patient/Condition.rs","patient/Procedure.rs","patient/MedicationRequest.rs","patient/AllergyIntolerance.rs","patient/Immunization.rs","patient/Encounter.rs","patient/DocumentReference.rs","user/Practitioner.r","launch/patient","openid","profile","fhirUser"]},{id:"nurse-care",name:"Nurse - Care Delivery",description:"Clinical data access for direct patient care with medication and observation updates",role:"nurse",color:"bg-green-500/10 dark:bg-green-400/20 text-green-800 dark:text-green-300 border-green-500/20 dark:border-green-400/20",scopes:["patient/Patient.rs","patient/Observation.cruds","patient/DiagnosticReport.rs","patient/Condition.rs","patient/MedicationRequest.rs","patient/MedicationAdministration.cruds","patient/AllergyIntolerance.rs","patient/Immunization.cruds","patient/Encounter.rus","patient/Appointment.rs","patient/CarePlan.rs","user/Practitioner.r","launch/patient","openid","profile","fhirUser"]},{id:"nurse-basic",name:"Nurse - Basic Access",description:"Essential read-only clinical data for nursing staff",role:"nurse",color:"bg-green-500/10 dark:bg-green-400/20 text-green-800 dark:text-green-300 border-green-500/20 dark:border-green-400/20",scopes:["patient/Patient.r","patient/Observation.rs","patient/DiagnosticReport.r","patient/Condition.r","patient/MedicationRequest.r","patient/AllergyIntolerance.r","patient/Immunization.r","patient/Encounter.r","launch/patient","openid","fhirUser"]},{id:"researcher-population",name:"Researcher - Population Health",description:"De-identified population-level data access for research and analytics",role:"researcher",color:"bg-purple-500/10 dark:bg-purple-400/20 text-purple-800 dark:text-purple-300 border-purple-500/20 dark:border-purple-400/20",scopes:["user/Patient.rs","user/Observation.rs","user/DiagnosticReport.rs","user/Condition.rs","user/Procedure.rs","user/MedicationRequest.rs","user/Encounter.rs","user/AllergyIntolerance.rs","system/ValueSet.rs","system/CodeSystem.rs","openid","fhirUser"]},{id:"researcher-clinical-trial",name:"Researcher - Clinical Trial",description:"Patient-specific research data access with consent for clinical trials",role:"researcher",color:"bg-purple-500/10 dark:bg-purple-400/20 text-purple-800 dark:text-purple-300 border-purple-500/20 dark:border-purple-400/20",scopes:["patient/Patient.r","patient/Observation.rs","patient/DiagnosticReport.rs","patient/Condition.rs","patient/Procedure.rs","patient/MedicationRequest.rs","patient/ResearchStudy.rs","patient/ResearchSubject.cruds","patient/QuestionnaireResponse.cruds","launch/patient","openid","fhirUser"]},{id:"pharmacist-medication",name:"Pharmacist - Medication Management",description:"Medication-focused access for pharmacists with dispensing capabilities",role:"pharmacist",color:"bg-orange-100 text-orange-800 border-orange-200",scopes:["patient/Patient.rs","patient/MedicationRequest.rs","patient/Medication.rs","patient/MedicationDispense.cruds","patient/MedicationAdministration.rs","patient/AllergyIntolerance.rs","patient/Condition.rs","patient/Observation.rs","user/Practitioner.r","launch/patient","openid","fhirUser"]},{id:"therapist-care",name:"Therapist - Care Planning",description:"Therapy-focused access for physical, occupational, and speech therapists",role:"therapist",color:"bg-teal-100 text-teal-800 border-teal-200",scopes:["patient/Patient.rs","patient/Condition.rs","patient/Procedure.rs","patient/Observation.cruds","patient/CarePlan.cruds","patient/Goal.cruds","patient/Appointment.cruds","patient/DiagnosticReport.rs","user/Practitioner.r","launch/patient","openid","fhirUser"]},{id:"admin-full",name:"Administrator - System Access",description:"Complete system access for healthcare administrators",role:"admin",color:"bg-red-100 text-red-800 border-red-200",scopes:["patient/*.cruds","user/*.cruds","system/*.cruds","launch/patient","launch/encounter","openid","profile","fhirUser","offline_access"]},{id:"emergency-physician",name:"Emergency Physician - Critical Care",description:"Emergency department access with rapid clinical data retrieval",role:"physician",color:"bg-red-100 text-red-800 border-red-200",scopes:["patient/Patient.cruds","patient/Observation.cruds","patient/DiagnosticReport.cruds","patient/Condition.cruds","patient/MedicationRequest.cruds","patient/AllergyIntolerance.cruds","patient/Encounter.cruds","patient/Procedure.cruds","user/Practitioner.rs","user/Location.rs","launch/patient","launch/encounter","openid","fhirUser"]},{id:"autonomous-agent",name:"Autonomous Agent - Clinical AI",description:"Agent scopes for autonomous AI systems acting independently (fhirUser should reference Device resource)",role:"agent",color:"bg-purple-100 text-purple-800 border-purple-200",scopes:["agent/Patient.read","agent/Observation.read","agent/DiagnosticReport.read","agent/Condition.read","agent/MedicationRequest.read","agent/AllergyIntolerance.read","agent/CarePlan.create","agent/RiskAssessment.create","agent/ClinicalImpression.create","openid","fhirUser"]},{id:"emergency-agent",name:"Emergency Response Agent",description:"Agent scopes for emergency response robots/devices (fhirUser=Device/emergency-unit-id)",role:"agent",color:"bg-red-100 text-red-800 border-red-200",scopes:["agent/Patient.read","agent/Encounter.create","agent/Observation.create","agent/AllergyIntolerance.read","agent/MedicationStatement.read","agent/EmergencyContact.read","openid","fhirUser"]}];function gA(){const{t:e}=hn(),[n,a]=k.useState([]),[o,c]=k.useState(!1),[d,m]=k.useState(!1),[f,p]=k.useState(null),[x,j]=k.useState({name:"",description:"",scopes:[]}),[b,y]=k.useState({context:"patient",resource:"",permissions:[],searchParams:"",customScope:"",selectedRole:void 0});k.useEffect(()=>{_()},[]);const _=async()=>{c(!0);try{const C=await Hn("smart-scope-sets")||[],$=bh.map(ie=>({...ie,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isTemplate:!0})),ee=C.filter(ie=>ie.isTemplate).map(ie=>ie.id),X=$.filter(ie=>!ee.includes(ie.id)),Q=[...C,...X];a(Q),await vc("smart-scope-sets",Q)}catch(C){console.error("Failed to load scope sets:",C)}finally{c(!1)}},B=async C=>{const $={...C,id:f?.id||`scope-${Date.now()}`,createdAt:f?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),isTemplate:!1},ee=f?n.map(X=>X.id===f.id?$:X):[...n,$];a(ee),await vc("smart-scope-sets",ee),m(!1),p(null),j({name:"",description:"",scopes:[]}),y({context:"patient",resource:"",permissions:[],searchParams:"",customScope:"",selectedRole:void 0})},P=async C=>{const $=n.filter(ee=>ee.id!==C);a($),await vc("smart-scope-sets",$)},L=C=>{if(!C.trim())return{valid:!1,message:"Scope cannot be empty",type:"error",suggestions:["Try: patient/Patient.r","Try: openid","Try: launch/patient"]};const $=C.trim();if(["openid","profile","fhirUser","offline_access","online_access"].includes($))return{valid:!0,message:`Valid SMART launch scope: ${$}`,type:"success"};if(/^launch\/(patient|encounter|practitioner|location|organization)(\?.*)?$/.test($))return{valid:!0,message:`Valid launch context scope: ${$}`,type:"success"};const ie=/^(patient|user|system|agent)\/([\w*]+)\.([cruds]+)(\?.*)?$/.exec($);if(!ie){const ve=[];return $.includes("/")&&$.includes(".")?(ve.push("Format should be: context/Resource.permissions"),ve.push("Example: patient/Patient.cruds")):$.includes("/")?(ve.push("Missing permissions after resource name"),ve.push("Add permissions like: .r (read) or .cruds (full access)")):(ve.push("Use format: context/Resource.permissions"),ve.push("Valid contexts: patient, user, system, agent")),{valid:!1,message:"Invalid SMART scope format. Expected: context/Resource.permissions or launch scope",type:"error",suggestions:ve}}const[,me,R,D]=ie,K=["patient","user","system","agent"];if(!K.includes(me))return{valid:!1,message:`Invalid context '${me}'. Valid contexts: ${K.join(", ")}`,type:"error",suggestions:K.map(ve=>`${ve}/${R}.${D}`)};if(R!=="*"&&!yh.includes(R)){const ve=yh.filter(Le=>Le.toLowerCase().includes(R.toLowerCase())||R.toLowerCase().includes(Le.toLowerCase())).slice(0,3);return{valid:!1,message:`'${R}' is not a standard FHIR resource`,type:"warning",suggestions:ve.length>0?ve.map(Le=>`${me}/${Le}.${D}`):[`${me}/Patient.${D}`,`${me}/Observation.${D}`]}}const de="cruds";let Ce=-1;const _e={c:"create",r:"read",u:"update",d:"delete",s:"search"};for(const ve of D){const Le=de.indexOf(ve);if(Le===-1)return{valid:!1,message:`Invalid permission '${ve}'. Valid permissions: c(create), r(read), u(update), d(delete), s(search)`,type:"error",suggestions:[`${me}/${R}.r`,`${me}/${R}.rs`,`${me}/${R}.cruds`]};if(Le<=Ce)return{valid:!1,message:"Permissions must be in order: c, r, u, d, s",type:"error",suggestions:[`${me}/${R}.${D.split("").sort((je,De)=>de.indexOf(je)-de.indexOf(De)).join("")}`]};Ce=Le}const Re=[];D.includes("d")&&me==="patient"&&Re.push("Delete permission on patient data requires careful consideration"),R==="*"&&D.includes("c")&&Re.push("Create permission on all resources (*) is very broad"),me==="system"&&D.length>2&&Re.push("System-level access with broad permissions should be restricted");const pe=D.split("").map(ve=>_e[ve]).join(", ");return{valid:!0,message:Re.length>0?`Valid scope with ${pe} permissions. Warning: ${Re[0]}`:`Valid FHIR scope: ${me}/${R} with ${pe} permissions`,type:Re.length>0?"warning":"success"}},U=()=>{if(b.customScope)return b.customScope;if(!b.context||!b.resource||b.permissions.length===0)return"";let C=`${b.context}/${b.resource}.${b.permissions.sort().join("")}`;return b.searchParams&&(C+=`?${b.searchParams}`),C},T=()=>{const C=U();C&&!x.scopes.includes(C)&&(j({...x,scopes:[...x.scopes,C]}),y({context:"patient",resource:"",permissions:[],searchParams:"",customScope:"",selectedRole:void 0}))},S=C=>{j({...x,scopes:x.scopes.filter(($,ee)=>ee!==C)})},w=C=>{navigator.clipboard.writeText(C)},I=async C=>{const $=L(C);console.log("Scope validation result:",$),setTimeout(()=>{console.log("API test completed")},3e3)},J=C=>{p(C),j({name:C.name,description:C.description,scopes:[...C.scopes]}),m(!0)},W=C=>{j({name:C.name+" (Copy)",description:C.description,scopes:[...C.scopes]}),m(!0)};return t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsx("div",{className:"bg-gradient-to-r from-background to-muted/50 p-8 rounded-3xl border border-border shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:e("SMART Scope Management")}),t.jsxs("div",{className:"text-muted-foreground text-lg flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Pe,{className:"w-5 h-5 text-primary"})}),e("Build and manage FHIR resource access scopes")]})]}),t.jsxs(ne,{onClick:()=>m(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(At,{className:"h-5 w-5 mr-2"}),e("Create Scope Set")]})]})}),d&&t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-8 rounded-2xl border border-border shadow-lg",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(sg,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:e(f?"Edit Scope Set":"Visual Scope Builder")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("Build SMART on FHIR scopes visually or with templates")})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground",children:e("Scope Set Details")}),t.jsx(Ae,{placeholder:e("Scope set name"),value:x.name,onChange:C=>j({...x,name:C.target.value}),className:"rounded-xl"}),t.jsx(Ae,{placeholder:e("Description"),value:x.description,onChange:C=>j({...x,description:C.target.value}),className:"rounded-xl"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground",children:e("Role-Based Templates")}),t.jsxs("select",{value:b.selectedRole||"all",onChange:C=>y({...b,selectedRole:C.target.value==="all"?void 0:C.target.value}),className:"text-xs border border-border rounded-lg px-2 py-1 bg-background text-foreground",children:[t.jsx("option",{value:"all",children:e("All Roles")}),t.jsx("option",{value:"physician",children:e("Physician")}),t.jsx("option",{value:"nurse",children:e("Nurse")}),t.jsx("option",{value:"researcher",children:e("Researcher")}),t.jsx("option",{value:"pharmacist",children:e("Pharmacist")}),t.jsx("option",{value:"therapist",children:e("Therapist")}),t.jsx("option",{value:"admin",children:e("Administrator")}),t.jsx("option",{value:"agent",children:e("Agent")})]})]}),t.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-80 overflow-y-auto",children:bh.filter(C=>!b.selectedRole||C.role===b.selectedRole).map(C=>t.jsxs("div",{className:"p-4 border border-border rounded-xl hover:bg-muted/50 hover:border-border/80 transition-all duration-200 cursor-pointer group",onClick:()=>W(C),children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${C.color}`,children:C.role}),t.jsx("h4",{className:"font-semibold text-foreground text-sm group-hover:text-primary transition-colors",children:C.name})]}),t.jsxs("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-lg",children:[C.scopes.length," scopes"]})]}),t.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:C.description}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.scopes.slice(0,4).map(($,ee)=>t.jsx("span",{className:"text-xs font-mono bg-primary/10 text-primary px-2 py-1 rounded",children:$},ee)),C.scopes.length>4&&t.jsxs("span",{className:"text-xs text-muted-foreground px-2 py-1",children:["+",C.scopes.length-4," more"]})]})]},C.id))})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground",children:e("Visual Scope Builder")}),t.jsxs("div",{children:[t.jsx(re,{className:"text-xs text-muted-foreground mb-2 block",children:e("Context")}),t.jsx("select",{value:b.context,onChange:C=>y({...b,context:C.target.value}),className:"w-full rounded-lg border-border bg-background text-foreground",children:xA.map(C=>t.jsxs("option",{value:C.value,children:[C.label," - ",C.description]},C.value))})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-xs text-muted-foreground mb-2 block",children:e("FHIR Resource")}),t.jsxs("select",{value:b.resource,onChange:C=>y({...b,resource:C.target.value}),className:"w-full rounded-lg border-border bg-background text-foreground",children:[t.jsx("option",{value:"",children:e("Select resource...")}),t.jsx("option",{value:"*",children:e("* (All resources)")}),yh.map(C=>t.jsx("option",{value:C,children:C},C))]})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-xs text-muted-foreground mb-2 block",children:e("Permissions")}),t.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(pA).map(([C,$])=>t.jsxs("label",{className:"flex items-center space-x-2 p-2 border border-border rounded-lg hover:bg-muted/50",children:[t.jsx("input",{type:"checkbox",checked:b.permissions.includes(C),onChange:ee=>{ee.target.checked?y({...b,permissions:[...b.permissions,C].sort()}):y({...b,permissions:b.permissions.filter(X=>X!==C)})},className:"rounded text-primary"}),t.jsx("span",{className:"text-sm font-medium text-foreground",title:$.description,children:$.label})]},C))})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-xs text-muted-foreground mb-2 block",children:e("Search Parameters (Optional)")}),t.jsx(Ae,{placeholder:"e.g., category=laboratory&status=final",value:b.searchParams,onChange:C=>y({...b,searchParams:C.target.value}),className:"rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-xs text-muted-foreground mb-2 block",children:e("Or enter custom scope")}),t.jsx(Ae,{placeholder:"e.g., launch/patient, openid, fhirUser",value:b.customScope,onChange:C=>y({...b,customScope:C.target.value}),className:"rounded-lg text-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{className:"text-xs text-muted-foreground",children:e("Scope Preview")}),t.jsx("div",{className:"space-y-2",children:(()=>{const C=U(),$=C?L(C):null;return t.jsxs("div",{className:`p-3 rounded-lg border transition-all duration-200 ${C?$?.type==="success"?"bg-green-500/10 border-green-500/20":$?.type==="warning"?"bg-yellow-500/10 border-yellow-500/20":"bg-red-500/10 border-red-500/20":"bg-muted border-border"}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("code",{className:`text-sm font-mono ${C?"text-foreground":"text-muted-foreground"}`,children:C||e("Build a scope...")}),t.jsxs(ne,{onClick:T,disabled:!C||$?.valid===!1,size:"sm",className:"px-4 py-2",children:[t.jsx(At,{className:"w-4 h-4 mr-1"}),e("Add")]})]}),$&&t.jsx("div",{className:`mt-2 text-xs font-medium ${$.type==="success"?"text-green-700 dark:text-green-300":$.type==="warning"?"text-yellow-700 dark:text-yellow-300":"text-red-700 dark:text-red-300"}`,children:$.message}),$?.suggestions&&$.suggestions.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:e("Suggestions:")}),t.jsx("div",{className:"flex flex-wrap gap-1",children:$.suggestions.slice(0,2).map((ee,X)=>t.jsx("button",{onClick:()=>{y({...b,customScope:ee})},className:"text-xs font-mono bg-primary/10 text-primary hover:bg-primary/20 px-2 py-1 rounded transition-colors",children:ee},X))})]})]})})()})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(re,{className:"text-sm font-semibold text-foreground",children:e("Current Scope Set")}),t.jsx("div",{className:"border border-border rounded-xl p-4 max-h-96 overflow-y-auto bg-card",children:x.scopes.length===0?t.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[t.jsx(Pe,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{className:"font-medium",children:e("No scopes added yet")}),t.jsx("p",{className:"text-sm mt-1",children:e("Build scopes using the controls on the left or load a template")})]}):t.jsx("div",{className:"space-y-3",children:x.scopes.map((C,$)=>{const ee=L(C);return t.jsxs("div",{className:`p-4 rounded-xl border transition-all duration-200 ${ee.type==="success"?"bg-green-500/10 border-green-500/20":ee.type==="warning"?"bg-yellow-500/10 border-yellow-500/20":"bg-red-500/10 border-red-500/20"}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[t.jsx("code",{className:"text-sm font-mono text-foreground bg-background px-2 py-1 rounded border border-border",children:C}),t.jsxs("div",{className:"flex items-center",children:[ee.type==="success"&&t.jsx(Nt,{className:"w-4 h-4 text-green-500"}),ee.type==="warning"&&t.jsx(tt,{className:"w-4 h-4 text-yellow-500"}),ee.type==="error"&&t.jsx(tt,{className:"w-4 h-4 text-red-500"})]})]}),t.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[t.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>w(C),className:"p-1 h-8 w-8 hover:bg-muted",title:e("Copy scope"),children:t.jsx(Ts,{className:"w-3 h-3"})}),t.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>I(C),className:"p-1 h-8 w-8 hover:bg-muted",title:e("Test scope"),children:t.jsx(zc,{className:"w-3 h-3"})}),t.jsx(ne,{size:"sm",variant:"ghost",onClick:()=>S($),className:"p-1 h-8 w-8 text-red-600 hover:text-red-700 hover:bg-muted",title:e("Remove scope"),children:t.jsx(va,{className:"w-3 h-3"})})]})]}),t.jsx("div",{className:`text-xs font-medium mb-1 ${ee.type==="success"?"text-green-700 dark:text-green-300":ee.type==="warning"?"text-yellow-700 dark:text-yellow-300":"text-red-700 dark:text-red-300"}`,children:ee.message}),ee.suggestions&&ee.suggestions.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:e("Suggestions:")}),t.jsx("div",{className:"flex flex-wrap gap-1",children:ee.suggestions.slice(0,3).map((X,Q)=>t.jsx("button",{onClick:()=>{const ie=[...x.scopes];ie[$]=X,j({...x,scopes:ie})},className:"text-xs font-mono bg-primary/10 text-primary hover:bg-primary/20 px-2 py-1 rounded transition-colors cursor-pointer",children:X},Q))})]})]},$)})})}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsxs(ne,{onClick:async()=>await B(x),disabled:!x.name||x.scopes.length===0,className:"px-8 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500",children:[e(f?"Update":"Save")," ",e("Scope Set")]}),t.jsx(ne,{variant:"outline",onClick:()=>{m(!1),p(null),j({name:"",description:"",scopes:[]})},className:"px-8 py-3",children:e("Cancel")})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Lt,{className:"w-6 h-6 text-primary"})}),t.jsx("h3",{className:"text-sm font-semibold text-primary tracking-wide",children:e("Total Scope Sets")})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:n.length}),t.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:e("Custom & templates")})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-green-600"})}),t.jsx("h3",{className:"text-sm font-semibold text-green-800 dark:text-green-300 tracking-wide",children:e("Custom Scope Sets")})]}),t.jsx("div",{className:"text-3xl font-bold text-green-900 dark:text-green-300 mb-2",children:n.filter(C=>!C.isTemplate).length}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 font-medium",children:e("User created")})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-purple-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(sg,{className:"w-6 h-6 text-purple-600"})}),t.jsx("h3",{className:"text-sm font-semibold text-purple-800 dark:text-purple-300 tracking-wide",children:e("Available Templates")})]}),t.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-300 mb-2",children:bh.length}),t.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400 font-medium",children:e("Role-based")})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500/20 to-orange-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-6 h-6 text-orange-600"})}),t.jsx("h3",{className:"text-sm font-semibold text-orange-800 dark:text-orange-300 tracking-wide",children:e("Avg Scopes")})]}),t.jsx("div",{className:"text-3xl font-bold text-orange-900 dark:text-orange-300 mb-2",children:n.length>0?Math.round(n.reduce((C,$)=>C+$.scopes.length,0)/n.length):0}),t.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 font-medium",children:e("Per scope set")})]})})})]}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border shadow-lg overflow-hidden",children:t.jsxs("div",{className:"p-8 pb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Lt,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:e("Scope Sets")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("Manage your SMART scope configurations")})]})]}),o?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(Mt,{className:"w-8 h-8 animate-spin text-primary"})}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs($c,{children:[t.jsx(Vc,{children:t.jsxs(Us,{className:"border-border",children:[t.jsx(at,{className:"font-semibold text-foreground",children:e("Name")}),t.jsx(at,{className:"font-semibold text-foreground",children:e("Scopes")}),t.jsx(at,{className:"font-semibold text-foreground",children:e("Type")}),t.jsx(at,{className:"font-semibold text-foreground",children:e("Updated")}),t.jsx(at,{className:"w-12"})]})}),t.jsx(Gc,{children:n.map(C=>t.jsxs(Us,{className:"border-border hover:bg-muted/50 transition-colors duration-200",children:[t.jsx(it,{children:t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-foreground",children:C.name}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:C.description})]})}),t.jsx(it,{children:t.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.scopes.slice(0,3).map(($,ee)=>t.jsx(ge,{variant:"outline",className:"text-xs font-mono",children:$},ee)),C.scopes.length>3&&t.jsxs(ge,{variant:"outline",className:"text-xs",children:["+",C.scopes.length-3," more"]})]})}),t.jsx(it,{children:t.jsx(ge,{className:C.isTemplate?"bg-purple-500/10 text-purple-800 dark:text-purple-300":"bg-primary/10 text-primary",children:C.isTemplate?e("Template"):e("Custom")})}),t.jsx(it,{className:"text-sm text-muted-foreground",children:new Date(C.updatedAt).toLocaleDateString()}),t.jsx(it,{children:t.jsxs(mi,{children:[t.jsx(fi,{asChild:!0,children:t.jsx(ne,{variant:"ghost",className:"h-8 w-8 p-0",children:t.jsx(Jr,{className:"h-4 w-4"})})}),t.jsxs(pi,{align:"end",children:[t.jsxs(ft,{onClick:()=>J(C),children:[t.jsx(_s,{className:"w-4 h-4 mr-2"}),e("Edit")]}),t.jsxs(ft,{onClick:()=>w(C.scopes.join(" ")),children:[t.jsx(Ts,{className:"w-4 h-4 mr-2"}),e("Copy Scopes")]}),!C.isTemplate&&t.jsxs(ft,{onClick:async()=>await P(C.id),className:"text-red-600",children:[t.jsx(va,{className:"w-4 h-4 mr-2"}),e("Delete")]})]})]})})]},C.id))})]})})]})})]})}const Po=k.forwardRef(({className:e,...n},a)=>t.jsx("textarea",{className:Ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...n}));Po.displayName="Textarea";const vA=["patient","encounter","practitioner","location","organization","diagnosticreport","imagingstudy","list","questionnaire"],yA=["openid","fhirUser","profile","offline_access","online_access","launch","launch/patient","launch/encounter"];function bA({open:e,onOpenChange:n,editingSet:a,onSave:o,onCancel:c}){const[d,m]=k.useState({name:"",description:"",category:"",contexts:[]}),[f,p]=k.useState({resource:"",role:"",customScope:""}),[x,j]=k.useState(null),[b,y]=k.useState("quick");k.useEffect(()=>{m(a?{name:a.name,description:a.description||"",category:a.category||"",contexts:[...a.contexts]}:{name:"",description:"",category:"",contexts:[]}),p({resource:"",role:"",customScope:""}),j(null)},[a]);const _=w=>{if(!w.trim())return{valid:!1,message:"Scope cannot be empty",type:"error"};const I=w.trim();return["openid","profile","fhirUser","offline_access","online_access","launch"].includes(I)?{valid:!0,message:`Valid SMART scope: ${I}`,type:"success"}:/^launch\/(patient|encounter|practitioner|location|organization|diagnosticreport|imagingstudy|list|questionnaire)(\?.*)?$/.test(I)?{valid:!0,message:`Valid launch context scope: ${I}`,type:"success"}:/^(patient|user|system)\/([\w*]+)\.([cruds]+)(\?.*)?$/.test(I)?{valid:!0,message:`Valid FHIR resource scope: ${I}`,type:"success"}:{valid:!1,message:"Invalid scope format",type:"error"}},B=()=>{const{resource:w,role:I,customScope:J}=f;if(J.trim())return J.trim();if(!w)return"";let W=`launch/${w}`;return I.trim()&&(W+=`?role=${encodeURIComponent(I.trim())}`),W},P=()=>{const w=B();if(w&&!d.contexts.includes(w)){const I=_(w);if(!I.valid){j(`Invalid scope: ${I.message}`);return}m({...d,contexts:[...d.contexts,w]}),p({resource:"",role:"",customScope:""}),j(null)}},L=w=>{d.contexts.includes(w)||m({...d,contexts:[...d.contexts,w]})},U=w=>{m({...d,contexts:d.contexts.filter((I,J)=>J!==w)})},T=()=>{!d.name.trim()||d.contexts.length===0||o({name:d.name.trim(),description:d.description.trim(),category:d.category.trim(),contexts:d.contexts,isTemplate:!1})},S=()=>{m({name:"",description:"",category:"",contexts:[]}),p({resource:"",role:"",customScope:""}),j(null),c()};return t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"sm:max-w-[900px] max-h-[90vh] overflow-y-auto",children:[t.jsx(Xt,{className:"pb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-700 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Ch,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),t.jsxs("div",{children:[t.jsx(Zt,{className:"text-2xl font-bold text-foreground tracking-tight",children:a?"Edit Launch Context Set":"Create Launch Context Set"}),t.jsx(dr,{className:"text-muted-foreground font-medium mt-1",children:"Configure launch contexts for SMART on FHIR applications. These determine what contextual information is available during app launch."})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-6 p-6 bg-blue-50/50 dark:bg-blue-950/30 rounded-xl border border-blue-200/50 dark:border-blue-800/30",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-700 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(bN,{className:"w-4 h-4 text-blue-600 dark:text-blue-300"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:"Basic Information"}),t.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Define the context set name, description, and category"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"context-name",className:"text-sm font-semibold text-foreground",children:"Context Set Name *"}),t.jsx(Ae,{id:"context-name",value:d.name,onChange:w=>m({...d,name:w.target.value}),placeholder:"e.g., Emergency Department Launch, Radiology Workflow",className:"rounded-xl border-border focus:border-blue-500 focus:ring-blue-500 shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"context-description",className:"text-sm font-semibold text-foreground",children:"Description"}),t.jsx(Po,{id:"context-description",value:d.description,onChange:w=>m({...d,description:w.target.value}),placeholder:"Describe when this context set should be used and what it enables...",rows:3,className:"rounded-xl border-border focus:border-blue-500 focus:ring-blue-500 shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"context-category",className:"text-sm font-semibold text-foreground",children:"Category"}),t.jsxs("select",{id:"context-category",value:d.category,onChange:w=>m({...d,category:w.target.value}),className:"flex h-10 w-full rounded-xl border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",children:[t.jsx("option",{value:"",children:"Select Category"}),t.jsx("option",{value:"ehr-launch",children:"🏥 EHR Launch"}),t.jsx("option",{value:"standalone",children:"📱 Standalone"}),t.jsx("option",{value:"workflow",children:"⚡ Workflow"}),t.jsx("option",{value:"specialty",children:"🔬 Specialty"}),t.jsx("option",{value:"data-collection",children:"📊 Data Collection"}),t.jsx("option",{value:"identity",children:"🔐 Identity"})]})]})]})]}),t.jsxs("div",{className:"space-y-6 p-6 bg-green-50/50 dark:bg-green-950/30 rounded-xl border border-green-200/50 dark:border-green-800/30",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-100 to-green-200 dark:from-green-800 dark:to-green-700 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(Aj,{className:"w-4 h-4 text-green-600 dark:text-green-300"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:"Scope Builder"}),t.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Add SMART scopes and launch contexts to this set"})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(ne,{size:"sm",variant:b==="quick"?"default":"outline",onClick:()=>y("quick"),className:b==="quick"?"bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-xl hover:from-green-700 hover:to-green-800":"rounded-xl border-green-300 dark:border-green-600 bg-white dark:bg-slate-800 text-green-700 dark:text-green-300 hover:bg-green-50 dark:hover:bg-green-950/50 hover:border-green-400 dark:hover:border-green-500",children:[t.jsx(Yh,{className:"w-4 h-4 mr-2"}),"Quick Add"]}),t.jsxs(ne,{size:"sm",variant:b==="custom"?"default":"outline",onClick:()=>y("custom"),className:b==="custom"?"bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-xl hover:from-green-700 hover:to-green-800":"rounded-xl border-green-300 dark:border-green-600 bg-white dark:bg-slate-800 text-green-700 dark:text-green-300 hover:bg-green-50 dark:hover:bg-green-950/50 hover:border-green-400 dark:hover:border-green-500",children:[t.jsx(nN,{className:"w-4 h-4 mr-2"}),"Custom Builder"]})]}),b==="quick"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs(re,{className:"text-sm font-semibold text-foreground flex items-center",children:[t.jsx(_o,{className:"w-4 h-4 mr-2"}),"Common SMART Scopes"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:yA.map(w=>t.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>L(w),disabled:d.contexts.includes(w),className:"text-xs rounded-xl border-border text-foreground hover:bg-green-50 dark:hover:bg-green-950/30 hover:border-green-300 dark:hover:border-green-700 hover:text-green-700 dark:hover:text-green-300 disabled:opacity-50 disabled:text-muted-foreground shadow-sm font-mono",children:[t.jsx(At,{className:"w-3 h-3 mr-1"}),w]},w))})]})}),b==="custom"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs(re,{className:"text-sm font-semibold text-foreground flex items-center",children:[t.jsx(ga,{className:"w-4 h-4 mr-2"}),"Build Launch Context"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[t.jsxs("select",{value:f.resource,onChange:w=>p({...f,resource:w.target.value}),className:"flex h-10 w-full rounded-xl border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm",children:[t.jsx("option",{value:"",children:"Select Resource"}),vA.map(w=>t.jsx("option",{value:w,children:w},w))]}),t.jsx(Ae,{placeholder:"Role URI (optional)",value:f.role,onChange:w=>p({...f,role:w.target.value}),className:"text-sm rounded-xl border-border focus:border-green-500 focus:ring-green-500 shadow-sm"}),t.jsx("div",{className:"md:col-span-2",children:t.jsxs(ne,{onClick:P,className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-sm hover:shadow-md",disabled:!f.resource&&!f.customScope.trim(),children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Add Launch Context"]})})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(re,{className:"text-sm font-semibold text-foreground flex items-center",children:[t.jsx(jN,{className:"w-4 h-4 mr-2"}),"Or Enter Custom Scope"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Ae,{placeholder:"e.g., patient/Observation.rs, user/*.cruds, launch/patient",value:f.customScope,onChange:w=>p({...f,customScope:w.target.value}),className:"text-sm rounded-xl border-border focus:border-green-500 focus:ring-green-500 shadow-sm",onKeyPress:w=>w.key==="Enter"&&P()}),t.jsx(ne,{onClick:P,className:"bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-sm hover:shadow-md",disabled:!f.customScope.trim(),children:t.jsx(At,{className:"w-4 h-4"})})]})]})]}),x&&t.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(tt,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:x})]})})]}),t.jsxs("div",{className:"space-y-6 p-6 bg-purple-50/50 dark:bg-purple-950/30 rounded-xl border border-purple-200/50 dark:border-purple-800/30",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-100 to-purple-200 dark:from-purple-800 dark:to-purple-700 rounded-lg flex items-center justify-center shadow-sm",children:t.jsx(ga,{className:"w-4 h-4 text-purple-600 dark:text-purple-300"})}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:["Current Scopes (",d.contexts.length,")"]}),t.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Review and manage selected scopes"})]})]}),d.contexts.length>0&&t.jsxs(ge,{className:"bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-800 dark:to-purple-700 text-purple-800 dark:text-purple-300 border-purple-300 dark:border-purple-600 shadow-sm",children:[d.contexts.length," configured"]})]}),t.jsx("div",{className:"max-h-40 overflow-y-auto border border-purple-200/50 dark:border-purple-700/30 rounded-xl p-4 bg-white/70 dark:bg-card/70 backdrop-blur-sm shadow-sm",children:d.contexts.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-gradient-to-br from-muted/50 to-muted rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ga,{className:"w-6 h-6 text-muted-foreground"})}),t.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"No scopes added yet"}),t.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Add scopes using the builder above"})]}):t.jsx("div",{className:"flex flex-wrap gap-2",children:d.contexts.map((w,I)=>t.jsxs(ge,{variant:"outline",className:"flex items-center bg-background shadow-sm hover:shadow-md transition-all duration-200 border-purple-200 dark:border-purple-700/50 text-purple-800 dark:text-purple-300 rounded-lg font-mono text-xs",children:[t.jsx("span",{children:w}),t.jsx($n,{className:"w-3 h-3 ml-2 cursor-pointer hover:text-red-600 transition-colors",onClick:()=>U(I)})]},w))})})]})]}),t.jsxs(Ds,{className:"flex space-x-3 pt-6",children:[t.jsx(ne,{type:"button",variant:"outline",onClick:S,className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:"Cancel"}),t.jsx(ne,{type:"button",onClick:T,disabled:!d.name.trim()||d.contexts.length===0,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:a?t.jsxs(t.Fragment,{children:[t.jsx(_s,{className:"w-4 h-4 mr-2"}),"Update Context Set"]}):t.jsxs(t.Fragment,{children:[t.jsx(_o,{className:"w-4 h-4 mr-2"}),"Create Context Set"]})})]})]})})}const wA=[{id:"ehr-patient-launch",name:"EHR Patient Launch",description:"Standard patient context launch from within an EHR with full patient access",contexts:["launch","launch/patient","openid","fhirUser","patient/*.rs"],category:"ehr-launch",isTemplate:!0},{id:"ehr-encounter-launch",name:"EHR Encounter Launch",description:"Patient and encounter context launch from within an EHR",contexts:["launch","launch/patient","launch/encounter","openid","fhirUser","patient/*.rs"],category:"ehr-launch",isTemplate:!0},{id:"standalone-patient",name:"Standalone Patient Launch",description:"Standalone app launch with patient selection for apps launched outside EHR",contexts:["launch","launch/patient","openid","fhirUser","patient/*.rs"],category:"standalone",isTemplate:!0},{id:"practitioner-context",name:"Practitioner Context",description:"Launch with practitioner context for workflow apps",contexts:["launch","launch/practitioner","openid","fhirUser","user/Practitioner.rs"],category:"workflow",isTemplate:!0},{id:"imaging-study-context",name:"Imaging Study Context",description:"Launch with imaging study context for radiology apps",contexts:["launch","launch/imagingstudy","launch/patient","openid","fhirUser","patient/ImagingStudy.rs","patient/DiagnosticReport.rs"],category:"specialty",isTemplate:!0},{id:"medication-reconciliation",name:"Medication Reconciliation",description:"Medication reconciliation with role-based list contexts",contexts:["launch","launch/patient","launch/list?role=https://example.org/med-list-at-home","launch/list?role=https://example.org/med-list-at-hospital","openid","fhirUser","patient/MedicationRequest.cruds","patient/List.rs"],category:"specialty",isTemplate:!0},{id:"questionnaire-context",name:"Questionnaire Data Collection",description:"Data collection app with questionnaire context",contexts:["launch","launch/questionnaire","launch/patient","openid","fhirUser","patient/QuestionnaireResponse.cruds"],category:"data-collection",isTemplate:!0},{id:"minimal-identity",name:"Minimal Identity Only",description:"Basic identity verification without patient access",contexts:["openid","fhirUser"],category:"identity",isTemplate:!0}],yg=[{userId:"sample-user-1",username:"dr.smith",fhirUser:"Practitioner/12345",patient:"Patient/67890",encounter:"Encounter/abc123",intent:"patient-summary",tenant:"general-hospital",needPatientBanner:!0,smartStyleUrl:"https://ehr.hospital.com/smart-styles.json"},{userId:"sample-user-2",username:"nurse.johnson",fhirUser:"Practitioner/54321",patient:"Patient/98765",encounter:"Encounter/def456",intent:"medication-administration",tenant:"general-hospital",needPatientBanner:!0,fhirContext:'[{"reference": "MedicationRequest/med-123", "role": "active-medications"}]'},{userId:"sample-user-3",username:"radiologist.brown",fhirUser:"Practitioner/11111",patient:"Patient/22222",intent:"imaging-review",tenant:"imaging-center",needPatientBanner:!1,fhirContext:'[{"reference": "ImagingStudy/img-789", "role": "current-study"}, {"reference": "DiagnosticReport/report-456", "role": "preliminary-report"}]'},{userId:"sample-user-4",username:"pharmacist.davis",fhirUser:"Practitioner/33333",patient:"Patient/44444",encounter:"Encounter/ghi789",intent:"reconcile-medications",tenant:"general-hospital",needPatientBanner:!0,fhirContext:'[{"reference": "List/home-meds", "role": "https://example.org/med-list-at-home"}, {"reference": "List/hospital-meds", "role": "https://example.org/med-list-at-hospital"}]'},{userId:"sample-user-5",username:"therapist.wilson",fhirUser:"Practitioner/55555",patient:"Patient/66666",intent:"care-planning",tenant:"rehab-center",needPatientBanner:!0,smartStyleUrl:"https://rehab.center.com/therapy-styles.json"}];function NA(){const{contextSets:e,addContextSet:n,updateContextSet:a,deleteContextSet:o}=qk(),{isAuthenticated:c,profile:d,clientApis:m}=Vn(),f=k.useRef(!1),[p,x]=k.useState([]),[j,b]=k.useState(!1),[y,_]=k.useState(!1),[B,P]=k.useState(null),[L,U]=k.useState(!1),[T,S]=k.useState(null),[w,I]=k.useState("overview"),J=k.useRef(!1),W=k.useRef(!1),C=()=>{W.current=!1,J.current=!1,w==="users"?(I("overview"),setTimeout(()=>I("users"),50)):I("users")};k.useEffect(()=>{if(!f.current){b(!0);try{const R=e.filter(de=>de.isTemplate).map(de=>de.id),K=wA.map(de=>({...de,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).filter(de=>!R.includes(de.id));K.length>0&&(K.forEach(de=>{n(de)}),console.debug("🎯 Launch context templates initialized:",{existing:R.length,added:K.length})),f.current=!0}catch(R){console.error("Failed to initialize launch context templates",R),P("Failed to initialize context templates")}finally{b(!1)}}},[n,e]),k.useEffect(()=>{w==="users"&&!W.current&&(W.current=!0,(async()=>{if(J.current){console.debug("Launch contexts already loading, skipping...");return}if(!c){console.warn("User not authenticated, cannot load admin launch contexts"),P("You must be authenticated to view user launch contexts.");return}if(!d?.roles?.includes("admin")){console.warn("User does not have admin role, cannot access admin endpoints"),P("Admin privileges required. You need admin role to view user launch contexts.");return}J.current=!0,_(!0),P(null);try{const D=await m.launchContexts.getAdminLaunchContexts();x(D),console.log("Successfully loaded launch contexts:",D.length)}catch(D){console.error("Failed to load launch contexts:",D),P("Failed to load launch contexts. Please try again.")}finally{_(!1),J.current=!1}})())},[w,c,d,m.launchContexts]);const $=R=>{const D=T?.id||`ctx-${Date.now()}`,K=new Date().toISOString(),de={...R,id:D,createdAt:T?.createdAt||K,updatedAt:K};T?a(T.id,de):n(de),U(!1),S(null)},ee=()=>{U(!1),S(null)},X=R=>{o(R)},Q=R=>{S(R),U(!0)},ie=R=>{S({...R,id:`copy-${R.id}`,name:R.name+" (Copy)",isTemplate:!1}),U(!0)},me=R=>{navigator.clipboard.writeText(R)};return j?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-primary/10 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),t.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Loading Launch Contexts"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Fetching context configurations..."})]})}):t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsx("div",{className:"bg-gradient-to-r from-background to-muted/50 p-8 rounded-3xl border border-border shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"Launch Context Management"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Ch,{className:"w-5 h-5 text-primary"})}),t.jsx("p",{className:"text-muted-foreground text-lg",children:"Configure SMART on FHIR launch contexts and scope templates"})]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs(ne,{onClick:()=>U(!0),className:"px-8 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white font-semibold rounded-2xl hover:from-green-700 hover:to-green-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-green-500/20",children:[t.jsx(At,{className:"w-5 h-5 mr-2"}),"New Context Set"]}),t.jsxs(ne,{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Refresh"]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500/20 to-blue-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ga,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("div",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 tracking-wide",children:"Total Context Sets"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500/20 to-blue-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("div",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 tracking-wide",children:"Templates"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(R=>R.isTemplate).length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(qn,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsx("div",{className:"text-sm font-semibold text-green-800 dark:text-green-300 tracking-wide",children:"Custom Sets"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(R=>!R.isTemplate).length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500/20 to-indigo-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Ch,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),t.jsx("div",{className:"text-sm font-semibold text-indigo-800 dark:text-indigo-300 tracking-wide",children:"Launch Scopes"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.reduce((R,D)=>R+D.contexts.length,0)}),t.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300 font-medium",children:"Total scopes"})]})})})]}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border/50 shadow-lg",children:t.jsxs(vi,{value:w,onValueChange:I,className:"w-full",children:[t.jsxs(yi,{className:`grid w-full ${d?.roles?.includes("admin")?"grid-cols-3":"grid-cols-2"} bg-muted/50 rounded-t-2xl`,children:[t.jsx(or,{value:"overview",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:"Context Overview"}),t.jsx(or,{value:"templates",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:"Template Library"}),d?.roles?.includes("admin")&&t.jsx(or,{value:"users",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:"User Contexts"})]}),t.jsx(lr,{value:"overview",className:"p-6 space-y-6",children:e.filter(R=>!R.isTemplate).length===0?t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-12 rounded-2xl border border-border shadow-lg text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-muted rounded-2xl flex items-center justify-center shadow-sm",children:t.jsx(ga,{className:"w-8 h-8 text-muted-foreground"})}),t.jsx("h3",{className:"text-xl font-bold text-foreground mb-3",children:"No Custom Context Sets"}),t.jsx("p",{className:"text-muted-foreground mb-6 font-medium",children:"Create your first launch context set or use a template from the Template Library"}),t.jsxs(ne,{onClick:()=>U(!0),className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Create Context Set"]})]}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.filter(R=>!R.isTemplate).map(R=>t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ga,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-foreground",children:R.name}),R.description&&t.jsx("p",{className:"text-sm text-muted-foreground",children:R.description})]})]}),t.jsxs(ge,{className:"bg-primary/10 text-primary border-primary/30",children:[R.contexts.length," contexts"]})]}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Launch Contexts:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:R.contexts.map(D=>t.jsxs("div",{className:"flex items-center group",children:[t.jsx(ge,{variant:"outline",className:"text-xs bg-muted hover:bg-muted/80 cursor-pointer transition-colors",onClick:()=>me(D),children:D}),t.jsx(Ts,{className:"w-3 h-3 ml-1 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>me(D)})]},D))})]}),t.jsx("div",{className:"flex justify-between items-center text-xs text-muted-foreground mb-4",children:t.jsxs("span",{children:["Updated: ",new Date(R.updatedAt).toLocaleDateString()]})}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs(ne,{size:"sm",onClick:()=>Q(R),className:"flex-1 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500",children:[t.jsx(_s,{className:"w-4 h-4 mr-2"}),"Edit"]}),t.jsx(ne,{size:"sm",variant:"destructive",onClick:()=>X(R.id),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800",children:t.jsx(va,{className:"w-4 h-4"})})]})]},R.id))})}),t.jsx(lr,{value:"templates",className:"p-6 space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.filter(R=>R.isTemplate).map(R=>t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Jr,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-foreground",children:R.name}),R.description&&t.jsx("p",{className:"text-sm text-muted-foreground",children:R.description})]})]}),t.jsx(ge,{className:"bg-primary/10 text-primary border-primary/30",children:"Template"})]}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Launch Contexts:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:R.contexts.map(D=>t.jsxs("div",{className:"flex items-center group",children:[t.jsx(ge,{variant:"outline",className:"text-xs bg-muted hover:bg-muted/80 cursor-pointer transition-colors",onClick:()=>me(D),children:D}),t.jsx(Ts,{className:"w-3 h-3 ml-1 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>me(D)})]},D))})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs(ne,{size:"sm",onClick:()=>ie(R),className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:[t.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Use Template"]}),t.jsx(ne,{size:"sm",variant:"outline",onClick:()=>me(R.contexts.join(" ")),children:t.jsx(Io,{className:"w-4 h-4"})})]})]},R.id))})}),t.jsxs(lr,{value:"users",className:"p-6 space-y-6",children:[t.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-2xl p-4 mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:t.jsx(yr,{className:"w-4 h-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"User Launch Contexts"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"View users with configured SMART launch context attributes."})]})]})}),y?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Mt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),t.jsx("p",{className:"text-muted-foreground",children:"Loading launch contexts..."})]})}):B?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx(tt,{className:"w-6 h-6 text-destructive"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-destructive",children:"Unable to Load Launch Contexts"}),t.jsx("p",{className:"text-destructive/80",children:B})]})]}),B.includes("admin privileges")&&t.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-3 mt-4",children:t.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[t.jsx("strong",{children:"Note:"})," To view user launch contexts, you need admin privileges in Keycloak. Contact your system administrator to grant you the necessary permissions."]})}),t.jsxs("div",{className:"flex space-x-3 mt-4",children:[t.jsxs(ne,{onClick:C,className:"bg-destructive hover:bg-destructive/90",children:[t.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Retry"]}),t.jsx(ne,{onClick:()=>P(null),variant:"outline",children:"Dismiss"})]})]}),t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-4",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center",children:t.jsx(Io,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Sample User Launch Contexts"}),t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Here are example users with various SMART launch context configurations for demonstration."})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:yg.map(R=>t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 relative",children:[t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx(ge,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20",children:"Sample Data"})}),t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500/20 to-blue-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(yr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-foreground",children:R.username}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",R.userId]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[R.fhirUser&&t.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"FHIR User"}),t.jsx("p",{className:"text-sm font-mono text-foreground mt-1",children:R.fhirUser})]}),R.patient&&t.jsxs("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Patient Context"}),t.jsx("p",{className:"text-sm font-mono text-blue-900 dark:text-blue-100 mt-1",children:R.patient})]}),R.encounter&&t.jsxs("div",{className:"bg-green-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Encounter Context"}),t.jsx("p",{className:"text-sm font-mono text-green-900 dark:text-green-100 mt-1",children:R.encounter})]}),R.intent&&t.jsxs("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Intent"}),t.jsx("p",{className:"text-sm font-mono text-purple-900 dark:text-purple-100 mt-1",children:R.intent})]}),R.smartStyleUrl&&t.jsxs("div",{className:"bg-orange-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 uppercase tracking-wide",children:"Style URL"}),t.jsx("p",{className:"text-sm font-mono text-orange-900 dark:text-orange-100 mt-1 truncate",children:R.smartStyleUrl})]}),R.tenant&&t.jsxs("div",{className:"bg-indigo-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 uppercase tracking-wide",children:"Tenant"}),t.jsx("p",{className:"text-sm font-mono text-indigo-900 dark:text-indigo-100 mt-1",children:R.tenant})]})]}),R.fhirContext&&t.jsxs("div",{className:"bg-yellow-500/10 p-3 rounded-lg mb-4",children:[t.jsx(re,{className:"text-xs font-semibold text-yellow-600 dark:text-yellow-400 uppercase tracking-wide",children:"FHIR Context"}),t.jsxs("div",{className:"mt-2",children:[t.jsxs(ge,{variant:"outline",className:"text-xs bg-background",children:[t.jsx(Bn,{className:"w-3 h-3 mr-1"}),JSON.parse(R.fhirContext).length," resources"]}),t.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1 font-mono",children:R.fhirContext})]})]}),R.needPatientBanner!==void 0&&t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(Pe,{className:`w-4 h-4 ${R.needPatientBanner?"text-green-600 dark:text-green-400":"text-muted-foreground"}`}),t.jsxs("span",{className:"text-sm text-foreground",children:["Patient Banner: ",R.needPatientBanner?"Required":"Not Required"]})]})]},R.userId))})]}):p.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-12 rounded-2xl border border-border/50 shadow-lg text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-gradient-to-br from-muted to-muted/70 rounded-2xl flex items-center justify-center shadow-sm",children:t.jsx(yr,{className:"w-8 h-8 text-muted-foreground"})}),t.jsx("h3",{className:"text-xl font-bold text-foreground mb-3",children:"No Users with Launch Contexts"}),t.jsx("p",{className:"text-muted-foreground mb-6 font-medium",children:"No users currently have launch context attributes configured in your system"}),t.jsxs(ne,{onClick:C,className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500",children:[t.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Refresh Launch Contexts"]})]}),t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-2xl p-4",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center",children:t.jsx(Io,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Sample User Launch Contexts"}),t.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Here are example users with various SMART launch context configurations for demonstration."})]})]})}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:yg.map(R=>t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 relative",children:[t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx(ge,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20",children:"Sample Data"})}),t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500/20 to-blue-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(yr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-foreground",children:R.username}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",R.userId]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[R.fhirUser&&t.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"FHIR User"}),t.jsx("p",{className:"text-sm font-mono text-foreground mt-1",children:R.fhirUser})]}),R.patient&&t.jsxs("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Patient Context"}),t.jsx("p",{className:"text-sm font-mono text-blue-900 dark:text-blue-100 mt-1",children:R.patient})]}),R.encounter&&t.jsxs("div",{className:"bg-green-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Encounter Context"}),t.jsx("p",{className:"text-sm font-mono text-green-900 dark:text-green-100 mt-1",children:R.encounter})]}),R.intent&&t.jsxs("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Intent"}),t.jsx("p",{className:"text-sm font-mono text-purple-900 dark:text-purple-100 mt-1",children:R.intent})]}),R.smartStyleUrl&&t.jsxs("div",{className:"bg-orange-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 uppercase tracking-wide",children:"Style URL"}),t.jsx("p",{className:"text-sm font-mono text-orange-900 dark:text-orange-100 mt-1 truncate",children:R.smartStyleUrl})]}),R.tenant&&t.jsxs("div",{className:"bg-indigo-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 uppercase tracking-wide",children:"Tenant"}),t.jsx("p",{className:"text-sm font-mono text-indigo-900 dark:text-indigo-100 mt-1",children:R.tenant})]})]}),R.fhirContext&&t.jsxs("div",{className:"bg-yellow-500/10 p-3 rounded-lg mb-4",children:[t.jsx(re,{className:"text-xs font-semibold text-yellow-600 dark:text-yellow-400 uppercase tracking-wide",children:"FHIR Context"}),t.jsxs("div",{className:"mt-2",children:[t.jsxs(ge,{variant:"outline",className:"text-xs bg-background",children:[t.jsx(Bn,{className:"w-3 h-3 mr-1"}),JSON.parse(R.fhirContext).length," resources"]}),t.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 mt-1 font-mono",children:R.fhirContext})]})]}),R.needPatientBanner!==void 0&&t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(Pe,{className:`w-4 h-4 ${R.needPatientBanner?"text-green-600 dark:text-green-400":"text-muted-foreground"}`}),t.jsxs("span",{className:"text-sm text-foreground",children:["Patient Banner: ",R.needPatientBanner?"Required":"Not Required"]})]})]},R.userId))})]}):t.jsx("div",{className:"grid grid-cols-1 gap-6",children:p.map(R=>t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500/20 to-blue-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(yr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-foreground",children:R.username}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["User ID: ",R.userId]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[R.fhirUser&&t.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"FHIR User"}),t.jsx("p",{className:"text-sm font-mono text-foreground mt-1",children:R.fhirUser})]}),R.patient&&t.jsxs("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:"Patient Context"}),t.jsx("p",{className:"text-sm font-mono text-blue-900 dark:text-blue-100 mt-1",children:R.patient})]}),R.encounter&&t.jsxs("div",{className:"bg-green-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide",children:"Encounter Context"}),t.jsx("p",{className:"text-sm font-mono text-green-900 dark:text-green-100 mt-1",children:R.encounter})]}),R.intent&&t.jsxs("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 uppercase tracking-wide",children:"Intent"}),t.jsx("p",{className:"text-sm font-mono text-purple-900 dark:text-purple-100 mt-1",children:R.intent})]}),R.smartStyleUrl&&t.jsxs("div",{className:"bg-orange-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 uppercase tracking-wide",children:"Style URL"}),t.jsx("p",{className:"text-sm font-mono text-orange-900 dark:text-orange-100 mt-1 truncate",children:R.smartStyleUrl})]}),R.tenant&&t.jsxs("div",{className:"bg-indigo-500/10 p-3 rounded-lg",children:[t.jsx(re,{className:"text-xs font-semibold text-indigo-600 dark:text-indigo-400 uppercase tracking-wide",children:"Tenant"}),t.jsx("p",{className:"text-sm font-mono text-indigo-900 dark:text-indigo-100 mt-1",children:R.tenant})]})]}),R.fhirContext&&t.jsxs("div",{className:"bg-yellow-500/10 p-3 rounded-lg mb-4",children:[t.jsx(re,{className:"text-xs font-semibold text-yellow-600 dark:text-yellow-400 uppercase tracking-wide",children:"FHIR Context"}),t.jsx("div",{className:"mt-2",children:t.jsxs(ge,{variant:"outline",className:"text-xs bg-background",children:[t.jsx(Bn,{className:"w-3 h-3 mr-1"}),"View JSON"]})})]}),R.needPatientBanner!==void 0&&t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(Pe,{className:`w-4 h-4 ${R.needPatientBanner?"text-green-600 dark:text-green-400":"text-muted-foreground"}`}),t.jsxs("span",{className:"text-sm text-foreground",children:["Patient Banner: ",R.needPatientBanner?"Required":"Not Required"]})]})]},R.userId))})]})]})}),t.jsx(bA,{open:L,onOpenChange:U,editingSet:T,onSave:$,onCancel:ee})]})}const bi=qc(e=>({currentAlert:null,currentConfirm:null,currentConfirmInput:null,alert:n=>e({currentAlert:n}),confirm:n=>e({currentConfirm:n}),confirmInput:n=>e({currentConfirmInput:n}),closeAlert:()=>e({currentAlert:null}),closeConfirm:()=>e({currentConfirm:null}),closeConfirmInput:()=>e({currentConfirmInput:null})})),mc=e=>{bi.getState().alert(e)},jA=e=>{bi.getState().confirm(e)},bg=e=>{bi.getState().confirmInput(e)};C0.allowLocalModels=!1;C0.allowRemoteModels=!0;class SA{openai=null;knowledgeBase=[];embeddingPipeline=null;isEmbeddingModelLoading=!1;constructor(){this.initializeKnowledgeBase()}async initializeEmbeddingModel(){if(!(this.isEmbeddingModelLoading||this.embeddingPipeline))try{this.isEmbeddingModelLoading=!0,console.log("Loading sentence transformer model..."),this.embeddingPipeline=await w1("feature-extraction","Xenova/all-MiniLM-L6-v2"),console.log("Sentence transformer model loaded successfully")}catch(n){console.warn("Failed to load embedding model, falling back to keyword search:",n),this.embeddingPipeline=null}finally{this.isEmbeddingModelLoading=!1}}async initializeKnowledgeBase(){this.knowledgeBase=[{id:"dashboard-overview",title:"Dashboard Overview",category:"admin-ui",source:"docs/admin-ui/dashboard.md",content:"The Dashboard is the central hub providing comprehensive overview of healthcare platform status, metrics, and quick access to all management functions. It displays real-time system health indicators including active components (OAuth Server, FHIR Proxy, WebSocket), performance metrics, alerts, and last update timestamps. The dashboard provides quick actions for adding users, registering apps, adding FHIR servers, configuring scopes, managing launch contexts, and monitoring OAuth flows."},{id:"user-management-overview",title:"User Management",category:"admin-ui",source:"docs/admin-ui/user-management.md",content:"User Management provides comprehensive tools for managing healthcare users including practitioners, administrative staff, system users, and external users. It supports user registration with personal details, professional info, and account configuration. Key features include FHIR Person associations across multiple servers, role-based access control with administrator and user roles, user activity tracking, and lifecycle management including activation, password management, and termination."},{id:"smart-apps-management",title:"SMART Apps Management",category:"admin-ui",source:"docs/admin-ui/smart-apps.md",content:"SMART Apps section manages SMART on FHIR applications including patient-facing apps, provider apps, EHR integrated apps, research apps, agent apps, and backend services. It supports EHR launch, standalone launch, backend services, and agent launch types. Application registration includes basic information, technical configuration, and scope configuration with FHIR resource scopes for patient, user, system, and agent contexts."},{id:"smart-app-launch-framework",title:"SMART App Launch Framework",category:"smart-on-fhir",source:"docs/smart-on-fhir/smart-app-launch.md",content:"SMART App Launch Framework enables secure integration of healthcare applications with EHR systems using OAuth 2.0. It supports different launch types: EHR launch from within EHR systems, standalone launch for independent applications, and backend services for server-to-server communication. The framework provides clinical context through launch parameters including patient, encounter, user, and organization context."},{id:"oauth-flows",title:"OAuth 2.0 Flows",category:"smart-on-fhir",source:"docs/smart-on-fhir/oauth-flows.md",content:"OAuth 2.0 flows in SMART on FHIR include Authorization Code flow for interactive applications, Client Credentials flow for backend services, and Agent flow for autonomous systems. Each flow has specific security requirements including PKCE for public clients, client authentication for confidential clients, and scope validation for resource access control."},{id:"scopes-permissions",title:"Scopes and Permissions",category:"smart-on-fhir",source:"docs/smart-on-fhir/scopes-permissions.md",content:"SMART scopes define access permissions for FHIR resources using context prefixes: patient/ for patient-specific data, user/ for user-accessible resources, system/ for system-wide access, and agent/ for autonomous agent access. Scopes include resource type and operation (read, write, cruds). Examples: patient/Patient.read, user/Observation.read, system/Patient.cruds, agent/Device.read."},{id:"launch-contexts",title:"Launch Contexts",category:"smart-on-fhir",source:"docs/smart-on-fhir/launch-contexts.md",content:"Launch contexts provide clinical workflow context to SMART applications. Context types include patient context (specific patient, patient list, encounter, episode), provider context (practitioner, care team, organization, location), and workflow context (order entry, results review, documentation, research). Contexts are injected via launch parameters during application initialization."},{id:"agent-scopes",title:"Agent Scopes for Autonomous Systems",category:"smart-on-fhir",source:"docs/smart-on-fhir/agent-scopes.md",content:"Agent scopes (agent/) are designed for autonomous systems including AI assistants, robots, and automated decision tools. Unlike system/ scopes which are deterministic and scheduled, agent/ scopes support non-deterministic, self-initiated actions. Agent identity is resolved to Device resources at runtime. Examples: agent/Patient.read for AI patient analysis, agent/ClinicalImpression.write for AI-generated assessments."},{id:"identity-providers",title:"Identity Providers Management",category:"admin-ui",source:"docs/admin-ui/identity-providers.md",content:"Identity Providers (IdP) section manages authentication systems for healthcare organizations. Supports SAML 2.0 for enterprise SSO, OpenID Connect (OIDC) for modern OAuth-based authentication, LDAP for directory services, and local authentication. Features include SSO endpoint configuration, metadata import/export, user attribute mapping for FHIR Person associations, role-based access control, group mappings, multi-factor authentication (MFA) requirements, and session management. Enables seamless integration with existing organizational authentication infrastructure."},{id:"platform-navigation",title:"Platform Navigation and Features",category:"admin-ui",source:"docs/admin-ui/navigation.md",content:"The platform provides comprehensive navigation with sections for Dashboard (system overview), SMART Apps (application management), Users (healthcare user management), FHIR Servers (server configuration), Identity Providers (IdP management), Scope Management (permission templates), Launch Context (context configuration), and OAuth Monitoring (real-time analytics). Each section provides specialized tools for healthcare platform administration."},{id:"getting-started-guide",title:"Getting Started with SMART on FHIR Platform",category:"tutorials",source:"docs/tutorials/getting-started.md",content:"Getting started guide covers platform setup and configuration. Key steps: 1) Review Dashboard for system health, 2) Configure FHIR servers with base URL and authentication, 3) Set up identity providers (SAML, OIDC), 4) Create user accounts and associate with FHIR Person resources, 5) Register SMART apps with scopes and launch contexts, 6) Test OAuth flows and FHIR access. Includes security best practices, monitoring setup, and go-live checklist. Use AI Assistant for help with specific tasks."},{id:"fhir-servers-management",title:"FHIR Servers Management",category:"admin-ui",source:"docs/admin-ui/fhir-servers.md",content:"FHIR Servers section manages FHIR server connections, health monitoring, and configuration. Supports EHR systems (Epic, Cerner), cloud FHIR services, open source servers, and test environments. Features include server registration with base URL and FHIR version, authentication methods (API key, OAuth 2.0, client certificates), health monitoring with real-time checks, performance metrics tracking, and security settings. Provides bulk data operations, SMART launch context support, and comprehensive troubleshooting tools."},{id:"scope-management-detailed",title:"Scope Management and Permissions",category:"admin-ui",source:"docs/admin-ui/scope-management.md",content:"Scope Management provides granular FHIR resource permissions using context/resource.operations pattern. Context prefixes include patient/ (patient-specific), user/ (user-accessible), system/ (backend system), and agent/ (autonomous AI). Common resources include Patient, Observation, MedicationRequest, DiagnosticReport, Condition, Procedure. Operations are read, write, cruds, search. Features role-based templates for clinical roles (physicians, nurses) and administrative roles, custom template creation, organizational scope management, and compliance reporting."},{id:"common-administrative-tasks",title:"Common Administrative Tasks",category:"tutorials",source:"docs/tutorials/common-tasks.md",content:"Common tasks include: 1) Registering SMART apps with appropriate scopes and launch contexts, 2) Adding healthcare users and associating with FHIR Person resources, 3) Configuring FHIR servers with health monitoring, 4) Setting up scope templates for different user roles, 5) Creating launch contexts for clinical workflows, 6) Monitoring OAuth flows for troubleshooting, 7) Managing identity providers for authentication."},{id:"troubleshooting-guide",title:"Troubleshooting Common Issues",category:"tutorials",source:"docs/tutorials/troubleshooting.md",content:"Common issues and solutions: 1) OAuth authorization failures - check redirect URIs, scopes, and client configuration, 2) FHIR server connectivity - verify endpoints, certificates, and network access, 3) User authentication problems - check IdP configuration and user status, 4) Application launch failures - verify launch contexts and required parameters, 5) Scope access denied - review user permissions and application scopes, 6) Performance issues - check system health and resource utilization."}]}cosineSimilarity(n,a){const o=n.reduce((m,f,p)=>m+f*a[p],0),c=Math.sqrt(n.reduce((m,f)=>m+f*f,0)),d=Math.sqrt(a.reduce((m,f)=>m+f*f,0));return o/(c*d)}async getEmbedding(n){if(this.embeddingPipeline||await this.initializeEmbeddingModel(),!this.embeddingPipeline)return null;try{const a=await this.embeddingPipeline(n,{pooling:"mean",normalize:!0});return Array.from(a.data)}catch(a){return console.warn("Error generating embedding:",a),null}}async searchKnowledgeBaseSemantic(n,a=5){if(this.embeddingPipeline&&!this.isEmbeddingModelLoading)try{const o=await this.getEmbedding(n);if(o)return(await Promise.all(this.knowledgeBase.map(async d=>{const m=await this.getEmbedding(d.content.substring(0,500));if(m){const f=this.cosineSimilarity(o,m);return{...d,relevanceScore:f}}return{...d,relevanceScore:0}}))).filter(d=>d.relevanceScore>.3).sort((d,m)=>m.relevanceScore-d.relevanceScore).slice(0,a)}catch(o){console.warn("Semantic search failed, falling back to keyword search:",o)}return this.searchKnowledgeBase(n,a)}searchKnowledgeBase(n,a=5){const o=n.toLowerCase().split(" ");return this.knowledgeBase.map(d=>{let m=0;const f=d.content.toLowerCase(),p=d.title.toLowerCase();return o.forEach(x=>{p.includes(x)&&(m+=10);const j=(f.match(new RegExp(x,"g"))||[]).length;m+=j}),{...d,relevanceScore:m}}).filter(d=>d.relevanceScore>0).sort((d,m)=>m.relevanceScore-d.relevanceScore).slice(0,a)}async generateResponse(n){const a=await this.searchKnowledgeBaseSemantic(n);try{if(a.length===0)return{answer:`I can help you with SMART on FHIR platform administration. I have knowledge about:

📊 **Dashboard** - System overview and health monitoring
👥 **User Management** - Healthcare users and FHIR associations
📱 **SMART Apps** - Application registration and management
🏥 **FHIR Servers** - Server configuration and monitoring
🎯 **Scope Management** - Permissions and access control
🚀 **Launch Context** - Clinical workflow contexts
📈 **OAuth Monitoring** - Real-time flow analytics
🔑 **Identity Providers** - Authentication configuration

What would you like to know more about?`,sources:[],confidence:.5};if(this.openai){const c=`You are a SMART on FHIR platform assistant with comprehensive knowledge of healthcare application management. Use the provided context to answer questions accurately and helpfully.

Key platform sections:
- Dashboard: System overview and health monitoring
- User Management: Healthcare users and FHIR Person associations  
- SMART Apps: Application registration with scopes and launch contexts
- FHIR Servers: Multi-server configuration and monitoring
- Scope Management: Permission templates and access control
- Launch Context: Clinical workflow context injection
- OAuth Monitoring: Real-time authorization flow analytics
- Identity Providers: SAML/OIDC authentication configuration

Provide helpful, accurate responses with step-by-step guidance when appropriate. Include relevant navigation instructions (e.g., "Go to the Users section") and mention specific features when relevant.

Context (with relevance scores):
${a.map(m=>`Source: ${m.title}
Relevance: ${(m.relevanceScore*100).toFixed(1)}%
${m.content}`).join(`

`)}`;return{answer:(await this.openai.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:c},{role:"user",content:n}],max_tokens:600,temperature:.7})).choices[0]?.message?.content||"I'm sorry, I couldn't generate a response.",sources:a,confidence:.9}}else return this.generateRuleBasedResponse(n,a)}catch(o){return console.error("Error generating AI response:",o),this.generateRuleBasedResponse(n,a)}}generateRuleBasedResponse(n,a){const o=n.toLowerCase(),c=a.length>0?Math.max(.7,a[0].relevanceScore||.7):.6,d=a.length>0?a[0]:null;if(o.includes("navigate")||o.includes("go to")||o.includes("section")){if(o.includes("user")||o.includes("healthcare"))return{answer:`To manage healthcare users, go to the **Users** section in the navigation. There you can:

• Add new healthcare users with professional details
• Associate users with FHIR Person resources across multiple servers
• Configure role-based permissions and access control
• Monitor user activity, sessions, and login patterns
• Manage user lifecycle from activation to termination

💡 *Tip: Each user can have FHIR Person associations on multiple servers for cross-system identity linking.*`,sources:a,confidence:c};if(o.includes("app")||o.includes("smart"))return{answer:`To manage SMART applications, go to the **SMART Apps** section. Here you can:

• Register new SMART on FHIR applications with detailed configuration
• Configure OAuth scopes for granular resource access control
• Set up launch contexts for different clinical workflows
• Monitor application usage, performance, and error rates
• Manage application lifecycle, versions, and security settings

🔑 *Key: Proper scope configuration is crucial for security and functionality.*`,sources:a,confidence:c};if(o.includes("server")||o.includes("fhir"))return{answer:`To manage FHIR servers, go to the **FHIR Servers** section. You can:

• Add and configure FHIR server endpoints with authentication
• Monitor server health, performance, and response times
• Test server connectivity and validate FHIR compliance
• Configure security settings and access controls
• View usage analytics and troubleshoot issues

🏥 *Multi-server support allows unified management across your healthcare ecosystem.*`,sources:a,confidence:c}}if(o.includes("idp")||o.includes("identity")||o.includes("authentication")||o.includes("provider"))return{answer:`To manage Identity Providers, go to the **Identity Providers** section. Here you can:

🔐 **Supported Protocols:**
• **SAML 2.0** - Enterprise single sign-on integration
• **OpenID Connect (OIDC)** - Modern OAuth-based authentication
• **LDAP** - Directory service integration
• **Local Authentication** - Platform-native user accounts

⚙️ **Configuration Options:**
• SSO endpoint configuration and metadata import
• User attribute mapping for FHIR Person associations
• Role-based access control and group mappings
• Multi-factor authentication (MFA) requirements

🏥 *Identity providers enable seamless integration with existing healthcare organization authentication systems.*`,sources:a,confidence:c};if(o.includes("scope")||o.includes("permission")){let m=`SMART scopes control access to FHIR resources. Go to **Scope Management** to configure:

🎯 **Scope Contexts:**
• **patient/** - Patient-specific data access (e.g., patient/Patient.read)
• **user/** - User-accessible resources (e.g., user/Observation.read)
• **system/** - System-wide access (e.g., system/Patient.cruds)
• **agent/** - Autonomous agent access (e.g., agent/Device.read)

📋 **Scope Templates:**
• Role-based templates for different user types
• Specialty-specific scope combinations
• Custom scope sets for organizational needs`;return d&&d.title.includes("Scope")&&(m+=`

💡 *Based on the documentation, scopes use CRUD operations (Create, Read, Update, Delete, Search) with 'cruds' for full access.*`),{answer:m,sources:a,confidence:c}}if(o.includes("launch")||o.includes("context")){let m=`Launch contexts provide clinical workflow context to applications. Go to **Launch Context** to:

🏥 **Clinical Contexts:**
• Patient contexts (patient selection, encounters, episodes)
• Provider contexts (practitioner, care team, location)
• Workflow contexts (order entry, results review, documentation)

⚙️ **Configuration:**
• Pre-configured workflow templates
• Custom context builders for specific needs
• Dynamic context resolution at runtime`;return d&&d.title.includes("Launch")&&(m+=`

🚀 *Launch contexts are injected as parameters during application initialization to provide immediate clinical relevance.*`),{answer:m,sources:a,confidence:c}}if(o.includes("oauth")||o.includes("monitor")||o.includes("flow"))return{answer:`For OAuth monitoring and troubleshooting, go to **OAuth Monitoring** section:

📊 **Real-time Monitoring:**
• Live authorization flow tracking via WebSocket
• Success/failure rate analytics with trending
• Performance metrics and bottleneck identification
• Token usage patterns and refresh analytics

🔧 **Debugging Tools:**
• Flow-by-flow error analysis
• Security violation detection
• Integration testing capabilities

⚡ *The dashboard provides WebSocket-based real-time updates for immediate insight into OAuth activities.*`,sources:a,confidence:c};if(o.includes("dashboard")||o.includes("overview")||o.includes("status"))return{answer:`The **Dashboard** provides comprehensive platform oversight:

🏥 **System Health:**
• OAuth Server, FHIR Proxy, WebSocket status monitoring
• Performance metrics with response time tracking
• Alert management and maintenance notifications

⚡ **Quick Actions:**
• One-click access to common administrative tasks
• Fast navigation to all platform sections

📈 **Analytics:**
• User, application, and server statistics
• OAuth flow analytics with trend visualization
• Real-time updates every 30 seconds

🎨 *Fully responsive design optimized for desktop, tablet, and mobile usage.*`,sources:a,confidence:c};if(d){const m=this.generateContextualResponse(d,n);if(m)return{answer:m,sources:a,confidence:c}}return{answer:`I'm your SMART on FHIR platform assistant! I can help you with:

🎯 **Platform Administration:**
• User management and FHIR associations
• SMART app registration and configuration
• FHIR server setup and monitoring
• OAuth flows and security management

📚 **Specific Topics:**
• Scope configuration and permissions
• Launch context setup for clinical workflows
• Identity provider integration
• System monitoring and troubleshooting

🤖 **AI Status:** ${this.openai?"OpenAI-powered":"Semantic search enabled"} ${this.embeddingPipeline?"with sentence transformers":""}

Ask me about any specific aspect you'd like to explore!`,sources:a,confidence:.6}}generateContextualResponse(n,a){const o=a.toLowerCase();if(o.includes("idp")||o.includes("identity"))return`Based on the Identity Provider documentation:

Identity Providers (IdPs) manage authentication for healthcare organizations. The platform supports SAML 2.0, OpenID Connect (OIDC), LDAP, and local authentication. Go to the **Identity Providers** section to configure SSO endpoints, user attribute mapping, and role-based access control.

Would you like help setting up a specific IdP type or configuring user mappings?`;if(n.category==="admin-ui"){if(n.title.includes("User"))return`Based on the User Management documentation:

${n.content.substring(0,300)}...

Would you like specific guidance on user registration, FHIR associations, or permission management?`;if(n.title.includes("SMART Apps"))return`From the SMART Apps documentation:

${n.content.substring(0,300)}...

Would you like help with app registration, scope configuration, or launch context setup?`}else if(n.category==="smart-on-fhir"){if(n.title.includes("OAuth"))return`According to the OAuth flows documentation:

${n.content.substring(0,300)}...

Need help with specific OAuth flows or troubleshooting authorization issues?`;if(n.title.includes("Agent"))return`From the Agent Scopes documentation:

${n.content.substring(0,300)}...

Interested in configuring autonomous systems or understanding agent vs system scopes?`}return null}isOpenAIAvailable(){return this.openai!==null}getKnowledgeBaseStats(){return{totalDocuments:this.knowledgeBase.length,categories:[...new Set(this.knowledgeBase.map(n=>n.category))],sources:[...new Set(this.knowledgeBase.map(n=>n.source))]}}}const Rs=new SA;var kA=class{constructor(e,n){this.operator=e,this.child=n}toString(){return`${this.operator}(${this.child.toString()})`}},Lo=class{constructor(e,n,a){this.operator=e,this.left=n,this.right=a}toString(){return`(${this.left.toString()} ${this.operator} ${this.right.toString()})`}},AA=class{constructor(){this.prefixParselets={},this.infixParselets={}}registerInfix(e,n){return this.infixParselets[e]=n,this}registerPrefix(e,n){return this.prefixParselets[e]=n,this}prefix(e,n,a){return this.registerPrefix(e,{parse(o,c){let d=o.consumeAndParse(n);return a(c,d)}})}infixLeft(e,n,a){return this.registerInfix(e,{parse(o,c,d){let m=o.consumeAndParse(n);return a(c,d,m)},precedence:n})}construct(e){return new CA(e,this.prefixParselets,this.infixParselets)}},CA=class{constructor(e,n,a){this.tokens=e,this.prefixParselets=n,this.infixParselets=a}hasMore(){return this.tokens.length>0}match(e){return this.peek()?.id!==e?!1:(this.consume(),!0)}consumeAndParse(e=1/0){let n=this.consume(),a=this.prefixParselets[n.id];if(!a)throw Error(`Parse error at "${n.value}" (line ${n.line}, column ${n.column}). No matching prefix parselet.`);let o=a.parse(this,n);for(;e>this.getPrecedence();){let c=this.consume();o=this.getInfixParselet(c).parse(this,o,c)}return o}getPrecedence(){let e=this.peek();if(!e)return 1/0;let n=this.getInfixParselet(e);return n?n.precedence:1/0}consume(e,n){if(!this.tokens.length)throw Error("Cant consume unknown more tokens.");if(e&&this.peek()?.id!==e){let a=this.peek();throw Error(`Expected ${e} but got "${a.id}" (${a.value}) at line ${a.line} column ${a.column}.`)}if(n&&this.peek()?.value!==n){let a=this.peek();throw Error(`Expected "${n}" but got "${a.value}" at line ${a.line} column ${a.column}.`)}return this.tokens.shift()}peek(){return this.tokens.length>0?this.tokens[0]:void 0}removeComments(){this.tokens=this.tokens.filter(e=>e.id!=="Comment")}getInfixParselet(e){return this.infixParselets[e.id==="Symbol"?e.value:e.id]}},RA=class{constructor(e=10){this.max=e,this.cache=new Map}clear(){this.cache.clear()}get(e){let n=this.cache.get(e);return n&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){this.cache.has(e)?this.cache.delete(e):this.cache.size>=this.max&&this.cache.delete(this.first()),this.cache.set(e,n)}delete(e){this.cache.delete(e)}keys(){return this.cache.keys()}first(){return this.cache.keys().next().value}},TA="ok",EA="created",UA="not-modified",IA="not-found",MA="unauthorized",_A="accepted",DA={resourceType:"OperationOutcome",id:IA,issue:[{severity:"error",code:"not-found",details:{text:"Not found"}}]},Oo={resourceType:"OperationOutcome",id:MA,issue:[{severity:"error",code:"login",details:{text:"Unauthorized"}}]},OA={...Oo,issue:[...Oo.issue,{severity:"error",code:"expired",details:{text:"Token expired"}}]},wg={...Oo,issue:[...Oo.issue,{severity:"error",code:"invalid",details:{text:"Token not issued for this audience"}}]};function Tc(e,n){return{resourceType:"OperationOutcome",issue:[{severity:"error",code:"invalid",details:{text:e}}]}}function ht(e){return{resourceType:"OperationOutcome",issue:[{severity:"error",code:"structure",details:{text:e}}]}}function PA(e){return{resourceType:"OperationOutcome",issue:[{severity:"error",code:"exception",details:{text:"Internal server error"},diagnostics:e.toString()}]}}function LA(e){return!e||typeof e!="object"?!1:e instanceof Error||typeof DOMException<"u"&&e instanceof DOMException?!0:Object.prototype.toString.call(e)==="[object Error]"}function rm(e){return typeof e=="object"&&e!==null&&e.resourceType==="OperationOutcome"}function BA(e){return e.id===TA||e.id===EA||e.id===UA||e.id===_A}var He=class extends Error{constructor(e,n){super(kv(e)),this.outcome=e,this.cause=n}};function bc(e){return e instanceof He?e.outcome:rm(e)?e:Tc(Bo(e))}function Bo(e){return e?typeof e=="string"?e:LA(e)?e.message:rm(e)?kv(e):typeof e=="object"&&"code"in e&&typeof e.code=="string"?e.code:JSON.stringify(e):"Unknown error"}function kv(e){let n=e.issue?.map(zA)??[];return n.length>0?n.join("; "):"Unknown error"}function zA(e){let n;return e.details?.text?e.diagnostics?n=`${e.details.text} (${e.diagnostics})`:n=e.details.text:e.diagnostics?n=e.diagnostics:n="Unknown error",e.expression?.length&&(n+=` (${e.expression.join(", ")})`),n}function qA(e,n){let a=n.max&&n.max===Number.MAX_SAFE_INTEGER?Number.POSITIVE_INFINITY:n.max;return{path:e,description:"",type:n.type??[],min:n.min??0,max:a??1,isArray:!!a&&a>1,constraints:[]}}function HA(e){let n=Object.create(null);for(let[a,o]of Object.entries(e))n[a]={name:a,type:a,path:a,elements:Object.fromEntries(Object.entries(o.elements).map(([c,d])=>[c,qA(c,d)])),constraints:[],innerTypes:[]};return n}var FA={Element:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]}}},BackboneElement:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]}}},Address:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},use:{type:[{code:"code"}]},type:{type:[{code:"code"}]},text:{type:[{code:"string"}]},line:{max:9007199254740991,type:[{code:"string"}]},city:{type:[{code:"string"}]},district:{type:[{code:"string"}]},state:{type:[{code:"string"}]},postalCode:{type:[{code:"string"}]},country:{type:[{code:"string"}]},period:{type:[{code:"Period"}]}}},Age:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},Annotation:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},"author[x]":{type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Practitioner","http://hl7.org/fhir/StructureDefinition/Patient","http://hl7.org/fhir/StructureDefinition/RelatedPerson","http://hl7.org/fhir/StructureDefinition/Organization"]},{code:"string"}]},time:{type:[{code:"dateTime"}]},text:{min:1,type:[{code:"markdown"}]}}},Attachment:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},contentType:{type:[{code:"code"}]},language:{type:[{code:"code"}]},data:{type:[{code:"base64Binary"}]},url:{type:[{code:"url"}]},size:{type:[{code:"unsignedInt"}]},hash:{type:[{code:"base64Binary"}]},title:{type:[{code:"string"}]},creation:{type:[{code:"dateTime"}]}}},CodeableConcept:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},coding:{max:9007199254740991,type:[{code:"Coding"}]},text:{type:[{code:"string"}]}}},Coding:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},system:{type:[{code:"uri"}]},version:{type:[{code:"string"}]},code:{type:[{code:"code"}]},display:{type:[{code:"string"}]},userSelected:{type:[{code:"boolean"}]}}},ContactDetail:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},name:{type:[{code:"string"}]},telecom:{max:9007199254740991,type:[{code:"ContactPoint"}]}}},ContactPoint:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},system:{type:[{code:"code"}]},value:{type:[{code:"string"}]},use:{type:[{code:"code"}]},rank:{type:[{code:"positiveInt"}]},period:{type:[{code:"Period"}]}}},Contributor:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{min:1,type:[{code:"code"}]},name:{min:1,type:[{code:"string"}]},contact:{max:9007199254740991,type:[{code:"ContactDetail"}]}}},Count:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},DataRequirement:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{min:1,type:[{code:"code"}]},profile:{max:9007199254740991,type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]},"subject[x]":{type:[{code:"CodeableConcept"},{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Group"]}]},mustSupport:{max:9007199254740991,type:[{code:"string"}]},codeFilter:{max:9007199254740991,type:[{code:"DataRequirementCodeFilter"}]},dateFilter:{max:9007199254740991,type:[{code:"DataRequirementDateFilter"}]},limit:{type:[{code:"positiveInt"}]},sort:{max:9007199254740991,type:[{code:"DataRequirementSort"}]}}},DataRequirementCodeFilter:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},path:{type:[{code:"string"}]},searchParam:{type:[{code:"string"}]},valueSet:{type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/ValueSet"]}]},code:{max:9007199254740991,type:[{code:"Coding"}]}}},DataRequirementDateFilter:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},path:{type:[{code:"string"}]},searchParam:{type:[{code:"string"}]},"value[x]":{type:[{code:"dateTime"},{code:"Period"},{code:"Duration"}]}}},DataRequirementSort:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},path:{min:1,type:[{code:"string"}]},direction:{min:1,type:[{code:"code"}]}}},Distance:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},Dosage:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},sequence:{type:[{code:"integer"}]},text:{type:[{code:"string"}]},additionalInstruction:{max:9007199254740991,type:[{code:"CodeableConcept"}]},patientInstruction:{type:[{code:"string"}]},timing:{type:[{code:"Timing"}]},"asNeeded[x]":{type:[{code:"boolean"},{code:"CodeableConcept"}]},site:{type:[{code:"CodeableConcept"}]},route:{type:[{code:"CodeableConcept"}]},method:{type:[{code:"CodeableConcept"}]},doseAndRate:{max:9007199254740991,type:[{code:"DosageDoseAndRate"}]},maxDosePerPeriod:{type:[{code:"Ratio"}]},maxDosePerAdministration:{type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},maxDosePerLifetime:{type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]}}},DosageDoseAndRate:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{type:[{code:"CodeableConcept"}]},"dose[x]":{type:[{code:"Range"},{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},"rate[x]":{type:[{code:"Ratio"},{code:"Range"},{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]}}},Duration:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},ElementDefinition:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},path:{min:1,type:[{code:"string"}]},representation:{max:9007199254740991,type:[{code:"code"}]},sliceName:{type:[{code:"string"}]},sliceIsConstraining:{type:[{code:"boolean"}]},label:{type:[{code:"string"}]},code:{max:9007199254740991,type:[{code:"Coding"}]},slicing:{type:[{code:"ElementDefinitionSlicing"}]},short:{type:[{code:"string"}]},definition:{type:[{code:"markdown"}]},comment:{type:[{code:"markdown"}]},requirements:{type:[{code:"markdown"}]},alias:{max:9007199254740991,type:[{code:"string"}]},min:{type:[{code:"unsignedInt"}]},max:{type:[{code:"string"}]},base:{type:[{code:"ElementDefinitionBase"}]},contentReference:{type:[{code:"uri"}]},type:{max:9007199254740991,type:[{code:"ElementDefinitionType"}]},"defaultValue[x]":{type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]},meaningWhenMissing:{type:[{code:"markdown"}]},orderMeaning:{type:[{code:"string"}]},"fixed[x]":{type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]},"pattern[x]":{type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]},example:{max:9007199254740991,type:[{code:"ElementDefinitionExample"}]},"minValue[x]":{type:[{code:"date"},{code:"dateTime"},{code:"instant"},{code:"time"},{code:"decimal"},{code:"integer"},{code:"positiveInt"},{code:"unsignedInt"},{code:"Quantity"}]},"maxValue[x]":{type:[{code:"date"},{code:"dateTime"},{code:"instant"},{code:"time"},{code:"decimal"},{code:"integer"},{code:"positiveInt"},{code:"unsignedInt"},{code:"Quantity"}]},maxLength:{type:[{code:"integer"}]},condition:{max:9007199254740991,type:[{code:"id"}]},constraint:{max:9007199254740991,type:[{code:"ElementDefinitionConstraint"}]},mustSupport:{type:[{code:"boolean"}]},isModifier:{type:[{code:"boolean"}]},isModifierReason:{type:[{code:"string"}]},isSummary:{type:[{code:"boolean"}]},binding:{type:[{code:"ElementDefinitionBinding"}]},mapping:{max:9007199254740991,type:[{code:"ElementDefinitionMapping"}]}}},ElementDefinitionSlicingDiscriminator:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{min:1,type:[{code:"code"}]},path:{min:1,type:[{code:"string"}]}}},ElementDefinitionSlicing:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},discriminator:{max:9007199254740991,type:[{code:"ElementDefinitionSlicingDiscriminator"}]},description:{type:[{code:"string"}]},ordered:{type:[{code:"boolean"}]},rules:{min:1,type:[{code:"code"}]}}},ElementDefinitionBase:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},path:{min:1,type:[{code:"string"}]},min:{min:1,type:[{code:"unsignedInt"}]},max:{min:1,type:[{code:"string"}]}}},ElementDefinitionType:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},code:{min:1,type:[{code:"uri"}]},profile:{max:9007199254740991,type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition","http://hl7.org/fhir/StructureDefinition/ImplementationGuide"]}]},targetProfile:{max:9007199254740991,type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition","http://hl7.org/fhir/StructureDefinition/ImplementationGuide"]}]},aggregation:{max:9007199254740991,type:[{code:"code"}]},versioning:{type:[{code:"code"}]}}},ElementDefinitionExample:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},label:{min:1,type:[{code:"string"}]},"value[x]":{min:1,type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]}}},ElementDefinitionConstraint:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},key:{min:1,type:[{code:"id"}]},requirements:{type:[{code:"string"}]},severity:{min:1,type:[{code:"code"}]},human:{min:1,type:[{code:"string"}]},expression:{type:[{code:"string"}]},xpath:{type:[{code:"string"}]},source:{type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]}}},ElementDefinitionBinding:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},strength:{min:1,type:[{code:"code"}]},description:{type:[{code:"string"}]},valueSet:{type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/ValueSet"]}]}}},ElementDefinitionMapping:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},identity:{min:1,type:[{code:"id"}]},language:{type:[{code:"code"}]},map:{min:1,type:[{code:"string"}]},comment:{type:[{code:"string"}]}}},Expression:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},description:{type:[{code:"string"}]},name:{type:[{code:"id"}]},language:{min:1,type:[{code:"code"}]},expression:{type:[{code:"string"}]},reference:{type:[{code:"uri"}]}}},Extension:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},url:{min:1,type:[{code:"uri"}]},"value[x]":{type:[{code:"base64Binary"},{code:"boolean"},{code:"canonical"},{code:"code"},{code:"date"},{code:"dateTime"},{code:"decimal"},{code:"id"},{code:"instant"},{code:"integer"},{code:"markdown"},{code:"oid"},{code:"positiveInt"},{code:"string"},{code:"time"},{code:"unsignedInt"},{code:"uri"},{code:"url"},{code:"uuid"},{code:"Address"},{code:"Age"},{code:"Annotation"},{code:"Attachment"},{code:"CodeableConcept"},{code:"Coding"},{code:"ContactPoint"},{code:"Count"},{code:"Distance"},{code:"Duration"},{code:"HumanName"},{code:"Identifier"},{code:"Money"},{code:"Period"},{code:"Quantity"},{code:"Range"},{code:"Ratio"},{code:"Reference"},{code:"SampledData"},{code:"Signature"},{code:"Timing"},{code:"ContactDetail"},{code:"Contributor"},{code:"DataRequirement"},{code:"Expression"},{code:"ParameterDefinition"},{code:"RelatedArtifact"},{code:"TriggerDefinition"},{code:"UsageContext"},{code:"Dosage"},{code:"Meta"}]}}},HumanName:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},use:{type:[{code:"code"}]},text:{type:[{code:"string"}]},family:{type:[{code:"string"}]},given:{max:9007199254740991,type:[{code:"string"}]},prefix:{max:9007199254740991,type:[{code:"string"}]},suffix:{max:9007199254740991,type:[{code:"string"}]},period:{type:[{code:"Period"}]}}},Identifier:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},use:{type:[{code:"code"}]},type:{type:[{code:"CodeableConcept"}]},system:{type:[{code:"uri"}]},value:{type:[{code:"string"}]},period:{type:[{code:"Period"}]},assigner:{type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Organization"]}]}}},MarketingStatus:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},country:{min:1,type:[{code:"CodeableConcept"}]},jurisdiction:{type:[{code:"CodeableConcept"}]},status:{min:1,type:[{code:"CodeableConcept"}]},dateRange:{min:1,type:[{code:"Period"}]},restoreDate:{type:[{code:"dateTime"}]}}},Meta:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},versionId:{type:[{code:"id"}]},lastUpdated:{type:[{code:"instant"}]},source:{type:[{code:"uri"}]},profile:{max:9007199254740991,type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]},security:{max:9007199254740991,type:[{code:"Coding"}]},tag:{max:9007199254740991,type:[{code:"Coding"}]},project:{type:[{code:"uri"}]},author:{type:[{code:"Reference"}]},onBehalfOf:{type:[{code:"Reference"}]},account:{type:[{code:"Reference"}]},accounts:{max:9007199254740991,type:[{code:"Reference"}]},compartment:{max:9007199254740991,type:[{code:"Reference"}]}}},Money:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},currency:{type:[{code:"code"}]}}},Narrative:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},status:{min:1,type:[{code:"code"}]},div:{min:1,type:[{code:"xhtml"}]}}},ParameterDefinition:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},name:{type:[{code:"code"}]},use:{min:1,type:[{code:"code"}]},min:{type:[{code:"integer"}]},max:{type:[{code:"string"}]},documentation:{type:[{code:"string"}]},type:{min:1,type:[{code:"code"}]},profile:{type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/StructureDefinition"]}]}}},Period:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},start:{type:[{code:"dateTime"}]},end:{type:[{code:"dateTime"}]}}},Population:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},"age[x]":{type:[{code:"Range"},{code:"CodeableConcept"}]},gender:{type:[{code:"CodeableConcept"}]},race:{type:[{code:"CodeableConcept"}]},physiologicalCondition:{type:[{code:"CodeableConcept"}]}}},ProdCharacteristic:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},height:{type:[{code:"Quantity"}]},width:{type:[{code:"Quantity"}]},depth:{type:[{code:"Quantity"}]},weight:{type:[{code:"Quantity"}]},nominalVolume:{type:[{code:"Quantity"}]},externalDiameter:{type:[{code:"Quantity"}]},shape:{type:[{code:"string"}]},color:{max:9007199254740991,type:[{code:"string"}]},imprint:{max:9007199254740991,type:[{code:"string"}]},image:{max:9007199254740991,type:[{code:"Attachment"}]},scoring:{type:[{code:"CodeableConcept"}]}}},ProductShelfLife:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},identifier:{type:[{code:"Identifier"}]},type:{min:1,type:[{code:"CodeableConcept"}]},period:{min:1,type:[{code:"Quantity"}]},specialPrecautionsForStorage:{max:9007199254740991,type:[{code:"CodeableConcept"}]}}},Quantity:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},Range:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},low:{type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},high:{type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]}}},Ratio:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},numerator:{type:[{code:"Quantity"}]},denominator:{type:[{code:"Quantity"}]}}},Reference:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},reference:{type:[{code:"string"}]},type:{type:[{code:"uri"}]},identifier:{type:[{code:"Identifier"}]},display:{type:[{code:"string"}]}}},RelatedArtifact:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{min:1,type:[{code:"code"}]},label:{type:[{code:"string"}]},display:{type:[{code:"string"}]},citation:{type:[{code:"markdown"}]},url:{type:[{code:"url"}]},document:{type:[{code:"Attachment"}]},resource:{type:[{code:"canonical",targetProfile:["http://hl7.org/fhir/StructureDefinition/Resource"]}]}}},SampledData:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},origin:{min:1,type:[{code:"Quantity",profile:["http://hl7.org/fhir/StructureDefinition/SimpleQuantity"]}]},period:{min:1,type:[{code:"decimal"}]},factor:{type:[{code:"decimal"}]},lowerLimit:{type:[{code:"decimal"}]},upperLimit:{type:[{code:"decimal"}]},dimensions:{min:1,type:[{code:"positiveInt"}]},data:{type:[{code:"string"}]}}},Signature:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{min:1,max:9007199254740991,type:[{code:"Coding"}]},when:{min:1,type:[{code:"instant"}]},who:{min:1,type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Practitioner","http://hl7.org/fhir/StructureDefinition/PractitionerRole","http://hl7.org/fhir/StructureDefinition/RelatedPerson","http://hl7.org/fhir/StructureDefinition/Patient","http://hl7.org/fhir/StructureDefinition/Device","http://hl7.org/fhir/StructureDefinition/Organization"]}]},onBehalfOf:{type:[{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Practitioner","http://hl7.org/fhir/StructureDefinition/PractitionerRole","http://hl7.org/fhir/StructureDefinition/RelatedPerson","http://hl7.org/fhir/StructureDefinition/Patient","http://hl7.org/fhir/StructureDefinition/Device","http://hl7.org/fhir/StructureDefinition/Organization"]}]},targetFormat:{type:[{code:"code"}]},sigFormat:{type:[{code:"code"}]},data:{type:[{code:"base64Binary"}]}}},SubstanceAmount:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},"amount[x]":{type:[{code:"Quantity"},{code:"Range"},{code:"string"}]},amountType:{type:[{code:"CodeableConcept"}]},amountText:{type:[{code:"string"}]},referenceRange:{type:[{code:"SubstanceAmountReferenceRange"}]}}},SubstanceAmountReferenceRange:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},lowLimit:{type:[{code:"Quantity"}]},highLimit:{type:[{code:"Quantity"}]}}},Timing:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},modifierExtension:{max:9007199254740991,type:[{code:"Extension"}]},event:{max:9007199254740991,type:[{code:"dateTime"}]},repeat:{type:[{code:"TimingRepeat"}]},code:{type:[{code:"CodeableConcept"}]}}},TimingRepeat:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},"bounds[x]":{type:[{code:"Duration"},{code:"Range"},{code:"Period"}]},count:{type:[{code:"positiveInt"}]},countMax:{type:[{code:"positiveInt"}]},duration:{type:[{code:"decimal"}]},durationMax:{type:[{code:"decimal"}]},durationUnit:{type:[{code:"code"}]},frequency:{type:[{code:"positiveInt"}]},frequencyMax:{type:[{code:"positiveInt"}]},period:{type:[{code:"decimal"}]},periodMax:{type:[{code:"decimal"}]},periodUnit:{type:[{code:"code"}]},dayOfWeek:{max:9007199254740991,type:[{code:"code"}]},timeOfDay:{max:9007199254740991,type:[{code:"time"}]},when:{max:9007199254740991,type:[{code:"code"}]},offset:{type:[{code:"unsignedInt"}]}}},TriggerDefinition:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},type:{min:1,type:[{code:"code"}]},name:{type:[{code:"string"}]},"timing[x]":{type:[{code:"Timing"},{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/Schedule"]},{code:"date"},{code:"dateTime"}]},data:{max:9007199254740991,type:[{code:"DataRequirement"}]},condition:{type:[{code:"Expression"}]}}},UsageContext:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},code:{min:1,type:[{code:"Coding"}]},"value[x]":{min:1,type:[{code:"CodeableConcept"},{code:"Quantity"},{code:"Range"},{code:"Reference",targetProfile:["http://hl7.org/fhir/StructureDefinition/PlanDefinition","http://hl7.org/fhir/StructureDefinition/ResearchStudy","http://hl7.org/fhir/StructureDefinition/InsurancePlan","http://hl7.org/fhir/StructureDefinition/HealthcareService","http://hl7.org/fhir/StructureDefinition/Group","http://hl7.org/fhir/StructureDefinition/Location","http://hl7.org/fhir/StructureDefinition/Organization"]}]}}},MoneyQuantity:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},SimpleQuantity:{elements:{id:{type:[{code:"string"}]},extension:{max:9007199254740991,type:[{code:"Extension"}]},value:{type:[{code:"decimal"}]},comparator:{max:0,type:[{code:"code"}]},unit:{type:[{code:"string"}]},system:{type:[{code:"uri"}]},code:{type:[{code:"code"}]}}},IdentityProvider:{elements:{authorizeUrl:{min:1,type:[{code:"string"}]},tokenUrl:{min:1,type:[{code:"string"}]},tokenAuthMethod:{type:[{code:"code"}]},userInfoUrl:{min:1,type:[{code:"string"}]},clientId:{min:1,type:[{code:"string"}]},clientSecret:{min:1,type:[{code:"string"}]},usePkce:{type:[{code:"boolean"}]},useSubject:{type:[{code:"boolean"}]}}}};function $A(e){return new JA(e).parse()}var Ec=HA(FA),nm=Object.create(null),Ng=Object.create(null),VA={"http://hl7.org/fhir/StructureDefinition/MoneyQuantity":"MoneyQuantity","http://hl7.org/fhir/StructureDefinition/SimpleQuantity":"SimpleQuantity","http://hl7.org/fhir/uv/sql-on-fhir/StructureDefinition/ViewDefinition":"ViewDefinition"};function Av(e){let n;return n=Ng[e],n||(n=Ng[e]=Object.create(null)),n}function jg(e){let n=(Array.isArray(e)?e:e.entry?.map(a=>a.resource)??[]).filter(a=>a?.resourceType==="StructureDefinition");V4(n);for(let a of n)Cv(a)}function Cv(e){if(!e?.name)throw new Error("Failed loading StructureDefinition from bundle");if(e.resourceType!=="StructureDefinition")return;let n=$A(e),a=VA[e.url],o,c;a?(o=Ec,c=a):e.url===`http://hl7.org/fhir/StructureDefinition/${e.type}`||e.url===`https://medplum.com/fhir/StructureDefinition/${e.type}`||e.type?.startsWith("http://")||e.type?.startsWith("https://")?(o=Ec,c=e.type):(o=Av(e.url),c=e.type),o[c]=n;for(let d of n.innerTypes)d.parentType=n,o[d.name]=d;nm[e.url]=n}function GA(e){return!!Ec[e]}function sm(e,n){if(n){let a=Av(n)[e];if(a)return a}return Ec[e]}function QA(e,n){let a=sm(e,n);if(!a)throw new He(Tc("Unknown data type: "+e));return a}function Rv(e){return!!nm[e]}function Tv(e){return nm[e]}var JA=class{constructor(e){if(!e.snapshot?.element||e.snapshot.element.length===0)throw new Error(`No snapshot defined for StructureDefinition '${e.name}'`);this.root=e.snapshot.element[0],this.elements=e.snapshot.element.slice(1),this.elementIndex=Object.create(null),this.index=0,this.resourceSchema={name:e.name,path:this.root.path,title:e.title,type:e.type,url:e.url,version:e.version,kind:e.kind,description:XA(e),elements:{},constraints:this.parseElementDefinition(this.root).constraints,innerTypes:[],summaryProperties:new Set,mandatoryProperties:new Set},this.innerTypes=[]}parse(){let e=this.next();for(;e;){if(e.sliceName)this.parseSliceStart(e);else if(e.id?.includes(":")){if(this.slicingContext?.current){let n=wh(e,this.slicingContext.path);this.slicingContext.current.elements[n]=this.parseElementDefinition(e)}}else{let n=this.parseElementDefinition(e);this.checkFieldEnter(e,n);let a=this.backboneContext;for(;a;){if(e.path?.startsWith(a.path+".")){a.type.elements[wh(e,a.path)]=n;break}a=a.parent}if(!a){let o=wh(e,this.root.path);e.isSummary&&this.resourceSchema.summaryProperties?.add(o.replace("[x]","")),n.min>0&&this.resourceSchema.mandatoryProperties?.add(o.replace("[x]","")),this.resourceSchema.elements[o]=n}this.checkFieldExit(e)}e=this.next()}return this.checkFieldExit(),this.innerTypes.length>0&&(this.resourceSchema.innerTypes=this.innerTypes),this.resourceSchema}checkFieldEnter(e,n){this.isInnerType(e)&&this.enterInnerType(e),this.slicingContext&&!ni(this.slicingContext.path,e?.path)&&(this.slicingContext=void 0),e.slicing&&!this.slicingContext&&this.enterSlice(e,n)}enterInnerType(e){for(;this.backboneContext&&!ni(this.backboneContext?.path,e.path);)this.innerTypes.push(this.backboneContext.type),this.backboneContext=this.backboneContext.parent;let n=Mg(e);this.backboneContext={type:{name:n,type:n,path:e.path,title:e.label,description:e.definition,elements:{},constraints:this.parseElementDefinition(e).constraints,innerTypes:[]},path:e.path,parent:ni(this.backboneContext?.path,e.path)?this.backboneContext:this.backboneContext?.parent}}enterSlice(e,n){KA(e)&&!this.peek()?.sliceName||(n.slicing={discriminator:(e.slicing?.discriminator??[]).map(a=>{if(a.type!=="value"&&a.type!=="pattern"&&a.type!=="type")throw new Error(`Unsupported slicing discriminator type: ${a.type}`);return{path:a.path,type:a.type}}),slices:[],ordered:e.slicing?.ordered??!1,rule:e.slicing?.rules},this.slicingContext={field:n.slicing,path:e.path??""})}checkFieldExit(e=void 0){if(this.backboneContext&&!ni(this.backboneContext.path,e?.path))if(this.backboneContext.parent)do this.innerTypes.push(this.backboneContext.type),this.backboneContext=this.backboneContext.parent;while(this.backboneContext&&!ni(this.backboneContext.path,e?.path));else this.innerTypes.push(this.backboneContext.type),this.backboneContext=void 0}next(){let e=this.peek();if(e)return this.index++,e}peek(){let e=this.elements[this.index];if(e){if(this.elementIndex[e.path??""]=e,e.contentReference){let n=e.contentReference.slice(e.contentReference.indexOf("#")+1),a=this.elementIndex[n];return a?{...a,id:e.id,path:e.path,min:e.min??a.min,max:e.max??a.max,base:{path:a.base?.path??n,min:e.base?.min??a.base?.min??a.min,max:e.base?.max??a.base?.max??a.max},contentReference:e.contentReference,definition:e.definition}:void 0}return e}}isInnerType(e){let n=this.peek();return!!(ni(e?.path,n?.path)&&e.type?.some(a=>["BackboneElement","Element"].includes(a.code)))}parseSliceStart(e){if(!this.slicingContext)throw new Error(`Invalid slice start before discriminator: ${e.sliceName} (${e.id})`);this.slicingContext.current={...this.parseElementDefinition(e),name:e.sliceName??"",definition:e.definition,elements:{}},this.slicingContext.field.slices.push(this.slicingContext.current)}parseElementDefinitionType(e){return(e.type??[]).map(n=>{let a;return(n.code==="BackboneElement"||n.code==="Element")&&(a=Mg(e)),a||(a=Dv(n,"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type")?.valueUrl),a||(a=n.code??""),{code:a,targetProfile:n.targetProfile,profile:n.profile}})}parseElementDefinition(e){let n=Sg(e.max),a=e.base?.max?Sg(e.base.max):n,o={type:"ElementDefinition",value:e};return{description:e.definition||"",path:e.path||e.base?.path||"",min:e.min??0,max:n,isArray:a>1,constraints:(e.constraint??[]).map(c=>({key:c.key??"",severity:c.severity??"error",expression:c.expression??"",description:c.human??""})),type:this.parseElementDefinitionType(e),fixed:kg(xi(o,"fixed[x]")),pattern:kg(xi(o,"pattern[x]")),binding:e.binding}}};function Sg(e){return e==="*"?Number.POSITIVE_INFINITY:Number.parseInt(e,10)}function wh(e,n=""){return YA(e.path,n)}function YA(e,n){return e?n&&e.startsWith(n)?e.substring(n.length+1):e:""}function ni(e,n){return!e||!n?!1:n.startsWith(e+".")||n===e}function kg(e){return Array.isArray(e)&&e.length>0?e[0]:Gt(e)?void 0:e}function KA(e){let n=e.slicing?.discriminator;return!!(e.type?.some(a=>a.code==="Extension")&&n?.length===1&&n[0].type==="value"&&n[0].path==="url")}function XA(e){let n=e.description;return n?.startsWith(`Base StructureDefinition for ${e.name} Type: `)&&(n=n.substring(`Base StructureDefinition for ${e.name} Type: `.length)),n}function ZA(e,n,a){if(e===void 0)return[void 0];if(n==="$this")return[e];let o=a?.withPath?WA:xi,[c,...d]=n.split("."),m=[o(e,c,a)];for(let f of d){let p=[];for(let x of m)if(Array.isArray(x))for(let j of x)p.push(o(j,f,a));else(a?.withPath&&x&&x.value!==void 0||!a?.withPath&&x!==void 0)&&p.push(o(x,f,a));m=p}return m}function WA(e,n,a){let o=e.path;return e4(xi(e,n,a),o,n)}function e4(e,n,a){let o=n?n+".":"";return e===void 0?{type:"undefined",value:void 0,path:`${o}${a}`}:Array.isArray(e)?e.map((c,d)=>({...c,path:`${o}${a}[${d}]`})):{...e,path:`${o}${a}`}}var Ev={date:/^(\d(\d(\d[1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2]\d|3[0-1]))?)?$/,dateTime:/^(\d(\d(\d[1-9]|[1-9]0)|[1-9]00)|[1-9]000)(-(0[1-9]|1[0-2])(-(0[1-9]|[1-2]\d|3[0-1])(T([01]\d|2[0-3])(:[0-5]\d:([0-5]\d|60)(\.\d{1,9})?)?)?)?(Z|[+-]((0\d|1[0-3]):[0-5]\d|14:00)?)?)?$/};function t4(e,n,a,o){if(Array.isArray(e))return!1;let c;n.path==="$this"?c=a:c=(o??a.elements)[n.path];let d=a.type;switch(n.type){case"value":case"pattern":if(!e||!c)return!1;if(c.pattern)return om(e,c.pattern);if(c.fixed)return gi(e,c.fixed);if(c.binding?.strength==="required"&&c.binding.valueSet)return!0;break;case"type":return!e||!d?.length?!1:d.some(m=>m.code===e.type)}return!1}function ke(e){return[{type:he.boolean,value:e}]}function Is(e){return e==null?{type:"undefined",value:void 0}:Number.isSafeInteger(e)?{type:he.integer,value:e}:typeof e=="number"?{type:he.decimal,value:e}:typeof e=="boolean"?{type:he.boolean,value:e}:typeof e=="string"?{type:he.string,value:e}:Or(e)?{type:he.Quantity,value:e}:Na(e)?{type:e.resourceType,value:e}:Lv(e)?{type:he.CodeableConcept,value:e}:Pv(e)?{type:he.Coding,value:e}:{type:he.BackboneElement,value:e}}function Ln(e){return e.length===0?!1:!!e[0].value}function Fn(e,n){if(e.length!==0){if(e.length===1&&(!n||e[0].type===n))return e[0];throw new Error(`Expected singleton of type ${n}, but found ${JSON.stringify(e)}`)}}function xi(e,n,a){if(!e.value)return;let o=X4(e.type,n,a?.profileUrl);return o?r4(e,n,o):n4(e,n)}function r4(e,n,a){let o=e.value,c=a.type;if(!c||c.length===0)return;let d,m="undefined",f,p=a.path.lastIndexOf("."),x=a.path.substring(p+1);for(let j of c){let b=x.replace("[x]",zo(j.code));if(d=o[b],f=o["_"+b],d!==void 0||f!==void 0){m=j.code;break}}if(f)if(Array.isArray(d)){d=d.slice();for(let j=0;j<Math.max(d.length,f.length);j++)d[j]=Tg(d[j],f[j])}else d=Tg(d,f);if(!Gt(d))return(m==="Element"||m==="BackboneElement")&&(m=a.type[0].code),Array.isArray(d)?d.map(j=>Ag(j,m)):Ag(d,m)}function Ag(e,n){return n==="Resource"&&Na(e)&&(n=e.resourceType),{type:n,value:e}}function n4(e,n){let a=e.value;if(!a||typeof a!="object")return;let o;if(n in a){let c=a[n];Array.isArray(c)?o=c.map(Is):o=Is(c)}else{let c=n.endsWith("[x]")?n.substring(0,n.length-3):n;for(let d of Object.values(he)){let m=c+zo(d);if(m in a){let f=a[m];Array.isArray(f)?o=f.map(p=>({type:d,value:p})):o={type:d,value:f};break}}}if(Array.isArray(o)){if(o.length===0||Gt(o[0]))return}else if(Gt(o))return;return o}function Uv(e){let n=[];for(let a of e){let o=!1;for(let c of n)if(Ln(Jc(a,c))){o=!0;break}o||n.push(a)}return n}function s4(e){return ke(!Ln(e))}function a4(e,n){return e.length===0||n.length===0?[]:e.length!==n.length?ke(!1):ke(e.every((a,o)=>Ln(Jc(a,n[o]))))}function i4(e,n){return e.length===0||n.length===0?[]:e.length!==n.length?ke(!0):ke(e.some((a,o)=>!Ln(Jc(a,n[o]))))}function Jc(e,n){let a=e.value?.valueOf(),o=n.value?.valueOf();return typeof a=="number"&&typeof o=="number"?ke(Math.abs(a-o)<1e-8):Or(a)&&Or(o)?ke(_v(a,o)):ke(typeof a=="object"&&typeof o=="object"?am(e,n):a===o)}function Iv(e,n){return e.length===0&&n.length===0?ke(!0):e.length!==n.length?ke(!1):(e.sort(Cg),n.sort(Cg),ke(e.every((a,o)=>Ln(o4(a,n[o])))))}function o4(e,n){let{type:a,value:o}=e,{type:c,value:d}=n,m=o?.valueOf(),f=d?.valueOf();return typeof m=="number"&&typeof f=="number"?ke(Math.abs(m-f)<.01):Or(m)&&Or(f)?ke(_v(m,f)):ke(a==="Coding"&&c==="Coding"?typeof m!="object"||typeof f!="object"?!1:m.code===f.code&&m.system===f.system:typeof m=="object"&&typeof f=="object"?am({...m,id:void 0},{...f,id:void 0}):typeof m=="string"&&typeof f=="string"?m.toLowerCase()===f.toLowerCase():m===f)}function Cg(e,n){let a=e.value?.valueOf(),o=n.value?.valueOf();return typeof a=="number"&&typeof o=="number"?a-o:typeof a=="string"&&typeof o=="string"?a.localeCompare(o):0}function Mv(e,n){let{value:a}=e;if(a==null)return!1;let o=n;switch(o.startsWith("System.")&&(o=o.substring(7)),o.startsWith("FHIR.")&&(o=o.substring(5)),o){case"Boolean":return typeof a=="boolean";case"Decimal":case"Integer":return typeof a=="number";case"Date":return l4(a);case"DateTime":return Eh(a);case"Time":return typeof a=="string"&&!!/^T\d/.exec(a);case"Period":return c4(a);case"Quantity":return Or(a);default:return e.type===o||typeof a=="object"&&a?.resourceType===o}}function l4(e){return typeof e=="string"&&!!Ev.date.exec(e)}function Eh(e){return typeof e=="string"&&!!Ev.dateTime.exec(e)}function c4(e){return!!(e&&typeof e=="object"&&("start"in e&&Eh(e.start)||"end"in e&&Eh(e.end)))}function Or(e){return!!(e&&typeof e=="object"&&"value"in e&&typeof e.value=="number")}function _v(e,n){return Math.abs(e.value-n.value)<.01&&(e.unit===n.unit||e.code===n.code||e.unit===n.code||e.code===n.unit)}function am(e,n){let a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(let c of a){let d=e[c],m=n[c];if(Rg(d)&&Rg(m)){if(!am(d,m))return!1}else if(d!==m)return!1}return!0}function Rg(e){return e!==null&&typeof e=="object"}function Tg(e,n){if(n){if(typeof n!="object")throw new Error("Primitive extension must be an object");return d4(e??{},n)}return e}function d4(e,n){return delete n.__proto__,delete n.constructor,Object.assign(e,n)}function u4(e,n){return Na(e,n)&&"id"in e&&typeof e.id=="string"}function si(e){let n=Ms(e)??"undefined/undefined",a=Yc(e);return a===n?{reference:n}:{reference:n,display:a}}function Ms(e){if(wi(e))return e.reference;if(u4(e))return`${e.resourceType}/${e.id}`}function Uc(e){if(e)return wi(e)?e.reference.split("/")[1]:e.id}function h4(e){return e.resourceType==="Patient"||e.resourceType==="Practitioner"||e.resourceType==="RelatedPerson"}function Yc(e){if(h4(e)){let n=m4(e);if(n)return n}if(e.resourceType==="Device"){let n=f4(e);if(n)return n}if(e.resourceType==="MedicationRequest"&&e.medicationCodeableConcept)return Uh(e.medicationCodeableConcept);if(e.resourceType==="Subscription"&&e.criteria)return e.criteria;if(e.resourceType==="User"&&e.email)return e.email;if("name"in e&&e.name&&typeof e.name=="string")return e.name;if("code"in e&&e.code){let n=e.code;if(Array.isArray(n)&&(n=n[0]),Lv(n))return Uh(n);if(k4(n))return n.text}return Ms(e)??""}function m4(e){let n=e.name;if(n&&n.length>0)return Kc(n[0])}function f4(e){let n=e.deviceName;if(n&&n.length>0)return n[0].name}function p4(e){if(!("photo"in e))return;let n=e.photo;if(n)if(Array.isArray(n))for(let a of n){let o=Eg(a);if(o)return o}else return Eg(n)}function Eg(e){if(e.url&&e.contentType?.startsWith("image/"))return e.url}function x4(e,n){let a=new Date(e);a.setUTCHours(0,0,0,0);let o=n?new Date(n):new Date;o.setUTCHours(0,0,0,0);let c=a.getUTCFullYear(),d=a.getUTCMonth(),m=a.getUTCDate(),f=o.getUTCFullYear(),p=o.getUTCMonth(),x=o.getUTCDate(),j=f-c;(p<d||p===d&&x<m)&&j--;let b=f*12+p-(c*12+d);x<m&&b--;let y=Math.floor((o.getTime()-a.getTime())/(1e3*60*60*24));return{years:j,months:b,days:y}}function Dv(e,...n){let a=e;for(let o=0;o<n.length&&a;o++)a=a?.extension?.find(c=>c.url===n[o]);return a}function Ov(e,n){let a=im(e);return JSON.stringify(a,null,void 0)??""}function im(e){if(!(e==null||e===""))return typeof e=="object"?Array.isArray(e)?g4(e):v4(e):e}function g4(e){let n=e.length;if(n===0)return;let a,o=0;for(let c=0;c<n;c++){let d=e[c],m=im(d);m!==d&&!a&&(a=Array.from(e)),m===void 0?a&&(a[c]=null):(a&&(a[c]=m),o++)}if(o!==0)return a??e}function v4(e){let n,a=0;for(let o in e){let c=e[o],d=im(c);d!==c&&!n&&(n={...e}),d===void 0?n&&delete n[o]:(n&&(n[o]=d),a++)}if(a!==0)return n??e}function Gt(e){if(e==null)return!0;let n=typeof e;return n==="string"||n==="object"?!wa(e):!1}function wa(e){if(e==null)return!1;let n=typeof e;return n==="string"&&e!==""||n==="object"&&("length"in e&&e.length>0||Object.keys(e).length>0)}function gi(e,n,a){return e===n||Gt(e)&&Gt(n)?!0:Gt(e)||Gt(n)?!1:Array.isArray(e)&&Array.isArray(n)?y4(e,n):Array.isArray(e)||Array.isArray(n)?!1:Qr(e)&&Qr(n)?b4(e,n,a):!1}function y4(e,n){if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(!gi(e[a],n[a]))return!1;return!0}function b4(e,n,a){let o=new Set;Object.keys(e).forEach(c=>o.add(c)),Object.keys(n).forEach(c=>o.add(c)),a==="meta"&&(o.delete("versionId"),o.delete("lastUpdated"),o.delete("author"));for(let c of o){let d=e[c],m=n[c];if(!gi(d,m,c))return!1}return!0}function om(e,n){return Gt(e)?!0:Gt(n)?!1:Array.isArray(e)&&Array.isArray(n)?w4(e,n):Array.isArray(e)||Array.isArray(n)?!1:Qr(e)&&Qr(n)?N4(e,n):Qr(e)||Qr(n)?!1:e===n}function w4(e,n){return n.every(a=>e.some(o=>om(o,a)))}function N4(e,n){return Object.entries(n).every(([a,o])=>a in e&&om(e[a],o))}function j4(e){return e===void 0?e:JSON.parse(JSON.stringify(e))}function S4(e){return/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i.test(e)}function Qr(e){return e!==null&&typeof e=="object"}function Pv(e){return Qr(e)&&"code"in e&&typeof e.code=="string"}function Lv(e){return Qr(e)&&"coding"in e&&Array.isArray(e.coding)&&e.coding.every(Pv)}function k4(e){return Qr(e)&&"text"in e&&typeof e.text=="string"}var Bv=[];for(let e=0;e<256;e++)Bv.push(e.toString(16).padStart(2,"0"));function A4(e){let n=zv(e),a=new Uint8Array(n),o=new Array(a.length);for(let c=0;c<a.length;c++)o[c]=Bv[a[c]];return o.join("")}function C4(e){let n=zv(e),a=new Uint8Array(n),o=new Array(a.length);for(let c=0;c<a.length;c++)o[c]=String.fromCharCode(a[c]);return window.btoa(o.join(""))}function zv(e){return ArrayBuffer.isView(e)?e.buffer:e}function zo(e){return e?e.charAt(0).toUpperCase()+e.substring(1):""}function R4(e,n){let a=e+".";if(n.startsWith(a))return n.slice(a.length)}var Ug=e=>new Promise(n=>{setTimeout(n,e)});function Ig(e,n,a){let o=[];for(let c=0;c<a-1;c++){let d=e.indexOf(n);if(d<0)break;o.push(e.slice(0,d)),e=e.slice(d+n.length)}return o.push(e),o}function T4(e){return e.sort((n,a)=>n.localeCompare(a))}function qv(e){return e.endsWith("/")?e:e+"/"}function E4(e){return e.startsWith("/")?e.slice(1):e}function sn(e,n){return new URL(E4(n),qv(e.toString())).toString()}function U4(e,n){return sn(e,n).toString().replace("http://","ws://").replace("https://","wss://")}function I4(e){return typeof e=="object"&&!Array.isArray(e)&&!(e instanceof URLSearchParams)&&(e=Object.fromEntries(Object.entries(e).filter(n=>n[1]!==void 0))),new URLSearchParams(e).toString()}function M4(e,n){if(!e)return"";let a=[];if(e.line&&a.push(...e.line),e.city||e.state||e.postalCode){let o=[];e.city&&o.push(e.city),e.state&&o.push(e.state),e.postalCode&&o.push(e.postalCode),a.push(o.join(", "))}return e.use&&n?.use,a.join(", ").trim()}function Kc(e,n){if(!e)return"";let a=[];if(e.prefix&&n?.prefix!==!1&&a.push(...e.prefix),e.given&&a.push(...e.given),e.family&&a.push(e.family),e.suffix&&n?.suffix!==!1&&a.push(...e.suffix),e.use&&(n?.all||n?.use)&&a.push("["+e.use+"]"),a.length===0){let o=Mc(e.text);if(o)return o}return a.join(" ").trim()}function Hv(e){return e instanceof Date&&!isNaN(e.getTime())}function _4(e,n,a){if(!e)return"";let o=new Date("2000-01-01T"+e+"Z");return Hv(o)?o.toLocaleTimeString(n,a):""}function Ic(e,n,a){if(!e)return"";let o=new Date(e);return Hv(o)?o.toLocaleString(n,a):""}function D4(e,n,a){return!e||!e.start&&!e.end?"":Ic(e.start,n,a)+" - "+Ic(e.end,n,a)}var O4={s:"every second",min:"every minute",h:"hourly",d:"daily",wk:"weekly",mo:"monthly",a:"annually"},P4={s:"second",min:"minute",h:"hour",d:"day",wk:"week",mo:"month",a:"year"},L4={s:"seconds",min:"minutes",h:"hours",d:"days",wk:"weeks",mo:"months",a:"years"};function B4(e){if(!e)return"";let n=[];return z4(n,e.repeat),e.event&&n.push(e.event.map(a=>Ic(a)).join(", ")),zo(n.join(" ").trim())}function z4(e,n){if(!n?.periodUnit)return;let a=n.frequency??1,o=n.period??1,c=n.periodUnit;a===1&&o===1?e.push(O4[c]):(a===1?e.push("once"):e.push(a+" times"),o===1?e.push("per "+P4[c]):e.push("per "+o+" "+L4[c])),n.dayOfWeek&&e.push("on "+n.dayOfWeek.map(zo).join(", ")),n.timeOfDay&&e.push("at "+n.timeOfDay.map(d=>_4(d)).join(", "))}function q4(e,n,a=!1){if(a&&n===void 0)throw new Error("Precision must be specified for exclusive ranges");let o=e?.low&&{...e.low,comparator:void 0},c=e?.high&&{...e.high,comparator:void 0};return o?.value===void 0&&c?.value===void 0?"":o?.value!==void 0&&c?.value===void 0?a&&n!==void 0?(o.value=$4(o.value),`> ${da(o)}`):`>= ${da(o)}`:o?.value===void 0&&c?.value!==void 0?a&&n!==void 0?(c.value=F4(c.value),`< ${da(c)}`):`<= ${da(c)}`:(o?.unit===c?.unit&&delete o?.unit,`${da(o)} - ${da(c)}`)}function da(e,n){if(!e)return"";let a=[];return e.comparator&&(a.push(e.comparator),a.push(" ")),e.value!==void 0&&a.push(e.value),e.unit&&(e.unit!=="%"&&a[a.length-1]!==" "&&a.push(" "),a.push(e.unit)),a.join("").trim()}function H4(e){return e?.value===void 0?"":e.value.toLocaleString(void 0,{style:"currency",currency:e.currency??"USD",currencyDisplay:"narrowSymbol"})}function Uh(e){return e?Mc(e.text)||(e.coding?e.coding.map(a=>Fv(a)).join(", "):""):""}function Fv(e,n){let a=Mc(e?.display);return a?`${a}`:Mc(e?.code)??""}function Mc(e){return typeof e=="string"?e:void 0}function F4(e,n,a=1){return($v(e)+a)*Math.pow(10,NaN)}function $4(e,n,a=1){return($v(e)-a)*Math.pow(10,NaN)}function $v(e,n){return e}var he={Address:"Address",Age:"Age",Annotation:"Annotation",Attachment:"Attachment",BackboneElement:"BackboneElement",CodeableConcept:"CodeableConcept",Coding:"Coding",ContactDetail:"ContactDetail",ContactPoint:"ContactPoint",Contributor:"Contributor",Count:"Count",DataRequirement:"DataRequirement",Distance:"Distance",Dosage:"Dosage",Duration:"Duration",Expression:"Expression",Extension:"Extension",HumanName:"HumanName",Identifier:"Identifier",MarketingStatus:"MarketingStatus",Meta:"Meta",Money:"Money",Narrative:"Narrative",ParameterDefinition:"ParameterDefinition",Period:"Period",Population:"Population",ProdCharacteristic:"ProdCharacteristic",ProductShelfLife:"ProductShelfLife",Quantity:"Quantity",Range:"Range",Ratio:"Ratio",Reference:"Reference",RelatedArtifact:"RelatedArtifact",SampledData:"SampledData",Signature:"Signature",SubstanceAmount:"SubstanceAmount",SystemString:"http://hl7.org/fhirpath/System.String",Timing:"Timing",TriggerDefinition:"TriggerDefinition",UsageContext:"UsageContext",base64Binary:"base64Binary",boolean:"boolean",canonical:"canonical",code:"code",date:"date",dateTime:"dateTime",decimal:"decimal",id:"id",instant:"instant",integer:"integer",markdown:"markdown",oid:"oid",positiveInt:"positiveInt",string:"string",time:"time",unsignedInt:"unsignedInt",uri:"uri",url:"url",uuid:"uuid"};function V4(e){let n=Array.isArray(e)?e:e.entry?.map(a=>a.resource)??[];for(let a of n)a?.resourceType==="StructureDefinition"&&a.kind==="resource"&&Vv(a.type)}function Vv(e){let n=_g.types[e];return n||(n={searchParamsDetails:{}},_g.types[e]=n),!n.searchParams&&e!=="Binary"&&(n.searchParams={_id:{base:[e],code:"_id",type:"token",expression:e+".id"},_lastUpdated:{base:[e],code:"_lastUpdated",type:"date",expression:e+".meta.lastUpdated"},_compartment:{base:[e],code:"_compartment",type:"reference",expression:e+".meta.compartment"},_profile:{base:[e],code:"_profile",type:"uri",expression:e+".meta.profile"},_security:{base:[e],code:"_security",type:"token",expression:e+".meta.security"},_source:{base:[e],code:"_source",type:"uri",expression:e+".meta.source"},_tag:{base:[e],code:"_tag",type:"token",expression:e+".meta.tag"}}),n}function G4(e){for(let n of e.base??[]){let a=Vv(n);a.searchParams||(a.searchParams={}),a.searchParams[e.code]=e}}function Mg(e){let n=e.type?.[0]?.code;return n==="BackboneElement"||n==="Element"?Q4((e.base?.path??e.path)?.split(".")):n}function Q4(e){return e.length===1?e[0]:e.map(zo).join("")}function _c(e){let n=e.replaceAll("[x]","").split(".").pop();return J4(n)}function J4(e){let n;return e.length<100?n=e.match(/[A-Z]+(?![a-z])|[A-Z]?[a-z]+|\d+/g)??[]:n=e.split(/(?=[A-Z])/),n.map(K4).join(" ").replace("_"," ").replace(/\s+/g," ")}var Y4=new Set(["ID","IP","PKCE","JWKS","URI","URL","OMB","UDI"]);function K4(e){let n=e.toUpperCase();return e===n?e:Y4.has(n)?n:n.charAt(0)+e.slice(1)}function X4(e,n,a){let o=sm(e,a);if(o)return Z4(o.elements,n)}function Z4(e,n){let a=e[n]??e[n+"[x]"];if(a)return a;for(let o=0;o<n.length;o++){let c=n[o];if(c>="A"&&c<="Z"){let d=n.slice(0,o)+"[x]",m=e[d];if(m)return m}}}function Na(e,n){return!(!e||typeof e!="object"||!("resourceType"in e)||n&&e.resourceType!==n)}function wi(e){return!!(e&&typeof e=="object"&&"reference"in e&&typeof e.reference=="string")}var _g={types:{}};function wc(e){if(e.startsWith("T"))return e+"T00:00:00.000Z".substring(e.length);if(e.length<=10)return e;try{return new Date(e).toISOString()}catch{return e}}var On=()=>[],ir={empty:(e,n)=>ke(n.length===0||n.every(a=>Gt(a.value))),hasValue:(e,n)=>ke(n.length!==0),exists:(e,n,a)=>ke(a?n.filter(o=>Ln(a.eval(e,[o]))).length>0:n.length>0&&n.every(o=>!Gt(o.value))),all:(e,n,a)=>ke(n.every(o=>Ln(a.eval(e,[o])))),allTrue:(e,n)=>{for(let a of n)if(!a.value)return ke(!1);return ke(!0)},anyTrue:(e,n)=>{for(let a of n)if(a.value)return ke(!0);return ke(!1)},allFalse:(e,n)=>{for(let a of n)if(a.value)return ke(!1);return ke(!0)},anyFalse:(e,n)=>{for(let a of n)if(!a.value)return ke(!0);return ke(!1)},subsetOf:(e,n,a)=>{if(n.length===0)return ke(!0);let o=a.eval(e,la(e));return o.length===0?ke(!1):ke(n.every(c=>o.some(d=>d.value===c.value)))},supersetOf:(e,n,a)=>{let o=a.eval(e,la(e));return o.length===0?ke(!0):n.length===0?ke(!1):ke(o.every(c=>n.some(d=>d.value===c.value)))},count:(e,n)=>[{type:he.integer,value:n.length}],distinct:(e,n)=>{let a=[];for(let o of n)a.some(c=>c.value===o.value)||a.push(o);return a},isDistinct:(e,n)=>ke(n.length===ir.distinct(e,n).length),where:(e,n,a)=>n.filter(o=>Ln(a.eval(e,[o]))),select:(e,n,a)=>n.map(o=>a.eval({parent:e,variables:{$this:o}},[o])).flat(),repeat:On,ofType:(e,n,a)=>n.filter(o=>o.type===a.name),single:(e,n)=>{if(n.length>1)throw new Error("Expected input length one for single()");return n.length===0?[]:n.slice(0,1)},first:(e,n)=>n.length===0?[]:n.slice(0,1),last:(e,n)=>n.length===0?[]:n.slice(n.length-1,n.length),tail:(e,n)=>n.length===0?[]:n.slice(1,n.length),skip:(e,n,a)=>{let o=a.eval(e,n)[0]?.value;if(typeof o!="number")throw new Error("Expected a number for skip(num)");return o>=n.length?[]:o<=0?n:n.slice(o,n.length)},take:(e,n,a)=>{let o=a.eval(e,n)[0]?.value;if(typeof o!="number")throw new Error("Expected a number for take(num)");return o>=n.length?n:o<=0?[]:n.slice(0,o)},intersect:(e,n,a)=>{if(!a)return n;let o=a.eval(e,la(e)),c=[];for(let d of n)!c.some(m=>m.value===d.value)&&o.some(m=>m.value===d.value)&&c.push(d);return c},exclude:(e,n,a)=>{if(!a)return n;let o=a.eval(e,la(e)),c=[];for(let d of n)o.some(m=>m.value===d.value)||c.push(d);return c},union:(e,n,a)=>{if(!a)return n;let o=a.eval(e,la(e));return Uv([...n,...o])},combine:(e,n,a)=>{if(!a)return n;let o=a.eval(e,la(e));return[...n,...o]},htmlChecks:(e,n,a)=>[Is(!0)],iif:(e,n,a,o,c)=>{let d=a.eval(e,n);if(d.length>1||d.length===1&&typeof d[0].value!="boolean")throw new Error("Expected criterion to evaluate to a Boolean");return Ln(d)?o.eval(e,n):c?c.eval(e,n):[]},toBoolean:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);if(typeof a=="boolean")return[{type:he.boolean,value:a}];if(typeof a=="number"&&(a===0||a===1))return ke(!!a);if(typeof a=="string"){let o=a.toLowerCase();if(["true","t","yes","y","1","1.0"].includes(o))return ke(!0);if(["false","f","no","n","0","0.0"].includes(o))return ke(!1)}return[]},convertsToBoolean:(e,n)=>n.length===0?[]:ke(ir.toBoolean(e,n).length===1),toInteger:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);return typeof a=="number"?[{type:he.integer,value:a}]:typeof a=="string"&&/^[+-]?\d+$/.exec(a)?[{type:he.integer,value:parseInt(a,10)}]:typeof a=="boolean"?[{type:he.integer,value:a?1:0}]:[]},convertsToInteger:(e,n)=>n.length===0?[]:ke(ir.toInteger(e,n).length===1),toDate:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);return typeof a=="string"&&/^\d{4}(-\d{2}(-\d{2})?)?/.exec(a)?[{type:he.date,value:wc(a)}]:[]},convertsToDate:(e,n)=>n.length===0?[]:ke(ir.toDate(e,n).length===1),toDateTime:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);return typeof a=="string"&&/^\d{4}(-\d{2}(-\d{2})?)?/.exec(a)?[{type:he.dateTime,value:wc(a)}]:[]},convertsToDateTime:(e,n)=>n.length===0?[]:ke(ir.toDateTime(e,n).length===1),toDecimal:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);return typeof a=="number"?[{type:he.decimal,value:a}]:typeof a=="string"&&/^-?\d{1,9}(\.\d{1,9})?$/.exec(a)?[{type:he.decimal,value:parseFloat(a)}]:typeof a=="boolean"?[{type:he.decimal,value:a?1:0}]:[]},convertsToDecimal:(e,n)=>n.length===0?[]:ke(ir.toDecimal(e,n).length===1),toQuantity:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);return Or(a)?[{type:he.Quantity,value:a}]:typeof a=="number"?[{type:he.Quantity,value:{value:a,unit:"1"}}]:typeof a=="string"&&/^-?\d{1,9}(\.\d{1,9})?/.exec(a)?[{type:he.Quantity,value:{value:parseFloat(a),unit:"1"}}]:typeof a=="boolean"?[{type:he.Quantity,value:{value:a?1:0,unit:"1"}}]:[]},convertsToQuantity:(e,n)=>n.length===0?[]:ke(ir.toQuantity(e,n).length===1),toString:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);return a==null?[]:Or(a)?[{type:he.string,value:`${a.value} '${a.unit}'`}]:[{type:he.string,value:a.toString()}]},convertsToString:(e,n)=>n.length===0?[]:ke(ir.toString(e,n).length===1),toTime:(e,n)=>{if(n.length===0)return[];let[{value:a}]=cn(n,1);if(typeof a=="string"){let o=/^T?(\d{2}(:\d{2}(:\d{2})?)?)/.exec(a);if(o)return[{type:he.time,value:wc("T"+o[1])}]}return[]},convertsToTime:(e,n)=>n.length===0?[]:ke(ir.toTime(e,n).length===1),indexOf:(e,n,a)=>Rr((o,c)=>o.indexOf(c),e,n,a),substring:(e,n,a,o)=>Rr((c,d,m)=>{let f=d,p=m?f+m:c.length;return f<0||f>=c.length?void 0:c.substring(f,p)},e,n,a,o),startsWith:(e,n,a)=>Rr((o,c)=>o.startsWith(c),e,n,a),endsWith:(e,n,a)=>Rr((o,c)=>o.endsWith(c),e,n,a),contains:(e,n,a)=>Rr((o,c)=>o.includes(c),e,n,a),upper:(e,n)=>Rr(a=>a.toUpperCase(),e,n),lower:(e,n)=>Rr(a=>a.toLowerCase(),e,n),replace:(e,n,a,o)=>Rr((c,d,m)=>c.replaceAll(d,m),e,n,a,o),matches:(e,n,a)=>Rr((o,c)=>!!new RegExp(c).exec(o),e,n,a),replaceMatches:(e,n,a,o)=>Rr((c,d,m)=>c.replaceAll(new RegExp(d,"g"),m),e,n,a,o),length:(e,n)=>Rr(a=>a.length,e,n),toChars:(e,n)=>Rr(a=>a?a.split(""):void 0,e,n),encode:On,decode:On,escape:On,unescape:On,trim:On,split:On,join:(e,n,a)=>{let o=a?.eval(e,la(e))[0]?.value??"";if(typeof o!="string")throw new Error("Separator must be a string.");return[{type:he.string,value:n.map(c=>c.value?.toString()??"").join(o)}]},abs:(e,n)=>rn(Math.abs,e,n),ceiling:(e,n)=>rn(Math.ceil,e,n),exp:(e,n)=>rn(Math.exp,e,n),floor:(e,n)=>rn(Math.floor,e,n),ln:(e,n)=>rn(Math.log,e,n),log:(e,n,a)=>rn((o,c)=>Math.log(o)/Math.log(c),e,n,a),power:(e,n,a)=>rn(Math.pow,e,n,a),round:(e,n)=>rn(Math.round,e,n),sqrt:(e,n)=>rn(Math.sqrt,e,n),truncate:(e,n)=>rn(a=>a|0,e,n),children:On,descendants:On,trace:(e,n,a)=>n,now:()=>[{type:he.dateTime,value:new Date().toISOString()}],timeOfDay:()=>[{type:he.time,value:new Date().toISOString().substring(11)}],today:()=>[{type:he.date,value:new Date().toISOString().substring(0,10)}],between:(e,n,a,o,c)=>{let d=ir.toDateTime(e,a.eval(e,n));if(d.length===0)throw new Error("Invalid start date");let m=ir.toDateTime(e,o.eval(e,n));if(m.length===0)throw new Error("Invalid end date");let f=c.eval(e,n)[0]?.value;if(f!=="years"&&f!=="months"&&f!=="days")throw new Error("Invalid units");let p=x4(d[0].value,m[0].value);return[{type:he.Quantity,value:{value:p[f],unit:f}}]},is:(e,n,a)=>{let o="";return a instanceof Dc?o=a.name:a instanceof Gv&&(o=a.left.name+"."+a.right.name),o?n.map(c=>({type:he.boolean,value:Mv(c,o)})):[]},not:(e,n)=>ir.toBoolean(e,n).map(a=>({type:he.boolean,value:!a.value})),resolve:(e,n)=>n.map(a=>{let o=a.value,c;if(typeof o=="string")c=o;else if(typeof o=="object"){let d=o;if(d.resource)return Is(d.resource);d.reference?c=d.reference:d.type&&d.identifier&&(c=`${d.type}?identifier=${d.identifier.system}|${d.identifier.value}`)}if(c?.includes("?")){let[d]=c.split("?");return{type:d,value:{resourceType:d}}}if(c?.includes("/")){let[d,m]=c.split("/");return{type:d,value:{resourceType:d,id:m}}}return{type:he.BackboneElement,value:void 0}}).filter(a=>!!a.value),as:(e,n)=>n,type:(e,n)=>n.map(({value:a})=>typeof a=="boolean"?{type:he.BackboneElement,value:{namespace:"System",name:"Boolean"}}:typeof a=="number"?{type:he.BackboneElement,value:{namespace:"System",name:"Integer"}}:Na(a)?{type:he.BackboneElement,value:{namespace:"FHIR",name:a.resourceType}}:{type:he.BackboneElement,value:null}),conformsTo:(e,n,a)=>{let o=a.eval(e,n)[0].value;if(!o.startsWith("http://hl7.org/fhir/StructureDefinition/"))throw new Error("Expected a StructureDefinition URL");let c=o.replace("http://hl7.org/fhir/StructureDefinition/","");return n.map(d=>({type:he.boolean,value:d.value?.resourceType===c}))},getResourceKey:(e,n)=>{let a=n[0].value;return a?.id?[{type:he.id,value:a.id}]:[]},getReferenceKey:(e,n,a)=>{let o=n[0].value;if(!o?.reference)return[];let c="";return a instanceof Dc&&(c=a.name),c&&!o.reference.startsWith(c+"/")?[]:[{type:he.id,value:Uc(o)}]},extension:(e,n,a)=>{let o=a.eval(e,n)[0].value,c=n?.[0]?.value;if(c){let d=Dv(c,o);if(d)return[{type:he.Extension,value:d}]}return[]}};function Rr(e,n,a,...o){if(a.length===0)return[];let[{value:c}]=cn(a,1);if(typeof c!="string")throw new Error("String function cannot be called with non-string");let d=e(c,...o.map(m=>m?.eval(n,a)[0]?.value));return d===void 0?[]:Array.isArray(d)?d.map(Is):[Is(d)]}function rn(e,n,a,...o){if(a.length===0)return[];let[{value:c}]=cn(a,1),d=Or(c),m=d?c.value:c;if(typeof m!="number")throw new Error("Math function cannot be called with non-number");let f=e(m,...o.map(j=>j.eval(n,a)[0]?.value)),p=d?he.Quantity:a[0].type,x=d?{...c,value:f}:f;return[{type:p,value:x}]}function cn(e,n){if(e.length!==n)throw new Error(`Expected ${n} arguments`);for(let a of e)if(a==null)throw new Error("Expected non-null argument");return e}function la(e){let n=e;for(;n.parent?.variables.$this;)n=n.parent;return[n.variables.$this]}var W4=class{constructor(e,n){this.original=e,this.child=n}eval(e,n){try{if(n.length>0){let a=[];for(let o of n)a.push(this.child.eval({parent:e,variables:{$this:o}},[o]));return a.flat()}else return this.child.eval(e,[])}catch(a){throw new Error(`FhirPathError on "${this.original}": ${a}`,{cause:a})}}toString(){return this.child.toString()}},ai=class{constructor(n){this.value=n}eval(){return[this.value]}toString(){let n=this.value.value;return typeof n=="string"?`'${n}'`:n.toString()}},Dc=class{constructor(n){this.name=n}eval(n,a){if(this.name==="$this")return a;let o=this.getVariable(n);if(o)return[o];if(this.name.startsWith("%"))throw new Error(`Undefined variable ${this.name}`);return a.flatMap(c=>this.evalValue(c)).filter(c=>c?.value!==void 0)}getVariable(n){let a=n.variables[this.name];if(a!==void 0)return a;if(n.parent)return this.getVariable(n.parent)}evalValue(n){let a=n.value;if(!(!a||typeof a!="object"))return Na(a,this.name)?n:xi(n,this.name)}toString(){return this.name}},eC=class{eval(){return[]}toString(){return"{}"}},tC=class extends kA{constructor(e,n,a){super(e,n),this.impl=a}eval(e,n){return this.impl(this.child.eval(e,n))}toString(){return this.operator+this.child.toString()}},rC=class extends Lo{constructor(e,n){super("as",e,n)}eval(e,n){return ir.ofType(e,this.left.eval(e,n),this.right)}},Lr=class extends Lo{},Gr=class extends Lr{constructor(e,n,a,o){super(e,n,a),this.impl=o}eval(e,n){let a=this.left.eval(e,n);if(a.length!==1)return[];let o=this.right.eval(e,n);if(o.length!==1)return[];let c=a[0].value,d=o[0].value,m=Or(c)?c.value:c,f=Or(d)?d.value:d,p=this.impl(m,f);return typeof p=="boolean"?ke(p):Or(c)?[{type:he.Quantity,value:{...c,value:p}}]:[Is(p)]}},nC=class extends Lo{constructor(e,n){super("&",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n),c=[...a,...o];return c.length>0&&c.every(d=>typeof d.value=="string")?[{type:he.string,value:c.map(d=>d.value).join("")}]:c}},sC=class extends Lr{constructor(e,n){super("contains",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n);return ke(a.some(c=>c.value===o[0].value))}},aC=class extends Lr{constructor(e,n){super("in",e,n)}eval(e,n){let a=Fn(this.left.eval(e,n)),o=this.right.eval(e,n);return a?ke(o.some(c=>Jc(a,c)[0].value)):[]}},Gv=class extends Lo{constructor(e,n){super(".",e,n)}eval(e,n){return this.right.eval(e,this.left.eval(e,n))}toString(){return`${this.left.toString()}.${this.right.toString()}`}},iC=class extends Lo{constructor(e,n){super("|",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n);return Uv([...a,...o])}},oC=class extends Lr{constructor(e,n){super("=",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n);return a4(a,o)}},lC=class extends Lr{constructor(e,n){super("!=",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n);return i4(a,o)}},cC=class extends Lr{constructor(e,n){super("~",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n);return Iv(a,o)}},dC=class extends Lr{constructor(e,n){super("!~",e,n)}eval(e,n){let a=this.left.eval(e,n),o=this.right.eval(e,n);return s4(Iv(a,o))}},uC=class extends Lr{constructor(e,n){super("is",e,n)}eval(e,n){let a=this.left.eval(e,n);if(a.length!==1)return[];let o=this.right.name;return ke(Mv(a[0],o))}},hC=class extends Lr{constructor(e,n){super("and",e,n)}eval(e,n){let a=Fn(this.left.eval(e,n),"boolean"),o=Fn(this.right.eval(e,n),"boolean");return a?.value===!0&&o?.value===!0?ke(!0):a?.value===!1||o?.value===!1?ke(!1):[]}},mC=class extends Lr{constructor(e,n){super("or",e,n)}eval(e,n){let a=Fn(this.left.eval(e,n),"boolean"),o=Fn(this.right.eval(e,n),"boolean");return a?.value===!1&&o?.value===!1?ke(!1):a?.value||o?.value?ke(!0):[]}},fC=class extends Lr{constructor(e,n){super("xor",e,n)}eval(e,n){let a=Fn(this.left.eval(e,n),"boolean"),o=Fn(this.right.eval(e,n),"boolean");return!a||!o?[]:ke(a.value!==o.value)}},pC=class extends Lr{constructor(e,n){super("implies",e,n)}eval(e,n){let a=Fn(this.left.eval(e,n),"boolean"),o=Fn(this.right.eval(e,n),"boolean");return o?.value===!0||a?.value===!1?ke(!0):!a||!o?[]:ke(!1)}},xC=class{constructor(e,n){this.name=e,this.args=n}eval(e,n){let a=ir[this.name];if(!a)throw new Error("Unrecognized function: "+this.name);return a(e,n,...this.args)}toString(){return`${this.name}(${this.args.map(e=>e.toString()).join(", ")})`}},gC=class{constructor(e,n){this.left=e,this.expr=n}eval(e,n){let a=this.expr.eval(e,n);if(a.length!==1)return[];let o=a[0].value;if(typeof o!="number")throw new Error("Invalid indexer expression: should return integer}");let c=this.left.eval(e,n);return o in c?[c[o]]:[]}toString(){return`${this.left.toString()}[${this.expr.toString()}]`}},vC=["year","years","month","months","week","weeks","day","days","hour","hours","minute","minutes","second","seconds","millisecond","milliseconds"],yC=class{constructor(e,n,a,o){this.result=[],this.pos={index:0,line:1,column:0},this.markStack=[],this.str=e,this.keywords=n,this.operators=a,this.dateTimeLiterals=!!o?.dateTimeLiterals,this.symbolRegex=o?.symbolRegex??/[$\w%]/}tokenize(){for(;this.pos.index<this.str.length;){let e=this.consumeToken();e&&this.result.push(e)}return this.result}prevToken(){return this.result.slice(-1)[0]}peekToken(){this.mark();let e=this.consumeToken();return this.reset(),e}consumeToken(){this.consumeWhitespace();let e=this.curr();if(!e)return;this.mark();let n=this.peek();return e==="/"&&n==="*"?this.consumeMultiLineComment():e==="/"&&n==="/"?this.consumeSingleLineComment():e==="'"||e==='"'||e==="`"?this.consumeString(e):e==="@"?this.consumeDateTime():/\d/.exec(e)?this.consumeNumber():/\w/.exec(e)?this.consumeSymbol():(e==="$"||e==="%")&&/\w/.exec(n)?this.consumeSymbol():(e==="$"||e==="%")&&(n==="'"||n==='"'||n==="`")?this.consumeQuotedSymbol(n):this.consumeOperator()}consumeWhitespace(){this.consumeWhile(()=>/\s/.exec(this.curr()))}consumeMultiLineComment(){let e=this.pos.index;return this.consumeWhile(()=>this.curr()!=="*"||this.peek()!=="/"),this.advance(),this.advance(),this.buildToken("Comment",this.str.substring(e,this.pos.index))}consumeSingleLineComment(){return this.buildToken("Comment",this.consumeWhile(()=>this.curr()!==`
`))}consumeString(e){this.advance();let n=this.consumeWhile(()=>this.prev()==="\\"||this.curr()!==e).replace(/\\u([0-9a-fA-F]{4})/g,(o,c)=>String.fromCodePoint(parseInt(c,16))),a=this.buildToken(e==="`"?"Symbol":"String",n);return this.advance(),a}consumeQuotedSymbol(e){this.mark();let n=this.pos.index;this.advance(),this.consumeString(e);let a=this.str.substring(n,this.pos.index);return this.buildToken("Symbol",a)}consumeDateTime(){this.advance();let e=this.pos.index;this.consumeWhile(()=>/[\d-]/.exec(this.curr()));let n=!1,a=!1;if(this.curr()==="T"&&(n=!0,this.advance(),this.consumeWhile(()=>/[\d:]/.exec(this.curr())),this.curr()==="."&&/\d/.exec(this.peek())&&(this.advance(),this.consumeWhile(()=>/\d/.exec(this.curr()))),this.curr()==="Z"?(a=!0,this.advance()):(this.curr()==="+"||this.curr()==="-")&&(a=!0,this.advance(),this.consumeWhile(()=>/[\d:]/.exec(this.curr())))),this.pos.index===e)throw new Error("Invalid DateTime literal");let o=this.str.substring(e,this.pos.index);return o.endsWith("T")?o=o.substring(0,o.length-1):!o.startsWith("T")&&n&&!a&&(o+="Z"),this.buildToken("DateTime",o)}consumeNumber(){let e=this.pos.index,n="Number";return this.consumeWhile(()=>/\d/.exec(this.curr())),this.curr()==="."&&/\d/.exec(this.peek())&&(this.advance(),this.consumeWhile(()=>/\d/.exec(this.curr()))),this.curr()==="-"&&this.dateTimeLiterals?(this.pos.index=e-1,this.consumeDateTime()):(this.curr()===" "&&bC(this.peekToken())&&(n="Quantity",this.consumeToken()),this.buildToken(n,this.str.substring(e,this.pos.index)))}consumeSymbol(){let e=this.consumeWhile(()=>this.symbolRegex.exec(this.curr()));return this.prevToken()?.value!=="."&&this.keywords.includes(e)?this.buildToken(e,e):this.buildToken("Symbol",e)}consumeOperator(){let e=this.curr(),n=this.peek(),a=e+n;return this.operators.includes(a)?(this.advance(),this.advance(),this.buildToken(a,a)):(this.advance(),this.buildToken(e,e))}consumeWhile(e){let n=this.pos.index;for(;this.pos.index<this.str.length&&e();)this.advance();return this.str.substring(n,this.pos.index)}curr(){return this.str[this.pos.index]}prev(){return this.str[this.pos.index-1]??""}peek(){return this.str[this.pos.index+1]??""}mark(){this.markStack.push({...this.pos})}reset(){let e=this.markStack.pop();if(!e)throw new Error("No mark to reset to");this.pos.index=e.index,this.pos.line=e.line,this.pos.column=e.column}advance(){this.pos.index++,this.curr()===`
`?(this.pos.line++,this.pos.column=0):this.pos.column++}buildToken(e,n){let a=this.markStack.pop();if(!a)throw new Error("No mark for token");return{id:e,value:n,...a}}};function bC(e){return!!(e&&(e.id==="String"||e.id==="Symbol"&&vC.includes(e.value)))}var wC=["true","false"],lm=["!=","!~","<=",">=","{}","->"];function NC(e){return new yC(e,wC,lm).tokenize()}var Ze={FunctionCall:0,Dot:1,Indexer:2,UnaryAdd:3,UnarySubtract:3,Multiply:4,Divide:4,Modulo:4,Add:5,Subtract:5,Ampersand:5,Is:6,As:6,Union:7,GreaterThan:8,GreaterThanOrEquals:8,LessThan:8,LessThanOrEquals:8,Equals:9,Equivalent:9,NotEquals:9,NotEquivalent:9,In:10,Contains:10,And:11,Xor:12,Or:12,Implies:13,Arrow:100,Semicolon:200},jC={parse(e){let n=e.consumeAndParse();if(!e.match(")"))throw new Error("Parse error: expected `)` got `"+e.peek()?.value+"`");return n}},SC={parse(e,n){let a=e.consumeAndParse();if(!e.match("]"))throw new Error("Parse error: expected `]`");return new gC(n,a)},precedence:Ze.Indexer},kC={parse(e,n){if(!(n instanceof Dc))throw new Error("Unexpected parentheses");let a=[];for(;!e.match(")");)a.push(e.consumeAndParse()),e.match(",");return new xC(n.name,a)},precedence:Ze.FunctionCall};function AC(e){let n=e.split(" "),a=parseFloat(n[0]),o=n[1];return o?.startsWith("'")&&o.endsWith("'")?o=o.substring(1,o.length-1):o="{"+o+"}",{value:a,unit:o}}function cm(){return new AA().registerPrefix("String",{parse:(e,n)=>new ai({type:he.string,value:n.value})}).registerPrefix("DateTime",{parse:(e,n)=>new ai({type:he.dateTime,value:wc(n.value)})}).registerPrefix("Quantity",{parse:(e,n)=>new ai({type:he.Quantity,value:AC(n.value)})}).registerPrefix("Number",{parse:(e,n)=>new ai({type:n.value.includes(".")?he.decimal:he.integer,value:parseFloat(n.value)})}).registerPrefix("true",{parse:()=>new ai({type:he.boolean,value:!0})}).registerPrefix("false",{parse:()=>new ai({type:he.boolean,value:!1})}).registerPrefix("Symbol",{parse:(e,n)=>new Dc(n.value)}).registerPrefix("{}",{parse:()=>new eC}).registerPrefix("(",jC).registerInfix("[",SC).registerInfix("(",kC).prefix("+",Ze.UnaryAdd,(e,n)=>new tC("+",n,a=>a)).prefix("-",Ze.UnarySubtract,(e,n)=>new Gr("-",n,n,(a,o)=>-o)).infixLeft(".",Ze.Dot,(e,n,a)=>new Gv(e,a)).infixLeft("/",Ze.Divide,(e,n,a)=>new Gr("/",e,a,(o,c)=>o/c)).infixLeft("*",Ze.Multiply,(e,n,a)=>new Gr("*",e,a,(o,c)=>o*c)).infixLeft("+",Ze.Add,(e,n,a)=>new Gr("+",e,a,(o,c)=>o+c)).infixLeft("-",Ze.Subtract,(e,n,a)=>new Gr("-",e,a,(o,c)=>o-c)).infixLeft("|",Ze.Union,(e,n,a)=>new iC(e,a)).infixLeft("=",Ze.Equals,(e,n,a)=>new oC(e,a)).infixLeft("!=",Ze.NotEquals,(e,n,a)=>new lC(e,a)).infixLeft("~",Ze.Equivalent,(e,n,a)=>new cC(e,a)).infixLeft("!~",Ze.NotEquivalent,(e,n,a)=>new dC(e,a)).infixLeft("<",Ze.LessThan,(e,n,a)=>new Gr("<",e,a,(o,c)=>o<c)).infixLeft("<=",Ze.LessThanOrEquals,(e,n,a)=>new Gr("<=",e,a,(o,c)=>o<=c)).infixLeft(">",Ze.GreaterThan,(e,n,a)=>new Gr(">",e,a,(o,c)=>o>c)).infixLeft(">=",Ze.GreaterThanOrEquals,(e,n,a)=>new Gr(">=",e,a,(o,c)=>o>=c)).infixLeft("&",Ze.Ampersand,(e,n,a)=>new nC(e,a)).infixLeft("and",Ze.And,(e,n,a)=>new hC(e,a)).infixLeft("as",Ze.As,(e,n,a)=>new rC(e,a)).infixLeft("contains",Ze.Contains,(e,n,a)=>new sC(e,a)).infixLeft("div",Ze.Divide,(e,n,a)=>new Gr("div",e,a,(o,c)=>o/c|0)).infixLeft("in",Ze.In,(e,n,a)=>new aC(e,a)).infixLeft("is",Ze.Is,(e,n,a)=>new uC(e,a)).infixLeft("mod",Ze.Modulo,(e,n,a)=>new Gr("mod",e,a,(o,c)=>o%c)).infixLeft("or",Ze.Or,(e,n,a)=>new mC(e,a)).infixLeft("xor",Ze.Xor,(e,n,a)=>new fC(e,a)).infixLeft("implies",Ze.Implies,(e,n,a)=>new pC(e,a))}var CC=cm();function RC(e){return new W4(e,CC.construct(NC(e)).consumeAndParse())}function TC(e,n){let a=Array.isArray(n)?n:[n];for(let o=0;o<a.length;o++){let c=a[o];typeof c=="object"&&"type"in c&&"value"in c||(a[o]=Is(a[o]))}return EC(e,a).map(o=>o.value)}function EC(e,n,a={},o=void 0){let c;if(typeof e=="string"){let d=o?.get(e);c=d??RC(e),o&&!d&&o.set(e,c)}else c=e;return c.eval({variables:a},n).map(d=>({type:d.type,value:d.value?.valueOf()}))}function UC(e){if(typeof window<"u"){let n=window.atob(e),a=Uint8Array.from(n,o=>o.charCodeAt(0));return new window.TextDecoder().decode(a)}if(typeof Buffer<"u")return Buffer.from(e,"base64").toString("utf-8");throw new Error("Unable to decode base64")}function Dg(e){if(typeof window<"u"){let n=new window.TextEncoder().encode(e),a=String.fromCharCode.apply(null,n);return window.btoa(a)}if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64");throw new Error("Unable to encode base64")}function IC(e){e=e.padEnd(e.length+(4-e.length%4)%4,"=");let n=e.replace(/-/g,"+").replace(/_/g,"/");return UC(n)}function Og(){let e=new Uint32Array(28);return crypto.getRandomValues(e),A4(e.buffer)}async function MC(e){return crypto.subtle.digest("SHA-256",new TextEncoder().encode(e))}function _C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}var $t={FHIR_JSON:"application/fhir+json",FORM_URL_ENCODED:"application/x-www-form-urlencoded",JSON:"application/json",JSON_PATCH:"application/json-patch+json",TEXT:"text/plain",XML:"text/xml",CDA_XML:"application/cda+xml"},DC=class{constructor(){this.listeners={}}addEventListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n)}removeEventListener(e,n){let a=this.listeners[e];if(a){for(let o=0;o<a.length;o++)if(a[o]===n){a.splice(o,1);return}}}dispatchEvent(e){let n=this.listeners[e.type];if(n)for(let a of n)a.call(this,e);return!e.defaultPrevented}removeAllListeners(){this.listeners={}}},Xc=class{constructor(){this.emitter=new DC}dispatchEvent(e){this.emitter.dispatchEvent(e)}addEventListener(e,n){this.emitter.addEventListener(e,n)}removeEventListener(e,n){this.emitter.removeEventListener(e,n)}removeAllListeners(){this.emitter.removeAllListeners()}},Ih={"Patient-open":"Patient-open","Patient-close":"Patient-close","ImagingStudy-open":"ImagingStudy-open","ImagingStudy-close":"ImagingStudy-close","Encounter-open":"Encounter-open","Encounter-close":"Encounter-close","DiagnosticReport-open":"DiagnosticReport-open","DiagnosticReport-close":"DiagnosticReport-close","DiagnosticReport-select":"DiagnosticReport-select","DiagnosticReport-update":"DiagnosticReport-update",syncerror:"syncerror"},OC=["Patient","Encounter","ImagingStudy","DiagnosticReport","OperationOutcome","Bundle"],dm=["DiagnosticReport-update"];function PC(e){return dm.includes(e)}function LC(e){if(dm.includes(e))throw new He(ht(`'context.version' is required for '${e}'.`))}var BC={"Patient-open":{patient:{resourceType:"Patient"},encounter:{resourceType:"Encounter",optional:!0}},"Patient-close":{patient:{resourceType:"Patient"},encounter:{resourceType:"Encounter",optional:!0}},"ImagingStudy-open":{study:{resourceType:"ImagingStudy"},encounter:{resourceType:"Encounter",optional:!0},patient:{resourceType:"Patient",optional:!0}},"ImagingStudy-close":{study:{resourceType:"ImagingStudy"},encounter:{resourceType:"Encounter",optional:!0},patient:{resourceType:"Patient",optional:!0}},"Encounter-open":{encounter:{resourceType:"Encounter"},patient:{resourceType:"Patient"}},"Encounter-close":{encounter:{resourceType:"Encounter"},patient:{resourceType:"Patient"}},"DiagnosticReport-open":{report:{resourceType:"DiagnosticReport"},encounter:{resourceType:"Encounter",optional:!0},study:{resourceType:"ImagingStudy",optional:!0,manyAllowed:!0},patient:{resourceType:"Patient"}},"DiagnosticReport-close":{report:{resourceType:"DiagnosticReport"},encounter:{resourceType:"Encounter",optional:!0},study:{resourceType:"ImagingStudy",optional:!0,manyAllowed:!0},patient:{resourceType:"Patient"}},"DiagnosticReport-select":{report:{resourceType:"DiagnosticReport",reference:!0},patient:{resourceType:"Patient",optional:!0,reference:!0},select:{resourceType:"*",reference:!0,manyAllowed:!0}},"DiagnosticReport-update":{report:{resourceType:"DiagnosticReport",reference:!0},patient:{resourceType:"Patient",optional:!0,reference:!0},updates:{resourceType:"Bundle"}},syncerror:{operationoutcome:{resourceType:"OperationOutcome"}}};function zC(e){return OC.includes(e)}function Qv(e){return!!e.endpoint}function Pg(e){if(!um(e))throw new He(ht("subscriptionRequest must be an object conforming to SubscriptionRequest type."));let{channelType:n,mode:a,topic:o,events:c}=e,d={"hub.channel.type":n,"hub.mode":a,"hub.topic":o,"hub.events":c.join(",")};return Qv(e)&&(d.endpoint=e.endpoint),new URLSearchParams(d).toString()}function um(e){if(typeof e!="object")return!1;let{channelType:n,mode:a,topic:o,events:c}=e;if(!(n&&a&&o&&c)||typeof o!="string"||typeof c!="object"||!Array.isArray(c)||c.length<1||n!=="websocket"||a!=="subscribe"&&a!=="unsubscribe")return!1;for(let d of c)if(!Ih[d])return!1;return!(Qv(e)&&!(typeof e.endpoint=="string"&&e.endpoint.startsWith("ws")))}function qC(e,n,a,o){if(typeof n!="object")throw new He(ht(`context[${a}] is invalid. Context must contain a single valid FHIR resource! Resource is not an object.`));if(!(n.id&&typeof n.id=="string"))throw new He(ht(`context[${a}] is invalid. Resource must contain a valid string ID.`));if(!n.resourceType)throw new He(ht(`context[${a}] is invalid. Resource must contain a resource type. No resource type found.`));let c=o.resourceType;if(c!=="*"){if(!zC(n.resourceType))throw new He(ht(`context[${a}] is invalid. Resource must contain a valid FHIRcast resource type. Resource type is not a known resource type.`));if(c&&n.resourceType!==c)throw new He(ht(`context[${a}] is invalid. context[${a}] for the '${e}' event should contain resource of type ${c}.`))}}function HC(e,n,a,o,c){if(c.set(n.key,(c.get(n.key)??0)+1),o.reference){if(!wi(n.reference))throw new He(ht(`context[${a}] is invalid. Expected key '${n.key}' to be a reference.`))}else qC(e,n.resource,a,o)}function FC(e,n){let a=new Map,o=BC[e];for(let c=0;c<n.length;c++){let d=n[c].key;if(!o[d])throw new He(ht(`Key '${d}' not found for event '${e}'. Make sure to add only valid keys.`));HC(e,n[c],c,o[d],a)}for(let[c,d]of Object.entries(o)){if(!(d.optional||a.has(c)))throw new He(ht(`Missing required key '${c}' on context for '${e}' event.`));if(!d.manyAllowed&&(a.get(c)??0)>1)throw new He(ht(`${a.get(c)} context entries with key '${c}' found for the '${e}' event when schema only allows for 1.`))}}function Lg(e,n,a,o){if(!(e&&typeof e=="string"))throw new He(ht("Must provide a topic."));if(!Ih[n])throw new He(ht(`Must provide a valid FHIRcast event name. Supported events: ${Object.keys(Ih).join(", ")}`));if(typeof a!="object")throw new He(ht("context must be a context object or array of context objects."));if(dm.includes(n)&&!o)throw new He(ht(`The '${n}' event must contain a 'context.versionId'.`));let c=Array.isArray(a)?a:[a];return FC(n,c),{timestamp:new Date().toISOString(),id:_C(),event:{"hub.topic":e,"hub.event":n,context:c,...o?{"context.versionId":o}:{}}}}var $C=class extends Xc{constructor(e){if(super(),this.subRequest=e,!e.endpoint)throw new He(ht("Subscription request should contain an endpoint."));if(!um(e))throw new He(ht("Subscription request failed validation."));let n=new WebSocket(e.endpoint);n.addEventListener("open",()=>{this.dispatchEvent({type:"connect"}),n.addEventListener("message",a=>{let o=JSON.parse(a.data);if(o["hub.topic"])return;let c=o;c.event["hub.event"]!=="heartbeat"&&(this.dispatchEvent({type:"message",payload:c}),n.send(JSON.stringify({id:o?.id,timestamp:new Date().toISOString()})))}),n.addEventListener("close",()=>{this.dispatchEvent({type:"disconnect"})})}),this.websocket=n}disconnect(){this.websocket.close()}};function VC(e){return JSON.parse(IC(e))}function GC(e){return e.split(".").length===3}function hm(e){let[n,a,o]=e.split(".");return VC(a)}function QC(e){try{return typeof hm(e).login_id=="string"}catch{return!1}}function JC(e){try{let n=hm(e).exp;return typeof n=="number"?n*1e3:void 0}catch{return}}var YC=class{constructor(e){this.medplum=e}async get(e){return this.medplum.get(`keyvalue/v1/${e}`)}async set(e,n){await this.medplum.put(`keyvalue/v1/${e}`,n,$t.TEXT)}async delete(e){await this.medplum.delete(`keyvalue/v1/${e}`)}},Jv;Jv=Symbol.toStringTag;var nn=class{constructor(e){this[Jv]="ReadablePromise",this.status="pending",this.suspender=e.then(n=>(this.status="success",this.response=n,n),n=>{throw this.status="error",this.error=n,n})}isPending(){return this.status==="pending"}isOk(){return this.status==="success"}read(){switch(this.status){case"pending":throw this.suspender;case"error":throw this.error;default:return this.response}}then(e,n){return this.suspender.then(e,n)}catch(e){return this.suspender.catch(e)}finally(e){return this.suspender.finally(e)}},KC=class{constructor(e){this.storage=e??(typeof localStorage<"u"?localStorage:new XC)}clear(){this.storage.clear()}getString(e){return this.storage.getItem(e)??void 0}setString(e,n){n?this.storage.setItem(e,n):this.storage.removeItem(e)}getObject(e){let n=this.getString(e);return n?JSON.parse(n):void 0}setObject(e,n){this.setString(e,n?Ov(n):void 0)}},XC=class{constructor(){this.data=new Map}get length(){return this.data.size}clear(){this.data.clear()}getItem(e){return this.data.get(e)??null}setItem(e,n){n?this.data.set(e,n):this.data.delete(e)}removeItem(e){this.data.delete(e)}key(e){return Array.from(this.data.keys())[e]}},ui={Event:typeof globalThis.Event<"u"?globalThis.Event:void 0,ErrorEvent:void 0,CloseEvent:void 0},Bg=!1;function ZC(){if(typeof globalThis.Event>"u")throw new Error("Unable to lazy init events for ReconnectingWebSocket. globalThis.Event is not defined yet");ui.Event=globalThis.Event,ui.ErrorEvent=class extends Event{constructor(e,n){super("error",n),this.message=e.message,this.error=e}},ui.CloseEvent=class extends Event{constructor(e=1e3,n="",a){super("close",a),this.wasClean=!0,this.code=e,this.reason=n}}}function WC(e,n){if(!e)throw new Error(n)}function fc(e){return new e.constructor(e.type,e)}var ca={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},zg=!1,e3=class ua extends Xc{constructor(n,a,o={}){Bg||(ZC(),Bg=!0),super(),this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._closeCalled=!1,this._messageQueue=[],this._debugLogger=console.log.bind(console),this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=c=>{this._debug("open event");let{minUptime:d=ca.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout(()=>this._acceptOpen(),d),WC(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach(m=>this._ws?.send(m)),this._messageQueue=[],this.onopen&&this.onopen(c),this.dispatchEvent(fc(c))},this._handleMessage=c=>{this._debug("message event"),this.onmessage&&this.onmessage(c),this.dispatchEvent(fc(c))},this._handleError=c=>{this._debug("error event",c.message),this._disconnect(void 0,c.message==="TIMEOUT"?"timeout":void 0),this.onerror&&this.onerror(c),this._debug("exec error listeners"),this.dispatchEvent(fc(c)),this._connect()},this._handleClose=c=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(c),this.dispatchEvent(fc(c))},this._url=n,this._protocols=a,this._options=o,this._options.startClosed&&(this._shouldReconnect=!1),this._options.binaryType?this._binaryType=this._options.binaryType:this._binaryType="blob",this._options.debugLogger&&(this._debugLogger=this._options.debugLogger),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return ua.CONNECTING}get OPEN(){return ua.OPEN}get CLOSING(){return ua.CLOSING}get CLOSED(){return ua.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(n){this._binaryType=n,this._ws&&(this._ws.binaryType=n)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce((n,a)=>(typeof a=="string"?n+=a.length:a instanceof Blob?n+=a.size:n+=a.byteLength,n),0)+(this._ws?.bufferedAmount??0)}get extensions(){return this._ws?.extensions??""}get protocol(){return this._ws?.protocol??""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?ua.CLOSED:ua.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}close(n=1e3,a){if(this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(n,a)}reconnect(n,a){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(n,a),this._connect())}send(n){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",n),this._ws.send(n);else{let{maxEnqueuedMessages:a=ca.maxEnqueuedMessages}=this._options;this._messageQueue.length<a&&(this._debug("enqueue",n),this._messageQueue.push(n))}}_debug(...n){this._options.debug&&this._debugLogger("RWS>",...n)}_getNextDelay(){let{reconnectionDelayGrowFactor:n=ca.reconnectionDelayGrowFactor,minReconnectionDelay:a=ca.minReconnectionDelay,maxReconnectionDelay:o=ca.maxReconnectionDelay}=this._options,c=0;return this._retryCount>0&&(c=a*Math.pow(n,this._retryCount-1),c>o&&(c=o)),this._debug("next delay",c),c}_wait(){return new Promise(n=>{setTimeout(n,this._getNextDelay())})}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;let{maxRetries:n=ca.maxRetries,connectionTimeout:a=ca.connectionTimeout}=this._options;if(this._retryCount>=n){this._debug("max retries reached",this._retryCount,">=",n);return}this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then(()=>{if(this._closeCalled){this._connectLock=!1;return}!this._options.WebSocket&&typeof WebSocket>"u"&&!zg&&(console.error("‼️ No WebSocket implementation available. You should define options.WebSocket."),zg=!0);let o=this._options.WebSocket||WebSocket;this._debug("connect",{url:this._url,protocols:this._protocols}),this._ws=this._protocols?new o(this._url,this._protocols):new o(this._url),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout(()=>this._handleTimeout(),a)}).catch(o=>{this._connectLock=!1,this._handleError(new ui.ErrorEvent(Error(o.message),this))})}_handleTimeout(){this._debug("timeout event"),this._handleError(new ui.ErrorEvent(Error("TIMEOUT"),this))}_disconnect(n=1e3,a){if(this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(n,a),this._handleClose(new ui.CloseEvent(n,a,this))}catch{}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}},t3=5e3,Mh=class extends Xc{constructor(...e){super(),this.criteria=new Set(e)}getCriteria(){return this.criteria}_addCriteria(e){this.criteria.add(e)}_removeCriteria(e){this.criteria.delete(e)}},r3=class{constructor(e,n){this.connecting=!1,this.criteria=e,this.emitter=new Mh(e),this.refCount=1,this.subscriptionProps=n?{...n}:void 0}clearAttachedSubscription(){this.subscriptionId=void 0,this.token=void 0}},n3=class{constructor(e,n,a){if(this.pingTimer=void 0,this.waitingForPong=!1,!(e instanceof Yv))throw new He(ht("First arg of constructor should be a `MedplumClient`"));let o;try{o=new URL(n).toString()}catch{throw new He(ht("Not a valid URL"))}let c=a?.ReconnectingWebSocket?new a.ReconnectingWebSocket(o,void 0,{debug:a?.debug,debugLogger:a?.debugLogger}):new e3(o,void 0,{debug:a?.debug,debugLogger:a?.debugLogger});this.medplum=e,this.ws=c,this.masterSubEmitter=new Mh,this.criteriaEntries=new Map,this.criteriaEntriesBySubscriptionId=new Map,this.wsClosed=!1,this.pingIntervalMs=a?.pingIntervalMs??t3,this.currentProfile=e.getProfile(),this.setupListeners()}setupListeners(){let e=this.ws;e.addEventListener("message",n=>{try{let a=JSON.parse(n.data);if(a.type==="pong"){this.waitingForPong=!1;return}let o=a,c=o?.entry?.[0]?.resource;if(c.type==="heartbeat"){this.masterSubEmitter?.dispatchEvent({type:"heartbeat",payload:o});return}if(c.type==="handshake"){let m=Uc(c.subscription),f={type:"connect",payload:{subscriptionId:m}};this.masterSubEmitter?.dispatchEvent(f);let p=this.criteriaEntriesBySubscriptionId.get(m);if(!p){console.warn("Received handshake for criteria the SubscriptionManager is not listening for yet");return}p.connecting=!1,p.emitter.dispatchEvent({...f});return}this.masterSubEmitter?.dispatchEvent({type:"message",payload:o});let d=this.criteriaEntriesBySubscriptionId.get(Uc(c.subscription));if(!d){console.warn("Received notification for criteria the SubscriptionManager is not listening for");return}d.emitter.dispatchEvent({type:"message",payload:o})}catch(a){console.error(a);let o={type:"error",payload:a};this.masterSubEmitter?.dispatchEvent(o);for(let c of this.getAllCriteriaEmitters())c.dispatchEvent({...o})}}),e.addEventListener("error",()=>{let n={type:"error",payload:new He(PA(new Error("WebSocket error")))};this.masterSubEmitter?.dispatchEvent(n);for(let a of this.getAllCriteriaEmitters())a.dispatchEvent({...n})}),e.addEventListener("close",()=>{let n={type:"close"};this.masterSubEmitter?.dispatchEvent(n);for(let a of this.getAllCriteriaEmitters())a.dispatchEvent({...n});this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=void 0,this.waitingForPong=!1),this.wsClosed&&(this.criteriaEntries.clear(),this.criteriaEntriesBySubscriptionId.clear(),this.masterSubEmitter?.removeAllListeners())}),e.addEventListener("open",()=>{let n={type:"open"};this.masterSubEmitter?.dispatchEvent(n);for(let a of this.getAllCriteriaEmitters())a.dispatchEvent({...n});this.refreshAllSubscriptions().catch(console.error),this.pingTimer||(this.pingTimer=setInterval(()=>{if(this.waitingForPong){this.waitingForPong=!1,e.reconnect();return}e.send(JSON.stringify({type:"ping"})),this.waitingForPong=!0},this.pingIntervalMs))}),this.medplum.addEventListener("change",()=>{let n=this.medplum.getProfile();this.currentProfile&&n===void 0?this.ws.close():n&&this.currentProfile?.id!==n.id&&this.ws.reconnect(),this.currentProfile=n})}emitError(e,n){let a={type:"error",payload:n};this.masterSubEmitter?.dispatchEvent(a),e.emitter.dispatchEvent({...a})}maybeEmitDisconnect(e){let{subscriptionId:n}=e;if(n){let a={type:"disconnect",payload:{subscriptionId:n}};this.masterSubEmitter?.dispatchEvent(a),e.emitter.dispatchEvent({...a})}else console.warn("Called disconnect for `CriteriaEntry` before `subscriptionId` was present.")}async getTokenForCriteria(e){let n=e?.subscriptionId;n||(n=(await this.medplum.createResource({...e.subscriptionProps,resourceType:"Subscription",status:"active",reason:`WebSocket subscription for ${Ms(this.medplum.getProfile())}`,channel:{type:"websocket"},criteria:e.criteria})).id);let{parameter:a}=await this.medplum.get(`fhir/R4/Subscription/${n}/$get-ws-binding-token`),o=a?.find(d=>d.name==="token")?.valueString,c=a?.find(d=>d.name==="websocket-url")?.valueUrl;if(!o)throw new He(ht("Failed to get token"));if(!c)throw new He(ht("Failed to get URL from $get-ws-binding-token"));return[n,o]}maybeGetCriteriaEntry(e,n){let a=this.criteriaEntries.get(e);if(a){if(!n)return a.bareCriteria;for(let o of a.criteriaWithProps)if(gi(n,o.subscriptionProps))return o}}getAllCriteriaEmitters(){let e=[];for(let n of this.criteriaEntries.values()){n.bareCriteria&&e.push(n.bareCriteria.emitter);for(let a of n.criteriaWithProps)e.push(a.emitter)}return e}addCriteriaEntry(e){let{criteria:n,subscriptionProps:a}=e,o;this.criteriaEntries.has(n)?o=this.criteriaEntries.get(n):(o={criteriaWithProps:[]},this.criteriaEntries.set(n,o)),a?o.criteriaWithProps.push(e):o.bareCriteria=e}removeCriteriaEntry(e){let{criteria:n,subscriptionProps:a,subscriptionId:o,token:c}=e;if(!this.criteriaEntries.has(n))return;let d=this.criteriaEntries.get(n);a?d.criteriaWithProps=d.criteriaWithProps.filter(m=>{let f=m.subscriptionProps;return!gi(a,f)}):d.bareCriteria=void 0,!d.bareCriteria&&d.criteriaWithProps.length===0&&(this.criteriaEntries.delete(n),this.masterSubEmitter?._removeCriteria(n)),o&&this.criteriaEntriesBySubscriptionId.delete(o),c&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"unbind-from-token",payload:{token:c}}))}async subscribeToCriteria(e){if(!(this.ws.readyState!==WebSocket.OPEN||e.connecting)){e.connecting=!0;try{let[n,a]=await this.getTokenForCriteria(e);e.subscriptionId=n,e.token=a,this.criteriaEntriesBySubscriptionId.set(n,e),this.ws.send(JSON.stringify({type:"bind-with-token",payload:{token:a}}))}catch(n){console.error(Bo(n)),this.emitError(e,n),this.removeCriteriaEntry(e)}}}async refreshAllSubscriptions(){this.criteriaEntriesBySubscriptionId.clear();for(let e of this.criteriaEntries.values())for(let n of[...e.bareCriteria?[e.bareCriteria]:[],...e.criteriaWithProps])n.clearAttachedSubscription(),await this.subscribeToCriteria(n)}addCriteria(e,n){this.masterSubEmitter&&this.masterSubEmitter._addCriteria(e);let a=this.maybeGetCriteriaEntry(e,n);if(a)return a.refCount+=1,a.emitter;let o=new r3(e,n);return this.addCriteriaEntry(o),this.subscribeToCriteria(o).catch(console.error),o.emitter}removeCriteria(e,n){let a=this.maybeGetCriteriaEntry(e,n);if(!a){console.warn("Criteria not known to `SubscriptionManager`. Possibly called remove too many times.");return}a.refCount-=1,!(a.refCount>0)&&(this.maybeEmitDisconnect(a),this.removeCriteriaEntry(a))}getWebSocket(){return this.ws}closeWebSocket(){this.wsClosed||(this.wsClosed=!0,this.ws.close())}reconnectWebSocket(){this.ws.reconnect(),this.wsClosed=!1}getCriteriaCount(){return this.getAllCriteriaEmitters().length}getMasterEmitter(){return this.masterSubEmitter||(this.masterSubEmitter=new Mh(...Array.from(this.criteriaEntries.keys()))),this.masterSubEmitter}},s3=$t.FHIR_JSON+", */*; q=0.1",a3="https://api.medplum.com/",i3=1e3,o3=6e4,l3=0,c3=3e5,d3="Binary/",qg={resourceType:"Device",id:"system",deviceName:[{type:"model-name",name:"System"}]},ii={ClientCredentials:"client_credentials",AuthorizationCode:"authorization_code",RefreshToken:"refresh_token",JwtBearer:"urn:ietf:params:oauth:grant-type:jwt-bearer",TokenExchange:"urn:ietf:params:oauth:grant-type:token-exchange"},u3={AccessToken:"urn:ietf:params:oauth:token-type:access_token"},h3={JwtBearer:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"},Yv=class extends Xc{constructor(e){if(super(),this.initComplete=!0,e?.baseUrl&&!e.baseUrl.startsWith("http"))throw new Error("Base URL must start with http or https");this.options=e??{},this.fetch=e?.fetch??m3(),this.storage=e?.storage??new KC,this.createPdfImpl=e?.createPdf,this.baseUrl=qv(e?.baseUrl??a3),this.fhirBaseUrl=sn(this.baseUrl,e?.fhirUrlPath??"fhir/R4"),this.authorizeUrl=sn(this.baseUrl,e?.authorizeUrl??"oauth2/authorize"),this.tokenUrl=sn(this.baseUrl,e?.tokenUrl??"oauth2/token"),this.logoutUrl=sn(this.baseUrl,e?.logoutUrl??"oauth2/logout"),this.fhircastHubUrl=sn(this.baseUrl,e?.fhircastHubUrl??"fhircast/STU3"),this.clientId=e?.clientId??"",this.clientSecret=e?.clientSecret??"",this.credentialsInHeader=e?.authCredentialsMethod==="header",this.defaultHeaders=e?.defaultHeaders??{},this.onUnauthenticated=e?.onUnauthenticated,this.refreshGracePeriod=e?.refreshGracePeriod??c3,this.cacheTime=e?.cacheTime??(typeof window>"u"?l3:o3),this.cacheTime>0?this.requestCache=new RA(e?.resourceCacheSize??i3):this.requestCache=void 0,e?.autoBatchTime?(this.autoBatchTime=e.autoBatchTime,this.autoBatchQueue=[]):(this.autoBatchTime=0,this.autoBatchQueue=void 0),e?.accessToken&&this.setAccessToken(e.accessToken),this.storage.getInitPromise===void 0?(e?.accessToken||this.attemptResumeActiveLogin().catch(console.error),this.initPromise=Promise.resolve(),this.dispatchEvent({type:"storageInitialized"})):(this.initComplete=!1,this.initPromise=this.storage.getInitPromise(),this.initPromise.then(()=>{e?.accessToken||this.attemptResumeActiveLogin().catch(console.error),this.initComplete=!0,this.dispatchEvent({type:"storageInitialized"})}).catch(n=>{console.error(n),this.initComplete=!0,this.dispatchEvent({type:"storageInitFailed",payload:{error:n}})})),this.setupStorageListener()}get isInitialized(){return this.initComplete}getInitPromise(){return this.initPromise}async attemptResumeActiveLogin(){let e=this.getActiveLogin();e&&(this.setAccessToken(e.accessToken,e.refreshToken),await this.refreshProfile())}getBaseUrl(){return this.baseUrl}getAuthorizeUrl(){return this.authorizeUrl}getTokenUrl(){return this.tokenUrl}getLogoutUrl(){return this.logoutUrl}getFhircastHubUrl(){return this.fhircastHubUrl}getDefaultHeaders(){return this.defaultHeaders}clear(){this.storage.clear(),typeof window<"u"&&sessionStorage.clear(),this.clearActiveLogin()}clearActiveLogin(){this.storage.setString("activeLogin",void 0),this.requestCache?.clear(),this.accessToken=void 0,this.refreshToken=void 0,this.refreshPromise=void 0,this.accessTokenExpires=void 0,this.sessionDetails=void 0,this.medplumServer=void 0,this.dispatchEvent({type:"change"})}invalidateUrl(e){e=e.toString(),this.requestCache?.delete(e)}invalidateAll(){this.requestCache?.clear()}invalidateSearches(e){let n=sn(this.fhirBaseUrl,e);if(this.requestCache)for(let a of this.requestCache.keys())(a.endsWith(n)||a.includes(n+"?"))&&this.requestCache.delete(a)}get(e,n={}){e=e.toString();let a=this.getCacheEntry(e,n);if(a)return a.value;let o;e.startsWith(this.fhirBaseUrl)&&this.autoBatchQueue&&!n.disableAutoBatch?o=new Promise((d,m)=>{this.autoBatchQueue.push({method:"GET",url:e.replace(this.fhirBaseUrl,""),options:n,resolve:d,reject:m}),this.autoBatchTimerId||(this.autoBatchTimerId=setTimeout(()=>this.executeAutoBatch(),this.autoBatchTime))}):o=this.request("GET",e,n);let c=new nn(o);return this.setCacheEntry(e,c),c}post(e,n,a,o={}){return e=e.toString(),this.setRequestBody(o,n),a&&this.setRequestContentType(o,a),this.invalidateUrl(e),this.request("POST",e,o)}put(e,n,a,o={}){return e=e.toString(),this.setRequestBody(o,n),a&&this.setRequestContentType(o,a),this.invalidateUrl(e),this.request("PUT",e,o)}patch(e,n,a={}){return e=e.toString(),this.setRequestBody(a,n),this.setRequestContentType(a,$t.JSON_PATCH),this.invalidateUrl(e),this.request("PATCH",e,a)}delete(e,n){return e=e.toString(),this.invalidateUrl(e),this.request("DELETE",e,n)}async startNewUser(e,n){let{codeChallengeMethod:a,codeChallenge:o}=await this.startPkce();return this.post("auth/newuser",{...e,clientId:e.clientId??this.clientId,codeChallengeMethod:a,codeChallenge:o},void 0,n)}async startNewProject(e,n){return this.post("auth/newproject",e,void 0,n)}async startNewPatient(e,n){return this.post("auth/newpatient",e,void 0,n)}async startLogin(e,n){return this.post("auth/login",{...await this.ensureCodeChallenge(e),clientId:e.clientId??this.clientId,scope:e.scope},void 0,n)}async startGoogleLogin(e,n){return this.post("auth/google",{...await this.ensureCodeChallenge(e),clientId:e.clientId??this.clientId,scope:e.scope},void 0,n)}async ensureCodeChallenge(e){return e.codeChallenge?e:{...e,...await this.startPkce()}}async signOut(){await this.post(this.logoutUrl,{}),this.clear()}async signInWithRedirect(e){let n=new URLSearchParams(window.location.search).get("code");if(!n){await this.requestAuthorization(e);return}return this.processCode(n)}signOutWithRedirect(){window.location.assign(this.logoutUrl)}async signInWithExternalAuth(e,n,a,o,c=!0){let d=o;c&&(d=await this.ensureCodeChallenge(o)),window.location.assign(this.getExternalAuthRedirectUri(e,n,a,d,c))}async exchangeExternalAccessToken(e,n){if(n=n??this.clientId,!n)throw new Error("MedplumClient is missing clientId");return this.fetchTokens({grant_type:ii.TokenExchange,subject_token_type:u3.AccessToken,client_id:n,subject_token:e})}getExternalAuthRedirectUri(e,n,a,o,c=!0){let d=new URL(e);if(d.searchParams.set("response_type","code"),d.searchParams.set("client_id",n),d.searchParams.set("redirect_uri",a),d.searchParams.set("scope",o.scope??"openid profile email"),d.searchParams.set("state",JSON.stringify(o)),c){let{codeChallenge:m,codeChallengeMethod:f}=o;if(!f)throw new Error("`LoginRequest` for external auth must include a `codeChallengeMethod`.");if(!m)throw new Error("`LoginRequest` for external auth must include a `codeChallenge`.");d.searchParams.set("code_challenge_method",f),d.searchParams.set("code_challenge",m)}return d.toString()}fhirUrl(...e){return new URL(sn(this.fhirBaseUrl,e.join("/")))}fhirSearchUrl(e,n){let a=this.fhirUrl(e);return n&&(a.search=I4(n)),a}search(e,n,a){let o=this.fhirSearchUrl(e,n),c="search-"+o.toString(),d=this.getCacheEntry(c,a);if(d)return d.value;let m=this.getBundle(o,a);return this.setCacheEntry(c,m),m}searchOne(e,n,a){let o=this.fhirSearchUrl(e,n);o.searchParams.set("_count","1"),o.searchParams.sort();let c="searchOne-"+o.toString(),d=this.getCacheEntry(c,a);if(d)return d.value;let m=new nn(this.search(e,o.searchParams,a).then(f=>f.entry?.[0]?.resource));return this.setCacheEntry(c,m),m}searchResources(e,n,a){let o="searchResources-"+this.fhirSearchUrl(e,n).toString(),c=this.getCacheEntry(o,a);if(c)return c.value;let d=new nn(this.search(e,n,a).then($g));return this.setCacheEntry(o,d),d}async*searchResourcePages(e,n,a){let o=this.fhirSearchUrl(e,n);for(;o;){let c=new URL(o).searchParams;c.has("_count")||c.set("_count","1000");let d=await this.search(e,c,a),m=d.link?.find(f=>f.relation==="next");if(!d.entry?.length&&!m)break;yield $g(d),o=m?.url?new URL(m.url):void 0}}valueSetExpand(e,n){let a=this.fhirUrl("ValueSet","$expand");return a.search=new URLSearchParams(e).toString(),this.get(a.toString(),n)}getCached(e,n){let a=this.requestCache?.get(this.fhirUrl(e,n).toString())?.value;return a?.isOk()?a.read():void 0}getCachedReference(e){let n=e.reference;if(!n)return;if(n==="system")return qg;let[a,o]=n.split("/");if(!(!a||!o))return this.getCached(a,o)}readResource(e,n,a){if(!n)throw new Error('The "id" parameter cannot be null, undefined, or an empty string.');return this.get(this.fhirUrl(e,n),a)}readReference(e,n){let a=e.reference;if(!a)return new nn(Promise.reject(new Error("Missing reference")));if(a==="system")return new nn(Promise.resolve(qg));let[o,c]=a.split("/");return!o||!c?new nn(Promise.reject(new Error("Invalid reference"))):this.readResource(o,c,n)}requestSchema(e){if(GA(e))return Promise.resolve();let n=e+"-requestSchema",a=this.getCacheEntry(n,void 0);if(a)return a.value;let o=new nn((async()=>{let c=`{
      StructureDefinitionList(_filter: "name eq ${e}") {
        resourceType,
        name,
        kind,
        description,
        type,
        url,
        snapshot {
          element {
            id,
            path,
            definition,
            min,
            max,
            base {
              path,
              min,
              max
            },
            contentReference,
            type {
              code,
              profile,
              targetProfile
            },
            binding {
              strength,
              valueSet
            }
          }
        }
      }
      SearchParameterList(base: "${e}", _count: 100) {
        base,
        code,
        type,
        expression,
        target
      }
    }`.replace(/\s+/g," "),d=await this.graphql(c);jg(d.data.StructureDefinitionList);for(let m of d.data.SearchParameterList)G4(m)})());return this.setCacheEntry(n,o),o}requestProfileSchema(e,n){if(!n?.expandProfile&&Rv(e))return Promise.resolve();let a=e+"-requestSchema"+(n?.expandProfile?"-nested":""),o=this.getCacheEntry(a,void 0);if(o)return o.value;let c=new nn((async()=>{if(n?.expandProfile){let d=this.fhirUrl("StructureDefinition","$expand-profile");d.search=new URLSearchParams({url:e}).toString();let m=await this.post(d.toString(),{});jg(m)}else{let d=await this.searchOne("StructureDefinition",{url:e,_sort:"-_lastUpdated"});if(!d){console.warn(`No StructureDefinition found for ${e}!`);return}Cv(d)}})());return this.setCacheEntry(a,c),c}readHistory(e,n,a){return this.get(this.fhirUrl(e,n,"_history"),a)}readVersion(e,n,a,o){return this.get(this.fhirUrl(e,n,"_history",a),o)}readPatientEverything(e,n){return this.getBundle(this.fhirUrl("Patient",e,"$everything"),n)}readPatientSummary(e,n){return this.getBundle(this.fhirUrl("Patient",e,"$summary"),n)}createResource(e,n){if(!e.resourceType)throw new Error("Missing resourceType");return this.invalidateSearches(e.resourceType),this.post(this.fhirUrl(e.resourceType),e,void 0,n)}async createResourceIfNoneExist(e,n,a){let o=this.fhirUrl(e.resourceType);a?a.headers?Array.isArray(a.headers)?a.headers.push(["If-None-Exist",n]):a.headers instanceof Headers?a.headers.set("If-None-Exist",n):a.headers["If-None-Exist"]=n:a.headers={"If-None-Exist":n}:a={headers:{"If-None-Exist":n}};let c=await this.post(o,e,void 0,a);return this.cacheResource(c),this.invalidateUrl(this.fhirUrl(e.resourceType,e.id,"_history")),this.invalidateSearches(e.resourceType),c}async upsertResource(e,n,a){let o=this.fhirSearchUrl(e.resourceType,n),c=await this.put(o,e,void 0,a);return c||(c=e),this.cacheResource(c),this.invalidateUrl(this.fhirUrl(e.resourceType,e.id,"_history")),this.invalidateSearches(e.resourceType),c}async createAttachment(e,n,a,o,c){let d=Vg(e,n,a,o);if(d.contentType===$t.XML){let p=d.data,x;p instanceof Blob?x=await new Promise((j,b)=>{let y=new FileReader;y.onload=()=>{if(!y.result){b(new Error("Failed to load file"));return}j(y.result)},y.readAsText(p,"utf-8")}):ArrayBuffer.isView(p)?x=new TextDecoder().decode(p):x=p,x.includes("<ClinicalDocument")&&x.includes("urn:hl7-org:v3")&&(d={...d,contentType:$t.CDA_XML})}let m=c??(typeof n=="object"?n:{}),f=await this.createBinary(d,m);return{contentType:d.contentType,url:f.url,title:d.filename}}createBinary(e,n,a,o,c){let d=Vg(e,n,a,o),m=c??(typeof n=="object"?n:{}),{data:f,contentType:p,filename:x,securityContext:j,onProgress:b}=d,y=this.fhirUrl("Binary");return x&&y.searchParams.set("_filename",x),j?.reference&&this.setRequestHeader(m,"X-Security-Context",j.reference),b?this.uploadwithProgress(y,f,p,b,m):this.post(y,f,p,m)}uploadwithProgress(e,n,a,o,c){return new Promise((d,m)=>{let f=new XMLHttpRequest,p=()=>f.abort();c?.signal?.addEventListener("abort",p);let x=j=>{c?.signal?.removeEventListener("abort",p),j instanceof Error?m(j):d(j)};if(f.responseType="json",f.onabort=()=>x(new DOMException("Request aborted","AbortError")),f.onerror=()=>x(new Error("Request error")),o&&(f.upload.onprogress=j=>o(j),f.upload.onload=j=>o(j)),f.onload=()=>{f.status>=200&&f.status<300?x(f.response):x(new He(bc(f.response||f.statusText)))},f.open("POST",e),f.withCredentials=!0,f.setRequestHeader("Authorization","Bearer "+this.accessToken),f.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),f.setRequestHeader("Content-Type",a),this.options.extendedMode!==!1&&f.setRequestHeader("X-Medplum","extended"),c?.headers){let j=c.headers;for(let[b,y]of Object.entries(j))f.setRequestHeader(b,y)}f.send(n)})}async createPdf(e,n,a,o){if(!this.createPdfImpl)throw new Error("PDF creation not enabled");let c=x3(e,n,a,o),d=typeof n=="object"?n:{},{docDefinition:m,tableLayouts:f,fonts:p,...x}=c,j=await this.createPdfImpl(m,f,p),b={...x,data:j,contentType:"application/pdf"};return this.createBinary(b,d)}createComment(e,n,a){let o=this.getProfile(),c,d;return e.resourceType==="Encounter"&&(c=si(e),d=e.subject),e.resourceType==="ServiceRequest"&&(c=e.encounter,d=e.subject),e.resourceType==="Patient"&&(d=si(e)),this.createResource({resourceType:"Communication",status:"completed",basedOn:[si(e)],encounter:c,subject:d,sender:o?si(o):void 0,sent:new Date().toISOString(),payload:[{contentString:n}]},a)}async updateResource(e,n){if(!e.resourceType)throw new Error("Missing resourceType");if(!e.id)throw new Error("Missing id");let a=await this.put(this.fhirUrl(e.resourceType,e.id),e,void 0,n);return a||(a=e),this.cacheResource(a),this.invalidateUrl(this.fhirUrl(e.resourceType,e.id,"_history")),this.invalidateSearches(e.resourceType),a}async patchResource(e,n,a,o){let c=await this.patch(this.fhirUrl(e,n),a,o);return this.cacheResource(c),this.invalidateUrl(this.fhirUrl(e,n,"_history")),this.invalidateSearches(e),c}deleteResource(e,n,a){return this.deleteCacheEntry(this.fhirUrl(e,n).toString()),this.invalidateSearches(e),this.delete(this.fhirUrl(e,n),a)}validateResource(e,n){return this.post(this.fhirUrl(e.resourceType,"$validate"),e,void 0,n)}executeBot(e,n,a,o){let c;if(typeof e=="string"){let d=e;c=this.fhirUrl("Bot",d,"$execute")}else{let d=e;c=this.fhirUrl("Bot","$execute"),c.searchParams.set("identifier",d.system+"|"+d.value)}return this.post(c,n,a,o)}executeBatch(e,n){return this.post(this.fhirBaseUrl,e,void 0,n)}sendEmail(e,n){return this.post("email/v1/send",e,$t.JSON,n)}graphql(e,n,a,o){return this.post(this.fhirUrl("$graphql"),{query:e,operationName:n,variables:a},$t.JSON,o)}readResourceGraph(e,n,a,o){return this.get(`${this.fhirUrl(e,n)}/$graph?graph=${a}`,o)}pushToAgent(e,n,a,o,c,d){let{waitTimeout:m,...f}=d??{};return this.post(this.fhirUrl("Agent",Uc(e),"$push"),{destination:typeof n=="string"?n:Ms(n),body:a,contentType:o,waitForResponse:c,...m!==void 0?{waitTimeout:m}:void 0},$t.FHIR_JSON,f)}getActiveLogin(){return this.storage.getObject("activeLogin")}async setActiveLogin(e){(!this.sessionDetails?.profile||Ms(this.sessionDetails.profile)!==e.profile?.reference)&&this.clearActiveLogin(),this.setAccessToken(e.accessToken,e.refreshToken),this.storage.setObject("activeLogin",e),this.addLogin(e),this.refreshPromise=void 0,await this.refreshProfile()}getAccessToken(){return this.accessToken}isAuthenticated(e){return this.accessTokenExpires!==void 0&&Date.now()<this.accessTokenExpires-(e??this.refreshGracePeriod)}setAccessToken(e,n){this.accessToken=e,this.refreshToken=n,this.accessTokenExpires=JC(e),this.medplumServer=QC(e)}getLogins(){return this.storage.getObject("logins")??[]}addLogin(e){let n=this.getLogins().filter(a=>a.profile?.reference!==e.profile?.reference);n.push(e),this.storage.setObject("logins",n)}async refreshProfile(){return this.medplumServer?(this.profilePromise=new Promise((e,n)=>{this.get("auth/me",{cache:"no-cache"}).then(a=>{this.profilePromise=void 0;let o=this.sessionDetails?.profile?.id!==a.profile.id;this.sessionDetails=a,o&&this.dispatchEvent({type:"change"}),e(a.profile),this.dispatchEvent({type:"profileRefreshed"})}).catch(n)}),this.dispatchEvent({type:"profileRefreshing"}),this.profilePromise):Promise.resolve(void 0)}isLoading(){return!this.isInitialized||!!this.profilePromise&&!this.sessionDetails?.profile}isSuperAdmin(){return!!this.sessionDetails?.project.superAdmin}isProjectAdmin(){return!!this.sessionDetails?.membership.admin}getProject(){return this.sessionDetails?.project}getProjectMembership(){return this.sessionDetails?.membership}getProfile(){return this.sessionDetails?.profile}async getProfileAsync(){return this.profilePromise?this.profilePromise:this.sessionDetails?this.sessionDetails.profile:this.refreshProfile()}getUserConfiguration(){return this.sessionDetails?.config}getAccessPolicy(){return this.sessionDetails?.accessPolicy}async download(e,n={}){this.refreshPromise&&await this.refreshPromise;let a=e.toString();a.startsWith(d3)&&(e=this.fhirUrl(a));let o=n.headers;return o||(o={},n.headers=o),o.Accept||(o.Accept="*/*"),this.addFetchOptionsDefaults(n),(await this.fetchWithRetry(e.toString(),n)).blob()}async createMedia(e,n){let{additionalFields:a,...o}=e,c=await this.createResource({resourceType:"Media",status:"preparation",content:{contentType:e.contentType},...a});o.securityContext||(o.securityContext=si(c));let d=await this.createAttachment(o,n);return this.updateResource({...c,status:"completed",content:d})}async uploadMedia(e,n,a,o,c){return this.createMedia({data:e,contentType:n,filename:a,additionalFields:o},c)}async createDocumentReference(e,n){let{additionalFields:a,...o}=e,c=await this.createResource({resourceType:"DocumentReference",status:"current",content:[{attachment:{contentType:e.contentType}}],...a});o.securityContext||(o.securityContext=si(c));let d=await this.createAttachment(o,n);return this.updateResource({...c,content:[{attachment:d}]})}async bulkExport(e="",n,a,o){let c=e&&`${e}/`,d=this.fhirUrl(`${c}$export`);return n&&d.searchParams.set("_type",n),a&&d.searchParams.set("_since",a),this.startAsyncRequest(d.toString(),o)}async startAsyncRequest(e,n={}){this.addFetchOptionsDefaults(n);let a=n.headers;return a.Prefer="respond-async",this.request("POST",e,n)}get keyValue(){return this.keyValueClient||(this.keyValueClient=new YC(this)),this.keyValueClient}getBundle(e,n){return new nn((async()=>{let a=await this.get(e,n);if(a.entry)for(let o of a.entry)this.cacheResource(o.resource);return a})())}getCacheEntry(e,n){if(!this.requestCache||n?.cache==="no-cache"||n?.cache==="reload")return;let a=this.requestCache.get(e);if(!(!a||a.requestTime+this.cacheTime<Date.now()))return a}setCacheEntry(e,n){this.requestCache&&this.requestCache.set(e,{requestTime:Date.now(),value:n})}cacheResource(e){e?.id&&!e.meta?.tag?.some(n=>n.code==="SUBSETTED")&&this.setCacheEntry(this.fhirUrl(e.resourceType,e.id).toString(),new nn(Promise.resolve(e)))}deleteCacheEntry(e){this.requestCache&&this.requestCache.delete(e)}async request(e,n,a={},o={}){await this.refreshIfExpired(),a.method=e,this.addFetchOptionsDefaults(a);let c=await this.fetchWithRetry(n,a);if(c.status===401)return this.handleUnauthenticated(e,n,a);if(c.status===204||c.status===304)return;let d=c.headers.get("content-type")?.includes("json");if(c.status===404&&!d)throw new He(DA);let m=await this.parseBody(c,d);if(c.status===200&&a.followRedirectOnOk||c.status===201&&a.followRedirectOnCreated){let f=await Fg(c,m);if(f)return this.request("GET",f,{...a,body:void 0})}if(c.status===202&&a.pollStatusOnAccepted){let f=await Fg(c,m)??o.statusUrl;if(f)return this.pollStatus(f,a,o)}if(c.status>=400)throw new He(bc(m));return m}async parseBody(e,n){let a;if(e.headers.get("content-length")!=="0"){if(n)try{a=await e.json()}catch(o){throw console.error("Error parsing response",e.status,o),o}else a=await e.text();return a}}async fetchWithRetry(e,n){e.startsWith("http")||(e=sn(this.baseUrl,e));let a=n?.maxRetries??2;for(let o=0;o<=a;o++)try{this.options.verbose&&this.logRequest(e,n);let c=await this.fetch(e,n);if(this.options.verbose&&this.logResponse(c),this.setCurrentRateLimit(c),o>=a||!g3(c))return c;let d=this.getRetryDelay(o),m=n.maxRetryTime??2e3;if(d>m)return c;await Ug(d)}catch(c){if(c.message==="Failed to fetch"&&o===0&&this.dispatchEvent({type:"offline"}),c.name==="AbortError"||o===a)throw c}throw new Error("Unreachable")}logRequest(e,n){if(console.log(`> ${n.method} ${e}`),n.headers){let a=n.headers;for(let o of T4(Object.keys(a)))console.log(`> ${o}: ${a[o]}`)}}logResponse(e){console.log(`< ${e.status} ${e.statusText}`),e.headers&&e.headers.forEach((n,a)=>console.log(`< ${a}: ${n}`))}setCurrentRateLimit(e){let n=e.headers?.get("ratelimit");n&&(this.currentRateLimits=n)}rateLimitStatus(){if(!this.currentRateLimits)return[];let e=this.currentRateLimits;return e.split(/\s*;\s*/g).map(n=>{let a=n.split(/\s*,\s*/g);if(a.length!==3)throw new Error("Could not parse RateLimit header: "+e);let o=a[0].substring(1,a[0].length-1),c=a.find(p=>p.startsWith("r=")),d=c?parseInt(c.substring(2),10):NaN,m=a.find(p=>p.startsWith("t=")),f=m?parseInt(m.substring(2),10):NaN;if(!o||Number.isNaN(d)||Number.isNaN(f))throw new Error("Could not parse RateLimit header: "+e);return{name:o,remainingUnits:d,secondsUntilReset:f}})}getRetryDelay(e){let n=this.rateLimitStatus(),a=500*Math.pow(1.5,e);for(let o of n)o.remainingUnits||(a=Math.max(a,o.secondsUntilReset*1e3));return a}async pollStatus(e,n,a){let o={...n,method:"GET",body:void 0,redirect:"follow"};if(a.pollCount===void 0)n.headers&&typeof n.headers=="object"&&"Prefer"in n.headers&&(o.headers={...n.headers},delete o.headers.Prefer),a.statusUrl=e,a.pollCount=1;else{let c=n.pollStatusPeriod??1e3;await Ug(c),a.pollCount++}return this.request("GET",e,o,a)}async executeAutoBatch(){if(this.autoBatchQueue===void 0)return;let e=[...this.autoBatchQueue];if(this.autoBatchQueue.length=0,this.autoBatchTimerId=void 0,e.length===1){let o=e[0];try{o.resolve(await this.request(o.method,sn(this.fhirBaseUrl,o.url),o.options))}catch(c){o.reject(new He(bc(c)))}return}let n={resourceType:"Bundle",type:"batch",entry:e.map(o=>({request:{method:o.method,url:o.url},resource:o.options.body?JSON.parse(o.options.body):void 0}))},a=await this.post(this.fhirBaseUrl,n);for(let o=0;o<e.length;o++){let c=e[o],d=a.entry?.[o];d?.response?.outcome&&!BA(d.response.outcome)?c.reject(new He(d.response.outcome)):c.resolve(d?.resource)}}addFetchOptionsDefaults(e){Object.entries(this.defaultHeaders).forEach(([n,a])=>{this.setRequestHeader(e,n,a)}),this.setRequestHeader(e,"Accept",s3,!0),this.options.extendedMode!==!1&&this.setRequestHeader(e,"X-Medplum","extended"),e.body&&this.setRequestHeader(e,"Content-Type",$t.FHIR_JSON,!0),this.accessToken?this.setRequestHeader(e,"Authorization","Bearer "+this.accessToken):this.basicAuth&&this.setRequestHeader(e,"Authorization","Basic "+this.basicAuth),e.cache||(e.cache="no-cache"),e.credentials||(e.credentials="include")}setRequestContentType(e,n){this.setRequestHeader(e,"Content-Type",n)}setRequestHeader(e,n,a,o=!1){e.headers||(e.headers={});let c=e.headers;o&&c[n]||(c[n]=a)}setRequestBody(e,n){typeof n=="string"||typeof Blob<"u"&&(n instanceof Blob||n?.constructor.name==="Blob")||typeof File<"u"&&(n instanceof File||n?.constructor.name==="File")||typeof Uint8Array<"u"&&(n instanceof Uint8Array||n?.constructor.name==="Uint8Array")?e.body=n:n&&(e.body=JSON.stringify(n))}handleUnauthenticated(e,n,a){return this.refresh()?this.request(e,n,a):(this.clear(),this.onUnauthenticated&&this.onUnauthenticated(),Promise.reject(new He(Oo)))}async startPkce(){let e=Og();sessionStorage.setItem("pkceState",e);let n=Og().slice(0,128);sessionStorage.setItem("codeVerifier",n);try{let a=await MC(n);return{codeChallengeMethod:"S256",codeChallenge:C4(a).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")}}catch(a){return console.warn("Failed to hash code verifier. Falling back to 'plain' code challenge method",a),{codeChallengeMethod:"plain",codeChallenge:n}}}async requestAuthorization(e){let n=await this.ensureCodeChallenge(e??{}),a=new URL(this.authorizeUrl);a.searchParams.set("response_type","code"),a.searchParams.set("state",sessionStorage.getItem("pkceState")),a.searchParams.set("client_id",n.clientId??this.clientId),a.searchParams.set("redirect_uri",n.redirectUri??Hg()),a.searchParams.set("code_challenge_method",n.codeChallengeMethod),a.searchParams.set("code_challenge",n.codeChallenge),a.searchParams.set("scope",n.scope??"openid profile"),window.location.assign(a.toString())}processCode(e,n){let a={grant_type:ii.AuthorizationCode,code:e,client_id:n?.clientId??this.clientId??"",redirect_uri:n?.redirectUri??Hg()};if(typeof sessionStorage<"u"){let o=sessionStorage.getItem("codeVerifier");o&&(a.code_verifier=o)}return this.fetchTokens(a)}refreshIfExpired(e){return!this.refreshPromise&&this.accessTokenExpires!==void 0&&!this.isAuthenticated(e)&&this.refresh(),this.refreshPromise??Promise.resolve()}refresh(){if(this.refreshPromise)return this.refreshPromise;if(this.refreshToken)return this.refreshPromise=this.fetchTokens({grant_type:ii.RefreshToken,client_id:this.clientId??"",refresh_token:this.refreshToken}),this.refreshPromise;if(this.clientId&&this.clientSecret)return this.refreshPromise=this.startClientLogin(this.clientId,this.clientSecret),this.refreshPromise}async startClientLogin(e,n){return this.clientId=e,this.clientSecret=n,this.fetchTokens({grant_type:ii.ClientCredentials,client_id:e,client_secret:n})}async startJwtBearerLogin(e,n,a){return this.clientId=e,this.fetchTokens({grant_type:ii.JwtBearer,client_id:e,assertion:n,scope:a})}async startJwtAssertionLogin(e){return this.fetchTokens({grant_type:ii.ClientCredentials,client_assertion_type:h3.JwtBearer,client_assertion:e})}setBasicAuth(e,n){this.clientId=e,this.clientSecret=n,this.basicAuth=Dg(e+":"+n)}async fhircastSubscribe(e,n){if(!(typeof e=="string"&&e!==""))throw new He(ht("Invalid topic provided. Topic must be a valid string."));if(!(typeof n=="object"&&Array.isArray(n)&&n.length>0))throw new He(ht("Invalid events provided. Events must be an array of event names containing at least one event."));let a={channelType:"websocket",mode:"subscribe",topic:e,events:n},o=(await this.post(this.fhircastHubUrl,Pg(a),$t.FORM_URL_ENCODED))["hub.channel.endpoint"];if(!o)throw new Error("Invalid response!");return a.endpoint=o,a}async fhircastUnsubscribe(e){if(!um(e))throw new He(ht("Invalid topic or subscriptionRequest. SubscriptionRequest must be an object."));if(!(e.endpoint&&typeof e.endpoint=="string"&&e.endpoint.startsWith("ws")))throw new He(ht("Provided subscription request must have an endpoint in order to unsubscribe."));e.mode="unsubscribe",await this.post(this.fhircastHubUrl,Pg(e),$t.FORM_URL_ENCODED)}fhircastConnect(e){return new $C(e)}async fhircastPublish(e,n,a,o){return PC(n)?this.post(this.fhircastHubUrl,Lg(e,n,a,o),$t.JSON):(LC(n),this.post(this.fhircastHubUrl,Lg(e,n,a),$t.JSON))}async fhircastGetContext(e){return this.get(`${this.fhircastHubUrl}/${e}`,{cache:"no-cache"})}async invite(e,n){return this.post("admin/projects/"+e+"/invite",n)}async fetchTokens(e){let n=new URLSearchParams(e),a={...this.defaultHeaders,"Content-Type":$t.FORM_URL_ENCODED};this.basicAuth&&(a.Authorization=`Basic ${this.basicAuth}`),this.credentialsInHeader&&(n.delete("client_id"),n.delete("client_secret"),!this.basicAuth&&e.client_id&&e.client_secret&&(a.Authorization=`Basic ${Dg(e.client_id+":"+e.client_secret)}`));let o={method:"POST",headers:a,body:n.toString(),credentials:"include"},c;try{c=await this.fetchWithRetry(this.tokenUrl,o)}catch(m){throw this.refreshPromise=void 0,m}if(!c.ok){this.clearActiveLogin();try{let m=await c.json();throw new He(Tc(m.error_description))}catch(m){throw new He(Tc("Failed to fetch tokens"),m)}}let d=await c.json();return await this.verifyTokens(d),this.getProfile()}async verifyTokens(e){let n=e.access_token;if(GC(n)){let a=hm(n);if(Date.now()>=a.exp*1e3)throw this.clearActiveLogin(),new He(OA);if(a.cid){if(a.cid!==this.clientId)throw this.clearActiveLogin(),new He(wg)}else if(this.clientId&&a.client_id!==this.clientId)throw this.clearActiveLogin(),new He(wg)}return this.setActiveLogin({accessToken:n,refreshToken:e.refresh_token,project:e.project,profile:e.profile})}checkSessionDetailsMatchLogin(e){return this.sessionDetails&&e?e.profile?.reference?.endsWith(this.sessionDetails.profile.id)??!1:!0}setupStorageListener(){try{window.addEventListener("storage",e=>{if(e.key===null)window.location.reload();else if(e.key==="activeLogin"){let n=e.oldValue?JSON.parse(e.oldValue):void 0,a=e.newValue?JSON.parse(e.newValue):void 0;n?.profile.reference!==a?.profile.reference||!this.checkSessionDetailsMatchLogin(a)?window.location.reload():a?this.setAccessToken(a.accessToken,a.refreshToken):this.clear()}})}catch{}}getSubscriptionManager(){return this.subscriptionManager||(this.subscriptionManager=new n3(this,U4(this.baseUrl,"/ws/subscriptions-r4"))),this.subscriptionManager}subscribeToCriteria(e,n){return this.getSubscriptionManager().addCriteria(e,n)}unsubscribeFromCriteria(e,n){this.subscriptionManager&&(this.subscriptionManager.removeCriteria(e,n),this.subscriptionManager.getCriteriaCount()===0&&this.subscriptionManager.closeWebSocket())}getMasterSubscriptionEmitter(){return this.getSubscriptionManager().getMasterEmitter()}};function m3(){if(!globalThis.fetch)throw new Error("Fetch not available in this environment");return globalThis.fetch.bind(globalThis)}function Hg(){return typeof window>"u"?"":window.location.protocol+"//"+window.location.host+"/"}async function Fg(e,n){let a=e.headers.get("content-location");if(a)return a;let o=e.headers.get("location");if(o)return o;if(rm(n)&&n.issue?.[0]?.diagnostics)return n.issue[0].diagnostics}function $g(e){let n=e.entry?.map(a=>a.resource)??[];return Object.assign(n,{bundle:e})}function f3(e){return Qr(e)&&"data"in e&&"contentType"in e}function Vg(e,n,a,o){return f3(e)?e:{data:e,filename:n,contentType:a,onProgress:o}}function p3(e){return Qr(e)&&"docDefinition"in e}function x3(e,n,a,o){return p3(e)?e:{docDefinition:e,filename:n,tableLayouts:a,fonts:o}}function g3(e){return e.status===429||e.status>=500}function Kv({parentContext:e,path:n,elements:a,profileUrl:o,debugMode:c,accessPolicyResource:d}){if(n===e?.path)return;c??=e?.debugMode??!1,d??=e?.accessPolicyResource;let m=v3(n,a,e,!!c),f=Ig(n,".",2)[1];m=y3(m,d,f),m=b3(m,d,f);let p=Object.create(null);for(let[j,b]of Object.entries(m))p[n+"."+j]=b;let x;if(e&&!e.isDefaultContext)x=e.getExtendedProps;else{let j=Object.create(null);x=b=>{let y=Ig(b,".",2)[1];if(y){if(!j[y]){let _=Oc(y,d?.hiddenFields);j[y]={hidden:_,readonly:_||Oc(y,d?.readonlyFields)}}return j[y]}}}return{path:n,elements:m,elementsByPath:p,profileUrl:o??e?.profileUrl,debugMode:c,getExtendedProps:x,accessPolicyResource:d}}function v3(e,n,a,o){let c=Object.create(null);if(a)for(let[m,f]of Object.entries(a.elementsByPath)){let p=R4(e,m);p!==void 0&&(c[p]=f)}let d=!1;if(n)for(let[m,f]of Object.entries(n))m in c||(c[m]=f,d=!0);return o&&console.assert(d,"Unnecessary ElementsContext; not using any newly provided elements"),c}function y3(e,n,a){if(!n?.hiddenFields?.length)return e;let o=a?a+".":"";return Object.fromEntries(Object.entries(e).filter(([c])=>!Oc(o+c,n.hiddenFields)))}function b3(e,n,a){if(!n?.readonlyFields?.length)return e;let o=Object.create(null),c=a?a+".":"";for(let[d,m]of Object.entries(e))Oc(c+d,n.readonlyFields)?o[d]={...m,readonly:!0}:o[d]=m;return o}function Oc(e,n){if(!n?.length)return!1;let a=e.split(".");for(let o=1;o<=a.length;o++){let c=a.slice(0,o).join(".");if(n.includes(c))return!0}return!1}function w3(e){return e.type!==void 0&&e.type.length>0}function N3(e,n,a,o){let c=ZA(e,n.path,{profileUrl:o});if(c){let d=a.typeSchema?.elements??a.elements;return c.some(m=>t4(m,n,a,d))??!1}return console.assert(!1,"getNestedProperty[%s] in isDiscriminatorComponentMatch missed",n.path),!1}function j3(e,n,a,o){if(e)for(let c of n){let d={value:e,type:c.typeSchema?.type??c.type?.[0].code};if(a.every(m=>N3(d,m,c,c.typeSchema?.url??o)))return c.name}}[...lm];cm().registerInfix("->",{precedence:Ze.Arrow}).registerInfix(";",{precedence:Ze.Semicolon});[...lm];cm();/*!
* Reconnecting WebSocket
* by Pedro Ladaria <pedro.ladaria@gmail.com>
* https://github.com/pladaria/reconnecting-websocket
* License MIT
*
* Copy of "partysocket" from Partykit team, a fork of the original "Reconnecting WebSocket"
* https://github.com/partykit/partykit/blob/main/packages/partysocket
*/var Xv=k.createContext(void 0);function Zc(){return k.useContext(Xv)}function Os(){return Zc().medplum}function mm(){return Zc().navigate}function Zv(){return Zc().profile}var Gg=["change","storageInitialized","storageInitFailed","profileRefreshing","profileRefreshed"];function S3(e){let n=e.medplum,a=e.navigate??k3,[o,c]=k.useState({profile:n.getProfile(),loading:n.isLoading()});k.useEffect(()=>{function m(){c(f=>({...f,profile:n.getProfile(),loading:n.isLoading()}))}for(let f of Gg)n.addEventListener(f,m);return()=>{for(let f of Gg)n.removeEventListener(f,m)}},[n]);let d=k.useMemo(()=>({...o,medplum:n,navigate:a}),[o,n,a]);return t.jsx(Xv.Provider,{value:d,children:e.children})}function k3(e){window.location.assign(e)}var Qg=new Map,Wv=e=>k.useMemo(()=>{if(!e)return;let n=e.split("?")[0];if(!n)return e;let a;try{a=new URLSearchParams(new URL(e).search)}catch{return e}if(!a.has("Key-Pair-Id")||!a.has("Signature"))return e;let o=a.get("Expires");if(!o||o.length>13)return e;let c=Qg.get(n);if(c){let d=new URLSearchParams(new URL(c).search).get("Expires");if(d&&parseInt(d,10)*1e3-5e3>Date.now())return c}return Qg.set(n,e),e},[e]);function A3(e,n){let a=Os(),[o,c]=k.useState(()=>Jg(a,e)),d=k.useCallback(m=>{gi(m,o)||c(m)},[o]);return k.useEffect(()=>{let m=!0,f=Jg(a,e);return!f&&wi(e)?a.readReference(e).then(p=>{m&&d(p)}).catch(p=>{m&&d(void 0)}):d(f),()=>m=!1},[a,e,d,n]),o}function Jg(e,n){if(n){if(Na(n))return n;if(wi(n))return e.getCachedReference(n)}}var C3=Object.create,ey=Object.defineProperty,R3=Object.getOwnPropertyDescriptor,ty=Object.getOwnPropertyNames,T3=Object.getPrototypeOf,E3=Object.prototype.hasOwnProperty,qo=(e,n)=>function(){return n||(0,e[ty(e)[0]])((n={exports:{}}).exports,n),n.exports},U3=(e,n,a,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of ty(n))!E3.call(e,c)&&c!==a&&ey(e,c,{get:()=>n[c],enumerable:!(o=R3(n,c))||o.enumerable});return e},I3=(e,n,a)=>(a=e!=null?C3(T3(e)):{},U3(ey(a,"default",{value:e,enumerable:!0}),e)),ry=qo({"../../node_modules/rfc6902/pointer.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Pointer=e.escapeToken=e.unescapeToken=void 0;function n(c){return c.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeToken=n;function a(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeToken=a;var o=function(){function c(d){d===void 0&&(d=[""]),this.tokens=d}return c.fromJSON=function(d){var m=d.split("/").map(n);if(m[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(d));return new c(m)},c.prototype.toString=function(){return this.tokens.map(a).join("/")},c.prototype.evaluate=function(d){for(var m=null,f="",p=d,x=1,j=this.tokens.length;x<j;x++)m=p,f=this.tokens[x],!(f=="__proto__"||f=="constructor"||f=="prototype")&&(p=(m||{})[f]);return{parent:m,key:f,value:p}},c.prototype.get=function(d){return this.evaluate(d).value},c.prototype.set=function(d,m){var f=this.evaluate(d);f.parent&&(f.parent[f.key]=m)},c.prototype.push=function(d){this.tokens.push(d)},c.prototype.add=function(d){var m=this.tokens.concat(String(d));return new c(m)},c}();e.Pointer=o}}),ny=qo({"../../node_modules/rfc6902/util.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function n(c){return c===void 0?"undefined":c===null?"null":Array.isArray(c)?"array":typeof c}e.objectType=n;function a(c){return c!=null&&typeof c=="object"}function o(c){if(!a(c))return c;if(c.constructor==Array){for(var d=c.length,m=new Array(d),f=0;f<d;f++)m[f]=o(c[f]);return m}if(c.constructor==Date){var p=new Date(+c);return p}var x={};for(var j in c)e.hasOwnProperty.call(c,j)&&(x[j]=o(c[j]));return x}e.clone=o}}),sy=qo({"../../node_modules/rfc6902/diff.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.diffAny=e.diffObjects=e.diffArrays=e.intersection=e.subtract=e.isDestructive=void 0;var n=ny();function a(b){var y=b.op;return y==="remove"||y==="replace"||y==="copy"||y==="move"}e.isDestructive=a;function o(b,y){var _={};for(var B in b)n.hasOwnProperty.call(b,B)&&b[B]!==void 0&&(_[B]=1);for(var P in y)n.hasOwnProperty.call(y,P)&&y[P]!==void 0&&delete _[P];return Object.keys(_)}e.subtract=o;function c(b){for(var y=b.length,_={},B=0;B<y;B++){var P=b[B];for(var L in P)n.hasOwnProperty.call(P,L)&&P[L]!==void 0&&(_[L]=(_[L]||0)+1)}for(var L in _)_[L]<y&&delete _[L];return Object.keys(_)}e.intersection=c;function d(b){return b.op==="add"}function m(b){return b.op==="remove"}function f(b,y){return{operations:b.operations.concat(y),cost:b.cost+1}}function p(b,y,_,B){B===void 0&&(B=j);var P={"0,0":{operations:[],cost:0}};function L(I,J){var W="".concat(I,",").concat(J),C=P[W];if(C===void 0){if(I>0&&J>0&&!B(b[I-1],y[J-1],_.add(String(I-1))).length)C=L(I-1,J-1);else{var $=[];if(I>0){var ee=L(I-1,J),X={op:"remove",index:I-1};$.push(f(ee,X))}if(J>0){var Q=L(I,J-1),ie={op:"add",index:I-1,value:y[J-1]};$.push(f(Q,ie))}if(I>0&&J>0){var me=L(I-1,J-1),R={op:"replace",index:I-1,original:b[I-1],value:y[J-1]};$.push(f(me,R))}var D=$.sort(function(K,de){return K.cost-de.cost})[0];C=D}P[W]=C}return C}var U=isNaN(b.length)||b.length<=0?0:b.length,T=isNaN(y.length)||y.length<=0?0:y.length,S=L(U,T).operations,w=S.reduce(function(I,J){var W=I[0],C=I[1];if(d(J)){var $=J.index+1+C,ee=$<U+C?String($):"-",X={op:J.op,path:_.add(ee).toString(),value:J.value};return[W.concat(X),C+1]}else if(m(J)){var X={op:J.op,path:_.add(String(J.index+C)).toString()};return[W.concat(X),C-1]}else{var Q=_.add(String(J.index+C)),ie=B(J.original,J.value,Q);return[W.concat.apply(W,ie),C]}},[[],0])[0];return w}e.diffArrays=p;function x(b,y,_,B){B===void 0&&(B=j);var P=[];return o(b,y).forEach(function(L){P.push({op:"remove",path:_.add(L).toString()})}),o(y,b).forEach(function(L){P.push({op:"add",path:_.add(L).toString(),value:y[L]})}),c([b,y]).forEach(function(L){P.push.apply(P,B(b[L],y[L],_.add(L)))}),P}e.diffObjects=x;function j(b,y,_,B){if(B===void 0&&(B=j),b===y)return[];var P=(0,n.objectType)(b),L=(0,n.objectType)(y);return P=="array"&&L=="array"?p(b,y,_,B):P=="object"&&L=="object"?x(b,y,_,B):[{op:"replace",path:_.toString(),value:y}]}e.diffAny=j}}),M3=qo({"../../node_modules/rfc6902/patch.js"(e){var n=e&&e.__extends||function(){var U=function(T,S){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,I){w.__proto__=I}||function(w,I){for(var J in I)Object.prototype.hasOwnProperty.call(I,J)&&(w[J]=I[J])},U(T,S)};return function(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");U(T,S);function w(){this.constructor=T}T.prototype=S===null?Object.create(S):(w.prototype=S.prototype,new w)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.apply=e.InvalidOperationError=e.test=e.copy=e.move=e.replace=e.remove=e.add=e.TestError=e.MissingError=void 0;var a=ry(),o=ny(),c=sy(),d=function(U){n(T,U);function T(S){var w=U.call(this,"Value required at path: ".concat(S))||this;return w.path=S,w.name="MissingError",w}return T}(Error);e.MissingError=d;var m=function(U){n(T,U);function T(S,w){var I=U.call(this,"Test failed: ".concat(S," != ").concat(w))||this;return I.actual=S,I.expected=w,I.name="TestError",I}return T}(Error);e.TestError=m;function f(U,T,S){if(Array.isArray(U))if(T=="-")U.push(S);else{var w=parseInt(T,10);U.splice(w,0,S)}else U[T]=S}function p(U,T){if(Array.isArray(U)){var S=parseInt(T,10);U.splice(S,1)}else delete U[T]}function x(U,T){var S=a.Pointer.fromJSON(T.path).evaluate(U);return S.parent===void 0?new d(T.path):(f(S.parent,S.key,(0,o.clone)(T.value)),null)}e.add=x;function j(U,T){var S=a.Pointer.fromJSON(T.path).evaluate(U);return S.value===void 0?new d(T.path):(p(S.parent,S.key),null)}e.remove=j;function b(U,T){var S=a.Pointer.fromJSON(T.path).evaluate(U);if(S.parent===null)return new d(T.path);if(Array.isArray(S.parent)){if(parseInt(S.key,10)>=S.parent.length)return new d(T.path)}else if(S.value===void 0)return new d(T.path);return S.parent[S.key]=(0,o.clone)(T.value),null}e.replace=b;function y(U,T){var S=a.Pointer.fromJSON(T.from).evaluate(U);if(S.value===void 0)return new d(T.from);var w=a.Pointer.fromJSON(T.path).evaluate(U);return w.parent===void 0?new d(T.path):(p(S.parent,S.key),f(w.parent,w.key,S.value),null)}e.move=y;function _(U,T){var S=a.Pointer.fromJSON(T.from).evaluate(U);if(S.value===void 0)return new d(T.from);var w=a.Pointer.fromJSON(T.path).evaluate(U);return w.parent===void 0?new d(T.path):(f(w.parent,w.key,(0,o.clone)(S.value)),null)}e.copy=_;function B(U,T){var S=a.Pointer.fromJSON(T.path).evaluate(U);return(0,c.diffAny)(S.value,T.value,new a.Pointer).length?new m(S.value,T.value):null}e.test=B;var P=function(U){n(T,U);function T(S){var w=U.call(this,"Invalid operation: ".concat(S.op))||this;return w.operation=S,w.name="InvalidOperationError",w}return T}(Error);e.InvalidOperationError=P;function L(U,T){switch(T.op){case"add":return x(U,T);case"remove":return j(U,T);case"replace":return b(U,T);case"move":return y(U,T);case"copy":return _(U,T);case"test":return B(U,T)}return new P(T)}e.apply=L}}),_3=qo({"../../node_modules/rfc6902/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var n=ry();Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return n.Pointer}});var a=M3(),o=sy();function c(x,j){return j.map(function(b){return(0,a.apply)(x,b)})}e.applyPatch=c;function d(x){function j(b,y,_){var B=x(b,y,_);return Array.isArray(B)?B:(0,o.diffAny)(b,y,_,j)}return j}function m(x,j,b){var y=new n.Pointer;return(b?d(b):o.diffAny)(x,j,y)}e.createPatch=m;function f(x,j){var b=n.Pointer.fromJSON(j).evaluate(x);if(b!==void 0)return{op:"test",path:j,value:b.value}}function p(x,j){var b=new Array;return j.filter(o.isDestructive).forEach(function(y){var _=f(x,y.path);if(_&&b.push(_),"from"in y){var B=f(x,y.from);B&&b.push(B)}}),b}e.createTests=p}});function D3(e){let n=e.value;return n?t.jsx(t.Fragment,{children:M4(n)}):null}var O3=["meta","implicitRules","contained","extension","modifierExtension"],P3=["language","text"],ya=k.createContext({path:"",profileUrl:void 0,elements:Object.create(null),elementsByPath:Object.create(null),getExtendedProps:()=>({readonly:!1,hidden:!1}),accessPolicyResource:void 0,debugMode:!1,isDefaultContext:!0});ya.displayName="ElementsContext";var L3={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}},Ee=(e,n,a,o)=>{let c=k.forwardRef(({color:d="currentColor",size:m=24,stroke:f=2,title:p,className:x,children:j,...b},y)=>k.createElement("svg",{ref:y,...L3[e],width:m,height:m,className:["tabler-icon",`tabler-icon-${n}`,x].join(" "),strokeWidth:f,stroke:d,...b},[p&&k.createElement("title",{key:"svg-title"},p),...o.map(([_,B])=>k.createElement(_,B)),...Array.isArray(j)?j:[j]]));return c.displayName=`${a}`,c},B3=[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]];Ee("outline","adjustments-horizontal","AdjustmentsHorizontal",B3);var z3=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],q3=Ee("outline","alert-circle","AlertCircle",z3),H3=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]];Ee("outline","arrow-down","ArrowDown",H3);var F3=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]];Ee("outline","arrow-right","ArrowRight",F3);var $3=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]];Ee("outline","arrow-up","ArrowUp",$3);var V3=[["path",{d:"M6 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z",key:"svg-0"}],["path",{d:"M16 4a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z",key:"svg-1"}],["path",{d:"M16 20a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z",key:"svg-2"}],["path",{d:"M11 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z",key:"svg-3"}],["path",{d:"M21 12a2 2 0 1 0 -4 0a2 2 0 0 0 4 0z",key:"svg-4"}],["path",{d:"M5.058 18.306l2.88 -4.606",key:"svg-5"}],["path",{d:"M10.061 10.303l2.877 -4.604",key:"svg-6"}],["path",{d:"M10.065 13.705l2.876 4.6",key:"svg-7"}],["path",{d:"M15.063 5.7l2.881 4.61",key:"svg-8"}]];Ee("outline","binary-tree","BinaryTree",V3);var G3=[["path",{d:"M5 19h14m1.986 -1.977a2 2 0 0 0 -.146 -.773l-7.1 -12.25a2 2 0 0 0 -3.5 0l-.815 1.405m-1.488 2.568l-4.797 8.277a2 2 0 0 0 1.75 2.75",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]];Ee("outline","bleach-off","BleachOff",G3);var Q3=[["path",{d:"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75",key:"svg-0"}]];Ee("outline","bleach","Bleach",Q3);var J3=[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]];Ee("outline","box-multiple","BoxMultiple",J3);var Y3=[["path",{d:"M7 4h-4v16h4",key:"svg-0"}],["path",{d:"M17 4h4v16h-4",key:"svg-1"}],["path",{d:"M8 16h.01",key:"svg-2"}],["path",{d:"M12 16h.01",key:"svg-3"}],["path",{d:"M16 16h.01",key:"svg-4"}]];Ee("outline","brackets-contain","BracketsContain",Y3);var K3=[["path",{d:"M5.029 5.036c-.655 .58 -1.029 1.25 -1.029 1.964c0 2.033 3.033 3.712 6.96 3.967m3.788 -.21c3.064 -.559 5.252 -2.029 5.252 -3.757c0 -2.21 -3.582 -4 -8 -4c-1.605 0 -3.1 .236 -4.352 .643",key:"svg-0"}],["path",{d:"M4 7c0 .664 .088 1.324 .263 1.965l2.737 10.035c.5 1.5 2.239 2 5 2s4.5 -.5 5 -2c.1 -.3 .252 -.812 .457 -1.535m.862 -3.146c.262 -.975 .735 -2.76 1.418 -5.354a7.45 7.45 0 0 0 .263 -1.965",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]];Ee("outline","bucket-off","BucketOff",K3);var X3=[["path",{d:"M12 7m-8 0a8 4 0 1 0 16 0a8 4 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 7c0 .664 .088 1.324 .263 1.965l2.737 10.035c.5 1.5 2.239 2 5 2s4.5 -.5 5 -2c.333 -1 1.246 -4.345 2.737 -10.035a7.45 7.45 0 0 0 .263 -1.965",key:"svg-1"}]];Ee("outline","bucket","Bucket",X3);var Z3=[["path",{d:"M3 20h18v-8a3 3 0 0 0 -3 -3h-12a3 3 0 0 0 -3 3v8z",key:"svg-0"}],["path",{d:"M3 14.803c.312 .135 .654 .204 1 .197a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1c.35 .007 .692 -.062 1 -.197",key:"svg-1"}],["path",{d:"M12 4l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z",key:"svg-2"}]];Ee("outline","cake","Cake",Z3);var W3=[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]];Ee("outline","calendar","Calendar",W3);var eR=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],fm=Ee("outline","check","Check",eR),tR=[["path",{d:"M9 11l3 3l8 -8",key:"svg-0"}],["path",{d:"M20 12v6a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h9",key:"svg-1"}]];Ee("outline","checkbox","Checkbox",tR);var rR=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],nR=Ee("outline","chevron-down","ChevronDown",rR),sR=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]];Ee("outline","chevron-right","ChevronRight",sR);var aR=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]];Ee("outline","chevron-up","ChevronUp",aR);var iR=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l6 0",key:"svg-1"}]];Ee("outline","circle-minus","CircleMinus",iR);var oR=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M9 12h6",key:"svg-1"}],["path",{d:"M12 9v6",key:"svg-2"}]];Ee("outline","circle-plus","CirclePlus",oR);var lR=[["path",{d:"M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1",key:"svg-0"}],["path",{d:"M9 15l3 -3l3 3",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}]];Ee("outline","cloud-upload","CloudUpload",lR);var cR=[["path",{d:"M4 6l5.5 0",key:"svg-0"}],["path",{d:"M4 10l5.5 0",key:"svg-1"}],["path",{d:"M4 14l5.5 0",key:"svg-2"}],["path",{d:"M4 18l5.5 0",key:"svg-3"}],["path",{d:"M14.5 6l5.5 0",key:"svg-4"}],["path",{d:"M14.5 10l5.5 0",key:"svg-5"}],["path",{d:"M14.5 14l5.5 0",key:"svg-6"}],["path",{d:"M14.5 18l5.5 0",key:"svg-7"}]];Ee("outline","columns","Columns",cR);var dR=[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]],uR=Ee("outline","copy","Copy",dR),hR=[["path",{d:"M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2",key:"svg-0"}],["path",{d:"M12 3v3m0 12v3",key:"svg-1"}]];Ee("outline","currency-dollar","CurrencyDollar",hR);var mR=[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]];Ee("outline","dots","Dots",mR);var fR=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]];Ee("outline","edit","Edit",fR);var pR=[["path",{d:"M12 5.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0",key:"svg-0"}],["path",{d:"M12 21.368l5.095 -5.096a3.088 3.088 0 1 0 -4.367 -4.367l-.728 .727l-.728 -.727a3.088 3.088 0 1 0 -4.367 4.367l5.095 5.096z",key:"svg-1"}]];Ee("outline","empathize","Empathize",pR);var xR=[["path",{d:"M5 10h14",key:"svg-0"}],["path",{d:"M5 14h14",key:"svg-1"}],["path",{d:"M5 19l14 -14",key:"svg-2"}]];Ee("outline","equal-not","EqualNot",xR);var gR=[["path",{d:"M5 10h14",key:"svg-0"}],["path",{d:"M5 14h14",key:"svg-1"}]];Ee("outline","equal","Equal",gR);var vR=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 17l.01 0",key:"svg-2"}],["path",{d:"M12 11l0 3",key:"svg-3"}]];Ee("outline","file-alert","FileAlert",vR);var yR=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 11l0 6",key:"svg-2"}],["path",{d:"M9 14l6 0",key:"svg-3"}]];Ee("outline","file-plus","FilePlus",yR);var bR=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]];Ee("outline","filter","Filter",bR);var wR=[["path",{d:"M9 6.371c0 4.418 -2.239 6.629 -5 6.629",key:"svg-0"}],["path",{d:"M4 6.371h7",key:"svg-1"}],["path",{d:"M5 9c0 2.144 2.252 3.908 6 4",key:"svg-2"}],["path",{d:"M12 20l4 -9l4 9",key:"svg-3"}],["path",{d:"M19.1 18h-6.2",key:"svg-4"}],["path",{d:"M6.694 3l.793 .582",key:"svg-5"}]];Ee("outline","language","Language",wR);var NR=[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]],jR=Ee("outline","logout","Logout",NR),SR=[["path",{d:"M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z",key:"svg-1"}]];Ee("outline","map-pin","MapPin",SR);var kR=[["path",{d:"M5 18l14 -6l-14 -6",key:"svg-0"}]];Ee("outline","math-greater","MathGreater",kR);var AR=[["path",{d:"M19 18l-14 -6l14 -6",key:"svg-0"}]];Ee("outline","math-lower","MathLower",AR);var CR=[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]];Ee("outline","message","Message",CR);var RR=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]],TR=Ee("outline","plus","Plus",RR),ER=[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]];Ee("outline","refresh","Refresh",ER);var UR=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]],IR=Ee("outline","search","Search",UR),MR=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],_R=Ee("outline","settings","Settings",MR),DR=[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]];Ee("outline","sort-ascending","SortAscending",DR);var OR=[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]];Ee("outline","sort-descending","SortDescending",OR);var PR=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}]];Ee("outline","square","Square",PR);var LR=[["path",{d:"M6 4h-1a2 2 0 0 0 -2 2v3.5h0a5.5 5.5 0 0 0 11 0v-3.5a2 2 0 0 0 -2 -2h-1",key:"svg-0"}],["path",{d:"M8 15a6 6 0 1 0 12 0v-3",key:"svg-1"}],["path",{d:"M11 3v2",key:"svg-2"}],["path",{d:"M6 3v2",key:"svg-3"}],["path",{d:"M20 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-4"}]];Ee("outline","stethoscope","Stethoscope",LR);var BR=[["path",{d:"M16 3l4 4l-4 4",key:"svg-0"}],["path",{d:"M10 7l10 0",key:"svg-1"}],["path",{d:"M8 13l-4 4l4 4",key:"svg-2"}],["path",{d:"M4 17l9 0",key:"svg-3"}]],zR=Ee("outline","switch-horizontal","SwitchHorizontal",BR),qR=[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]];Ee("outline","table-export","TableExport",qR);var HR=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]];Ee("outline","trash","Trash",HR);var FR=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]];Ee("outline","x","X",FR);var ay=class extends k.Component{constructor(e){super(e),this.state={lastLocation:window.location.toString()}}static getDerivedStateFromError(e){return{error:e,lastLocation:window.location.toString()}}componentDidUpdate(e,n){window.location.toString()!==this.state.lastLocation&&this.setState({lastLocation:window.location.toString(),error:void 0})}shouldComponentUpdate(e,n){return!!(this.props.children!==e.children||n.error&&!this.state.error||this.state.lastLocation!==window.location.toString())}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.error?t.jsx(_w,{icon:t.jsx(q3,{size:16}),title:"Something went wrong",color:"red",children:Bo(this.state.error)}):this.props.children}};function _h(){return t.jsx(Ow,{style:{width:"100%",height:"100vh"},children:t.jsx($h,{})})}var $R={main:"AppShell_main"};function iy(e){var n,a,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(n=0;n<c;n++)e[n]&&(a=iy(e[n]))&&(o&&(o+=" "),o+=a)}else for(a in e)e[a]&&(o&&(o+=" "),o+=a);return o}function VR(){for(var e,n,a=0,o="",c=arguments.length;a<c;a++)(e=arguments[a])&&(n=iy(e))&&(o&&(o+=" "),o+=n);return o}var Wc=VR;function Dh(e){e.preventDefault(),e.stopPropagation()}function GR(e){return e.button===1||e.ctrlKey||e.metaKey}function QR(e){if(Yg(e))return!0;if(e instanceof HTMLTableCellElement){let n=e.children;if(n.length===1&&Yg(n[0]))return!0}return!1}function Yg(e){return e instanceof HTMLInputElement&&e.type==="checkbox"}async function JR(e,n){return new Promise((a,o)=>{let c=new MessageChannel;c.port1.onmessage=({data:d})=>{c.port1.close(),d.error?o(d.error):a(d.result)},e.contentWindow?.postMessage(n,new URL(e.src).origin,[c.port2])})}function YR(e,n){let a=new Blob([e],{type:$t.JSON}),o=URL.createObjectURL(a),c=document.createElement("a");c.href=o;let d=n;c.download=`${d}.json`,document.body.appendChild(c),c.click(),URL.revokeObjectURL(o)}function pm(e){let n=mm(),{to:a,suffix:o,label:c,onClick:d,children:m,...f}=e,p=KR(a);return o&&(p+="/"+o),t.jsx(v0,{href:p,"aria-label":c,onAuxClick:x=>{x.stopPropagation()},onClick:x=>{x.stopPropagation(),d?(x.preventDefault(),d(x)):a&&(GR(x)||(x.preventDefault(),n(p)))},...f,children:m})}function KR(e){if(e){if(typeof e=="string")return XR(e);if(Na(e))return ZR(e);if(wi(e))return WR(e)}return"#"}function XR(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:"/"+e}function ZR(e){return`/${e.resourceType}/${e.id}`}function WR(e){return`/${e.reference}`}function eT(e){let n=e.split(" ").filter(Boolean);return n.length>1?n[0][0]+n[n.length-1][0]:n.length===1?n[0][0]:""}function ed(e){let n=A3(e.value),a=n?Yc(n):e.alt??"",o=eT(a),c=(n&&p4(n))??e.src,d=Wv(c??void 0),m=e.radius??"xl",f={...e,value:void 0,link:void 0};return e.link?t.jsx(pm,{to:n,children:t.jsx(kh,{src:d,alt:a,radius:m,...f,children:o})}):t.jsx(kh,{src:d,alt:a,radius:m,...f,children:o})}var pc={logoButton:"Header_logoButton",user:"Header_user",userName:"Header_userName",userActive:"Header_userActive"};function oy(e){let n=e.value;return n?t.jsx(t.Fragment,{children:Kc(n,e.options)}):null}function tT(e){let n=Zc(),{medplum:a,profile:o,navigate:c}=n,d=a.getLogins(),{colorScheme:m,setColorScheme:f}=Lw();return t.jsxs(t.Fragment,{children:[t.jsxs(x0,{align:"center",p:"xl",children:[t.jsx(ed,{size:"xl",radius:100,value:n.profile}),t.jsx(oy,{value:n.profile?.name?.[0]}),t.jsx(br,{c:"dimmed",size:"xs",children:a.getActiveLogin()?.project.display})]}),d.length>1&&t.jsx(dn.Divider,{}),d.map(p=>p.profile.reference!==Ms(n.profile)&&t.jsx(dn.Item,{onClick:()=>{a.setActiveLogin(p).then(()=>window.location.reload()).catch(console.log)},children:t.jsxs(_r,{children:[t.jsx(kh,{radius:"xl"}),t.jsxs("div",{style:{flex:1},children:[t.jsx(br,{size:"sm",fw:500,children:p.profile.display}),t.jsx(br,{c:"dimmed",size:"xs",children:p.project.display})]})]})},p.profile.reference)),t.jsx(dn.Divider,{}),t.jsx(_r,{justify:"center",children:t.jsx(Bw,{size:"xs",value:m,onChange:p=>f(p),data:[{label:"Light",value:"light"},{label:"Dark",value:"dark"},{label:"Auto",value:"auto"}]})}),t.jsx(dn.Divider,{}),t.jsx(dn.Item,{leftSection:t.jsx(zR,{size:14,stroke:1.5}),onClick:()=>c("/signin"),children:"Add another account"}),t.jsx(dn.Item,{leftSection:t.jsx(_R,{size:14,stroke:1.5}),onClick:()=>c(`/${Ms(o)}`),children:"Account settings"}),t.jsx(dn.Item,{leftSection:t.jsx(jR,{size:14,stroke:1.5}),onClick:async()=>{await a.signOut(),c("/signin")},children:"Sign out"}),t.jsx(br,{size:"xs",c:"dimmed",ta:"center",children:e.version})]})}var Kg={selectedItems:"selected-items",options:"options"};function ly(e){let n=Fw({onDropdownClose:()=>n.resetSelectedOption(),onDropdownOpen:()=>n.updateSelectedOptionIndex("active")}),{name:a,label:o,description:c,error:d,defaultValue:m,toOption:f,loadOptions:p,itemComponent:x,pillComponent:j,emptyComponent:b,onChange:y,onCreate:_,creatable:B,clearable:P,required:L,placeholder:U,leftSection:T,maxValues:S,optionsDropdownMaxHeight:w=320,minInputLength:I=0,...J}=e,W=J.disabled,C=rT(m),[$,ee]=k.useState(""),[X,Q]=k.useState(),[ie,me]=k.useState(),[R,D]=k.useState(),[K,de]=k.useState(C.map(f)),[Ce,_e]=k.useState([]),Re=x??nT,pe=j??sT,ve=b??aT,Le=k.useRef($);Le.current=$;let je=k.useRef(void 0),De=k.useRef(void 0),Be=k.useRef(X);Be.current=X;let ze=k.useRef(ie);ze.current=ie;let ut=k.useRef(R);ut.current=R;let ur=k.useRef(Ce);ur.current=Ce;let fn=k.useCallback(()=>{if(Q(void 0),Le.current===De.current&&p===je.current||(Le.current?.length??0)<I)return;De.current=Le.current,je.current=p;let $e=new AbortController;me($e),p(Le.current??"",$e.signal).then(ot=>{$e.signal.aborted||(_e(ot.map(f)),ut.current?(ot.length>0&&y(ot.slice(0,1)),D(!1)):ot.length>0&&n.openDropdown())}).catch(ot=>{$e.signal.aborted||ot.message.includes("aborted")||Nc({color:"red",message:Bo(ot)})}).finally(()=>{$e.signal.aborted||me(void 0)})},[n,p,y,f,I]),Gn=k.useCallback($e=>{(Ce&&Ce.length>0||B)&&n.openDropdown(),n.updateSelectedOptionIndex(),ee($e.currentTarget.value),ze.current&&(ze.current.abort(),me(void 0)),Be.current!==void 0&&window.clearTimeout(Be.current);let ot=window.setTimeout(()=>fn(),100);Q(ot)},[n,Ce,B,fn]),pn=k.useCallback($e=>{let ot=K.some(er=>er.value===$e),Bt=ot?K.filter(er=>er.value!==$e):[...K],Br=Ce?.find(er=>er.value===$e);if(!Br&&B!==!1&&_){let er=_($e);Br=f(er)}if(Br){if(S===0){y([Br.resource]),K.length>0&&de([]);return}ot||Bt.push(Br)}if(S!==void 0)for(;Bt.length>S;)Bt.shift();y(Bt.map(er=>er.resource)),de(Bt)},[B,Ce,K,S,y,_,f]),Ps=k.useMemo(()=>{if(!W)return $e=>{W||(S===1&&(ee(""),_e([]),n.closeDropdown()),De.current=void 0,$e==="$create"?(ee(""),pn($)):pn($e))}},[pn,n,W,S,$]),Wt=k.useCallback($e=>{let ot=K.filter(Bt=>Bt.value!==$e.value);y(ot.map(Bt=>Bt.resource)),de(ot)},[K,y]),Ni=k.useCallback($e=>{$e.key==="Enter"?(X||ie)&&D(!0):$e.key==="Backspace"&&$.length===0&&(Dh($e),Wt(K[K.length-1]))},[ie,Wt,$.length,K,X]);k.useEffect(()=>()=>{ze.current&&ze.current.abort()},[]);let Qt=!W&&P&&K.length>0&&t.jsx(Pn.ClearButton,{title:"Clear all",size:"sm",onClear:()=>{ee(""),de([]),y([]),n.closeDropdown()}}),xn=B&&$.trim().length>0,Qn=Ce.length>0||xn;return t.jsxs(Pn,{store:n,onOptionSubmit:Ps,withinPortal:!0,shadow:"xl",...J,children:[t.jsx(Pn.DropdownTarget,{children:t.jsx(Vx,{label:o,description:c,error:d,className:e.className,leftSection:T,rightSection:ie?t.jsx($h,{size:16}):Qt,required:L,disabled:W,children:t.jsxs(g0.Group,{"data-testid":Kg.selectedItems,children:[K.map($e=>t.jsx(pe,{item:$e,disabled:W,onRemove:()=>Wt($e)},$e.value)),!W&&(S===void 0||S===0||K.length<S)&&t.jsx(Pn.EventsTarget,{children:t.jsx(Vx.Field,{role:"searchbox",name:a,value:$,placeholder:U,onFocus:Gn,onBlur:()=>{n.closeDropdown(),ee("")},onKeyDown:Ni,onChange:Gn})})]})})}),t.jsx(Pn.Dropdown,{hidden:!Qn,"data-testid":Kg.options,children:t.jsx(Pn.Options,{children:t.jsxs($w,{type:"scroll",mah:w,children:[Ce.map($e=>{let ot=K.some(Bt=>Bt.value===$e.value);return t.jsx(Pn.Option,{value:$e.value,active:ot,children:t.jsx(Re,{...$e,active:ot})},$e.value)}),xn&&t.jsxs(Pn.Option,{value:"$create",children:["+ Create ",$]}),!B&&$.trim().length>0&&Ce.length===0&&t.jsx(ve,{search:$})]})})})]})}function rT(e){return e?Array.isArray(e)?e:[e]:[]}function nT(e){return t.jsxs(_r,{gap:"xs",children:[e.active&&t.jsx(fm,{size:12}),t.jsx("span",{children:e.label})]})}function sT({item:e,disabled:n,onRemove:a}){return t.jsx(g0,{withRemoveButton:!n,onRemove:a,children:e.label})}function aT(){return t.jsx(Pn.Empty,{children:"Nothing found"})}var iT={searchInput:"HeaderSearchInput_searchInput"};function oT(e){return{value:e.id,label:Yc(e),resource:e}}function lT(e){let n=mm(),a=Os(),o=k.useCallback(async(d,m)=>{let f=dT(d),p={signal:m},x=await a.graphql(f,void 0,void 0,p);return uT(x,d)},[a]),c=k.useCallback(d=>{d.length>0&&n(`/${Ms(d[0])}`)},[n]);return t.jsx(ly,{size:"sm",radius:"md",className:iT.searchInput,leftSection:t.jsx(IR,{size:16}),placeholder:"Search",itemComponent:cT,toOption:oT,onChange:c,loadOptions:o,maxValues:0,clearable:!1},`${e.pathname}?${e.searchParams}`)}var cT=k.forwardRef(({resource:e,active:n,...a},o)=>{let c;return e.resourceType==="Patient"?c=e.birthDate:e.resourceType==="ServiceRequest"&&(c=e.subject?.display),t.jsx("div",{ref:o,...a,children:t.jsxs(_r,{wrap:"nowrap",children:[t.jsx(ed,{value:e}),t.jsxs("div",{children:[t.jsx(br,{children:Yc(e)}),t.jsx(br,{size:"xs",c:"dimmed",children:c})]})]})})});function dT(e){let n=JSON.stringify(e);return S4(e)?`{
      Patients1: PatientList(_id: ${n}, _count: 1) {
        resourceType
        id
        identifier {
          system
          value
        }
        name {
          given
          family
        }
        birthDate
      }
      ServiceRequestList(_id: ${n}, _count: 1) {
        resourceType
        id
        identifier {
          system
          value
        }
        subject {
          display
        }
      }
    }`.replace(/\s+/g," "):`{
    Patients1: PatientList(name: ${n}, _count: 5) {
      resourceType
      id
      identifier {
        system
        value
      }
      name {
        given
        family
      }
      birthDate
    }
    Patients2: PatientList(identifier: ${n}, _count: 5) {
      resourceType
      id
      identifier {
        system
        value
      }
      name {
        given
        family
      }
      birthDate
    }
    ServiceRequestList(identifier: ${n}, _count: 5) {
      resourceType
      id
      identifier {
        system
        value
      }
      subject {
        display
      }
    }
  }`.replace(/\s+/g," ")}function uT(e,n){let a=[];return e.data.Patients1&&a.push(...e.data.Patients1),e.data.Patients2&&a.push(...e.data.Patients2),e.data.ServiceRequestList&&a.push(...e.data.ServiceRequestList),mT(hT(a),n).slice(0,5)}function hT(e){let n=new Set,a=[];for(let o of e)n.has(o.id)||(n.add(o.id),a.push(o));return a}function mT(e,n){return e.sort((a,o)=>Xg(o,n)-Xg(a,n))}function Xg(e,n){let a=0;if(e.identifier)for(let o of e.identifier)a=Math.max(a,Zg(o.value,n));if(e.resourceType==="Patient"&&e.name)for(let o of e.name)a=Math.max(a,Zg(Kc(o),n));return a}function Zg(e,n){if(!e)return 0;let a=e.toLowerCase().indexOf(n.toLowerCase());return a<0?0:100-a}function fT(e){let n=Zv(),[a,o]=k.useState(!1);return t.jsx(di.Header,{p:8,style:{zIndex:101},children:t.jsxs(_r,{justify:"space-between",children:[t.jsxs(_r,{gap:"xs",children:[t.jsx($x,{className:pc.logoButton,onClick:e.navbarToggle,children:e.logo}),!e.headerSearchDisabled&&t.jsx(lT,{pathname:e.pathname,searchParams:e.searchParams})]}),t.jsxs(_r,{gap:"lg",pr:"sm",children:[e.notifications,t.jsxs(dn,{width:260,shadow:"xl",position:"bottom-end",transitionProps:{transition:"pop-top-right"},opened:a,onClose:()=>o(!1),children:[t.jsx(dn.Target,{children:t.jsx($x,{className:Wc(pc.user,{[pc.userActive]:a}),onClick:()=>o(c=>!c),children:t.jsxs(_r,{gap:7,children:[t.jsx(ed,{value:n,radius:"xl",size:24}),t.jsx(br,{size:"sm",className:pc.userName,children:Kc(n?.name?.[0])}),t.jsx(nR,{size:12,stroke:1.5})]})})}),t.jsx(dn.Dropdown,{children:t.jsx(tT,{version:e.version})})]})]})]})})}var xm=k.createContext({submitting:!1});xm.displayName="FormContext";function pT(e){let n={};for(let a of Array.from(e.elements))a instanceof HTMLInputElement?xT(n,a):a instanceof HTMLTextAreaElement?n[a.name]=a.value:a instanceof HTMLSelectElement&&gT(n,a);return n}function xT(e,n){n.disabled||(n.type==="checkbox"||n.type==="radio")&&!n.checked||(e[n.name]=n.value)}function gT(e,n){e[n.name]=n.value}function vT(e){let[n,a]=k.useState(!1);return t.jsx(xm.Provider,{value:{submitting:n},children:t.jsx("form",{style:e.style,"data-testid":e.testid,onSubmit:o=>{o.preventDefault();let c=pT(o.target);if(e.onSubmit){a(!0);let d=e.onSubmit(c);d?.then?d.catch(console.error).finally(()=>{a(!1)}):a(!1)}},children:e.children})})}function yT(e){let{children:n,...a}=e,{submitting:o}=k.useContext(xm);return t.jsx(Mo,{type:"submit",loading:o,...a,children:n})}function bT(e){let n=Os(),a=n.getUserConfiguration();function o(c){let{menuname:d,bookmarkname:m}=c,f=`${e.pathname}?${e.searchParams.toString()}`,p=j4(a);p.menu?.find(({title:x})=>x===d)?.link?.push({name:m,target:f}),n.updateResource(p).then(x=>{a.menu=x.menu,n.dispatchEvent({type:"change"}),Nc({color:"green",message:"Success"}),e.onOk()}).catch(x=>{Nc({color:"red",message:Bo(x)})})}return t.jsx(qw,{title:"Add Bookmark",closeButtonProps:{"aria-label":"Close"},opened:e.visible,onClose:e.onCancel,children:t.jsx(vT,{onSubmit:o,children:t.jsxs(x0,{children:[t.jsx(wT,{config:a}),t.jsx(Hw,{label:"Bookmark Name",type:"text",name:"bookmarkname",placeholder:"Bookmark Name",withAsterisk:!0}),t.jsx(_r,{justify:"flex-end",children:t.jsx(yT,{mt:"sm",children:"OK"})})]})})})}function wT(e){function n(o){return o?.menu?.map(c=>c.title)}let a=n(e.config);return t.jsx(Vw,{name:"menuname",defaultValue:a[0],label:"Select Menu Option",data:a,withAsterisk:!0})}function cy(e){return typeof e.code=="string"?e.code:JSON.stringify(e)}function NT(e){return typeof e.display=="string"?e.display:cy(e)}function jT(e){return{value:cy(e),label:NT(e),resource:e}}function ST(e){return{code:e,display:e}}function kT(e){let n=Os(),{binding:a,creatable:o,clearable:c,expandParams:d,withHelpText:m,...f}=e,p=k.useCallback(async(x,j)=>{if(!a)return[];let b=(await n.valueSetExpand({...d,url:a,filter:x,count:10},{signal:j})).expansion?.contains??[],y=[];for(let _ of b)_.code&&!y.some(B=>B.code===_.code)&&y.push(_);return y},[n,d,a]);return t.jsx(ly,{...f,creatable:o??!0,clearable:c??!0,toOption:jT,loadOptions:p,onCreate:ST,itemComponent:m?AT:void 0})}var AT=k.forwardRef(({label:e,resource:n,active:a,...o},c)=>t.jsx("div",{ref:c,...o,children:t.jsxs(_r,{wrap:"nowrap",gap:"xs",children:[a&&t.jsx(fm,{size:12}),t.jsxs("div",{children:[t.jsx(br,{children:e}),t.jsx(br,{size:"xs",c:"dimmed",children:`${n.system}#${n.code}`})]})]})}));function CT(e){let{defaultValue:n,onChange:a,withHelpText:o,...c}=e,[d,m]=k.useState(n);function f(p){let x=p[0],j=TT(x);m(j),a&&a(j)}return t.jsx(kT,{defaultValue:RT(d),onChange:f,withHelpText:o??!0,...c})}function RT(e){return e?{code:e}:void 0}function TT(e){return e?.code}function ET(e){let[n,a]=k.useState(e.defaultValue),o=e.onChange,c=k.useCallback(d=>{a(d),o&&o(d)},[o]);return t.jsx(CT,{disabled:e.disabled,"data-autofocus":e.autoFocus,"data-testid":e.testId,defaultValue:n,onChange:c,name:e.name,placeholder:e.placeholder,binding:"https://medplum.com/fhir/ValueSet/resource-types",creatable:!1,maxValues:e.maxValues??1,clearable:!1,withHelpText:!1})}var Oh={menuTitle:"Navbar_menuTitle",link:"Navbar_link",linkActive:"Navbar_linkActive"};function UT(e){let n=mm(),a=_T(e.pathname,e.searchParams,e.menus),[o,c]=k.useState(!1);function d(f,p){f.stopPropagation(),f.preventDefault(),n(p),window.innerWidth<768&&e.closeNavbar()}function m(f){f&&n(`/${f}`)}return t.jsxs(t.Fragment,{children:[t.jsx(di.Navbar,{children:t.jsxs(Pw,{p:"xs",children:[!e.resourceTypeSearchDisabled&&t.jsx(di.Section,{mb:"sm",children:t.jsx(ET,{name:"resourceType",placeholder:"Resource Type",maxValues:0,onChange:f=>m(f)},window.location.pathname)}),t.jsxs(di.Section,{grow:!0,children:[e.menus?.map(f=>t.jsxs(k.Fragment,{children:[t.jsx(br,{className:Oh.menuTitle,children:f.title}),f.links?.map(p=>t.jsxs(IT,{to:p.href,active:p.href===a?.href,onClick:x=>d(x,p.href),children:[t.jsx(MT,{icon:p.icon}),t.jsx("span",{children:p.label})]},p.href))]},`menu-${f.title}`)),e.displayAddBookmark&&t.jsx(Mo,{variant:"subtle",size:"xs",mt:"xl",leftSection:t.jsx(TR,{size:"0.75rem"}),onClick:()=>c(!0),children:"Add Bookmark"})]})]})}),e.pathname&&e.searchParams&&t.jsx(bT,{pathname:e.pathname,searchParams:e.searchParams,visible:o,onOk:()=>c(!1),onCancel:()=>c(!1)})]})}function IT(e){return t.jsx(pm,{onClick:e.onClick,to:e.to,className:Wc(Oh.link,{[Oh.linkActive]:e.active}),children:e.children})}function MT(e){return e.icon?e.icon:t.jsx(zw,{w:30})}function _T(e,n,a){if(!e||!n||!a)return;let o,c=0;for(let d of a)if(d.links)for(let m of d.links){let f=DT(e,n,m.href);f>c&&(c=f,o=m)}return o}function DT(e,n,a){let o=new URL(a,"https://example.com");if(e!==o.pathname)return 0;let c=["_count","_offset"];for(let[m,f]of o.searchParams.entries())if(!c.includes(m)&&n.get(m)!==f)return 0;let d=1;for(let[m,f]of n.entries())c.includes(m)||o.searchParams.get(m)===f&&d++;return d}function OT(e){let[n,a]=k.useState(localStorage.navbarOpen==="true"),o=Os(),c=Zv();k.useEffect(()=>{function p(){Nc({id:"offline",color:"red",message:"No connection to server",autoClose:!1})}return o.addEventListener("offline",p),()=>o.removeEventListener("offline",p)},[o]);function d(p){localStorage.navbarOpen=p.toString(),a(p)}function m(){d(!1)}function f(){d(!n)}return o.isLoading()?t.jsx(_h,{}):t.jsxs(di,{header:{height:60},navbar:{width:250,breakpoint:"sm",collapsed:{desktop:!c||!n,mobile:!c||!n}},padding:0,children:[c&&t.jsx(fT,{pathname:e.pathname,searchParams:e.searchParams,headerSearchDisabled:e.headerSearchDisabled,logo:e.logo,version:e.version,navbarToggle:f,notifications:e.notifications}),c&&n?t.jsx(UT,{pathname:e.pathname,searchParams:e.searchParams,menus:e.menus,closeNavbar:m,displayAddBookmark:e.displayAddBookmark,resourceTypeSearchDisabled:e.resourceTypeSearchDisabled}):void 0,t.jsx(di.Main,{className:$R.main,children:t.jsx(ay,{children:t.jsx(k.Suspense,{fallback:t.jsx(_h,{}),children:e.children})})})]})}var PT="https://ccda.medplum.com",LT="https://ccda-validator.medplum.com/";function BT(e){let{url:n}=e,[a,o]=k.useState(!1),c=k.useRef(null),[d,m]=k.useState(),[f,p]=k.useState(!1);k.useEffect(()=>{n&&a&&c.current&&(JR(c.current,{command:"loadCcdaXml",value:n}).catch(console.error),o(!1))},[n,a]);let x=async()=>{if(n)try{p(!0);let y=await(await fetch(n)).text(),_=new FormData;_.append("ccdaFile",new Blob([y],{type:"text/xml"}),"ccda.xml");let B=`${LT}referenceccdaservice/?validationObjective=C-CDA_IG_Plus_Vocab&referenceFileName=No%20scenario%20File&curesUpdate=true&severityLevel=WARNING`,P=await fetch(B,{method:"POST",body:_,credentials:"omit",redirect:"manual"});if(!P.ok)throw new Error(`Validation failed: ${P.status} ${P.statusText}`);let L=await P.json();m(L)}catch(y){m(void 0),console.error("CCDA validation error:",y)}finally{p(!1)}},j=()=>{if(!d)return;let y=JSON.stringify(d,null,2);YR(y,"ccda-validation-results")},b=()=>d?d.resultsMetaData.resultMetaData.filter(y=>y?.type.includes("Error")).reduce((y,_)=>y+(_.count||0),0):0;return n?t.jsxs("div",{"data-testid":"ccda-iframe",style:{maxWidth:e.maxWidth},children:[t.jsx("div",{style:{minHeight:400},children:t.jsx("iframe",{title:"C-CDA Viewer",width:"100%",height:"400",ref:c,src:PT,allowFullScreen:!0,frameBorder:0,seamless:!0,onLoad:()=>o(!0)})}),t.jsxs("div",{style:{marginTop:"10px",marginBottom:"10px",display:"flex",alignItems:"center"},children:[t.jsx(Mo,{type:"button",onClick:x,disabled:f,children:f?"Validating...":"Validate"}),d&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginLeft:"15px"},children:[t.jsx("strong",{children:"Validation Results:"})," ",b()," errors found"]}),t.jsx(Mo,{type:"button",onClick:j,color:"green",style:{marginLeft:"auto"},children:"Download Full Results"})]})]})]}):null}function dy(e){let{contentType:n,url:a,title:o}=e.value??{},c=Wv(a);return c?t.jsxs("div",{"data-testid":"attachment-display",children:[n?.startsWith("image/")&&t.jsx("img",{"data-testid":"attachment-image",style:{maxWidth:e.maxWidth},src:c,alt:o}),n?.startsWith("video/")&&t.jsx("video",{"data-testid":"attachment-video",style:{maxWidth:e.maxWidth},controls:!0,children:t.jsx("source",{type:n,src:c})}),(n?.startsWith("text/")||n==="application/json"||n==="application/pdf")&&t.jsx("div",{"data-testid":"attachment-iframe",style:{maxWidth:e.maxWidth,minHeight:400},children:t.jsx("iframe",{title:"Attachment",width:"100%",height:"400",src:c+"#navpanes=0",allowFullScreen:!0,frameBorder:0,seamless:!0})}),n===$t.CDA_XML&&t.jsx(BT,{url:c}),t.jsx("div",{"data-testid":"download-link",style:{padding:"2px 16px 16px 16px"},children:t.jsx(v0,{href:a,"data-testid":"attachment-details",target:"_blank",rel:"noopener noreferrer",download:zT(o),children:o||"Download"})})]}):null}function zT(e){return e?.includes(".")?e:void 0}var Wg={root:"DescriptionList_root",compact:"DescriptionList_compact"};function uy(e){let{children:n,compact:a}=e;return t.jsx("dl",{className:Wc(Wg.root,{[Wg.compact]:a}),children:n})}function Pc(e){return t.jsxs(t.Fragment,{children:[t.jsx("dt",{children:e.term}),t.jsx("dd",{children:e.children})]})}function qT(e){let n=e.values?.map((o,c)=>t.jsx("div",{children:t.jsx(dy,{value:o,maxWidth:e.maxWidth})},"attatchment-"+c)),a;if(e.includeDescriptionListEntry){if(e.property===void 0)throw new Error("props.property is required when includeDescriptionListEntry is true");if(!wa(e.path))throw new Error("props.path is required when includeDescriptionListEntry is true");let o=e.path.split(".").pop();a=t.jsx(Pc,{term:_c(o),children:n})}else a=t.jsx(t.Fragment,{children:n});return a}var e0={paper:"Panel_paper",fill:"Panel_fill"};function t0(e){let{width:n,fill:a,className:o,children:c,...d}=e,m=n?{maxWidth:n}:void 0;return t.jsx(Dw,{className:Wc(e0.paper,a&&e0.fill,o),style:m,shadow:"sm",radius:"sm",withBorder:!0,...d,children:c})}function HT(e){return t.jsx(t.Fragment,{children:Uh(e.value)})}function FT(e){return t.jsx(t.Fragment,{children:Fv(e.value)})}function hy(e){let n=e.value;if(!n)return null;let a=[];return n.value&&a.push(n.value),(n.use||n.system)&&(a.push(" ["),n.use&&a.push(n.use),n.use&&n.system&&a.push(" "),n.system&&a.push(n.system),a.push("]")),t.jsx(t.Fragment,{children:a.join("").trim()})}function $T(e){let n=e.value;return n?t.jsxs(t.Fragment,{children:[n.name,n.name&&": ",n.telecom?.map(a=>t.jsx(hy,{value:a},`telecom-${n.name}-${a.value}`))]}):null}function my(e,n,a){let o=xi(e,n,{profileUrl:a});return o?Array.isArray(o)?[o.map(c=>c.value),o[0].type]:[o.value,o.type]:[void 0,"undefined"]}function VT(e){let{elementDefinitionType:n}=e,a=Os(),o=k.useContext(ya),[c,d]=k.useState(QA("Extension")),m=k.useMemo(()=>{if(wa(n?.profile))return n.profile[0]},[n]),[f,p]=k.useState(m!==void 0);if(k.useEffect(()=>{m&&(p(!0),a.requestProfileSchema(m).then(()=>{let x=Tv(m);p(!1),x&&d(x)}).catch(x=>{p(!1),console.warn(x)}))},[a,m]),m&&(f||!Rv(m)))return t.jsx("div",{children:"Loading..."});if(c.elements["value[x]"]?.max!==0){let[x,j]=my({type:"Extension",value:e.value},"value[x]",m??o.profileUrl);return t.jsx(Ho,{propertyType:j,value:x})}return t.jsx(Lh,{path:e.path,value:{type:c.type,value:e.value},compact:e.compact,ignoreMissingValues:e.ignoreMissingValues,link:e.link,profileUrl:m})}function GT(e){return t.jsxs("div",{children:[e.value?.system,": ",e.value?.value]})}function QT(e){return t.jsx(t.Fragment,{children:H4(e.value)})}function Ph(e){return t.jsx(t.Fragment,{children:da(e.value)})}function JT(e){return t.jsx(t.Fragment,{children:q4(e.value)})}function YT(e){let n=e.value;return n?t.jsxs(t.Fragment,{children:[t.jsx(Ph,{value:n.numerator})," / ",t.jsx(Ph,{value:n.denominator})]}):null}function r0(e){if(!e.value)return null;let n=e.value.display||e.value.reference||Ov(e.value);return e.link!==!1&&e.value.reference?t.jsx(pm,{to:e.value,children:n}):t.jsx(t.Fragment,{children:n})}function KT(e,n,a,o){if(!wa(a?.slices))return[e];let c=new Array(n.length+1);for(let d=0;d<c.length;d++)c[d]=[];for(let d of e){let m=j3(d,n,a.discriminator,o),f=m?n.findIndex(p=>p.name===m):-1;f===-1&&(f=n.length),c[f].push(d)}return c}async function XT({medplum:e,property:n}){return new Promise((a,o)=>{if(!n.slicing){a([]);return}let c=[],d=[],m=[];for(let f of n.slicing.slices){if(!w3(f)){console.debug("Unsupported slice definition",f);continue}let p;wa(f.elements)||(p=f.type[0]?.profile?.[0]),c.push(f),d.push(p),p&&m.push(e.requestProfileSchema(p))}Promise.all(m).then(()=>{for(let f=0;f<c.length;f++){let p=c[f],x=d[f];if(x){let j=Tv(x);p.typeSchema=j}}a(c)}).catch(o)})}function fy(e,n,a){return n!==void 0?t.jsx(e,{value:n,children:a}):a}function ZT(e){let{slice:n,property:a}=e,o=n.typeSchema?.elements??n.elements,c=k.useContext(ya),d=k.useMemo(()=>{if(wa(o))return Kv({parentContext:c,elements:o,path:e.path,profileUrl:n.typeSchema?.url})},[c,e.path,n.typeSchema?.url,o]);return fy(ya.Provider,d,t.jsx(t.Fragment,{children:e.value.map((m,f)=>t.jsx("div",{children:t.jsx(Ho,{property:a,path:e.path,arrayElement:!0,elementDefinitionType:n.type[0],propertyType:n.type[0].code,value:m,ignoreMissingValues:e.ignoreMissingValues,link:e.link})},`${f}-${e.value.length}`))}))}var n0=50;function WT(e){let{property:n,propertyType:a}=e,o=Os(),c=k.useMemo(()=>Array.isArray(e.values)?e.values:[],[e.values]),[d,m]=k.useState(!0),[f,p]=k.useState([]),[x,j]=k.useState(()=>[c]),[b,y]=k.useState(0),_=k.useContext(ya);if(k.useEffect(()=>{XT({medplum:o,property:n}).then(P=>{y(c.length),p(P);let L=c.slice(0,n0),U=KT(L,P,n.slicing,_.profileUrl);j(U),m(!1)}).catch(P=>{console.error(P),m(!1)})},[o,n,_.profileUrl,j,c]),d)return t.jsx("div",{children:"Loading..."});let B;if(n.type[0]?.code!=="Extension"){let P=x[f.length],L=P.map((U,T)=>t.jsx("div",{children:t.jsx(Ho,{path:e.path,arrayElement:!0,property:n,propertyType:a,value:U,ignoreMissingValues:e.ignoreMissingValues,link:e.link})},`${T}-${P.length}`));if(e.includeDescriptionListEntry){if(!wa(e.path))throw new Error("props.path is required when includeDescriptionListEntry is true");let U=e.path.split(".").pop();B=t.jsx(Pc,{term:_c(U),children:L})}else B=t.jsx(t.Fragment,{children:L})}return t.jsxs(t.Fragment,{children:[f.map((P,L)=>{if(!e.path)throw Error(`Displaying a resource property with slices of type ${e.propertyType} requires path`);let U=t.jsx(ZT,{path:e.path,slice:P,property:n,value:x[L],ignoreMissingValues:e.ignoreMissingValues,link:e.link},P.name);return e.includeDescriptionListEntry&&(U=t.jsx(Pc,{term:_c(P.name),children:U},P.name)),U}),B,b>n0&&t.jsx(_r,{justify:"right",children:t.jsxs(br,{children:["... ",b," total values"]})})]})}function Ho(e){let{property:n,propertyType:a,value:o}=e;if(n?.path?.endsWith(".id"))return t.jsxs(Gw,{component:"div",style:{display:"flex",gap:3,alignItems:"center"},children:[o,!Gt(o)&&t.jsx(Qw,{value:o,timeout:2e3,children:({copied:c,copy:d})=>t.jsx(Jw,{label:c?"Copied":"Copy",withArrow:!0,position:"right",children:t.jsx(Yw,{variant:"subtle",color:c?"teal":"gray",onClick:d,children:c?t.jsx(fm,{size:"1rem"}):t.jsx(uR,{size:"1rem"})})})})]});if(n&&(n.isArray||n.max>1)&&!e.arrayElement)return a===he.Attachment?t.jsx(qT,{values:o,maxWidth:e.maxWidth,includeDescriptionListEntry:e.includeArrayDescriptionListEntry,property:n,path:e.path}):t.jsx(WT,{path:e.path,property:n,propertyType:a,values:o,includeDescriptionListEntry:e.includeArrayDescriptionListEntry,ignoreMissingValues:e.ignoreMissingValues,link:e.link});switch(a){case he.boolean:return t.jsx(t.Fragment,{children:o===void 0?"":(!!o).toString()});case he.SystemString:case he.string:return t.jsx("div",{style:{whiteSpace:"pre-wrap"},children:o});case he.code:case he.date:case he.decimal:case he.id:case he.integer:case he.positiveInt:case he.unsignedInt:case he.uri:case he.url:return t.jsx(t.Fragment,{children:o});case he.canonical:return t.jsx(r0,{value:{reference:o},link:e.link});case he.dateTime:case he.instant:return t.jsx(t.Fragment,{children:Ic(o)});case he.markdown:return t.jsx("pre",{children:o});case he.Address:return t.jsx(D3,{value:o});case he.Annotation:return t.jsx(t.Fragment,{children:o?.text});case he.Attachment:return t.jsx(dy,{value:o,maxWidth:e.maxWidth});case he.CodeableConcept:return t.jsx(HT,{value:o});case he.Coding:return t.jsx(FT,{value:o});case he.ContactDetail:return t.jsx($T,{value:o});case he.ContactPoint:return t.jsx(hy,{value:o});case he.HumanName:return t.jsx(oy,{value:o});case he.Identifier:return t.jsx(GT,{value:o});case he.Money:return t.jsx(QT,{value:o});case he.Period:return t.jsx(t.Fragment,{children:D4(o)});case he.Quantity:case he.Duration:return t.jsx(Ph,{value:o});case he.Range:return t.jsx(JT,{value:o});case he.Ratio:return t.jsx(YT,{value:o});case he.Reference:return t.jsx(r0,{value:o,link:e.link});case he.Timing:return t.jsx(t.Fragment,{children:B4(o)});case he.Dosage:case he.UsageContext:if(!e.path)throw Error(`Displaying property of type ${e.propertyType} requires path`);return t.jsx(Lh,{path:e.path,value:{type:a,value:o},compact:!0,ignoreMissingValues:e.ignoreMissingValues});case he.Extension:if(!e.path)throw Error(`Displaying property of type ${e.propertyType} requires path`);return t.jsx(VT,{path:e.path,value:o,compact:!0,ignoreMissingValues:e.ignoreMissingValues,elementDefinitionType:e.elementDefinitionType});default:if(!n)throw Error(`Displaying property of type ${e.propertyType} requires element schema`);if(!e.path)throw Error(`Displaying property of type ${e.propertyType} requires path`);return t.jsx(Lh,{path:e.path,value:{type:n.type[0].code,value:o},compact:!0,ignoreMissingValues:e.ignoreMissingValues})}}var py=["extension","modifierExtension"],e5=O3.filter(e=>!py.includes(e));function Lh(e){let n=e.value,{value:a,type:o}=n,c=k.useContext(ya),d=e.profileUrl??c?.profileUrl,m=k.useMemo(()=>sm(o,d),[d,o]),f=k.useMemo(()=>{if(m)return Kv({parentContext:c,elements:m.elements,path:e.path,profileUrl:m.url,accessPolicyResource:e.accessPolicyResource})},[m,c,e.path,e.accessPolicyResource]);if(Gt(a))return null;if(!m)return t.jsxs("div",{children:[o," not implemented"]});if(typeof a=="object"&&"name"in a&&Object.keys(a).length===1&&typeof a.name=="string")return t.jsx("div",{children:a.name});let p=f??c;return fy(ya.Provider,f,t.jsx(uy,{compact:e.compact,children:Object.entries(p.elements).map(([x,j])=>{if(py.includes(x)&&Gt(j.slicing?.slices)||e5.includes(x)||P3.includes(x)&&j.path.split(".").length===2||x.includes("."))return null;let[b,y]=my(n,x,p.profileUrl);if((e.ignoreMissingValues||j.max===0)&&Gt(b)||e.path.endsWith(".extension")&&(x==="url"||x==="id"))return null;let _=j.max>1||j.isArray,B=t.jsx(Ho,{property:j,propertyType:y,path:e.path+"."+x,value:b,ignoreMissingValues:e.ignoreMissingValues,includeArrayDescriptionListEntry:_,link:e.link},x);return _?B:t.jsx(Pc,{term:_c(x),children:B},x)})}))}k.forwardRef(({label:e,resource:n,active:a,...o},c)=>t.jsx("div",{ref:c,...o,children:t.jsxs(_r,{wrap:"nowrap",children:[t.jsx(ed,{value:n}),t.jsxs("div",{children:[t.jsx(br,{children:e}),t.jsx(br,{size:"xs",c:"dimmed",children:n.birthDate||n.id})]})]})}));I3(_3());function t5(e){let n;try{n=TC(e.path,e.resource)}catch(a){return console.warn("FhirPathDisplay:",a),null}if(n.length>1)throw new Error(`Component "path" for "FhirPathDisplay" must resolve to a single element.        Received ${n.length} elements        [${JSON.stringify(n,null,2)}]`);return t.jsx(Ho,{value:n[0]||"",propertyType:e.propertyType})}var s0=class extends Event{constructor(e,n){super("click"),this.resource=e,this.browserEvent=n}};function r5(e){let n=Os(),[a,o]=k.useState(!1),[c,d]=k.useState(),{query:m,fields:f}=e,[p,x]=k.useState(),[j,b]=k.useState({}),y=k.useRef(p);y.current=p;let _=k.useRef({});_.current=j,k.useEffect(()=>{d(void 0),n.graphql(m).then(x).catch(S=>d(bc(S)))},[n,m]);function B(S,w){S.stopPropagation();let I=S.target.checked,J={..._.current};I?J[w]=!0:delete J[w],b(J)}function P(S){S.stopPropagation();let w=S.target.checked,I={},J=y.current?.data.ResourceList;w&&J&&J.forEach(W=>{W.id&&(I[W.id]=!0)}),b(I)}function L(){let S=y.current?.data.ResourceList;if(!S||S.length===0)return!1;for(let w of S)if(w.id&&!_.current[w.id])return!1;return!0}function U(S,w){QR(S.target)||(Dh(S),S.button!==1&&e.onClick&&e.onClick(new s0(w,S)),S.button===1&&e.onAuxClick&&e.onAuxClick(new s0(w,S)))}if(k.useEffect(()=>{n.requestSchema(e.resourceType).then(()=>o(!0)).catch(console.log)},[n,e.resourceType]),!a)return t.jsx($h,{});let T=e.checkboxesEnabled;return t.jsxs("div",{onContextMenu:S=>Dh(S),"data-testid":"search-control",children:[t.jsxs(Dn,{children:[t.jsx(Dn.Thead,{children:t.jsxs(Dn.Tr,{children:[T&&t.jsx(Dn.Th,{children:t.jsx("input",{type:"checkbox",value:"checked","aria-label":"all-checkbox","data-testid":"all-checkbox",checked:L(),onChange:S=>P(S)})}),f.map(S=>t.jsx(Dn.Th,{children:S.name},S.name))]})}),t.jsx(Dn.Tbody,{children:p?.data.ResourceList.map(S=>S&&t.jsxs(Dn.Tr,{"data-testid":"search-control-row",onClick:w=>U(w,S),onAuxClick:w=>U(w,S),children:[T&&t.jsx(Dn.Td,{children:t.jsx("input",{type:"checkbox",value:"checked","data-testid":"row-checkbox","aria-label":`Checkbox for ${S.id}`,checked:!!j[S.id],onChange:w=>B(w,S.id)})}),f.map(w=>t.jsx(Dn.Td,{children:t.jsx(t5,{propertyType:w.propertyType,path:w.fhirPath,resource:S})},w.name))]},S.id))})]}),p?.data.ResourceList.length===0&&t.jsx("div",{"data-testid":"empty-search",children:"No results"}),c&&t.jsx("div",{"data-testid":"search-error",children:t.jsx("pre",{style:{textAlign:"left"},children:JSON.stringify(c,void 0,2)})}),e.onBulk&&t.jsx(Mo,{onClick:()=>e.onBulk(Object.keys(_.current)),children:"Bulk..."})]})}k.memo(r5);/*! Bundled license information:

@tabler/icons-react/dist/esm/defaultAttributes.mjs:
@tabler/icons-react/dist/esm/createReactComponent.mjs:
@tabler/icons-react/dist/esm/icons/IconAdjustmentsHorizontal.mjs:
@tabler/icons-react/dist/esm/icons/IconAlertCircle.mjs:
@tabler/icons-react/dist/esm/icons/IconArrowDown.mjs:
@tabler/icons-react/dist/esm/icons/IconArrowRight.mjs:
@tabler/icons-react/dist/esm/icons/IconArrowUp.mjs:
@tabler/icons-react/dist/esm/icons/IconBinaryTree.mjs:
@tabler/icons-react/dist/esm/icons/IconBleachOff.mjs:
@tabler/icons-react/dist/esm/icons/IconBleach.mjs:
@tabler/icons-react/dist/esm/icons/IconBoxMultiple.mjs:
@tabler/icons-react/dist/esm/icons/IconBracketsContain.mjs:
@tabler/icons-react/dist/esm/icons/IconBucketOff.mjs:
@tabler/icons-react/dist/esm/icons/IconBucket.mjs:
@tabler/icons-react/dist/esm/icons/IconCake.mjs:
@tabler/icons-react/dist/esm/icons/IconCalendar.mjs:
@tabler/icons-react/dist/esm/icons/IconCheck.mjs:
@tabler/icons-react/dist/esm/icons/IconCheckbox.mjs:
@tabler/icons-react/dist/esm/icons/IconChevronDown.mjs:
@tabler/icons-react/dist/esm/icons/IconChevronRight.mjs:
@tabler/icons-react/dist/esm/icons/IconChevronUp.mjs:
@tabler/icons-react/dist/esm/icons/IconCircleMinus.mjs:
@tabler/icons-react/dist/esm/icons/IconCirclePlus.mjs:
@tabler/icons-react/dist/esm/icons/IconCloudUpload.mjs:
@tabler/icons-react/dist/esm/icons/IconColumns.mjs:
@tabler/icons-react/dist/esm/icons/IconCopy.mjs:
@tabler/icons-react/dist/esm/icons/IconCurrencyDollar.mjs:
@tabler/icons-react/dist/esm/icons/IconDots.mjs:
@tabler/icons-react/dist/esm/icons/IconEdit.mjs:
@tabler/icons-react/dist/esm/icons/IconEmpathize.mjs:
@tabler/icons-react/dist/esm/icons/IconEqualNot.mjs:
@tabler/icons-react/dist/esm/icons/IconEqual.mjs:
@tabler/icons-react/dist/esm/icons/IconFileAlert.mjs:
@tabler/icons-react/dist/esm/icons/IconFilePlus.mjs:
@tabler/icons-react/dist/esm/icons/IconFilter.mjs:
@tabler/icons-react/dist/esm/icons/IconLanguage.mjs:
@tabler/icons-react/dist/esm/icons/IconLogout.mjs:
@tabler/icons-react/dist/esm/icons/IconMapPin.mjs:
@tabler/icons-react/dist/esm/icons/IconMathGreater.mjs:
@tabler/icons-react/dist/esm/icons/IconMathLower.mjs:
@tabler/icons-react/dist/esm/icons/IconMessage.mjs:
@tabler/icons-react/dist/esm/icons/IconPlus.mjs:
@tabler/icons-react/dist/esm/icons/IconRefresh.mjs:
@tabler/icons-react/dist/esm/icons/IconSearch.mjs:
@tabler/icons-react/dist/esm/icons/IconSettings.mjs:
@tabler/icons-react/dist/esm/icons/IconSortAscending.mjs:
@tabler/icons-react/dist/esm/icons/IconSortDescending.mjs:
@tabler/icons-react/dist/esm/icons/IconSquare.mjs:
@tabler/icons-react/dist/esm/icons/IconStethoscope.mjs:
@tabler/icons-react/dist/esm/icons/IconSwitchHorizontal.mjs:
@tabler/icons-react/dist/esm/icons/IconTableExport.mjs:
@tabler/icons-react/dist/esm/icons/IconTrash.mjs:
@tabler/icons-react/dist/esm/icons/IconX.mjs:
@tabler/icons-react/dist/esm/tabler-icons-react.mjs:
  (**
   * @license @tabler/icons-react v3.34.1 - MIT
   *
   * This source code is licensed under the MIT license.
   * See the LICENSE file in the root directory of this source tree.
   *)

signature_pad/dist/signature_pad.js:
  (*!
   * Signature Pad v5.0.10 | https://github.com/szimek/signature_pad
   * (c) 2025 Szymon Nowak | Released under the MIT license
   *)
*/function xy({onSuccess:e,onCancel:n}){const[a,o]=k.useState("http://localhost:8080"),[c,d]=k.useState("proxy-smart"),[m,f]=k.useState(""),[p,x]=k.useState(""),[j,b]=k.useState(!1),[y,_]=k.useState(!1),[B,P]=k.useState(null),[L,U]=k.useState(null),{t:T}=hn(),S=ln(),w=async()=>{if(!a.trim()||!c.trim()){U("Please enter both Keycloak URL and realm name");return}b(!0),P(null),U(null);try{const J=await S.admin.postAdminKeycloakConfigTest({postAdminKeycloakConfigTestRequest:{baseUrl:a.trim(),realm:c.trim()}});P({success:J.success,message:J.message||J.error||"Test completed"})}catch(J){console.error("Failed to test Keycloak connection:",J),P({success:!1,message:"Failed to test connection. Please check the URL and try again."})}finally{b(!1)}},I=async()=>{if(!a.trim()||!c.trim()){U("Please enter both Keycloak URL and realm name");return}_(!0),U(null);try{const J=await S.admin.postAdminKeycloakConfigConfigure({postAdminKeycloakConfigConfigureRequest:{baseUrl:a.trim(),realm:c.trim(),adminClientId:m.trim()||void 0,adminClientSecret:p.trim()||void 0}});J.success?e():U(J.error||"Failed to save configuration")}catch(J){console.error("Failed to save Keycloak configuration:",J),U("Failed to save configuration. Please try again.")}finally{_(!1)}};return t.jsxs("div",{className:"p-6 space-y-8 bg-background min-h-full",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 rounded-3xl flex items-center justify-center shadow-2xl border border-blue-500/20",children:t.jsx(Pe,{className:"w-10 h-10 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent tracking-tight",children:T("Keycloak Configuration")}),t.jsx("p",{className:"text-muted-foreground text-lg mt-2",children:T("Configure your identity provider to enable secure authentication")})]})]}),L&&t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/50 rounded-2xl p-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-red-100 dark:bg-red-900/50 rounded-xl flex items-center justify-center",children:t.jsx(tt,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200",children:T("Configuration Error")}),t.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:L})]})]})}),B&&t.jsx("div",{className:`${B.success?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800/50":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800/50"} border rounded-2xl p-4`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${B.success?"bg-emerald-100 dark:bg-emerald-900/50":"bg-red-100 dark:bg-red-900/50"}`,children:B.success?t.jsx(qn,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):t.jsx(tt,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),t.jsxs("div",{children:[t.jsx("h4",{className:`font-semibold ${B.success?"text-emerald-800 dark:text-emerald-200":"text-red-800 dark:text-red-200"}`,children:B.success?T("Connection Successful"):T("Connection Failed")}),t.jsx("p",{className:`text-sm ${B.success?"text-emerald-700 dark:text-emerald-300":"text-red-700 dark:text-red-300"}`,children:B.message})]})]})}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 sm:p-8 rounded-3xl border border-border/50 shadow-lg space-y-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center",children:t.jsx(_t,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground",children:T("Server Configuration")}),t.jsx("p",{className:"text-muted-foreground",children:T("Basic connection settings for your Keycloak server")})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs(re,{htmlFor:"baseUrl",className:"text-sm font-semibold text-foreground flex items-center space-x-2",children:[t.jsx(_t,{className:"w-4 h-4"}),t.jsx("span",{children:T("Keycloak Base URL")})]}),t.jsx(Ae,{id:"baseUrl",type:"url",placeholder:"http://localhost:8080",value:a,onChange:J=>o(J.target.value),disabled:j||y,className:"h-12 rounded-xl border-border/50 bg-background/50 focus:border-primary/50 focus:ring-primary/20"}),t.jsxs("p",{className:"text-xs text-muted-foreground flex items-start space-x-2",children:[t.jsx(xa,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:T("The complete URL where your Keycloak server is running")})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"realm",className:"text-sm font-semibold text-foreground",children:T("Realm Name")}),t.jsx(Ae,{id:"realm",placeholder:"proxy-smart",value:c,onChange:J=>d(J.target.value),disabled:j||y,className:"h-12 rounded-xl border-border/50 bg-background/50 focus:border-primary/50 focus:ring-primary/20"}),t.jsxs("p",{className:"text-xs text-muted-foreground flex items-start space-x-2",children:[t.jsx(xa,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),t.jsx("span",{children:T("The Keycloak realm that contains your users and clients")})]})]})]})]}),t.jsxs("div",{className:"border-t border-border/30 pt-8",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-2xl flex items-center justify-center",children:t.jsx(Pe,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-bold text-foreground",children:[T("Admin Client"),t.jsxs("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:["(",T("Optional"),")"]})]}),t.jsx("p",{className:"text-muted-foreground",children:T("Required for dynamic client registration and advanced features")})]})]}),t.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800/50 rounded-2xl p-4 mb-6",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(xa,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-amber-800 dark:text-amber-200 text-sm",children:T("Optional Configuration")}),t.jsx("p",{className:"text-amber-700 dark:text-amber-300 text-sm",children:T("You can skip this section and configure it later. The admin client is only needed for automatic SMART app registration.")})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"adminClientId",className:"text-sm font-semibold text-foreground",children:T("Admin Client ID")}),t.jsx(Ae,{id:"adminClientId",placeholder:"admin-client",value:m,onChange:J=>f(J.target.value),disabled:j||y,className:"h-12 rounded-xl border-border/50 bg-background/50 focus:border-primary/50 focus:ring-primary/20"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:T("Client ID with admin permissions for dynamic registration")})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"adminClientSecret",className:"text-sm font-semibold text-foreground",children:T("Admin Client Secret")}),t.jsx(Ae,{id:"adminClientSecret",type:"password",placeholder:T("Enter client secret..."),value:p,onChange:J=>x(J.target.value),disabled:j||y,className:"h-12 rounded-xl border-border/50 bg-background/50 focus:border-primary/50 focus:ring-primary/20"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:T("Secret for the admin client (keep this secure)")})]})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[t.jsx(ne,{variant:"outline",onClick:w,disabled:j||y||!a.trim()||!c.trim(),className:"flex-1 h-14 rounded-xl text-base font-semibold border-border/50 bg-background/50 hover:bg-accent/50 transition-all duration-200",children:j?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-5 h-5 mr-3 animate-spin"}),T("Testing Connection...")]}):t.jsxs(t.Fragment,{children:[t.jsx(_t,{className:"w-5 h-5 mr-3"}),T("Test Connection")]})}),t.jsx(ne,{onClick:I,disabled:y||j||!a.trim()||!c.trim(),className:"flex-1 h-14 rounded-xl text-base font-semibold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 text-white border border-blue-500/20 shadow-lg hover:shadow-xl transition-all duration-200",children:y?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-5 h-5 mr-3 animate-spin"}),T("Saving Configuration...")]}):t.jsxs(t.Fragment,{children:[t.jsx(Pe,{className:"w-5 h-5 mr-3"}),T("Save & Connect")]})}),t.jsx(ne,{variant:"ghost",onClick:n,disabled:j||y,className:"h-14 px-8 rounded-xl text-base font-semibold hover:bg-accent/50 transition-all duration-200",children:T("Cancel")})]})]})}function n5({onNavigate:e}){const{profile:n,fetchProfile:a,clientApis:o}=Vn(),{t:c}=hn(),[d,m]=k.useState(!1),[f,p]=k.useState(null);k.useEffect(()=>{if(f){const ee=setTimeout(()=>{p(null)},5e3);return()=>clearTimeout(ee)}},[f]);const[x,j]=k.useState({smartAppsCount:0,usersCount:0,serversCount:0,identityProvidersCount:0,loading:!0,error:null}),[b,y]=k.useState({baseUrl:null,realm:null,hasAdminClient:!1,adminClientId:null,loading:!0,error:null}),[_,B]=k.useState({totalFlows:0,successRate:0,averageResponseTime:0,activeTokens:0,loading:!0,error:null}),[P,L]=k.useState({servers:[],loading:!0,error:null}),[U,T]=k.useState({apiResponseTime:0,databaseStatus:"checking",systemUptime:"N/A %",lastBackup:null,serverVersion:"unknown",keycloakStatus:"checking",memoryUsage:"unknown",aiAgentStatus:"checking",aiAgentSearchType:"checking"});k.useEffect(()=>{(async()=>{const X=Rs.isOpenAIAvailable(),Q=X?"connected":"fallback",ie=X?"openai_powered":"semantic_search";T(me=>({...me,aiAgentStatus:Q,aiAgentSearchType:ie}));try{j(pe=>({...pe,loading:!0,error:null})),B(pe=>({...pe,loading:!0,error:null})),L(pe=>({...pe,loading:!0,error:null}));const[me,R,D,K,de,Ce,_e]=await Promise.allSettled([o.smartApps.getAdminSmartApps(),o.healthcareUsers.getAdminHealthcareUsers(),o.servers.getFhirServers(),o.identityProviders.getAdminIdpsCount(),o.oauthMonitoring.getMonitoringOauthAnalytics(),o.server.getStatus(),o.admin.getAdminKeycloakConfigStatus()]);if(j({smartAppsCount:me.status==="fulfilled"&&Array.isArray(me.value)?me.value.length:0,usersCount:R.status==="fulfilled"&&Array.isArray(R.value)?R.value.length:0,serversCount:D.status==="fulfilled"&&D.value.servers?.length||0,identityProvidersCount:K.status==="fulfilled"&&K.value.count||0,loading:!1,error:null}),de.status==="fulfilled"){const pe=de.value;B({totalFlows:pe.totalFlows||0,successRate:pe.successRate||0,averageResponseTime:pe.averageResponseTime||0,activeTokens:pe.activeTokens||0,loading:!1,error:null})}else B(pe=>({...pe,loading:!1,error:"Failed to load OAuth analytics"}));if(Ce.status==="fulfilled"){const pe=Ce.value,ve=pe.uptime||0,Le=Math.floor(ve/3600),je=Le>0?`${Le}h`:`${Math.floor(ve/60)}m`,De=Rs.isOpenAIAvailable(),Be=De?"connected":"fallback",ze=De?"openai_powered":"semantic_search";let ut="unknown";pe.memory&&(ut=`${pe.memory.used}MB / ${pe.memory.total}MB`),T(ur=>({...ur,databaseStatus:"healthy",systemUptime:je,lastBackup:null,serverVersion:pe.version,keycloakStatus:pe.keycloak?.status||"unknown",memoryUsage:ut,aiAgentStatus:Be,aiAgentSearchType:ze}))}else{const pe=Rs.isOpenAIAvailable(),ve=pe?"connected":"fallback",Le=pe?"openai_powered":"semantic_search";T(je=>({...je,databaseStatus:"error",keycloakStatus:"error",aiAgentStatus:ve,aiAgentSearchType:Le}))}if(_e.status==="fulfilled"){const pe=_e.value;y({baseUrl:pe.baseUrl,realm:pe.realm,hasAdminClient:pe.hasAdminClient,adminClientId:pe.adminClientId,loading:!1,error:null})}else y(pe=>({...pe,loading:!1,error:"Failed to load Keycloak configuration"}));const Re=performance.now();try{await o.smartApps.getAdminSmartApps();const pe=performance.now();T(ve=>({...ve,apiResponseTime:Math.round(pe-Re)}))}catch{T(pe=>({...pe,apiResponseTime:0}))}if(D.status==="fulfilled"){const ve=D.value.servers||[];L({servers:ve,loading:!1,error:null})}else L({servers:[],loading:!1,error:"Failed to load FHIR servers data"})}catch(me){console.error("Failed to fetch dashboard data:",me),j(R=>({...R,loading:!1,error:"Failed to load dashboard data"})),B(R=>({...R,loading:!1,error:"Failed to load OAuth analytics"}))}})()},[o]);const S=async()=>{await a(),j(ee=>({...ee,loading:!0})),T(ee=>({...ee,aiAgentStatus:"checking",aiAgentSearchType:"checking"}))},w=async()=>{bg({title:c("Shutdown Server"),message:c("Are you sure you want to shutdown the server? This will stop all services. Please provide a reason for this action:"),type:"warning",confirmText:c("Shutdown Server"),cancelText:c("Cancel"),inputLabel:c("Shutdown Reason"),inputPlaceholder:c("e.g., Scheduled maintenance, emergency stop, etc."),inputRequired:!0,inputType:"textarea",inputValidation:ee=>ee.trim().length<10?c("Reason must be at least 10 characters long"):null,onConfirm:async ee=>{try{await o.admin.postAdminShutdown(),mc({title:c("Server Shutdown Initiated"),message:c("Server shutdown has been initiated successfully. Reason: {{reason}}",{reason:ee}),type:"success"})}catch(X){mc({title:c("Shutdown Failed"),message:c("Failed to shutdown server: {{error}}",{error:X instanceof Error?X.message:"Unknown error"}),type:"error"})}}})},I=async()=>{bg({title:c("Restart Server"),message:c("Are you sure you want to restart the server? This will temporarily interrupt all services. Please provide a reason for this action:"),type:"warning",confirmText:c("Restart Server"),cancelText:c("Cancel"),inputLabel:c("Restart Reason"),inputPlaceholder:c("e.g., Configuration changes, performance issues, updates, etc."),inputRequired:!0,inputType:"textarea",inputValidation:ee=>ee.trim().length<10?c("Reason must be at least 10 characters long"):null,onConfirm:async ee=>{try{await o.admin.postAdminRestart(),mc({title:c("Server Restart Initiated"),message:c("Server restart has been initiated successfully. Reason: {{reason}}",{reason:ee}),type:"success"})}catch(X){mc({title:c("Restart Failed"),message:c("Failed to restart server: {{error}}",{error:X instanceof Error?X.message:"Unknown error"}),type:"error"})}}})},J=async()=>{try{const ee=await o.server.getHealth();p({type:"success",message:c("Health check completed: Server is {{status}}",{status:ee.status})})}catch(ee){p({type:"error",message:c("Failed to perform health check: {{error}}",{error:ee instanceof Error?ee.message:"Unknown error"})})}},W=()=>{n?jA({title:c("Keycloak Configuration"),message:c("⚠️ Warning: Changing the Keycloak URL or client configuration may log you out of the system. You may need to log in again after making changes. Do you want to continue?"),type:"warning",confirmText:c("Continue"),cancelText:c("Cancel"),onConfirm:()=>{m(!0)}}):m(!0)},C=()=>{m(!1),p({type:"success",message:c("Keycloak configuration saved successfully")}),S()},$=()=>{m(!1)};return t.jsxs("div",{className:"p-4 sm:p-6 space-y-6 bg-background min-h-full",children:[f&&t.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg border ${f.type==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800/50 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800/50 text-red-800 dark:text-red-200"} animate-in slide-in-from-top-2 duration-300`,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[f.type==="success"?t.jsx(Nt,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):t.jsx(tt,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),t.jsx("span",{className:"font-medium",children:f.message}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>p(null),className:"ml-2 h-6 w-6 p-0 text-current hover:bg-current/10",children:t.jsx($n,{className:"h-4 w-4"})})]})}),t.jsx("div",{className:"bg-muted/50 p-4 sm:p-6 lg:p-8 rounded-3xl border border-border/50 shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:c("Proxy Smart Dashboard")}),t.jsxs("div",{className:"text-muted-foreground flex items-center text-lg",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Jh,{className:"w-5 h-5 text-primary"})}),c("Welcome back, {{name}}",{name:n?.firstName&&n?.lastName?`${n.firstName} ${n.lastName}`:n?.username||c("Healthcare Administrator")})]}),t.jsxs("div",{className:"mt-4 flex items-center space-x-3 p-3 bg-muted/20 rounded-xl border border-border/30",children:[U.aiAgentStatus==="connected"?t.jsx(Uo,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400"}):U.aiAgentStatus==="fallback"?t.jsx(Uo,{className:"w-5 h-5 text-yellow-500 dark:text-yellow-400"}):U.aiAgentStatus==="checking"?t.jsx(Uo,{className:"w-5 h-5 text-muted-foreground animate-pulse"}):t.jsx(tt,{className:"w-5 h-5 text-red-500 dark:text-red-400"}),t.jsxs("div",{children:[t.jsx("span",{className:`font-semibold text-sm ${U.aiAgentStatus==="connected"?"text-emerald-600 dark:text-emerald-400":U.aiAgentStatus==="fallback"?"text-yellow-600 dark:text-yellow-400":U.aiAgentStatus==="checking"?"text-muted-foreground":"text-red-600 dark:text-red-400"}`,children:U.aiAgentStatus==="connected"?c("AI Assistant: OpenAI Connected"):U.aiAgentStatus==="fallback"?c("AI Assistant: API Key invalid"):U.aiAgentStatus==="checking"?c("AI Assistant: Checking..."):c("AI Assistant: Disconnected")}),t.jsx("div",{className:"text-xs text-muted-foreground",children:U.aiAgentSearchType==="openai_powered"?c("Using OpenAI GPT for smart assistance"):U.aiAgentSearchType==="semantic_search"?c("Using semantic search as fallback"):U.aiAgentSearchType==="checking"?c("..."):c("No AI assistance available")})]})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs("button",{onClick:S,className:"px-6 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(Dr,{className:"w-4 h-4 mr-2 inline"}),c("Refresh Data")]}),t.jsxs("button",{onClick:J,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white font-semibold rounded-xl hover:from-emerald-500 hover:to-green-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-emerald-500/20",children:[t.jsx(Qh,{className:"w-4 h-4 mr-2 inline"}),c("Health Check")]}),t.jsxs("button",{onClick:I,className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-amber-600 text-white font-semibold rounded-xl hover:from-orange-500 hover:to-amber-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-orange-500/20",children:[t.jsx(I0,{className:"w-4 h-4 mr-2 inline"}),c("Restart Server")]}),t.jsx("button",{onClick:w,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-rose-600 text-white font-semibold rounded-xl hover:from-red-500 hover:to-rose-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-red-500/20",children:t.jsx(GN,{className:"w-4 h-4 inline"})})]})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:t.jsx(Yh,{className:"w-4 h-4 text-primary"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("SMART Apps")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.loading?"...":x.smartAppsCount}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Active")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:t.jsx(yr,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("Users")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.loading?"...":x.usersCount}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Registered")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-500/10 rounded-lg flex items-center justify-center",children:t.jsx(Lt,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("FHIR Servers")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.loading?"...":x.serversCount}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Connected")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-violet-500/10 rounded-lg flex items-center justify-center",children:t.jsx(Pe,{className:"w-4 h-4 text-violet-600 dark:text-violet-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("Identity Providers")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:x.loading?"...":x.identityProvidersCount}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Active")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center",children:t.jsx(ci,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("OAuth Flows")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:_.loading?"...":_.totalFlows.toLocaleString()}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Processed")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-green-500/10 rounded-lg flex items-center justify-center",children:t.jsx(Nt,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("Success Rate")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:_.loading?"...":_.totalFlows===0?"--":`${_.successRate.toFixed(1)}%`}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("OAuth Success")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-indigo-500/10 rounded-lg flex items-center justify-center",children:t.jsx(jc,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("Avg Response")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:_.loading?"...":_.totalFlows===0?"--":`${_.averageResponseTime}ms`}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Performance")})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 rounded-xl border border-border/50 shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-purple-500/10 rounded-lg flex items-center justify-center",children:t.jsx(Pe,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),t.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:c("Active Tokens")})]}),t.jsx("div",{className:"text-2xl font-bold text-foreground",children:_.loading?"...":_.activeTokens.toLocaleString()}),t.jsx("p",{className:"text-xs text-muted-foreground",children:c("Valid")})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 sm:p-6 lg:p-8 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center mr-4 shadow-sm",children:t.jsx(fa,{className:"w-7 h-7 text-primary"})}),t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:c("System Health")})]}),t.jsxs(ne,{variant:b.hasAdminClient?"default":"outline",size:"sm",onClick:W,className:`rounded-xl px-4 py-2 transition-all duration-200 ${b.hasAdminClient?"bg-blue-600 hover:bg-blue-700 text-white border-blue-500/30":"bg-amber-500/10 hover:bg-amber-500/20 border-amber-500/30 text-amber-700 dark:text-amber-300"}`,children:[t.jsx(Pe,{className:"w-4 h-4 mr-2"}),b.hasAdminClient?c("Keycloak Config"):c("Setup Keycloak")]})]}),t.jsx(uy,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("API Response Time")}),t.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-semibold flex items-center",children:[t.jsx("div",{className:"w-3 h-3 bg-emerald-500 dark:bg-emerald-400 rounded-full mr-3 animate-pulse shadow-lg"}),U.apiResponseTime>0?`${U.apiResponseTime}ms`:"..."]})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("Keycloak Database")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Nt,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400 mr-2"}),t.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-semibold",children:U.databaseStatus==="healthy"?c("Healthy"):U.databaseStatus})]})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("Keycloak Auth")}),t.jsxs("div",{className:"flex items-center",children:[b.hasAdminClient?t.jsx(Nt,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400 mr-2"}):t.jsx(tt,{className:"w-5 h-5 text-yellow-500 dark:text-yellow-400 mr-2"}),t.jsx("span",{className:`font-semibold ${b.hasAdminClient?"text-emerald-600 dark:text-emerald-400":"text-yellow-600 dark:text-yellow-400"}`,children:b.loading?c("Checking..."):b.hasAdminClient?c("Configured"):c("Not Configured")})]})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("Keycloak Realm")}),t.jsx("span",{className:"text-foreground font-semibold",children:b.loading?c("Loading..."):b.realm||c("Not Set")})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("Keycloak URL")}),t.jsx("span",{className:"text-foreground font-semibold text-xs",children:b.loading?c("Loading..."):b.baseUrl?b.baseUrl.replace(/\/$/,""):c("Not Set")})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("System Uptime")}),t.jsx("span",{className:"text-foreground font-semibold",children:U.systemUptime})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("Memory Usage")}),t.jsx("span",{className:"text-foreground font-semibold",children:U.memoryUsage})]}),t.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted/30 rounded-xl",children:[t.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:c("Server Version")}),t.jsx("span",{className:"text-foreground font-semibold",children:U.serverVersion})]})]})})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-4 sm:p-6 lg:p-8 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-14 h-14 bg-orange-500/10 dark:bg-orange-400/20 rounded-2xl flex items-center justify-center mr-4 shadow-sm",children:t.jsx(Lt,{className:"w-7 h-7 text-orange-600 dark:text-orange-400"})}),t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:c("FHIR Servers Health")})]}),t.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>e("fhir-servers"),className:"bg-orange-500/10 hover:bg-orange-500/20 border-orange-500/30 text-orange-700 dark:text-orange-300 rounded-xl px-4 py-2 transition-all duration-200",children:[t.jsx(Lt,{className:"w-4 h-4 mr-2"}),c("Manage Servers")]})]}),t.jsx("div",{className:"space-y-4",children:P.loading?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-muted/30 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Lt,{className:"w-8 h-8 text-muted-foreground animate-pulse"})}),t.jsx("p",{className:"text-muted-foreground text-sm",children:c("Loading FHIR servers...")})]}):P.error?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(tt,{className:"w-8 h-8 text-red-500"})}),t.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm font-medium",children:P.error})]}):P.servers.length>0?P.servers.map((ee,X)=>t.jsxs("div",{className:`flex items-center justify-between py-4 px-5 rounded-xl transition-all duration-200 border ${ee.supported&&!ee.error?"bg-emerald-500/5 dark:bg-emerald-400/10 hover:bg-emerald-500/10 dark:hover:bg-emerald-400/20 border-emerald-500/20 dark:border-emerald-400/30":ee.error?"bg-red-500/5 dark:bg-red-400/10 hover:bg-red-500/10 dark:hover:bg-red-400/20 border-red-500/20 dark:border-red-400/30":"bg-yellow-500/5 dark:bg-yellow-400/10 hover:bg-yellow-500/10 dark:hover:bg-yellow-400/20 border-yellow-500/20 dark:border-yellow-400/30"}`,children:[t.jsxs("div",{className:"flex items-center flex-1",children:[t.jsx("div",{className:`w-4 h-4 rounded-full mr-4 shadow-sm ${ee.supported&&!ee.error?"bg-emerald-500 dark:bg-emerald-400":ee.error?"bg-red-500 dark:bg-red-400":"bg-yellow-500 dark:bg-yellow-400"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-foreground font-medium",children:ee.name}),t.jsx("span",{className:"text-xs bg-muted/80 px-2 py-1 rounded-full font-medium text-muted-foreground",children:ee.fhirVersion})]}),t.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:ee.endpoints?.base||ee.url}),ee.error&&t.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:ee.error})]})]}),t.jsx("div",{className:"text-right",children:t.jsx("span",{className:`text-sm font-semibold ${ee.supported&&!ee.error?"text-emerald-600 dark:text-emerald-400":ee.error?"text-red-600 dark:text-red-400":"text-yellow-600 dark:text-yellow-400"}`,children:ee.supported&&!ee.error?c("Healthy"):ee.error?c("Error"):c("Unknown")})})]},ee.id||X)):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-muted/30 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(Lt,{className:"w-8 h-8 text-muted-foreground"})}),t.jsx("h4",{className:"text-lg font-semibold text-foreground mb-2",children:c("No FHIR Servers")}),t.jsx("p",{className:"text-muted-foreground text-sm",children:c("No FHIR servers have been configured yet.")}),t.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:c('Click "Manage Servers" to add your first FHIR server.')})]})})]})]}),t.jsx("div",{className:"bg-card/90 backdrop-blur-sm border border-border/50 rounded-2xl p-4 sm:p-6 shadow-lg",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-muted/30 rounded-xl",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:t.jsx(Pe,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground",children:c("Platform (UI) Version")}),t.jsxs("div",{className:"text-lg font-bold text-foreground",children:["v",un.version]})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-muted/30 rounded-xl",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-lg flex items-center justify-center",children:t.jsx(Nt,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-muted-foreground",children:c("Environment")}),t.jsx("div",{className:"text-lg font-bold text-foreground",children:un.app.environment.charAt(0).toUpperCase()+un.app.environment.slice(1)})]})]})]})}),t.jsx(cr,{open:d,onOpenChange:m,children:t.jsxs(Kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsx(Xt,{children:t.jsxs(Zt,{className:"flex items-center space-x-2",children:[t.jsx(Pe,{className:"w-5 h-5 text-primary"}),t.jsx("span",{children:c("Keycloak Configuration")})]})}),t.jsx("div",{className:"mt-4",children:t.jsx(xy,{onSuccess:C,onCancel:$})})]})})]})}function Bh({className:e,...n}){return t.jsx(Kw,{"data-slot":"avatar",className:Ie("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...n})}function zh({className:e,...n}){return t.jsx(Xw,{"data-slot":"avatar-image",className:Ie("aspect-square size-full",e),...n})}function qh({className:e,...n}){return t.jsx(Zw,{"data-slot":"avatar-fallback",className:Ie("bg-muted flex size-full items-center justify-center rounded-full",e),...n})}function s5({className:e,children:n,viewport:a=!0,...o}){return t.jsxs(Ww,{"data-slot":"navigation-menu","data-viewport":a,className:Ie("group/navigation-menu relative flex max-w-max flex-1 items-center justify-center",e),...o,children:[n,a&&t.jsx(o5,{})]})}function a5({className:e,...n}){return t.jsx(e1,{"data-slot":"navigation-menu-list",className:Ie("group flex flex-1 list-none items-center justify-center gap-1",e),...n})}function i5({className:e,...n}){return t.jsx(t1,{"data-slot":"navigation-menu-item",className:Ie("relative",e),...n})}function o5({className:e,...n}){return t.jsx("div",{className:Ie("absolute top-full left-0 isolate z-50 flex justify-center"),children:t.jsx(r1,{"data-slot":"navigation-menu-viewport",className:Ie("origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",e),...n})})}const l5={theme:"system",setTheme:()=>null},gy=k.createContext(l5);function c5({children:e,defaultTheme:n="system",storageKey:a="vite-ui-theme",...o}){const[c,d]=k.useState(()=>$j(a,n));k.useEffect(()=>{const p=window.document.documentElement;if(p.classList.remove("light","dark"),c==="system"){const x=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";p.classList.add(x);return}p.classList.add(c)},[c]);const m=k.useCallback(p=>{Vj(a,p),d(p)},[a]),f=k.useMemo(()=>({theme:c,setTheme:m}),[c,m]);return t.jsx(gy.Provider,{...o,value:f,children:e})}const d5=()=>{const e=k.useContext(gy);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};function u5({activeTab:e,onTabChange:n,profile:a,onChatToggle:o}){const c=ba(w=>w.logout),{language:d,setLanguage:m}=Qc(),{theme:f,setTheme:p}=d5(),{t:x}=hn(),[j,b]=k.useState(!1),y=async()=>{await c()},_=async w=>{console.debug("🔄 Navigation: Language change requested to:",w),console.debug("🔄 Navigation: Current language:",d);try{await m(w),console.debug("✅ Navigation: Language change completed")}catch(I){console.error("❌ Navigation: Language change failed:",I)}},B=[{code:"en",name:"English",flag:"🇺🇸"},{code:"de",name:"Deutsch",flag:"🇩🇪"}],P=[{id:"light",name:x("Light"),icon:lj},{id:"dark",name:x("Dark"),icon:BN},{id:"system",name:x("System"),icon:PN}],L=w=>{p(w)},U=w=>w.firstName&&w.lastName?`${w.firstName} ${w.lastName}`:w.firstName?w.firstName:w.username?w.username:w.email?w.email.split("@")[0]:x("User"),T=w=>U(w).split(" ").map(J=>J[0]).join("").substring(0,2).toUpperCase(),S=[{id:"smart-apps",label:x("SMART Apps"),description:x("App Management"),icon:Yh},{id:"users",label:x("Users"),description:x("User Management"),icon:yr},{id:"fhir-servers",label:x("FHIR Servers"),description:x("Server Management"),icon:_t},{id:"idp",label:x("Identity Providers"),description:x("IdP Management"),icon:Pe},{id:"scopes",label:x("Scope Management"),description:x("SMART Scopes"),icon:ga},{id:"launch-context",label:x("Launch Context"),description:x("Context Configuration"),icon:zc},{id:"oauth-monitoring",label:x("Monitoring"),description:x("Flow Analytics"),icon:ci}];return t.jsx("nav",{className:"bg-background/80 backdrop-blur-2xl border-b border-border/40 shadow-2xl sticky top-0 z-50 transition-all duration-300",children:t.jsx("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6",children:t.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16 lg:h-20",children:[t.jsxs("div",{className:"flex items-center space-x-3 flex-shrink-0 min-w-0",children:[t.jsx("div",{className:"w-8 h-8 sm:w-9 sm:h-9 bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:t.jsx(Qh,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse"})}),t.jsx("div",{className:"hidden md:block",children:t.jsxs(ne,{variant:e==="dashboard"?"default":"ghost",onClick:()=>n("dashboard"),className:`group flex items-center space-x-2 h-9 px-3 rounded-lg transition-all duration-300 ${e==="dashboard"?"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"hover:bg-muted/80 text-foreground hover:shadow-md"}`,children:[t.jsx(mh,{className:`w-4 h-4 flex-shrink-0 ${e==="dashboard"?"scale-110":"group-hover:scale-105"}`}),t.jsx("span",{className:"text-sm font-semibold whitespace-nowrap",children:x("Dashboard")})]})})]}),t.jsxs("div",{className:"flex-1 flex justify-center px-2 lg:px-4 min-w-0 overflow-hidden",children:[t.jsx(s5,{className:"hidden lg:block w-full",children:t.jsx(a5,{className:"flex flex-wrap justify-center gap-1",children:S.map(w=>{const I=w.icon;return t.jsx(i5,{children:t.jsxs(ne,{variant:e===w.id?"default":"ghost",onClick:()=>n(w.id),className:`group flex items-center space-x-1 h-9 px-2 lg:px-3 rounded-lg transition-all duration-300 ${e===w.id?"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"hover:bg-muted/80 text-foreground hover:shadow-md"}`,children:[t.jsx(I,{className:`w-4 h-4 flex-shrink-0 ${e===w.id?"scale-110":"group-hover:scale-105"}`}),t.jsx("span",{className:"hidden xl:block text-xs font-semibold whitespace-nowrap",children:w.label})]})},w.id)})})}),t.jsx("div",{className:"lg:hidden w-full max-w-xs",children:t.jsxs(mi,{children:[t.jsx(fi,{asChild:!0,children:t.jsx(ne,{variant:"ghost",className:"w-full flex items-center justify-center space-x-2 h-9 px-3 rounded-lg hover:bg-muted/80 transition-all duration-300",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[e==="dashboard"?t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-md flex items-center justify-center",children:t.jsx(mh,{className:"w-3 h-3 text-white"})}):S.find(w=>w.id===e)?.icon&&t.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-md flex items-center justify-center",children:ma.createElement(S.find(w=>w.id===e).icon,{className:"w-3 h-3 text-white"})}),t.jsxs("div",{className:"hidden sm:block text-left",children:[t.jsx("span",{className:"text-sm font-semibold text-foreground block leading-tight",children:e==="dashboard"?x("Dashboard"):S.find(w=>w.id===e)?.label}),t.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:e==="dashboard"?x("Overview"):S.find(w=>w.id===e)?.description})]})]})})}),t.jsx(pi,{className:"w-64 rounded-2xl shadow-2xl border border-border/60 bg-popover/95 backdrop-blur-xl",align:"center",children:t.jsxs("div",{className:"p-2 space-y-1",children:[t.jsxs(ft,{onClick:()=>n("dashboard"),className:`flex items-center space-x-3 p-3 rounded-xl cursor-pointer transition-all duration-300 ${e==="dashboard"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"hover:bg-muted/80 text-foreground"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors duration-300 ${e==="dashboard"?"bg-white/20":"bg-muted"}`,children:t.jsx(mh,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-sm",children:x("Dashboard")}),t.jsx("div",{className:`text-xs ${e==="dashboard"?"text-blue-100":"text-muted-foreground"}`,children:x("Overview")})]})]}),S.map(w=>{const I=w.icon;return t.jsxs(ft,{onClick:()=>n(w.id),className:`flex items-center space-x-3 p-3 rounded-xl cursor-pointer transition-all duration-300 ${e===w.id?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"hover:bg-muted/80 text-foreground"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors duration-300 ${e===w.id?"bg-white/20":"bg-muted"}`,children:t.jsx(I,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-sm",children:w.label}),t.jsx("div",{className:`text-xs ${e===w.id?"text-blue-100":"text-muted-foreground"}`,children:w.description})]})]},w.id)})]})})]})})]}),t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[t.jsx("div",{className:"hidden xl:flex items-center",children:t.jsx(ne,{variant:"ghost",onClick:o,className:"p-0 h-auto hover:bg-transparent",children:t.jsx(ge,{variant:"secondary",className:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 px-2 py-1 rounded-full border border-green-200/60 flex items-center justify-center shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer hover:scale-105",children:t.jsx(_o,{className:"w-3 h-3 animate-pulse"})})})}),t.jsx("div",{className:"xl:hidden flex items-center",children:t.jsx(ne,{variant:"ghost",onClick:o,className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full p-0 hover:bg-muted transition-all duration-300 hover:shadow-md flex-shrink-0",children:t.jsx(_o,{className:"w-4 h-4 text-green-600 animate-pulse"})})}),t.jsxs(mi,{onOpenChange:w=>{w||b(!1)},children:[t.jsx(fi,{asChild:!0,children:t.jsx(ne,{variant:"ghost",className:"relative h-9 w-9 sm:h-10 sm:w-10 rounded-full ring-2 ring-border/60 hover:ring-primary/60 transition-all duration-300 hover:shadow-lg flex-shrink-0",children:t.jsxs(Bh,{className:"h-7 w-7 sm:h-8 sm:w-8",children:[t.jsx(zh,{src:void 0,alt:U(a)}),t.jsx(qh,{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 text-white font-bold text-xs",children:T(a)})]})})}),t.jsxs(pi,{className:"w-72 rounded-2xl shadow-2xl border border-border/60 bg-popover/95 backdrop-blur-xl",align:"end",children:[t.jsxs("div",{className:"flex items-center justify-start gap-3 p-4 bg-muted/80 rounded-t-2xl backdrop-blur-sm",children:[t.jsxs(Bh,{className:"h-12 w-12 ring-2 ring-border/60 shadow-lg",children:[t.jsx(zh,{src:void 0,alt:U(a)}),t.jsx(qh,{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 text-white font-bold",children:T(a)})]}),t.jsxs("div",{className:"flex flex-col space-y-1",children:[t.jsx("p",{className:"font-bold text-foreground text-base",children:U(a)}),t.jsx("p",{className:"text-sm text-muted-foreground truncate max-w-[200px] font-medium",children:a.email||x("Profile")}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-sm"}),t.jsx("span",{className:"text-xs text-green-600 font-semibold",children:x("Online")})]})]})]}),t.jsx(hc,{className:"bg-border/60"}),j?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-3 mx-2",children:[t.jsx("h3",{className:"font-semibold text-foreground",children:x("Preferences")}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:w=>{w.preventDefault(),b(!1)},className:"h-8 w-8 p-0 hover:bg-muted/80 rounded-lg",children:"←"})]}),t.jsx(hc,{className:"bg-border/60"}),t.jsxs("div",{className:"px-2 py-1",children:[t.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider px-2 py-2",children:x("Language")}),B.map(w=>t.jsxs(ft,{onClick:()=>_(w.code),className:"flex items-center justify-between space-x-3 p-3 hover:bg-muted/80 cursor-pointer rounded-xl mx-1 my-1 transition-all duration-300 transform hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-muted rounded-lg flex items-center justify-center",children:t.jsx(vN,{className:"w-4 h-4 text-muted-foreground"})}),t.jsxs("span",{className:"flex items-center space-x-2 font-medium text-foreground",children:[t.jsx("span",{className:"text-lg",children:w.flag}),t.jsx("span",{children:w.name})]})]}),d===w.code&&t.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:t.jsx(qn,{className:"w-4 h-4 text-primary"})})]},w.code))]}),t.jsx(hc,{className:"bg-border/60"}),t.jsxs("div",{className:"px-2 py-1",children:[t.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider px-2 py-2",children:x("Theme")}),P.map(w=>{const I=w.icon;return t.jsxs(ft,{onClick:()=>L(w.id),className:"flex items-center justify-between space-x-3 p-3 hover:bg-muted/80 cursor-pointer rounded-xl mx-1 my-1 transition-all duration-300 transform hover:scale-105",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-muted rounded-lg flex items-center justify-center",children:t.jsx(I,{className:"w-4 h-4 text-muted-foreground"})}),t.jsx("span",{className:"font-medium text-foreground",children:w.name})]}),f===w.id&&t.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:t.jsx(qn,{className:"w-4 h-4 text-primary"})})]},w.id)})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs(ft,{className:"flex items-center space-x-3 p-3 hover:bg-muted/80 cursor-pointer rounded-xl mx-2 my-1 transition-all duration-300 transform hover:scale-105",children:[t.jsx("div",{className:"w-8 h-8 bg-muted rounded-lg flex items-center justify-center",children:t.jsx(_0,{className:"w-4 h-4 text-muted-foreground"})}),t.jsx("span",{className:"font-semibold text-foreground",children:x("Profile Settings")})]}),t.jsxs(ft,{onSelect:w=>{w.preventDefault(),b(!0)},className:"flex items-center space-x-3 p-3 hover:bg-muted/80 cursor-pointer rounded-xl mx-2 my-1 transition-all duration-300 transform hover:scale-105",children:[t.jsx("div",{className:"w-8 h-8 bg-muted rounded-lg flex items-center justify-center",children:t.jsx(Jr,{className:"w-4 h-4 text-muted-foreground"})}),t.jsx("span",{className:"font-semibold text-foreground",children:x("Preferences")})]}),t.jsx(hc,{className:"bg-border/60"}),t.jsxs(ft,{onClick:y,className:"flex items-center space-x-3 p-3 hover:bg-red-50/80 text-red-600 cursor-pointer rounded-xl mx-2 my-1 transition-all duration-300 transform hover:scale-105",children:[t.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx(TN,{className:"w-4 h-4 text-red-600"})}),t.jsx("span",{className:"font-semibold",children:x("Sign out")})]})]})]})]})]})]})})})}function h5({onAddUser:e}){return t.jsx("div",{className:"bg-card/80 backdrop-blur-sm p-8 rounded-3xl border border-border/50 shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"Healthcare Users"}),t.jsxs("div",{className:"text-muted-foreground text-lg flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(yr,{className:"w-5 h-5 text-primary"})}),"Manage healthcare professionals and administrative users"]})]}),t.jsxs(ne,{onClick:e,className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(At,{className:"h-5 w-5 mr-2"}),"Add New User"]})]})})}const Cs={administrator:"#3b82f6",practitioner:"#10b981",nurse:"#f59e0b",researcher:"#8b5cf6",user:"#6b7280",other:"#ef4444"};function xc({data:e,className:n=""}){const[a,o]=k.useState(null),c=e.filter(b=>b.count>0);if(c.length===0)return t.jsx("div",{className:`aspect-square rounded-full border-4 border-gray-300 dark:border-gray-600 ${n}`});if(c.length===1)return t.jsxs("div",{className:`relative group aspect-square ${n}`,children:[t.jsx("div",{className:"w-full h-full rounded-full cursor-pointer transition-all duration-200 hover:opacity-80 hover:scale-105",style:{backgroundColor:c[0].color},onMouseEnter:()=>o(c[0].role),onMouseLeave:()=>o(null)}),a&&t.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-popover border border-border rounded-lg px-2 py-1 sm:px-3 sm:py-2 shadow-lg z-10 whitespace-nowrap",children:t.jsxs("div",{className:"text-xs font-semibold text-popover-foreground",children:[a,": ",c[0].count," users"]})})]});const d=100,m=d/2-2,f=d/2,p=d/2;let x=0;const j=c.map(b=>{const y=x,_=x+b.percentage/100*360;x=_;const B=y*Math.PI/180,P=_*Math.PI/180,L=f+m*Math.cos(B),U=p+m*Math.sin(B),T=f+m*Math.cos(P),S=p+m*Math.sin(P),w=_-y<=180?0:1,I=[`M ${f} ${p}`,`L ${L} ${U}`,`A ${m} ${m} 0 ${w} 1 ${T} ${S}`,"Z"].join(" "),W=(y+_)/2*Math.PI/180,C=a===b.role?3:0,$=Math.cos(W)*C,ee=Math.sin(W)*C;return{...b,pathData:I,liftX:$,liftY:ee,isHovered:a===b.role}});return t.jsxs("div",{className:`relative group aspect-square ${n}`,children:[t.jsx("svg",{viewBox:`0 0 ${d} ${d}`,className:"w-full h-full transform -rotate-90 transition-transform duration-200",children:j.map(b=>t.jsx("path",{d:b.pathData,fill:b.color,className:`transition-all duration-200 cursor-pointer ${b.isHovered?"opacity-90":"opacity-100"}`,style:{transform:`translate(${b.liftX}px, ${b.liftY}px)`,filter:b.isHovered?"brightness(1.1)":"none"},onMouseEnter:()=>o(b.role),onMouseLeave:()=>o(null)},b.role))}),a&&t.jsx("div",{className:"absolute -top-10 sm:-top-12 left-1/2 transform -translate-x-1/2 bg-popover border border-border rounded-lg px-2 py-1 sm:px-3 sm:py-2 shadow-lg z-10 whitespace-nowrap",children:t.jsxs("div",{className:"text-xs font-semibold text-popover-foreground",children:[a,": ",c.find(b=>b.role===a)?.count," users"]})})]})}function m5({users:e}){const n=e.filter(y=>y.enabled).length,a=e.filter(y=>!y.enabled).length,o=e.filter(y=>{const _=y.createdAt?new Date(y.createdAt):y.createdTimestamp?new Date(y.createdTimestamp):null;if(!_)return!1;const B=new Date;return B.setDate(B.getDate()-7),_>B}).length,c=e.reduce((y,_)=>{const B=_.primaryRole||"user";return y[B]=(y[B]||0)+1,y},{}),d=Object.entries(c).map(([y,_])=>({role:y.charAt(0).toUpperCase()+y.slice(1),count:_,color:Cs[y]||Cs.other,percentage:e.length>0?_/e.length*100:0})).sort((y,_)=>_.count-y.count),m=e.filter(y=>y.enabled).reduce((y,_)=>{const B=_.primaryRole||"user";return y[B]=(y[B]||0)+1,y},{}),f=Object.entries(m).map(([y,_])=>({role:y.charAt(0).toUpperCase()+y.slice(1),count:_,color:Cs[y]||Cs.other,percentage:n>0?_/n*100:0})).sort((y,_)=>_.count-y.count),p=e.filter(y=>!y.enabled).reduce((y,_)=>{const B=_.primaryRole||"user";return y[B]=(y[B]||0)+1,y},{}),x=Object.entries(p).map(([y,_])=>({role:y.charAt(0).toUpperCase()+y.slice(1),count:_,color:Cs[y]||Cs.other,percentage:a>0?_/a*100:0})).sort((y,_)=>_.count-y.count),j=e.filter(y=>{const _=y.createdAt?new Date(y.createdAt):y.createdTimestamp?new Date(y.createdTimestamp):null;if(!_)return!1;const B=new Date;return B.setDate(B.getDate()-7),_>B}).reduce((y,_)=>{const B=_.primaryRole||"user";return y[B]=(y[B]||0)+1,y},{}),b=Object.entries(j).map(([y,_])=>({role:y.charAt(0).toUpperCase()+y.slice(1),count:_,color:Cs[y]||Cs.other,percentage:o>0?_/o*100:0})).sort((y,_)=>_.count-y.count);return t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(yr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),t.jsx("div",{className:"text-xs sm:text-sm font-semibold text-primary tracking-wide",children:"Total Users"})]}),t.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:e.length})]}),t.jsx("div",{className:"ml-2 sm:ml-4 w-12 sm:w-16",children:t.jsx(xc,{data:d,className:"w-full h-full"})})]})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-emerald-500/10 dark:bg-emerald-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(vj,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 dark:text-emerald-400"})}),t.jsx("div",{className:"text-xs sm:text-sm font-semibold text-emerald-700 dark:text-emerald-300 tracking-wide",children:"Active"})]}),t.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:n}),t.jsxs("div",{className:"text-xs sm:text-sm text-emerald-600 dark:text-emerald-400",children:[e.length>0?Math.round(n/e.length*100):0,"% of total"]})]}),t.jsx("div",{className:"ml-2 sm:ml-4 w-12 sm:w-16",children:t.jsx(xc,{data:f,className:"w-full h-full"})})]})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-red-500/10 dark:bg-red-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Nj,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-600 dark:text-red-400"})}),t.jsx("div",{className:"text-xs sm:text-sm font-semibold text-red-700 dark:text-red-300 tracking-wide",children:"Inactive"})]}),t.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:a}),t.jsxs("div",{className:"text-xs sm:text-sm text-red-600 dark:text-red-400",children:[e.length>0?Math.round(a/e.length*100):0,"% of total"]})]}),t.jsx("div",{className:"ml-2 sm:ml-4 w-12 sm:w-16",children:t.jsx(xc,{data:x,className:"w-full h-full"})})]})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-4 sm:p-6 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-violet-500/10 dark:bg-violet-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(jc,{className:"w-5 h-5 sm:w-6 sm:h-6 text-violet-600 dark:text-violet-400"})}),t.jsx("div",{className:"text-xs sm:text-sm font-semibold text-violet-700 dark:text-violet-300 tracking-wide",children:"Recent"})]}),t.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:o}),t.jsx("div",{className:"text-xs sm:text-sm text-violet-600 dark:text-violet-400",children:"Added this week"})]}),t.jsx("div",{className:"ml-2 sm:ml-4 w-12 sm:w-16",children:t.jsx(xc,{data:b,className:"w-full h-full"})})]})})]})}const gm=l1,vm=c1,td=k.forwardRef(({className:e,children:n,...a},o)=>t.jsxs(y0,{ref:o,className:Ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[n,t.jsx(n1,{asChild:!0,children:t.jsx(Bc,{className:"h-4 w-4 opacity-50"})})]}));td.displayName=y0.displayName;const vy=k.forwardRef(({className:e,...n},a)=>t.jsx(b0,{ref:a,className:Ie("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(E0,{className:"h-4 w-4"})}));vy.displayName=b0.displayName;const yy=k.forwardRef(({className:e,...n},a)=>t.jsx(w0,{ref:a,className:Ie("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(Bc,{className:"h-4 w-4"})}));yy.displayName=w0.displayName;const rd=k.forwardRef(({className:e,children:n,position:a="popper",...o},c)=>t.jsx(s1,{children:t.jsxs(N0,{ref:c,className:Ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...o,children:[t.jsx(vy,{}),t.jsx(a1,{className:Ie("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),t.jsx(yy,{})]})}));rd.displayName=N0.displayName;const f5=k.forwardRef(({className:e,...n},a)=>t.jsx(j0,{ref:a,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...n}));f5.displayName=j0.displayName;const nd=k.forwardRef(({className:e,children:n,...a},o)=>t.jsxs(S0,{ref:o,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(i1,{children:t.jsx(qn,{className:"h-4 w-4"})})}),t.jsx(o1,{children:n})]}));nd.displayName=S0.displayName;const p5=k.forwardRef(({className:e,...n},a)=>t.jsx(k0,{ref:a,className:Ie("-mx-1 my-1 h-px bg-muted",e),...n}));p5.displayName=k0.displayName;const Nh={username:"",firstName:"",lastName:"",email:"",organization:"",password:"",temporaryPassword:!1,realmRoles:[],clientRoles:{},primaryRole:"",fhirPersons:[]};function x5({isOpen:e,onClose:n,onSubmit:a,submitting:o,fhirServers:c,availableRealmRoles:d,availableClientRoles:m,getAllAvailableRoles:f}){const[p,x]=k.useState(Nh),j=async L=>{L.preventDefault();const U={username:p.username,email:p.email,firstName:p.firstName,lastName:p.lastName,organization:p.organization,password:p.password,temporaryPassword:p.temporaryPassword,realmRoles:p.realmRoles?.length?p.realmRoles:void 0,clientRoles:p.clientRoles&&Object.keys(p.clientRoles).length?p.clientRoles:void 0,fhirUser:p.fhirPersons?.length?p.fhirPersons.filter(T=>T.serverName&&T.personId).map(T=>`${T.serverName}:${T.personId}`).join(","):void 0};await a(U),x(Nh)},b=()=>{x(Nh),n()},y=()=>{x(L=>({...L,fhirPersons:[...L.fhirPersons||[],{serverName:"",personId:"",display:"",created:new Date().toISOString()}]}))},_=L=>{x(U=>({...U,fhirPersons:(U.fhirPersons||[]).filter((T,S)=>S!==L)}))},B=(L,U,T)=>{x(S=>({...S,fhirPersons:(S.fhirPersons||[]).map((w,I)=>I===L?{...w,[U]:T}:w)}))},P=async(L,U)=>{const T=`Person/${Date.now()}`;return console.log(`Creating Person resource in ${L}:`,U),T};return e?t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-8 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(At,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Add New Healthcare User"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Create a new user account for healthcare professionals"})]})]})}),t.jsxs("form",{onSubmit:j,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"username",className:"text-sm font-semibold text-foreground",children:"Username"}),t.jsx(Ae,{id:"username",placeholder:"e.g., john.smith",value:p.username,onChange:L=>x({...p,username:L.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"email",className:"text-sm font-semibold text-foreground",children:"Email Address"}),t.jsx(Ae,{id:"email",type:"email",placeholder:"john.smith@hospital.com",value:p.email,onChange:L=>x({...p,email:L.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"firstName",className:"text-sm font-semibold text-foreground",children:"First Name"}),t.jsx(Ae,{id:"firstName",placeholder:"e.g., John",value:p.firstName,onChange:L=>x({...p,firstName:L.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"lastName",className:"text-sm font-semibold text-foreground",children:"Last Name"}),t.jsx(Ae,{id:"lastName",placeholder:"e.g., Smith",value:p.lastName,onChange:L=>x({...p,lastName:L.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"organization",className:"text-sm font-semibold text-foreground",children:"Organization"}),t.jsx(Ae,{id:"organization",placeholder:"e.g., Cardiology Department",value:p.organization,onChange:L=>x({...p,organization:L.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"fhirPersons",className:"text-sm font-semibold text-foreground",children:"FHIR Person Associations"}),t.jsxs("div",{className:"space-y-4 bg-primary/5 p-4 rounded-xl border border-primary/20",children:[(p.fhirPersons||[]).map((L,U)=>t.jsxs("div",{className:"space-y-3 bg-card p-4 rounded-lg border border-border",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h5",{className:"text-sm font-semibold text-foreground",children:["FHIR Server Association #",U+1]}),t.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>_(U),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:t.jsx(va,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx(re,{className:"text-xs font-medium text-muted-foreground",children:"FHIR Server"}),t.jsxs(gm,{value:L.serverName,onValueChange:T=>B(U,"serverName",T),children:[t.jsx(td,{className:"rounded-lg",children:t.jsx(vm,{placeholder:"Select FHIR server"})}),t.jsx(rd,{children:c.map(T=>t.jsx(nd,{value:T.name,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_t,{className:"w-4 h-4"}),t.jsx("span",{children:T.name})]})},T.name))})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(re,{className:"text-xs font-medium text-muted-foreground",children:"Person ID"}),t.jsx(Ae,{placeholder:"e.g., Person/12345",value:L.personId,onChange:T=>B(U,"personId",T.target.value),className:"rounded-lg"})]}),t.jsx("div",{className:"flex flex-col justify-end",children:t.jsxs(ne,{type:"button",variant:"outline",size:"sm",onClick:async()=>{if(L.serverName){const T=await P(L.serverName,{firstName:p.firstName,lastName:p.lastName,email:p.email});B(U,"personId",T)}},disabled:!L.serverName,className:"rounded-lg",children:[t.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Create"]})})]})]})]},U)),t.jsxs(ne,{type:"button",variant:"outline",onClick:y,className:"w-full rounded-lg border-dashed border-primary/30 text-primary hover:bg-primary/10",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Add FHIR Server Association"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"password",className:"text-sm font-semibold text-foreground",children:"Password (Optional)"}),t.jsx(Ae,{id:"password",type:"password",placeholder:"Leave blank for no password",value:p.password,onChange:L=>x({...p,password:L.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm"})]}),t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex items-center space-x-3 pt-7",children:[t.jsx("input",{id:"temporaryPassword",type:"checkbox",checked:p.temporaryPassword,onChange:L=>x({...p,temporaryPassword:L.target.checked}),className:"rounded border-border text-primary focus:ring-primary"}),t.jsx(re,{htmlFor:"temporaryPassword",className:"text-sm text-foreground",children:"Temporary password"})]})})]}),t.jsxs("div",{className:"space-y-6 bg-primary/5 p-6 rounded-xl border border-primary/20",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:t.jsx(Pe,{className:"w-4 h-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground",children:"Role Management"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign roles to control user permissions"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-3 block",children:"Primary Role"}),t.jsxs("select",{value:p.primaryRole,onChange:L=>x({...p,primaryRole:L.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-background text-foreground",children:[t.jsx("option",{value:"",children:"Select primary role..."}),f().map(L=>t.jsx("option",{value:L,className:"capitalize",children:L},L))]})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-3 block",children:"Realm Roles"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:d.map(L=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{id:`realm-${L}`,type:"checkbox",checked:(p.realmRoles||[]).includes(L),onChange:U=>{U.target.checked?x({...p,realmRoles:[...p.realmRoles||[],L]}):x({...p,realmRoles:(p.realmRoles||[]).filter(T=>T!==L)})},className:"rounded border-border text-primary focus:ring-primary"}),t.jsx(re,{htmlFor:`realm-${L}`,className:"text-sm text-foreground capitalize",children:L})]},L))})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-3 block",children:"Admin UI Roles"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:m["admin-ui"]?.map(L=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{id:`client-${L}`,type:"checkbox",checked:p.clientRoles?.["admin-ui"]?.includes(L)||!1,onChange:U=>{const T=p.clientRoles?.["admin-ui"]||[];U.target.checked?x({...p,clientRoles:{...p.clientRoles,"admin-ui":[...T,L]}}):x({...p,clientRoles:{...p.clientRoles,"admin-ui":T.filter(S=>S!==L)}})},className:"rounded border-border text-primary focus:ring-primary"}),t.jsx(re,{htmlFor:`client-${L}`,className:"text-sm text-foreground capitalize",children:L.replace("-"," ")})]},L))})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx(ne,{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:o?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Add User"}),t.jsx(ne,{type:"button",variant:"outline",onClick:b,disabled:o,className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}):null}const a0={id:"",username:"",firstName:"",lastName:"",email:"",organization:"",fhirPersons:[],enabled:!0,primaryRole:"",realmRoles:[],clientRoles:{}};function g5({isOpen:e,onClose:n,onSubmit:a,submitting:o,user:c,fhirServers:d,availableRealmRoles:m,availableClientRoles:f,getAllAvailableRoles:p}){const[x,j]=k.useState(a0);k.useEffect(()=>{c&&j(c)},[c]);const b=async U=>{U.preventDefault(),await a(x)},y=()=>{j(a0),n()},_=()=>{j(U=>({...U,fhirPersons:[...U.fhirPersons,{serverName:"",personId:"",display:"",created:new Date().toISOString()}]}))},B=U=>{j(T=>({...T,fhirPersons:T.fhirPersons.filter((S,w)=>w!==U)}))},P=(U,T,S)=>{j(w=>({...w,fhirPersons:w.fhirPersons.map((I,J)=>J===U?{...I,[T]:S}:I)}))},L=async(U,T)=>{const S=`Person/${Date.now()}`;return console.log(`Creating Person resource in ${U}:`,T),S};return e?t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-8 rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-violet-500/10 dark:bg-violet-400/20 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-violet-600 dark:text-violet-400"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Edit Healthcare User"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Update user information and permissions"})]})]})}),t.jsxs("form",{onSubmit:b,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editUsername",className:"text-sm font-semibold text-foreground",children:"Username"}),t.jsx(Ae,{id:"editUsername",value:x.username,className:"rounded-xl border-border bg-muted shadow-sm",disabled:!0}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Username cannot be changed"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editEmail",className:"text-sm font-semibold text-foreground",children:"Email Address"}),t.jsx(Ae,{id:"editEmail",type:"email",placeholder:"john.smith@hospital.com",value:x.email,onChange:U=>j({...x,email:U.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editFirstName",className:"text-sm font-semibold text-foreground",children:"First Name"}),t.jsx(Ae,{id:"editFirstName",placeholder:"e.g., John",value:x.firstName,onChange:U=>j({...x,firstName:U.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editLastName",className:"text-sm font-semibold text-foreground",children:"Last Name"}),t.jsx(Ae,{id:"editLastName",placeholder:"e.g., Smith",value:x.lastName,onChange:U=>j({...x,lastName:U.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editOrganization",className:"text-sm font-semibold text-foreground",children:"Organization"}),t.jsx(Ae,{id:"editOrganization",placeholder:"e.g., Cardiology Department",value:x.organization,onChange:U=>j({...x,organization:U.target.value}),className:"rounded-xl border-border focus:border-primary focus:ring-primary shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editFhirPersons",className:"text-sm font-semibold text-foreground",children:"FHIR Person Associations"}),t.jsxs("div",{className:"space-y-4 bg-primary/5 p-4 rounded-xl border border-primary/10",children:[x.fhirPersons.map((U,T)=>t.jsxs("div",{className:"space-y-3 bg-card p-4 rounded-lg border border-border",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h5",{className:"text-sm font-semibold text-foreground",children:["FHIR Server Association #",T+1]}),t.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>B(T),className:"text-destructive hover:text-destructive/80 hover:bg-destructive/10",children:t.jsx(va,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx(re,{className:"text-xs font-medium text-muted-foreground",children:"FHIR Server"}),t.jsxs(gm,{value:U.serverName,onValueChange:S=>P(T,"serverName",S),children:[t.jsx(td,{className:"rounded-lg",children:t.jsx(vm,{placeholder:"Select FHIR server"})}),t.jsx(rd,{children:d.map(S=>t.jsx(nd,{value:S.name,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_t,{className:"w-4 h-4"}),t.jsx("span",{children:S.name})]})},S.name))})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(re,{className:"text-xs font-medium text-muted-foreground",children:"Person ID"}),t.jsx(Ae,{placeholder:"e.g., Person/12345",value:U.personId,onChange:S=>P(T,"personId",S.target.value),className:"rounded-lg"})]}),t.jsx("div",{className:"flex flex-col justify-end",children:t.jsxs(ne,{type:"button",variant:"outline",size:"sm",onClick:async()=>{if(U.serverName){const S=await L(U.serverName,{firstName:x.firstName,lastName:x.lastName,email:x.email});P(T,"personId",S)}},disabled:!U.serverName,className:"rounded-lg",children:[t.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Create"]})})]})]})]},T)),t.jsxs(ne,{type:"button",variant:"outline",onClick:_,className:"w-full rounded-lg border-dashed border-primary/30 text-primary hover:bg-primary/10",children:[t.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Add FHIR Server Association"]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"editEnabled",className:"text-sm font-semibold text-foreground",children:"Account Status"}),t.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[t.jsx("input",{id:"editEnabled",type:"checkbox",checked:x.enabled,onChange:U=>j({...x,enabled:U.target.checked}),className:"rounded border-border text-primary focus:ring-primary"}),t.jsx(re,{htmlFor:"editEnabled",className:"text-sm text-foreground",children:"Account enabled"})]})]}),t.jsx("div",{className:"space-y-3"})]}),t.jsxs("div",{className:"space-y-6 bg-primary/5 p-6 rounded-xl border border-primary/10",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-lg flex items-center justify-center",children:t.jsx(Pe,{className:"w-4 h-4 text-primary"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-foreground",children:"Role Management"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Modify user roles and permissions"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-3 block",children:"Primary Role"}),t.jsxs("select",{value:x.primaryRole,onChange:U=>j({...x,primaryRole:U.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-background text-foreground",children:[t.jsx("option",{value:"",children:"Select primary role..."}),p().map(U=>t.jsx("option",{value:U,className:"capitalize",children:U},U))]})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-3 block",children:"Realm Roles"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:m.map(U=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{id:`edit-realm-${U}`,type:"checkbox",checked:x.realmRoles.includes(U),onChange:T=>{T.target.checked?j({...x,realmRoles:[...x.realmRoles,U]}):j({...x,realmRoles:x.realmRoles.filter(S=>S!==U)})},className:"rounded border-border text-primary focus:ring-primary"}),t.jsx(re,{htmlFor:`edit-realm-${U}`,className:"text-sm text-foreground capitalize",children:U})]},U))})]}),t.jsxs("div",{children:[t.jsx(re,{className:"text-sm font-semibold text-foreground mb-3 block",children:"Admin UI Roles"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:f["admin-ui"]?.map(U=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{id:`edit-client-${U}`,type:"checkbox",checked:x.clientRoles["admin-ui"]?.includes(U)||!1,onChange:T=>{const S=x.clientRoles["admin-ui"]||[];T.target.checked?j({...x,clientRoles:{...x.clientRoles,"admin-ui":[...S,U]}}):j({...x,clientRoles:{...x.clientRoles,"admin-ui":S.filter(w=>w!==U)}})},className:"rounded border-border text-primary focus:ring-primary"}),t.jsx(re,{htmlFor:`edit-client-${U}`,className:"text-sm text-foreground capitalize",children:U.replace("-"," ")})]},U))})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx(ne,{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:o?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update User"}),t.jsx(ne,{type:"button",variant:"outline",onClick:y,disabled:o,className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}):null}function v5({isOpen:e,onClose:n,user:a,onPersonAdded:o,availableServers:c}){const[d,m]=k.useState("existing"),[f,p]=k.useState(""),[x,j]=k.useState(""),[b,y]=k.useState([]),[_,B]=k.useState(!1),[P,L]=k.useState(!1),[U,T]=k.useState(null),S=c.filter(C=>!a.fhirPersons.some($=>$.serverName===C.name)),w=async()=>{if(!f||!x){T("Please select a server and enter a Person ID");return}B(!0),T(null);try{await new Promise($=>setTimeout($,1e3));const C=[{id:x,display:`${a.firstName} ${a.lastName} (${x})`}];y(C)}catch(C){console.error("Search failed:",C),T("Failed to search for Person resource. Please check the ID and try again."),y([])}finally{B(!1)}},I=async()=>{if(!f){T("Please select a FHIR server");return}L(!0),T(null);try{await new Promise(ee=>setTimeout(ee,2e3));const C=`Person/${Date.now()}`,$={serverName:f,personId:C,display:`${a.firstName} ${a.lastName} (${C})`,created:new Date().toISOString()};o($),W()}catch(C){console.error("Person creation failed:",C),T("Failed to create Person resource. Please try again.")}finally{L(!1)}},J=C=>{const $={serverName:f,personId:C.id,display:C.display,created:new Date().toISOString()};o($),W()},W=()=>{m("existing"),p(""),j(""),y([]),T(null),n()};return S.length===0?t.jsx(cr,{open:e,onOpenChange:W,children:t.jsxs(Kt,{className:"max-w-2xl",children:[t.jsxs(Xt,{children:[t.jsx(Zt,{className:"text-xl font-bold text-amber-600",children:"No Available Servers"}),t.jsx(dr,{children:"This user already has Person resources on all available FHIR servers."})]}),t.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(tt,{className:"w-5 h-5 text-amber-600"}),t.jsx("h4",{className:"font-semibold text-amber-900",children:"All Servers Used"})]}),t.jsxs("p",{className:"text-sm text-amber-700 mb-4",children:[a.firstName," ",a.lastName," already has Person resources on all available FHIR servers:"]}),t.jsx("div",{className:"space-y-2",children:a.fhirPersons.map((C,$)=>t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(_t,{className:"w-4 h-4 text-amber-600"}),t.jsxs("span",{className:"font-medium",children:[C.serverName,":"]}),t.jsx("span",{className:"font-mono",children:C.personId})]},$))})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(ne,{onClick:W,variant:"outline",children:"Close"})})]})}):t.jsx(cr,{open:e,onOpenChange:W,children:t.jsxs(Kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsx(Xt,{className:"pb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(_0,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx(Zt,{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Add FHIR Person Resource"}),t.jsxs(dr,{className:"text-gray-600 font-medium mt-1",children:["Associate ",a.firstName," ",a.lastName," with a Person resource on a FHIR server"]})]})]})}),U&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(tt,{className:"w-5 h-5 text-red-600"}),t.jsx("p",{className:"text-sm font-medium text-red-800",children:U})]})}),t.jsxs(Er,{className:"mb-6",children:[t.jsxs(Ur,{children:[t.jsxs(Ir,{className:"flex items-center space-x-2",children:[t.jsx(_t,{className:"w-5 h-5"}),t.jsx("span",{children:"Select FHIR Server"})]}),t.jsx(gc,{children:"Choose which FHIR server to add the Person resource to"})]}),t.jsx(Mr,{children:t.jsxs(gm,{value:f,onValueChange:p,children:[t.jsx(td,{className:"rounded-xl",children:t.jsx(vm,{placeholder:"Select a FHIR server"})}),t.jsx(rd,{children:S.map(C=>t.jsx(nd,{value:C.name,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_t,{className:"w-4 h-4"}),t.jsx("span",{children:C.name}),t.jsx(ge,{variant:C.status==="active"?"default":"secondary",className:"text-xs",children:C.status})]})},C.name))})]})})]}),f&&t.jsxs(vi,{value:d,onValueChange:m,className:"w-full",children:[t.jsxs(yi,{className:"grid w-full grid-cols-2 bg-gray-100/50",children:[t.jsx(or,{value:"existing",className:"rounded-xl",children:"Link Existing Person"}),t.jsx(or,{value:"create",className:"rounded-xl",children:"Create New Person"})]}),t.jsx(lr,{value:"existing",className:"space-y-6 mt-6",children:t.jsxs(Er,{children:[t.jsxs(Ur,{children:[t.jsxs(Ir,{className:"flex items-center space-x-2",children:[t.jsx(Ac,{className:"w-5 h-5"}),t.jsx("span",{children:"Find Existing Person Resource"})]}),t.jsx(gc,{children:"Enter the Person resource ID to link to this user"})]}),t.jsxs(Mr,{className:"space-y-4",children:[t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(re,{className:"text-sm font-medium",children:"Person Resource ID"}),t.jsx(Ae,{placeholder:"e.g., Person/12345 or just 12345",value:x,onChange:C=>j(C.target.value),className:"rounded-xl mt-1",onKeyDown:C=>C.key==="Enter"&&w()})]}),t.jsx("div",{className:"flex flex-col justify-end",children:t.jsx(ne,{onClick:w,disabled:!f||!x||_,className:"px-6 py-2 rounded-xl",children:_?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Searching..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ac,{className:"w-4 h-4 mr-2"}),"Search"]})})})]}),b.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Search Results"}),b.map((C,$)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Nt,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:C.display}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Person ID: ",C.id]})]})]}),t.jsxs(ne,{onClick:()=>J(C),size:"sm",className:"bg-green-600 text-white hover:bg-green-700",children:[t.jsx(At,{className:"w-4 h-4 mr-2"}),"Add This Person"]})]},$))]})]})]})}),t.jsx(lr,{value:"create",className:"space-y-6 mt-6",children:t.jsxs(Er,{children:[t.jsxs(Ur,{children:[t.jsxs(Ir,{className:"flex items-center space-x-2",children:[t.jsx(Lt,{className:"w-5 h-5"}),t.jsx("span",{children:"Create New Person Resource"})]}),t.jsxs(gc,{children:["Create a new Person resource on ",f," for this user"]})]}),t.jsxs(Mr,{className:"space-y-6",children:[t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Person Resource Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"Name:"})," ",a.firstName," ",a.lastName]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"Email:"})," ",a.email]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"Username:"})," ",a.username]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700 font-medium",children:"Organization:"})," ",a.organization||"Not specified"]})]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(ne,{onClick:I,disabled:P,className:"px-8 py-3 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-all duration-200",children:P?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Person Resource..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Create Person Resource"]})})})]})]})})]}),t.jsx("div",{className:"flex justify-end pt-6 border-t",children:t.jsx(ne,{onClick:W,variant:"outline",children:"Cancel"})})]})})}function y5(e){return e.split(" ").map(n=>n.charAt(0)).join("").toUpperCase().slice(0,2)}function i0(e,n,a){if(a)return a;const o=["admin","administrator","practitioner","nurse","researcher","user"];for(const c of o)if(e?.includes(c))return c;for(const c in n)for(const d of o)if(n[c]?.includes(d))return d;return e?.[0]||"user"}function b5(e){const n=e.toLowerCase();return n.includes("admin")?"bg-violet-500/10 dark:bg-violet-400/20 text-violet-700 dark:text-violet-300 border-violet-500/20 dark:border-violet-400/20":n.includes("doctor")?"bg-primary/10 text-primary border-primary/20":n.includes("nurse")?"bg-emerald-500/10 dark:bg-emerald-400/20 text-emerald-700 dark:text-emerald-300 border-emerald-500/20 dark:border-emerald-400/20":n.includes("researcher")||n.includes("research")?"bg-orange-500/10 dark:bg-orange-400/20 text-orange-700 dark:text-orange-300 border-orange-500/20 dark:border-orange-400/20":n.includes("practitioner")?"bg-indigo-500/10 dark:bg-indigo-400/20 text-indigo-700 dark:text-indigo-300 border-indigo-500/20 dark:border-indigo-400/20":"bg-muted text-muted-foreground border-border"}function w5({users:e,onEditUser:n,onToggleStatus:a,onDeleteUser:o,onAddFhirPerson:c}){return t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden",children:t.jsxs("div",{className:"p-8 pb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(yr,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Healthcare Users"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"View and manage all healthcare professionals and administrative users"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs($c,{children:[t.jsx(Vc,{children:t.jsxs(Us,{className:"border-border/50",children:[t.jsx(at,{className:"font-semibold text-muted-foreground",children:"User"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Primary Role"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"All Roles"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Organization"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"FHIR Associations"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Status"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Created"}),t.jsx(at,{className:"font-semibold text-muted-foreground",children:"Last Login"}),t.jsx(at,{className:"w-12"})]})}),t.jsx(Gc,{children:e.map(d=>t.jsxs(Us,{className:"border-border/50 hover:bg-muted/30 transition-colors duration-200",children:[t.jsx(it,{children:t.jsxs("div",{className:"flex items-center gap-4 py-2",children:[t.jsxs(Bh,{className:"h-10 w-10 border-2 border-border shadow-md",children:[t.jsx(zh,{src:void 0,alt:d.name}),t.jsx(qh,{className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white text-sm font-semibold",children:y5(d.name)})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-foreground",children:d.name}),t.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:d.email})]})]})}),t.jsx(it,{children:t.jsx(ge,{className:`${b5(i0(d.realmRoles,d.clientRoles,d.primaryRole))} border-0 shadow-sm font-medium`,children:i0(d.realmRoles,d.clientRoles,d.primaryRole)})}),t.jsx(it,{children:t.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.realmRoles?.map(m=>t.jsx(ge,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/20",children:m},`realm-${m}`)),d.clientRoles?.["admin-ui"]?.map(m=>t.jsxs(ge,{variant:"outline",className:"text-xs bg-violet-500/10 dark:bg-violet-400/20 text-violet-700 dark:text-violet-300 border-violet-500/20 dark:border-violet-400/20",children:["UI: ",m]},`client-${m}`))]})}),t.jsx(it,{className:"text-sm text-muted-foreground font-medium",children:d.organization}),t.jsx(it,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"space-y-1",children:[d.fhirPersons.length>0?d.fhirPersons.slice(0,2).map((m,f)=>t.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[t.jsx(_t,{className:"w-3 h-3 text-primary"}),t.jsxs("span",{className:"font-medium text-foreground",children:[m.serverName,":"]}),t.jsx("code",{className:"text-muted-foreground bg-muted px-1 py-0.5 rounded text-xs",children:m.personId})]},f)):t.jsx("div",{className:"text-sm text-muted-foreground",children:"No associations"}),d.fhirPersons.length>2&&t.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",d.fhirPersons.length-2," more"]})]}),t.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>c(d),className:"text-xs h-6 px-2 text-primary hover:text-primary hover:bg-primary/10",children:[t.jsx(At,{className:"w-3 h-3 mr-1"}),"Add FHIR Person"]})]})}),t.jsx(it,{children:t.jsx(ge,{variant:d.enabled?"default":"secondary",className:"font-medium",children:d.enabled?"active":"inactive"})}),t.jsx(it,{className:"text-sm text-muted-foreground",children:d.createdAt?new Date(d.createdAt).toLocaleDateString():"Not available"}),t.jsx(it,{className:"text-sm text-muted-foreground",children:d.lastLogin?new Date(d.lastLogin).toLocaleDateString():"Never"}),t.jsx(it,{children:t.jsxs(mi,{children:[t.jsx(fi,{asChild:!0,children:t.jsx(ne,{variant:"ghost",className:"h-10 w-10 p-0 rounded-xl hover:bg-muted transition-colors duration-200",children:t.jsx(Gh,{className:"h-4 w-4"})})}),t.jsxs(pi,{align:"end",className:"rounded-xl border-border/50 shadow-lg",children:[t.jsx(ft,{onClick:()=>a(d.id,d.enabled?"active":"inactive"),className:"rounded-lg",children:d.enabled?"Deactivate":"Activate"}),t.jsx(ft,{onClick:()=>n(d),className:"rounded-lg",children:"Edit Profile"}),t.jsx(ft,{onClick:()=>o(d.id),className:"text-destructive rounded-lg hover:bg-destructive/10",children:"Delete User"})]})]})})]},d.id))})]})})]})})}function by(e=[],n={},a){const o=n["admin-ui"]||[];if(o.length>0)return o[0];const c=e.filter(d=>!["default-roles-proxy-smart","offline_access","uma_authorization"].includes(d));return c.length>0?c[0]:"user"}const Hh=["nurse","researcher","practitioner","administrator","user"],Fh={"admin-ui":["admin","user-manager","viewer"]},o0=()=>{const e=[...Hh];return Object.values(Fh).forEach(n=>{e.push(...n)}),e};function N5(e){if(!e)return[];try{return e.split(",").map(n=>{const[a,o]=n.split(":");return{serverName:a.trim(),personId:o.trim(),display:`${o.trim()} on ${a.trim()}`,created:new Date().toISOString()}}).filter(n=>n.serverName&&n.personId)}catch(n){return console.error("Failed to parse FHIR persons:",n),[]}}function l0(e){return e.map(n=>`${n.serverName}:${n.personId}`).join(",")}function jh(e){const n=e.attributes||{},a=e.organization||"",o=e.fhirUser||"",c=e.clientRoles||{},d=e.realmRoles||[],m=by(d,c);return{id:e.id,name:`${e.firstName} ${e.lastName}`.trim(),email:e.email,firstName:e.firstName,lastName:e.lastName,username:e.username,organization:a,fhirPersons:N5(o),status:e.enabled?"active":"inactive",enabled:e.enabled,primaryRole:m,lastLogin:e.lastLogin,createdTimestamp:e.createdTimestamp,realmRoles:d,clientRoles:c,attributes:n}}function j5(){const{isAuthenticated:e,clientApis:n}=Vn(),{servers:a}=G0(),[o,c]=k.useState([]),[d,m]=k.useState(!0),[f,p]=k.useState(null),[x,j]=k.useState(!1),[b,y]=k.useState(!1),[_,B]=k.useState(null),[P,L]=k.useState(!1),[U,T]=k.useState(!1),[S,w]=k.useState(null),I=k.useCallback(async()=>{try{m(!0),p(null);const Q=(await n.healthcareUsers.getAdminHealthcareUsers()).map(jh);c(Q)}catch(X){console.error("Failed to load users:",X),p("Failed to load healthcare users. Please try again.")}finally{m(!1)}},[n.healthcareUsers]);k.useEffect(()=>{e&&I()},[e,I]);const J=X=>{B(X),y(!0)},W=async(X,Q)=>{try{const ie=Q==="inactive";await n.healthcareUsers.putAdminHealthcareUsersByUserId({userId:X,putAdminHealthcareUsersByUserIdRequest:{enabled:ie}}),c(o.map(me=>me.id===X?{...me,status:ie?"active":"inactive",enabled:ie}:me))}catch(ie){console.error("Failed to toggle user status:",ie),p("Failed to update user status. Please try again.")}},C=async X=>{try{await n.healthcareUsers.deleteAdminHealthcareUsersByUserId({userId:X}),c(o.filter(Q=>Q.id!==X))}catch(Q){console.error("Failed to delete user:",Q),p("Failed to delete healthcare user. Please try again.")}},$=X=>{w(X),T(!0)},ee=X=>{if(!S)return;const Q={...S,fhirPersons:[...S.fhirPersons,X]};c(o.map(ie=>ie.id===S.id?Q:ie)),T(!1),w(null)};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 space-y-6 lg:space-y-8",children:[d&&t.jsxs("div",{className:"flex justify-center items-center p-8",children:[t.jsx(Mt,{className:"w-8 h-8 animate-spin text-primary"}),t.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading healthcare users..."})]}),f&&t.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-xl p-4 mb-6",children:[t.jsx("div",{className:"text-destructive font-medium",children:f}),t.jsx("button",{onClick:()=>p(null),className:"text-destructive hover:text-destructive/80 text-sm mt-2",children:"Dismiss"})]}),t.jsx(h5,{onAddUser:()=>j(!0)}),!d&&t.jsx(m5,{users:o}),t.jsx(x5,{isOpen:x,onClose:()=>j(!1),onSubmit:async X=>{try{L(!0),p(null);const Q={username:X.username,email:X.email,firstName:X.firstName,lastName:X.lastName,organization:X.organization||void 0,fhirUser:l0(X.fhirPersons||[]),password:X.password||void 0,temporaryPassword:X.temporaryPassword,realmRoles:X.realmRoles&&X.realmRoles.length>0?X.realmRoles:void 0,clientRoles:X.clientRoles&&Object.keys(X.clientRoles).length>0?X.clientRoles:void 0},ie=await n.healthcareUsers.postAdminHealthcareUsers({postAdminHealthcareUsersRequest:Q}),me=jh(ie);c([...o,me]),j(!1)}catch(Q){console.error("Failed to create user:",Q),p("Failed to create healthcare user. Please try again.")}finally{L(!1)}},submitting:P,fhirServers:a,availableRealmRoles:Hh,availableClientRoles:Fh,getAllAvailableRoles:o0}),t.jsx(g5,{isOpen:b,onClose:()=>{y(!1),B(null)},onSubmit:async X=>{try{L(!0),p(null);const Q={firstName:X.firstName,lastName:X.lastName,email:X.email,enabled:X.enabled,organization:X.organization||void 0,fhirUser:l0(X.fhirPersons),realmRoles:X.realmRoles.length>0?X.realmRoles:void 0,clientRoles:Object.keys(X.clientRoles).length>0?X.clientRoles:void 0},ie=await n.healthcareUsers.putAdminHealthcareUsersByUserId({userId:X.id,putAdminHealthcareUsersByUserIdRequest:Q}),me=jh(ie);c(o.map(R=>R.id===X.id?me:R)),y(!1),B(null)}catch(Q){console.error("Failed to update user:",Q),p("Failed to update healthcare user. Please try again.")}finally{L(!1)}},submitting:P,user:_?{id:_.id,username:_.username,firstName:_.firstName,lastName:_.lastName,email:_.email,organization:_.organization,fhirPersons:_.fhirPersons||[],enabled:_.enabled,primaryRole:_.primaryRole||"",realmRoles:_.realmRoles||[],clientRoles:_.clientRoles||{}}:null,fhirServers:a,availableRealmRoles:Hh,availableClientRoles:Fh,getAllAvailableRoles:o0}),!d&&t.jsx(w5,{users:o.map(X=>({id:X.id,name:X.name,email:X.email,firstName:X.firstName,lastName:X.lastName,organization:X.organization,enabled:X.enabled,realmRoles:X.realmRoles||[],clientRoles:X.clientRoles||{},primaryRole:X.primaryRole||by(X.realmRoles||[],X.clientRoles||{}),fhirPersons:X.fhirPersons||[],createdAt:X.createdTimestamp?new Date(X.createdTimestamp).toISOString():new Date().toISOString(),lastLogin:X.lastLogin?new Date(X.lastLogin).toISOString():void 0})),onEditUser:X=>{const Q=o.find(ie=>ie.id===X.id);Q&&J(Q)},onToggleStatus:(X,Q)=>{W(X,Q)},onDeleteUser:C,onAddFhirPerson:X=>{const Q=o.find(ie=>ie.id===X.id);Q&&$(Q)}}),S&&t.jsx(v5,{isOpen:U,onClose:()=>{T(!1),w(null)},user:S,onPersonAdded:ee,availableServers:a.map(X=>({name:X.name,baseUrl:X.url,status:X.supported?"active":"inactive"}))})]})}const S5=()=>{const{logout:e,isAuthenticated:n,error:a}=ba(),[o,c]=k.useState({hasTokens:!1,hasAuthState:!1,hasPKCE:!1,hasOAuthState:!1}),d=async()=>{try{const p=await Hn("openid_tokens"),x=await Hn("auth-store"),j=localStorage.getItem("openid_tokens"),b=localStorage.getItem("auth-store"),y=pa("pkce_code_verifier"),_=pa("oauth_state");c({hasTokens:!!(p||j),hasAuthState:!!(x||b),hasPKCE:!!y,hasOAuthState:!!_})}catch(p){console.error("Failed to check storage:",p);const x=localStorage.getItem("openid_tokens"),j=localStorage.getItem("auth-store"),b=pa("pkce_code_verifier"),y=pa("oauth_state");c({hasTokens:!!x,hasAuthState:!!j,hasPKCE:!!b,hasOAuthState:!!y})}};k.useEffect(()=>{d()},[]);const m=async()=>{try{if(await Cc("openid_tokens"),await Cc("auth-store"),localStorage.removeItem("openid_tokens"),localStorage.removeItem("auth-store"),hi("pkce_code_verifier"),hi("oauth_state"),"caches"in window){const p=await caches.keys();await Promise.all(p.map(x=>caches.delete(x)))}await d(),setTimeout(()=>{window.location.reload()},1e3)}catch(p){console.error("Failed to clear caches:",p),await e(),setTimeout(()=>{window.location.reload()},1e3)}},f=async()=>{await e(),"caches"in window&&caches.keys().then(p=>{Promise.all(p.map(x=>caches.delete(x)))}),setTimeout(()=>{window.location.href="/"},1e3)};return t.jsxs(Er,{className:"w-full",children:[t.jsxs(Ur,{className:"pb-3",children:[t.jsxs(Ir,{className:"flex items-center gap-2 text-sm",children:[t.jsx(tt,{className:"h-4 w-4 text-yellow-500"}),"Authentication Debug"]}),t.jsx(gc,{className:"text-xs",children:`Use these tools if you're experiencing login timeout or "Code not valid" errors`})]}),t.jsxs(Mr,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium",children:"Current Status"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(ge,{variant:n?"default":"secondary",children:n?"Authenticated":"Not Authenticated"}),a&&t.jsx(ge,{variant:"destructive",children:"Error"})]}),a&&t.jsx("p",{className:"text-sm text-red-600 mt-2",children:a})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium",children:"Cache Status"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Tokens:"}),t.jsx(ge,{variant:o.hasTokens?"default":"outline",className:"text-xs",children:o.hasTokens?"Present":"None"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Auth State:"}),t.jsx(ge,{variant:o.hasAuthState?"default":"outline",className:"text-xs",children:o.hasAuthState?"Present":"None"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"PKCE:"}),t.jsx(ge,{variant:o.hasPKCE?"default":"outline",className:"text-xs",children:o.hasPKCE?"Present":"None"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"OAuth State:"}),t.jsx(ge,{variant:o.hasOAuthState?"default":"outline",className:"text-xs",children:o.hasOAuthState?"Present":"None"})]})]}),t.jsxs(ne,{variant:"ghost",size:"sm",onClick:d,className:"w-full text-xs mt-2",children:[t.jsx(Dr,{className:"h-3 w-3 mr-1"}),"Refresh Status"]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium",children:"Troubleshooting Actions"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(ne,{variant:"outline",size:"sm",onClick:m,className:"w-full flex items-center gap-2",children:[t.jsx(va,{className:"h-4 w-4"}),"Clear All Caches"]}),t.jsxs(ne,{variant:"outline",size:"sm",onClick:f,className:"w-full flex items-center gap-2",children:[t.jsx(Dr,{className:"h-4 w-4"}),"Force Logout & Reset"]})]}),t.jsx("p",{className:"text-xs text-gray-500",children:'Use "Clear All Caches" if you see "Code not valid" or expired code errors. Use "Force Logout" for persistent login issues.'})]})]})]})};function k5(){const[e,n]=k.useState(!1),[a,o]=k.useState(null),[c,d]=k.useState([]),[m,f]=k.useState(!0),[p,x]=k.useState(null),[j,b]=k.useState(!1),[y,_]=k.useState(!1),{initiateLogin:B,exchangeCodeForToken:P,clientApis:L}=ba(),U=k.useCallback(async()=>{try{f(!0);const C=(await L.auth.getAuthIdentityProviders()).filter($=>$.enabled!==!1);d(C),C.length>0&&console.log(`Found ${C.length} available identity providers:`,C.map($=>$.displayName||$.alias))}catch(W){console.warn("Could not fetch identity providers (this is normal for public access):",W),d([])}finally{f(!1)}},[L.auth]),T=k.useCallback(async()=>{try{const W=await oi.isAuthenticationAvailable();x(W),W?(o(null),U()):(o("Keycloak is not configured. Please contact your administrator."),f(!1))}catch(W){console.error("Failed to check auth availability:",W),x(!1),o("Unable to verify authentication configuration. Please try again later."),f(!1)}},[U]),S=k.useCallback(()=>{b(!1),x(null),o(null),T(),U()},[T,U]),w=k.useCallback(()=>{b(!1)},[]);k.useEffect(()=>{T()},[T]);const I=k.useCallback(async(W,C)=>{n(!0),o(null);try{const $=pa("pkce_code_verifier"),ee=pa("oauth_state");if(!$)throw new Error("Missing PKCE code verifier");if(C!==ee)throw new Error("Invalid state parameter - possible CSRF attack");await P(W,$)}catch($){o($ instanceof Error?$.message:"Authentication failed")}finally{n(!1)}},[P]);k.useEffect(()=>{console.log("LoginForm mounted, checking for OAuth callback..."),console.log("Current URL:",window.location.href);const W=new URLSearchParams(window.location.search),C=W.get("code"),$=W.get("state"),ee=W.get("error"),X=W.get("error_description");if(console.log("URL params:",{code:C,state:$,error:ee,errorDescription:X}),ee){console.error("OAuth error:",ee,X),o(X||ee),window.history.replaceState({},document.title,window.location.pathname);return}C&&$&&(console.log("Authorization code received, exchanging for tokens..."),window.history.replaceState({},document.title,window.location.pathname),I(C,$))},[I]);const J=async W=>{if(p===!1){o("Authentication is not configured. Please contact your administrator.");return}n(!0),o(null);try{const C=W?`Initiating login with Identity Provider: ${W}`:"Initiating login with default provider";console.log(C),await B(W)}catch(C){o(C instanceof Error?C.message:"Failed to initiate login"),n(!1)}};return j?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:t.jsx(xy,{onSuccess:S,onCancel:w})}):e?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:t.jsx("div",{className:"w-full max-w-md",children:t.jsx("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center",children:t.jsx(Mt,{className:"w-8 h-8 text-white animate-spin"})}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authenticating"}),t.jsx("p",{className:"text-gray-600",children:"Please wait while we verify your credentials..."}),t.jsxs("div",{className:"mt-6 flex justify-center space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-12 text-center",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-white/10 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:t.jsx(Qh,{className:"w-10 h-10 text-white"})}),t.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Healthcare Admin"}),t.jsx("p",{className:"text-blue-100",children:"Proxy Smart"})]}),t.jsxs("div",{className:"px-8 py-8",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Welcome Back"}),t.jsx("p",{className:"text-gray-600",children:"Sign in to access the Proxy Smart dashboard"})]}),t.jsxs("div",{className:"space-y-6",children:[a&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pe,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0"}),t.jsx("div",{className:"text-red-700 text-sm",children:a})]})}),(m||p===null)&&t.jsxs("div",{className:"text-center py-4",children:[t.jsx(Mt,{className:"w-5 h-5 animate-spin mx-auto mb-2 text-gray-400"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Loading authentication options..."})]}),p===!1&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-yellow-100 rounded-full flex items-center justify-center",children:t.jsx(Vt,{className:"w-8 h-8 text-yellow-600"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Authentication Not Configured"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Keycloak is not yet configured on this server."}),t.jsx("button",{onClick:()=>b(!0),className:"w-full mb-4 group relative overflow-hidden bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl py-3 px-6 font-semibold transition-all duration-200 hover:shadow-xl hover:scale-[1.02]",children:t.jsxs("div",{className:"relative flex items-center justify-center space-x-2",children:[t.jsx(Jr,{className:"w-5 h-5"}),t.jsx("span",{children:"Configure Keycloak"})]})}),t.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-left",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"For administrators:"})," You can configure Keycloak authentication using the button above or by setting the required environment variables and restarting the service."]})})]}),p===!0&&t.jsxs(t.Fragment,{children:[c.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-4",children:"Choose your authentication method"})}),c.map(W=>t.jsx("button",{onClick:()=>J(W.alias),className:"w-full group relative overflow-hidden bg-white border-2 border-gray-200 text-gray-700 rounded-xl py-4 px-6 font-medium transition-all duration-200 hover:border-blue-300 hover:bg-blue-50 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:e,children:t.jsxs("div",{className:"relative flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-lg flex items-center justify-center",children:[W.providerId==="saml"&&t.jsx(V1,{className:"w-4 h-4 text-white"}),W.providerId==="oidc"&&t.jsx(zn,{className:"w-4 h-4 text-white"}),W.providerId==="google"&&t.jsx(yr,{className:"w-4 h-4 text-white"}),!["saml","oidc","google"].includes(W.providerId)&&t.jsx(Pe,{className:"w-4 h-4 text-white"})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-sm font-medium",children:W.displayName||W.alias}),t.jsxs("div",{className:"text-xs text-gray-500 capitalize",children:[W.providerId," Authentication"]})]})]}),t.jsx(B1,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-500 transition-colors"})]})},W.alias)),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-200"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-3 bg-white text-gray-500",children:"or"})})]})]}),t.jsxs("button",{onClick:()=>J(),className:"w-full group relative overflow-hidden bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl py-4 px-6 font-semibold transition-all duration-200 hover:shadow-xl hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",disabled:e,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-700 to-indigo-700 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-200 origin-left"}),t.jsx("div",{className:"relative flex items-center justify-center space-x-3",children:e?t.jsxs(t.Fragment,{children:[t.jsx(Mt,{className:"w-5 h-5 animate-spin"}),t.jsx("span",{children:"Signing in..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(AN,{className:"w-5 h-5"}),t.jsx("span",{children:c.length>0?"Default Authentication":"Sign in with OpenID Connect"})]})})]}),c.length===0&&!m&&t.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(zn,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-xs text-blue-700",children:[t.jsx("p",{className:"font-medium mb-1",children:"Single Sign-On Available"}),t.jsx("p",{children:"Use the default authentication method above. Additional identity providers can be configured by administrators."})]})]})})]})]}),t.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-xl",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(U0,{className:"w-5 h-5 text-gray-500 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Secure Authentication"}),t.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"You will be redirected to our secure identity provider for authentication. Your credentials are never stored on this application."})]})]})}),t.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(Jh,{className:"w-4 h-4 text-blue-600"})}),t.jsx("p",{className:"text-xs text-gray-600",children:"FHIR Compliant"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx(zn,{className:"w-4 h-4 text-green-600"})}),t.jsx("p",{className:"text-xs text-gray-600",children:"Global Standards"})]})]})]})]}),t.jsx("div",{className:"text-center mt-8",children:t.jsx("p",{className:"text-sm text-gray-500",children:"Protected by enterprise-grade security"})}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("button",{onClick:()=>_(!y),className:"w-full text-xs text-gray-400 hover:text-gray-600 transition-colors duration-200 flex items-center justify-center gap-2 py-2",children:[t.jsx(F1,{className:"w-3 h-3"}),t.jsx("span",{children:"Troubleshooting"}),y?t.jsx(E0,{className:"w-3 h-3"}):t.jsx(Bc,{className:"w-3 h-3"})]}),y&&t.jsx("div",{className:"mt-4 animate-in slide-in-from-top-2 duration-200",children:t.jsx(S5,{})})]})]})})}function A5(){const{t:e}=hn(),{currentAlert:n,closeAlert:a}=bi();if(!n)return null;const o=()=>{switch(n.type){case"success":return t.jsx(Nt,{className:"h-6 w-6 text-green-600 dark:text-green-400"});case"warning":return t.jsx(Vt,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"});case"error":return t.jsx(Es,{className:"h-6 w-6 text-red-600 dark:text-red-400"});default:return t.jsx(xa,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}};return t.jsx(cr,{open:!0,onOpenChange:()=>a(),children:t.jsxs(Kt,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[t.jsxs(Xt,{children:[t.jsxs(Zt,{className:"flex items-center gap-3",children:[o(),n.title]}),n.message&&t.jsx(dr,{className:"text-base whitespace-pre-line",children:n.message})]}),t.jsx(Ds,{children:t.jsx(ne,{onClick:a,className:"w-full",children:n.confirmText||e("OK")})})]})})}function C5(){const{t:e}=hn(),{currentConfirm:n,closeConfirm:a}=bi(),[o,c]=k.useState(!1);if(!n)return null;const d=async()=>{try{c(!0),await n.onConfirm(),a()}catch(p){console.error("Confirm action failed:",p)}finally{c(!1)}},m=()=>{n.onCancel&&n.onCancel(),a()},f=()=>{switch(n.type){case"success":return t.jsx(Nt,{className:"h-6 w-6 text-green-600 dark:text-green-400"});case"warning":return t.jsx(Vt,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"});case"error":return t.jsx(Es,{className:"h-6 w-6 text-red-600 dark:text-red-400"});default:return t.jsx(tt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}};return t.jsx(cr,{open:!0,onOpenChange:()=>!o&&a(),children:t.jsxs(Kt,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[t.jsxs(Xt,{children:[t.jsxs(Zt,{className:"flex items-center gap-3",children:[f(),n.title]}),n.message&&t.jsx(dr,{className:"text-base whitespace-pre-line",children:n.message})]}),t.jsxs(Ds,{className:"flex-col sm:flex-row gap-2",children:[t.jsx(ne,{variant:"outline",onClick:m,disabled:o,className:"w-full sm:w-auto",children:n.cancelText||e("Cancel")}),t.jsx(ne,{onClick:d,disabled:o,className:"w-full sm:w-auto",variant:n.type==="error"||n.type==="warning"?"destructive":"default",children:o?e("Processing..."):n.confirmText||e("Confirm")})]})]})})}function R5(){const{t:e}=hn(),{currentConfirmInput:n,closeConfirmInput:a}=bi(),[o,c]=k.useState(!1),[d,m]=k.useState(""),[f,p]=k.useState(null);if(!n)return null;const x=P=>n.inputRequired&&!P.trim()?e("This field is required"):n.inputValidation?n.inputValidation(P):null,j=async()=>{const P=x(d);if(P){p(P);return}try{c(!0),p(null),await n.onConfirm(d),a()}catch(L){console.error("Confirm input action failed:",L),p(L instanceof Error?L.message:e("An error occurred"))}finally{c(!1)}},b=()=>{n.onCancel&&n.onCancel(),a()},y=P=>{if(m(P),f){const L=x(P);p(L)}},_=()=>{switch(n.type){case"success":return t.jsx(Nt,{className:"h-6 w-6 text-green-600 dark:text-green-400"});case"warning":return t.jsx(Vt,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"});case"error":return t.jsx(Es,{className:"h-6 w-6 text-red-600 dark:text-red-400"});default:return t.jsx(tt,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}},B=n.inputType==="textarea"?Po:Ae;return t.jsx(cr,{open:!0,onOpenChange:()=>!o&&a(),children:t.jsxs(Kt,{className:"sm:max-w-lg max-h-[80vh] overflow-y-auto",children:[t.jsxs(Xt,{children:[t.jsxs(Zt,{className:"flex items-center gap-3",children:[_(),n.title]}),n.message&&t.jsx(dr,{className:"text-base whitespace-pre-line",children:n.message})]}),t.jsx("div",{className:"grid gap-4 py-4",children:t.jsxs("div",{className:"grid gap-2",children:[n.inputLabel&&t.jsxs(re,{htmlFor:"confirm-input",children:[n.inputLabel,n.inputRequired&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx(B,{id:"confirm-input",value:d,onChange:P=>y(P.target.value),placeholder:n.inputPlaceholder,className:f?"border-red-500 focus:border-red-500":"",disabled:o,onKeyDown:P=>{P.key==="Enter"&&n.inputType!=="textarea"&&(P.preventDefault(),j())},autoFocus:!0}),f&&t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:f})]})}),t.jsxs(Ds,{className:"flex-col sm:flex-row gap-2",children:[t.jsx(ne,{variant:"outline",onClick:b,disabled:o,className:"w-full sm:w-auto",children:n.cancelText||e("Cancel")}),t.jsx(ne,{onClick:j,disabled:o,className:"w-full sm:w-auto",variant:n.type==="error"||n.type==="warning"?"destructive":"default",children:o?e("Processing..."):n.confirmText||e("Confirm")})]})]})})}function T5(){return t.jsxs(t.Fragment,{children:[t.jsx(A5,{}),t.jsx(C5,{}),t.jsx(R5,{})]})}function E5({isOpen:e,onClose:n}={}){const{t:a}=hn(),[o,c]=k.useState(!1),d=e!==void 0?e:o,m=n||(()=>c(!1)),[f,p]=k.useState(!1),[x,j]=k.useState(!1),[b,y]=k.useState(!1),[_,B]=k.useState([{id:"1",type:"agent",content:a("Hello! I'm your smart assistant. I can help you manage applications, users, servers, and configurations. What would you like to do today?"),timestamp:new Date}]),[P,L]=k.useState(""),U=()=>{j(!x),console.log(x?"Stopping voice input...":"Starting voice input...")},T=async S=>{if(S.preventDefault(),!P.trim()||b)return;const w={id:Date.now().toString(),type:"user",content:P,timestamp:new Date};B(I=>[...I,w]),L(""),y(!0);try{const I=await Rs.generateResponse(P),J={id:(Date.now()+1).toString(),type:"agent",content:I.answer,timestamp:new Date,sources:I.sources};B(W=>[...W,J])}catch(I){console.error("Error getting AI response:",I);const J={id:(Date.now()+1).toString(),type:"agent",content:a("I'm sorry, I'm having trouble processing your request right now. Please try asking about specific topics like user management, SMART apps, or FHIR servers."),timestamp:new Date};B(W=>[...W,J])}finally{y(!1)}};return d?t.jsxs(t.Fragment,{children:[e===void 0&&!d&&t.jsx("div",{className:"fixed bottom-4 right-4 z-[50]",children:t.jsx(ne,{onClick:()=>c(!0),className:"w-14 h-14 rounded-full bg-primary hover:bg-primary/90 shadow-2xl border border-primary/20 transition-all duration-300 hover:scale-105",title:a("Open AI Assistant"),children:Rs.isOpenAIAvailable()?t.jsx(ng,{className:"w-6 h-6 text-primary-foreground"}):t.jsx(Uo,{className:"w-6 h-6 text-primary-foreground"})})}),d&&t.jsx("div",{className:"fixed bottom-4 right-4 z-[60] w-96 max-w-[calc(100vw-2rem)]",children:t.jsxs(Er,{className:"bg-card/95 backdrop-blur-xl border border-border/60 shadow-2xl rounded-2xl overflow-hidden",children:[t.jsx(Ur,{className:"bg-muted/50 p-4 border-b border-border/50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-primary/80 rounded-lg flex items-center justify-center shadow-sm",children:Rs.isOpenAIAvailable()?t.jsx(ng,{className:"w-4 h-4 text-primary-foreground"}):t.jsx(Uo,{className:"w-4 h-4 text-primary-foreground"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ir,{className:"text-sm font-semibold text-foreground",children:a("SMART Assistant")}),Rs.isOpenAIAvailable()&&t.jsx(_o,{className:"w-3 h-3 text-primary animate-pulse"})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:Rs.isOpenAIAvailable()?a("AI-powered with RAG knowledge base"):a("Semantic search with knowledge base")})]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>p(!f),className:"h-6 w-6 p-0 hover:bg-muted rounded-md",title:a(f?"Expand chat":"Minimize chat"),children:t.jsx(DN,{className:"w-3 h-3 text-muted-foreground"})}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:m,className:"h-6 w-6 p-0 hover:bg-muted rounded-md",title:a("Close chat"),children:t.jsx($n,{className:"w-3 h-3 text-muted-foreground"})})]})]})}),!f&&t.jsxs(Mr,{className:"p-0",children:[t.jsxs("div",{className:"h-64 overflow-y-auto p-4 space-y-3",children:[_.map(S=>t.jsx("div",{className:`flex ${S.type==="user"?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg text-sm ${S.type==="user"?"bg-primary text-primary-foreground rounded-br-sm":"bg-muted text-foreground rounded-bl-sm"}`,children:[S.type==="agent"?t.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",children:t.jsx(d1,{remarkPlugins:[u1],components:{p:({children:w})=>t.jsx("p",{className:"mb-2 last:mb-0",children:w}),ul:({children:w})=>t.jsx("ul",{className:"ml-4 mb-2 last:mb-0 list-disc",children:w}),li:({children:w})=>t.jsx("li",{className:"mb-1",children:w}),strong:({children:w})=>t.jsx("strong",{className:"font-semibold text-foreground",children:w}),em:({children:w})=>t.jsx("em",{className:"italic",children:w}),code:({children:w})=>t.jsx("code",{className:"bg-muted/60 px-1 py-0.5 rounded text-xs font-mono",children:w})},children:S.content})}):t.jsx("div",{className:"whitespace-pre-wrap",children:S.content}),S.type==="agent"&&S.sources&&S.sources.length>0&&t.jsxs("div",{className:"mt-3 pt-2 border-t border-border/20",children:[t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mb-2",children:[t.jsx(Bn,{className:"w-3 h-3"}),t.jsxs("span",{children:[a("Sources"),":"]})]}),t.jsx("div",{className:"space-y-1",children:S.sources.slice(0,3).map((w,I)=>t.jsxs("div",{className:"text-xs bg-background/50 rounded px-2 py-1 border border-border/30",children:[t.jsx("div",{className:"font-medium",children:w.title}),t.jsx("div",{className:"text-muted-foreground text-[10px]",children:w.category})]},I))})]})]})},S.id)),b&&t.jsx("div",{className:"flex justify-start",children:t.jsx("div",{className:"bg-muted text-foreground p-3 rounded-lg rounded-bl-sm text-sm",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),t.jsxs("span",{children:[a("Assistant is thinking"),"..."]})]})})})]}),t.jsx("div",{className:"border-t border-border/50 p-4",children:t.jsxs("form",{onSubmit:T,className:"flex space-x-2",children:[t.jsx(Ae,{value:P,onChange:S=>L(S.target.value),placeholder:a("Ask me about SMART on FHIR..."),className:"flex-1 text-sm rounded-lg border-input focus:border-ring focus:ring-ring",disabled:b}),t.jsx(ne,{type:"button",size:"sm",onClick:U,variant:x?"destructive":"secondary",className:`rounded-lg px-3 transition-all duration-300 ${x?"animate-pulse":""}`,disabled:b,title:a(x?"Stop listening":"Start voice input"),children:x?t.jsx(UN,{className:"w-4 h-4"}):t.jsx(MN,{className:"w-4 h-4"})}),t.jsx(ne,{type:"submit",size:"sm",disabled:b||!P.trim(),className:`rounded-lg px-3 transition-all duration-300 ${b?"animate-pulse":""}`,title:a("Send message"),children:b?t.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):t.jsx(ej,{className:"w-4 h-4"})})]})})]})]})})]}):null}class U5{eventsEventSource=null;analyticsEventSource=null;eventListeners=new Set;analyticsListeners=new Set;baseUrl;constructor(){this.baseUrl=un.api.baseUrl}subscribeToEvents(n){return this.eventListeners.add(n),this.eventsEventSource||this.connectToEventsStream().catch(a=>{console.error("Failed to connect to events stream:",a)}),()=>{this.eventListeners.delete(n),this.eventListeners.size===0&&this.disconnectFromEventsStream()}}subscribeToAnalytics(n){return this.analyticsListeners.add(n),this.analyticsEventSource||this.connectToAnalyticsStream().catch(a=>{console.error("Failed to connect to analytics stream:",a)}),()=>{this.analyticsListeners.delete(n),this.analyticsListeners.size===0&&this.disconnectFromAnalyticsStream()}}async getEvents(n){const a=await ha();if(!a)throw new Error("No authentication token available");const o=yc(a);try{return await o.getMonitoringOauthEvents({limit:n?.limit?.toString(),type:n?.type,status:n?.status,clientId:n?.clientId,since:n?.since})}catch(c){throw console.error("Failed to fetch OAuth events:",c),c}}async getAnalytics(){const n=await ha();if(!n)throw new Error("No authentication token available");const a=yc(n);try{return await a.getMonitoringOauthAnalytics({})}catch(o){throw console.error("Failed to fetch OAuth analytics:",o),o}}async getSystemHealth(){const n=await ha();if(!n)throw new Error("No authentication token available");const a=yc(n);try{return await a.getMonitoringOauthHealth({})}catch(o){throw console.error("Failed to fetch system health:",o),o}}async connectToEventsStream(){if(this.eventsEventSource&&this.eventsEventSource.readyState!==EventSource.CLOSED)return;const n=await ha();if(!n){console.error("No token available for OAuth events stream");return}try{this.eventsEventSource&&this.eventsEventSource.close();const a=`${this.baseUrl}/monitoring/oauth/events/stream?token=${encodeURIComponent(n)}`;this.eventsEventSource=new EventSource(a,{withCredentials:!0}),this.eventsEventSource.onmessage=o=>{try{const c=JSON.parse(o.data);if(c.type==="keepalive"||c.type==="connection")return;this.eventListeners.forEach(d=>{try{d(c)}catch(m){console.error("Error in OAuth event listener:",m)}})}catch(c){console.error("Error parsing OAuth event:",c)}},this.eventsEventSource.onerror=o=>{console.error("OAuth events stream error:",o),this.disconnectFromEventsStream(),setTimeout(()=>{this.eventListeners.size>0&&this.connectToEventsStream()},5e3)}}catch(a){console.error("Failed to connect to OAuth events stream:",a)}}async connectToAnalyticsStream(){if(this.analyticsEventSource&&this.analyticsEventSource.readyState!==EventSource.CLOSED)return;const n=await ha();if(!n){console.error("No token available for OAuth analytics stream");return}try{this.analyticsEventSource&&this.analyticsEventSource.close();const a=`${this.baseUrl}/monitoring/oauth/analytics/stream?token=${encodeURIComponent(n)}`;this.analyticsEventSource=new EventSource(a,{withCredentials:!0}),this.analyticsEventSource.onmessage=o=>{try{const c=JSON.parse(o.data);if(c.type==="keepalive")return;this.analyticsListeners.forEach(d=>{try{d(c)}catch(m){console.error("Error in OAuth analytics listener:",m)}})}catch(c){console.error("Error parsing OAuth analytics:",c)}},this.analyticsEventSource.onerror=o=>{console.error("OAuth analytics stream error:",o),this.disconnectFromAnalyticsStream(),setTimeout(()=>{this.analyticsListeners.size>0&&this.connectToAnalyticsStream()},5e3)}}catch(a){console.error("Failed to connect to OAuth analytics stream:",a)}}disconnectFromEventsStream(){this.eventsEventSource&&(this.eventsEventSource.close(),this.eventsEventSource=null)}disconnectFromAnalyticsStream(){this.analyticsEventSource&&(this.analyticsEventSource.close(),this.analyticsEventSource=null)}disconnect(){this.disconnectFromEventsStream(),this.disconnectFromAnalyticsStream(),this.eventListeners.clear(),this.analyticsListeners.clear()}}const Lc=new U5;class I5{ws=null;authenticated=!1;eventHandlers={};baseUrl;isConnecting=!1;clientId=null;lastConnectionAttempt=0;connectionThrottleMs=1e3;useSSE=!1;sseEventsUnsub;sseAnalyticsUnsub;eventsUpdateHandlers=[];analyticsUpdateHandlers=[];constructor(n){const a=n||un.api.baseUrl;this.baseUrl=a.replace(/^https?:/,a.startsWith("https:")?"wss:":"ws:")}async connect(){if(this.isConnecting||this.ws&&this.ws.readyState===WebSocket.OPEN||this.useSSE)return;const n=Date.now();n-this.lastConnectionAttempt<this.connectionThrottleMs&&await new Promise(a=>setTimeout(a,this.connectionThrottleMs-(n-this.lastConnectionAttempt))),this.lastConnectionAttempt=Date.now(),this.isConnecting=!0;try{await this.connectWebSocket(),this.useSSE=!1}catch{console.warn("WebSocket connection failed, falling back to SSE"),this.connectSSE(),this.useSSE=!0}finally{this.isConnecting=!1}}async connectWebSocket(){return this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING)&&(this.disconnect(),await new Promise(n=>setTimeout(n,100))),new Promise((n,a)=>{const o=`${this.baseUrl}/oauth/monitoring/websocket`;this.ws=new WebSocket(o);const c=d=>{const m=d;m.type==="welcome"&&(this.clientId=m.data?.clientId||null,this.removeEventHandler("welcome",c),n())};this.ws.onopen=()=>{this.addEventListener("welcome",c)},this.ws.onmessage=d=>{this.handleMessage(d)},this.ws.onclose=()=>{this.authenticated=!1,this.clientId=null},this.ws.onerror=d=>{a(d)}})}connectSSE(){this.sseEventsUnsub=Lc.subscribeToEvents(n=>{const a={id:n.id||"",timestamp:n.timestamp||new Date().toISOString(),type:n.type||"authorization",status:n.status||"success",clientId:n.clientId||"",clientName:n.clientName,scopes:n.scopes||[],grantType:n.grantType||"",responseTime:n.responseTime||0,errorMessage:n.errorMessage};this.eventsUpdateHandlers.forEach(o=>o(a)),this.triggerEventHandlers("events",a)}),this.sseAnalyticsUnsub=Lc.subscribeToAnalytics(n=>{const a={totalFlows:n.totalFlows||0,successRate:n.successRate||0,averageResponseTime:n.averageResponseTime||0,activeTokens:n.activeTokens||0,topClients:n.topClients||[],flowsByType:n.flowsByType||{},errorsByType:n.errorsByType||{},hourlyStats:n.hourlyStats||[]};this.analyticsUpdateHandlers.forEach(o=>o(a)),this.triggerEventHandlers("analytics",a)}),this.authenticated=!0,this.clientId="sse-client"}async connectWithMode(n="auto"){if(!(this.isConnecting||this.ws&&this.ws.readyState===WebSocket.OPEN||this.useSSE)){this.isConnecting=!0;try{if(n==="sse")this.connectSSE(),this.useSSE=!0;else if(n==="websocket")await this.connectWebSocket(),this.useSSE=!1;else try{await this.connectWebSocket(),this.useSSE=!1}catch{console.warn("WebSocket connection failed, falling back to SSE"),this.connectSSE(),this.useSSE=!0}}finally{this.isConnecting=!1}}}async authenticate(){if(this.useSSE)return Promise.resolve();if(!this.isFullyReady)throw new Error("WebSocket not fully ready. Connection or client ID missing.");const a=await(async()=>{try{if(ba.getState().isAuthenticated){const c=await Hn("openid_tokens");if(c?.access_token)return c.access_token}return console.warn("No valid authentication token found. User may need to log in."),null}catch(o){return console.error("Error reading token from auth store:",o),null}})();if(!a)throw new Error("No authentication token found. Please log in first.");return new Promise((o,c)=>{const d=setTimeout(()=>{this.removeEventHandler("auth_success",m),this.removeEventHandler("auth_error",m),this.removeEventHandler("error",f),c(new Error("Authentication timeout - no response from server"))},1e4),m=x=>{const j=x;if(j.type==="auth_success")clearTimeout(d),this.authenticated=!0,this.removeEventHandler("auth_success",m),this.removeEventHandler("auth_error",m),this.removeEventHandler("error",f),o();else if(j.type==="auth_error"){clearTimeout(d),this.removeEventHandler("auth_success",m),this.removeEventHandler("auth_error",m),this.removeEventHandler("error",f);const b=j.data?.message||"Authentication failed";console.error("WebSocket authentication failed:",b),c(new Error(b))}},f=x=>{const j=x;console.error("WebSocket error during authentication:",j),clearTimeout(d),this.removeEventHandler("auth_success",m),this.removeEventHandler("auth_error",m),this.removeEventHandler("error",f);const b=j.data?.message||j.data?.error||"Unknown authentication error";c(new Error(`Authentication error: ${b}`))};this.addEventListener("auth_success",m),this.addEventListener("auth_error",m),this.addEventListener("error",f);const p={type:"auth",token:a};this.sendMessage(p)})}async subscribe(n){return this.useSSE?Promise.resolve():new Promise((a,o)=>{if(!this.authenticated){o(new Error("Not authenticated"));return}const c=d=>{const m=d;m.type==="subscription_confirmed"&&m.data?.subscriptionType===n&&(this.removeEventHandler("subscription_confirmed",c),a())};this.addEventListener("subscription_confirmed",c),this.sendMessage({type:"subscribe",data:{subscriptionType:n}})})}onEventsData(n){this.addEventListener("events_data",a=>{n(a.data?.events||[])})}onEventsUpdate(n){const a=o=>{const c=o;c.data?.event&&n(c.data.event)};return this.addEventListener("events_update",a),()=>{this.removeEventHandler("events_update",a)}}onAnalyticsData(n){this.addEventListener("analytics_data",a=>{const o=a;o.data&&n(o.data)})}onAnalyticsUpdate(n){const a=o=>{const c=o;c.data&&n(c.data)};return this.addEventListener("analytics_update",a),()=>{this.removeEventHandler("analytics_update",a)}}onError(n){this.addEventListener("error",a=>{n(a.data?.message||"Unknown error")})}addEventListener(n,a){this.eventHandlers[n]||(this.eventHandlers[n]=[]),this.eventHandlers[n].push(a)}removeEventHandler(n,a){if(this.eventHandlers[n]){const o=this.eventHandlers[n].indexOf(a);o>-1&&this.eventHandlers[n].splice(o,1)}}triggerEventHandlers(n,a){const o=this.eventHandlers[n];o&&o.forEach(c=>{try{c(a)}catch(d){console.error("Error in event handler:",d)}})}sendMessage(n){if(this.useSSE){console.warn("Cannot send messages in SSE mode - SSE is read-only");return}if(this.ws&&this.ws.readyState===WebSocket.OPEN){const a=this.clientId?{...n,clientId:this.clientId}:n,o=JSON.stringify(a);this.ws.send(o)}else console.error("Cannot send message - WebSocket not connected. State:",this.ws?this.ws.readyState:"null")}handleMessage(n){try{const a=JSON.parse(n.data);a.type==="error"&&console.error("WebSocket server error:",a.data);const o=this.eventHandlers[a.type];o?o.forEach(c=>{try{c(a)}catch(d){console.error("Error in event handler:",d)}}):console.warn("No handlers registered for message type:",a.type,"Data:",a)}catch(a){console.error("Error parsing WebSocket message:",a,"Raw data:",n.data)}}disconnect(){this.ws&&(this.eventHandlers={},(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING)&&this.ws.close(),this.ws=null),this.useSSE&&(this.sseEventsUnsub&&(this.sseEventsUnsub(),this.sseEventsUnsub=void 0),this.sseAnalyticsUnsub&&(this.sseAnalyticsUnsub(),this.sseAnalyticsUnsub=void 0),this.eventsUpdateHandlers=[],this.analyticsUpdateHandlers=[],this.useSSE=!1),this.authenticated=!1,this.isConnecting=!1,this.clientId=null}get isConnected(){return this.ws!==null&&this.ws.readyState===WebSocket.OPEN||this.useSSE}get isFullyReady(){return this.isConnected&&this.clientId!==null}get isAuthenticated(){return this.authenticated}get connectionMode(){return this.isConnected?this.useSSE?"sse":"websocket":"disconnected"}get isUsingSSE(){return this.useSSE}}const gt=new I5;function M5(){const{t:e}=hn(),[n,a]=k.useState([]),[o,c]=k.useState(null),[d]=k.useState(null),[m,f]=k.useState(!0),[p,x]=k.useState("websocket"),[j,b]=k.useState("all"),[y,_]=k.useState("all"),[B,P]=k.useState(""),[L,U]=k.useState(!0),[T,S]=k.useState(null),[w,I]=k.useState(!1),J=k.useRef(!0),W=k.useRef(m);k.useEffect(()=>{W.current=m},[m]);const C=k.useCallback(async R=>{U(!0),S(null);try{gt.isConnected&&(gt.disconnect(),await new Promise(K=>setTimeout(K,100)));const D=R||p;await gt.connectWithMode(D==="websocket"?"websocket":"sse"),await new Promise(K=>setTimeout(K,100));try{if(await gt.authenticate(),gt.isUsingSSE){console.info("Using SSE mode for OAuth monitoring");try{const K=await Lc.getEvents({limit:100}),de=await Lc.getAnalytics(),Ce=(K.events||[]).map(Re=>({id:Re.id||"",timestamp:Re.timestamp||new Date().toISOString(),type:Re.type||"authorization",status:Re.status||"success",clientId:Re.clientId||"",clientName:Re.clientName,scopes:Re.scopes||[],grantType:Re.grantType||"",responseTime:Re.responseTime||0,errorMessage:Re.errorMessage})),_e={totalFlows:de.totalFlows||0,successRate:de.successRate||0,averageResponseTime:de.averageResponseTime||0,activeTokens:de.activeTokens||0,topClients:de.topClients||[],flowsByType:de.flowsByType||{},errorsByType:de.errorsByType||{},hourlyStats:de.hourlyStats||[]};(J.current||W.current)&&(a(Ce),c(_e))}catch(K){console.warn("Failed to fetch initial data via API for SSE mode:",K)}}else gt.onEventsData(K=>{(J.current||W.current)&&a(K)}),gt.onAnalyticsData(K=>{(J.current||W.current)&&c(K)});gt.onError(K=>{S(K)}),await gt.subscribe("events"),await gt.subscribe("analytics"),J.current=!1}catch{S("Connected but not authenticated. Please log in to view OAuth monitoring data.")}}catch(D){S(D instanceof Error?D.message:"Failed to connect to monitoring service")}finally{U(!1)}},[p]);k.useEffect(()=>{let R,D;return m?(R=gt.onEventsUpdate(K=>{a(de=>[K,...de.slice(0,999)])}),D=gt.onAnalyticsUpdate(K=>{c(K)})):console.info("Real-time updates are PAUSED"),()=>{R&&R(),D&&D()}},[m]),k.useEffect(()=>{let R=!0;return(async()=>{R&&await C()})(),()=>{R=!1}},[C]),k.useEffect(()=>()=>{gt.isConnected&&gt.disconnect()},[]),k.useEffect(()=>{const R=D=>{const K=D.target;w&&!K.closest(".export-menu-container")&&I(!1)};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[w]);const $=async()=>{J.current=!0,await C()},ee=()=>{f(!m)},X=async R=>{R!==p&&(x(R),J.current=!0,await C(R))},Q=async()=>{try{const R=o;if(!R){S("No analytics data available to export");return}const D={exportedAt:new Date().toISOString(),exportType:"oauth-analytics",source:"dashboard-current-state",data:R,metadata:{totalEvents:n.length,connectionMode:gt.connectionMode,realTimeActive:m}},K=JSON.stringify(D,null,2),de=new Blob([K],{type:"application/json"}),Ce=URL.createObjectURL(de),_e=document.createElement("a");_e.href=Ce,_e.download=`oauth-analytics-dashboard-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),URL.revokeObjectURL(Ce)}catch(R){S(R instanceof Error?R.message:"Failed to export analytics data")}},ie=async()=>{try{const R=await Hn("openid_tokens");let D="";if(R?.access_token&&(D=R.access_token),!D){S("No authentication token available for server export. Please log in.");return}const K=await fetch(`${un.api.baseUrl}/monitoring/oauth/events/export`,{method:"GET",headers:{Authorization:`Bearer ${D}`,Accept:"application/x-jsonlines"}});if(!K.ok)throw new Error(`Events export failed: ${K.statusText}`);const de=K.headers.get("Content-Disposition");let Ce=`oauth-events-${new Date().toISOString().split("T")[0]}.jsonl`;if(de){const ve=de.match(/filename="(.+)"/);ve&&(Ce=ve[1])}const _e=await K.blob(),Re=URL.createObjectURL(_e),pe=document.createElement("a");pe.href=Re,pe.download=Ce,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(Re)}catch(R){S(R instanceof Error?R.message:"Failed to export server events data")}},me=n.filter(R=>{const D=j==="all"||R.type===j,K=y==="all"||R.status===y,de=B===""||R.clientName?.toLowerCase().includes(B.toLowerCase())||R.clientId?.toLowerCase().includes(B.toLowerCase())||R.errorMessage?.toLowerCase().includes(B.toLowerCase());return D&&K&&de});return L?t.jsx("div",{className:"p-8 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"mt-4 text-muted-foreground",children:e("Loading OAuth monitoring data...")})]})})}):T?t.jsx("div",{className:"p-8 space-y-6",children:t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx(tt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:e("Failed to Load OAuth Monitoring Data")}),t.jsx("p",{className:"text-muted-foreground mb-4",children:T}),t.jsxs(ne,{onClick:$,variant:"outline",children:[t.jsx(Dr,{className:"w-4 h-4 mr-2"}),e("Try Again")]})]})})}):t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsx("div",{className:"bg-gradient-to-r from-background to-muted/50 p-8 rounded-3xl border border-border shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:e("OAuth Flow Monitoring")}),t.jsxs("div",{className:"text-muted-foreground text-lg flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(fa,{className:"w-5 h-5 text-primary"})}),e("Real-time monitoring and analytics for OAuth 2.0 flows")]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(ne,{variant:m?"default":"outline",onClick:ee,className:`px-6 py-3 font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-border ${m?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800":"bg-background text-foreground hover:bg-muted"}`,children:[m?t.jsx(ag,{className:"w-4 h-4 mr-2"}):t.jsx(zc,{className:"w-4 h-4 mr-2"}),e(m?"Pause":"Resume")," ",e("Real-time")]}),t.jsxs(ne,{variant:"outline",onClick:$,className:"px-6 py-3 bg-background text-foreground font-semibold rounded-2xl hover:bg-muted transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-border",children:[t.jsx(Dr,{className:"w-4 h-4 mr-2"}),e("Refresh")]}),t.jsxs("div",{className:"relative export-menu-container",children:[t.jsxs(ne,{variant:"outline",onClick:()=>I(!w),className:"px-6 py-3 bg-background text-foreground font-semibold rounded-2xl hover:bg-muted transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-border",children:[t.jsx(lN,{className:"w-4 h-4 mr-2"}),e("Export"),t.jsx(Bc,{className:"w-4 h-4 ml-2"})]}),w&&t.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-background border border-border rounded-2xl shadow-xl z-50",children:t.jsxs("div",{className:"p-2",children:[t.jsxs("button",{onClick:()=>{Q(),I(!1)},className:"w-full text-left px-4 py-3 hover:bg-muted rounded-xl transition-colors",children:[t.jsx("div",{className:"font-semibold text-foreground",children:e("Export Current Data")}),t.jsx("div",{className:"text-sm text-muted-foreground",children:e("Download current dashboard analytics")})]}),t.jsxs("button",{onClick:()=>{ie(),I(!1)},className:"w-full text-left px-4 py-3 hover:bg-muted rounded-xl transition-colors",children:[t.jsx("div",{className:"font-semibold text-foreground",children:e("Export Server Events")}),t.jsx("div",{className:"text-sm text-muted-foreground",children:e("Download events log from server")})]})]})})]})]})]})}),m?t.jsx("div",{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 p-6 rounded-2xl border border-green-500/20 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center mr-4 shadow-sm",children:t.jsx(fa,{className:"h-5 w-5 text-green-600 animate-pulse"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-green-900 dark:text-green-300 mb-1",children:e("Real-time Monitoring Active")}),t.jsx("p",{className:"text-green-800 dark:text-green-400 font-medium",children:e("OAuth events are pushed in real time as they occur.")})]})]}),t.jsxs("div",{className:"text-right space-y-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-green-700 dark:text-green-400 mb-2",children:"Connection Mode"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ne,{variant:p==="websocket"?"default":"ghost",onClick:()=>X("websocket"),size:"sm",className:`text-xs px-3 py-1 h-8 border transition-all ${p==="websocket"?"bg-green-500/30 hover:bg-green-500/40 text-green-900 dark:text-green-100 border-green-500/50 font-semibold shadow-sm":"bg-green-500/10 hover:bg-green-500/15 text-green-700/70 dark:text-green-400/70 border-green-500/20 font-medium"}`,children:"WebSocket"}),t.jsx(ne,{variant:p==="sse"?"default":"ghost",onClick:()=>X("sse"),size:"sm",className:`text-xs px-3 py-1 h-8 border transition-all ${p==="sse"?"bg-green-500/30 hover:bg-green-500/40 text-green-900 dark:text-green-100 border-green-500/50 font-semibold shadow-sm":"bg-green-500/10 hover:bg-green-500/15 text-green-700/70 dark:text-green-400/70 border-green-500/20 font-medium"}`,children:"SSE"})]}),gt.isUsingSSE&&p==="websocket"&&t.jsxs("div",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 flex items-center",children:[t.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Fallback to SSE (WebSocket failed)"]})]}),t.jsxs("div",{children:[t.jsx(ge,{className:"bg-green-500/20 text-green-800 dark:text-green-300 border-green-500/30 font-semibold",children:gt.connectionMode==="websocket"?"WebSocket Active":gt.connectionMode==="sse"?"SSE Active":"Disconnected"}),gt.isUsingSSE&&p==="websocket"&&t.jsx(ge,{className:"bg-amber-500/20 text-amber-800 dark:text-amber-300 border-amber-500/30 font-semibold mt-1",children:"Auto-fallback"})]})]})]})}):t.jsx("div",{className:"bg-gradient-to-r from-orange-500/10 to-amber-500/10 p-6 rounded-2xl border border-orange-500/20 shadow-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500/20 to-orange-600/30 rounded-xl flex items-center justify-center mr-4 shadow-sm",children:t.jsx(ag,{className:"h-5 w-5 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-orange-900 dark:text-orange-300 mb-1",children:e("Real-time Monitoring Paused")}),t.jsx("p",{className:"text-orange-800 dark:text-orange-400 font-medium",children:e("Real-time updates are paused. Click Resume to continue monitoring.")})]})]}),t.jsxs("div",{className:"text-right space-y-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-400 mb-2",children:"Connection Mode"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ne,{variant:p==="websocket"?"default":"ghost",onClick:()=>X("websocket"),size:"sm",className:`text-xs px-3 py-1 h-8 border transition-all ${p==="websocket"?"bg-orange-500/30 hover:bg-orange-500/40 text-orange-900 dark:text-orange-100 border-orange-500/50 font-semibold shadow-sm":"bg-orange-500/10 hover:bg-orange-500/15 text-orange-700/70 dark:text-orange-400/70 border-orange-500/20 font-medium"}`,children:"WebSocket"}),t.jsx(ne,{variant:p==="sse"?"default":"ghost",onClick:()=>X("sse"),size:"sm",className:`text-xs px-3 py-1 h-8 border transition-all ${p==="sse"?"bg-orange-500/30 hover:bg-orange-500/40 text-orange-900 dark:text-orange-100 border-orange-500/50 font-semibold shadow-sm":"bg-orange-500/10 hover:bg-orange-500/15 text-orange-700/70 dark:text-orange-400/70 border-orange-500/20 font-medium"}`,children:"SSE"})]}),gt.isUsingSSE&&p==="websocket"&&t.jsxs("div",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1 flex items-center",children:[t.jsx(Vt,{className:"w-3 h-3 mr-1"}),"Fallback to SSE (WebSocket failed)"]})]}),t.jsxs("div",{children:[t.jsxs(ge,{className:"bg-orange-500/20 text-orange-800 dark:text-orange-300 border-orange-500/30 font-semibold",children:["Paused (",gt.connectionMode==="websocket"?"WebSocket":gt.connectionMode==="sse"?"SSE":"Disconnected",")"]}),gt.isUsingSSE&&p==="websocket"&&t.jsx(ge,{className:"bg-amber-500/20 text-amber-800 dark:text-amber-300 border-amber-500/30 font-semibold mt-1",children:"Auto-fallback"})]})]})]})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm rounded-2xl border border-border shadow-lg overflow-hidden",children:t.jsxs("div",{className:"p-8 pb-6",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ci,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:e("OAuth Analytics Dashboard")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("Monitor OAuth flows, tokens, and system performance")})]})]}),t.jsxs(vi,{defaultValue:"overview",className:"space-y-6",children:[t.jsxs(yi,{className:"grid w-full grid-cols-4 bg-muted/50 rounded-t-2xl",children:[t.jsx(or,{value:"overview",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:e("Overview")}),t.jsx(or,{value:"flows",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:e("OAuth Flows")}),t.jsx(or,{value:"analytics",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:e("Analytics")}),t.jsx(or,{value:"monitoring",className:"rounded-xl data-[state=active]:bg-background data-[state=active]:text-foreground",children:e("System Health")})]}),t.jsxs(lr,{value:"overview",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ci,{className:"w-6 h-6 text-primary"})}),t.jsx("h3",{className:"text-sm font-semibold text-primary tracking-wide",children:e("Total Flows")})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:o?.totalFlows?o.totalFlows.toLocaleString():"0"}),t.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:e("Last 24 hours")})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ig,{className:"w-6 h-6 text-green-600"})}),t.jsx("h3",{className:"text-sm font-semibold text-green-800 dark:text-green-300 tracking-wide",children:e("Success Rate")})]}),t.jsxs("div",{className:"text-3xl font-bold text-green-900 dark:text-green-300 mb-2",children:[o?.successRate?o.successRate.toFixed(1):"0.0","%"]}),t.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 font-medium",children:e("Current success rate")})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500/20 to-orange-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(hj,{className:"w-6 h-6 text-orange-600"})}),t.jsx("h3",{className:"text-sm font-semibold text-orange-800 dark:text-orange-300 tracking-wide",children:e("Avg Response Time")})]}),t.jsxs("div",{className:"text-3xl font-bold text-orange-900 dark:text-orange-300 mb-2",children:[o?.averageResponseTime?o.averageResponseTime.toFixed(0):"0","ms"]}),t.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 font-medium",children:e("Average response time")})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-purple-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-purple-600"})}),t.jsx("h3",{className:"text-sm font-semibold text-purple-800 dark:text-purple-300 tracking-wide",children:e("Active Tokens")})]}),t.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-300 mb-2",children:o?.activeTokens??0}),t.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-400 font-medium",children:e("Currently valid")})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ci,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Flow Activity (24h)")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("OAuth flows over time")})]})]}),t.jsx("div",{className:"h-[300px]",children:o?.hourlyStats?.length?t.jsx(lh,{width:"100%",height:"100%",children:t.jsxs(h1,{data:o.hourlyStats,margin:{top:10,right:30,left:0,bottom:0},children:[t.jsx(Gx,{strokeDasharray:"3 3",className:"stroke-muted"}),t.jsx(Qx,{dataKey:"hour",tickFormatter:R=>Ao(new Date(R),"HH:mm"),minTickGap:20,className:"text-muted-foreground"}),t.jsx(Jx,{allowDecimals:!1,className:"text-muted-foreground"}),t.jsx(ch,{labelFormatter:R=>Ao(new Date(R),"PPpp"),formatter:R=>[R,e("flows")],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),t.jsx(m1,{type:"monotone",dataKey:"total",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{r:3,fill:"hsl(var(--primary))"},activeDot:{r:5,fill:"hsl(var(--primary))"}})]})}):t.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ci,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{className:"font-medium",children:e("No flow activity data available")})]})})})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-purple-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Top Applications")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("Most active OAuth clients")})]})]}),t.jsx("div",{className:"space-y-4",children:o?.topClients&&o.topClients.length>0?o.topClients.map((R,D)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-xl hover:bg-muted transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-sm",children:D+1}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-foreground",children:R.clientName}),t.jsxs("p",{className:"text-sm text-muted-foreground font-medium",children:[R.count," ",e("flows")]})]})]}),t.jsx("div",{className:"text-right",children:t.jsxs(ge,{className:R.successRate>95?"bg-green-500/10 text-green-800 dark:text-green-300 border-green-500/20":"bg-yellow-500/10 text-yellow-800 dark:text-yellow-300 border-yellow-500/20",children:[R.successRate.toFixed(1),"%"]})})]},R.clientId)):t.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[t.jsx(Pe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{children:e("No client activity data available")}),t.jsx("p",{className:"text-sm mt-2",children:e("OAuth client statistics will appear here once data is collected")})]})})]})]})]}),t.jsxs(lr,{value:"flows",className:"space-y-6",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Ac,{className:"w-5 h-5 text-primary"})}),t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Filter OAuth Flows")})]}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-foreground",children:e("Type:")}),t.jsxs("select",{value:j,onChange:R=>b(R.target.value),className:"border border-border rounded-xl px-3 py-2 bg-background text-foreground shadow-sm",children:[t.jsx("option",{value:"all",children:e("All Types")}),t.jsx("option",{value:"authorization",children:e("Authorization")}),t.jsx("option",{value:"token",children:e("Token")}),t.jsx("option",{value:"refresh",children:e("Refresh")}),t.jsx("option",{value:"error",children:e("Error")}),t.jsx("option",{value:"revoke",children:e("Revoke")})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-foreground",children:e("Status:")}),t.jsxs("select",{value:y,onChange:R=>_(R.target.value),className:"border border-border rounded-xl px-3 py-2 bg-background text-foreground shadow-sm",children:[t.jsx("option",{value:"all",children:e("All Statuses")}),t.jsx("option",{value:"success",children:e("Success")}),t.jsx("option",{value:"error",children:e("Error")}),t.jsx("option",{value:"warning",children:e("Warning")}),t.jsx("option",{value:"pending",children:e("Pending")})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ac,{className:"w-4 h-4 text-muted-foreground"}),t.jsx("input",{type:"text",placeholder:e("Search by client or user..."),value:B,onChange:R=>P(R.target.value),className:"border border-border rounded-xl px-3 py-2 min-w-[200px] bg-background text-foreground shadow-sm"})]})]})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(fa,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Recent OAuth Events")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("Showing {{count}} of {{total}} events",{count:me.length,total:n.length})})]})]}),me.length>0?t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("table",{className:"min-w-full table-auto text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-muted/50 text-muted-foreground border-b border-border",children:[t.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:e("Time")}),t.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:e("Type")}),t.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:e("Client")}),t.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:e("Status")}),t.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:e("Details")})]})}),t.jsx("tbody",{children:me.slice(0,50).map((R,D)=>t.jsxs("tr",{className:"border-b border-border hover:bg-muted/30 transition-colors",children:[t.jsx("td",{className:"px-4 py-3 text-muted-foreground",children:Ao(new Date(R.timestamp),"MMM dd, HH:mm:ss")}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ge,{variant:"outline",className:"font-mono text-xs",children:R.type||e("Unknown")})}),t.jsx("td",{className:"px-4 py-3 font-medium text-foreground",children:R.clientName||R.clientId||e("Unknown")}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ge,{className:R.status==="success"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":R.status==="error"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300",children:R.status||e("Unknown")})}),t.jsx("td",{className:"px-4 py-3 text-muted-foreground max-w-xs truncate",children:R.errorMessage||"-"})]},R.id||D))})]}),me.length>50&&t.jsx("div",{className:"text-center py-4 text-muted-foreground",children:t.jsx("p",{className:"text-sm",children:e("Showing first 50 events of {{total}}",{total:me.length})})})]}):t.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[t.jsx(fa,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{className:"font-medium",children:e("No events match your filters")}),t.jsx("p",{className:"text-sm mt-2",children:e("Try adjusting your filter criteria")})]})]})]}),t.jsx(lr,{value:"analytics",className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(ig,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Success Rate")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("OAuth flow success over time")})]})]}),t.jsx("div",{className:"h-[300px]",children:o?.hourlyStats?.length?t.jsx(lh,{width:"100%",height:"100%",children:t.jsxs(f1,{data:o.hourlyStats,children:[t.jsx(Gx,{strokeDasharray:"3 3",className:"stroke-muted"}),t.jsx(Qx,{dataKey:"hour",tickFormatter:R=>Ao(new Date(R),"HH:mm"),className:"text-muted-foreground"}),t.jsx(Jx,{className:"text-muted-foreground"}),t.jsx(ch,{labelFormatter:R=>Ao(new Date(R),"PPpp"),contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),t.jsx(Yx,{dataKey:"success",fill:"hsl(var(--primary))"}),t.jsx(Yx,{dataKey:"error",fill:"#ef4444"})]})}):t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx("p",{className:"text-muted-foreground",children:e("No success rate data available")})})})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-purple-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Client Distribution")}),t.jsx("p",{className:"text-muted-foreground font-medium",children:e("OAuth clients by usage")})]})]}),t.jsx("div",{className:"h-[300px]",children:o?.topClients?.length?t.jsx(lh,{width:"100%",height:"100%",children:t.jsxs(p1,{children:[t.jsx(x1,{data:o.topClients,cx:"50%",cy:"50%",outerRadius:100,fill:"hsl(var(--primary))",dataKey:"count",label:({clientName:R,count:D})=>`${R}: ${D}`,children:o.topClients.map((R,D)=>t.jsx(g1,{fill:`hsl(${D*45%360}, 70%, 50%)`},`cell-${D}`))}),t.jsx(ch,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}})]})}):t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsx("p",{className:"text-muted-foreground",children:e("No client distribution data available")})})})]})]})}),t.jsxs(lr,{value:"monitoring",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(_t,{className:"w-6 h-6 text-green-600"})}),t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("OAuth Server")})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Status")}),t.jsxs(ge,{className:d?.oauthServer?.status==="healthy"?"bg-green-500/10 text-green-800 dark:text-green-300 border-green-500/20":d?.oauthServer?.status==="degraded"?"bg-yellow-500/10 text-yellow-800 dark:text-yellow-300 border-yellow-500/20":d?.oauthServer?.status==="down"?"bg-red-500/10 text-red-800 dark:text-red-300 border-red-500/20":"bg-gray-500/10 text-gray-800 dark:text-gray-300 border-gray-500/20",children:[d?.oauthServer?.status==="healthy"&&t.jsx(Nt,{className:"w-3 h-3 mr-1"}),d?.oauthServer?.status==="degraded"&&t.jsx(Vt,{className:"w-3 h-3 mr-1"}),d?.oauthServer?.status==="down"&&t.jsx(tt,{className:"w-3 h-3 mr-1"}),!d?.oauthServer?.status&&t.jsx(tt,{className:"w-3 h-3 mr-1"}),d?.oauthServer?.status?e(d.oauthServer.status.charAt(0).toUpperCase()+d.oauthServer.status.slice(1)):e("Unknown")]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Uptime")}),t.jsx("span",{className:"font-bold text-foreground",children:d?.oauthServer.uptime?`${Math.floor(d.oauthServer.uptime/3600)}h ${Math.floor(d.oauthServer.uptime%3600/60)}m`:"N/A"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Response Time")}),t.jsx("span",{className:"font-bold text-foreground",children:d?.oauthServer.responseTime?`${d.oauthServer.responseTime.toFixed(0)}ms`:"N/A"})]})]})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Lt,{className:"w-6 h-6 text-primary"})}),t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Token Store")})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Status")}),t.jsxs(ge,{className:d?.tokenStore?.status==="healthy"?"bg-green-500/10 text-green-800 dark:text-green-300 border-green-500/20":d?.tokenStore?.status==="degraded"?"bg-yellow-500/10 text-yellow-800 dark:text-yellow-300 border-yellow-500/20":d?.tokenStore?.status==="down"?"bg-red-500/10 text-red-800 dark:text-red-300 border-red-500/20":"bg-gray-500/10 text-gray-800 dark:text-gray-300 border-gray-500/20",children:[d?.tokenStore?.status==="healthy"&&t.jsx(Nt,{className:"w-3 h-3 mr-1"}),d?.tokenStore?.status==="degraded"&&t.jsx(Vt,{className:"w-3 h-3 mr-1"}),d?.tokenStore?.status==="down"&&t.jsx(tt,{className:"w-3 h-3 mr-1"}),!d?.tokenStore?.status&&t.jsx(tt,{className:"w-3 h-3 mr-1"}),d?.tokenStore?.status?e(d.tokenStore.status.charAt(0).toUpperCase()+d.tokenStore.status.slice(1)):e("Unknown")]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Storage Used")}),t.jsx("span",{className:"font-bold text-foreground",children:d?.tokenStore.storageUsed?`${d.tokenStore.storageUsed}%`:"N/A"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Active Tokens")}),t.jsx("span",{className:"font-bold text-foreground",children:d?.tokenStore.activeTokens??o?.activeTokens??0})]})]})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-purple-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(qN,{className:"w-6 h-6 text-purple-600"})}),t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("Network")})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Status")}),t.jsxs(ge,{className:d?.network?.status==="healthy"?"bg-green-500/10 text-green-800 dark:text-green-300 border-green-500/20":d?.network?.status==="degraded"?"bg-yellow-500/10 text-yellow-800 dark:text-yellow-300 border-yellow-500/20":d?.network?.status==="down"?"bg-red-500/10 text-red-800 dark:text-red-300 border-red-500/20":"bg-gray-500/10 text-gray-800 dark:text-gray-300 border-gray-500/20",children:[d?.network?.status==="healthy"&&t.jsx(Nt,{className:"w-3 h-3 mr-1"}),d?.network?.status==="degraded"&&t.jsx(Vt,{className:"w-3 h-3 mr-1"}),d?.network?.status==="down"&&t.jsx(tt,{className:"w-3 h-3 mr-1"}),!d?.network?.status&&t.jsx(tt,{className:"w-3 h-3 mr-1"}),d?.network?.status?e(d.network.status.charAt(0).toUpperCase()+d.network.status.slice(1)):e("Unknown")]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Throughput")}),t.jsx("span",{className:"font-bold text-foreground",children:d?.network.throughput??"N/A"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-muted-foreground font-medium",children:e("Error Rate")}),t.jsx("span",{className:"font-bold text-foreground",children:d?.network.errorRate?`${d.network.errorRate.toFixed(1)}%`:"N/A"})]})]})]})]}),t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500/20 to-orange-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Vt,{className:"w-5 h-5 text-orange-600"})}),t.jsx("h4",{className:"text-lg font-bold text-foreground tracking-tight",children:e("System Alerts")})]}),t.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[t.jsx(Vt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{children:e("No system alerts at this time")}),t.jsx("p",{className:"text-sm mt-2",children:e("System monitoring will display real-time alerts here")})]})]})]})]})]})})]})}function _5({notification:e,onClose:n}){return e?t.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg border ${e.type==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800/50 text-green-800 dark:text-green-200":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800/50 text-red-800 dark:text-red-200"} animate-in slide-in-from-top-2 duration-300`,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[e.type==="success"?t.jsx(Nt,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):t.jsx(Es,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),t.jsx("span",{className:"font-medium",children:e.message}),t.jsx(ne,{variant:"ghost",size:"sm",onClick:n,className:"ml-2 h-6 w-6 p-0 text-current hover:bg-current/10",children:t.jsx(Es,{className:"h-4 w-4"})})]})}):null}function D5({idps:e}){return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500/20 to-blue-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(_t,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("div",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 tracking-wide",children:"Total IdPs"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500/20 to-green-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Pe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsx("div",{className:"text-sm font-semibold text-green-800 dark:text-green-300 tracking-wide",children:"Active"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.status==="active").length})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-purple-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(zn,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),t.jsx("div",{className:"text-sm font-semibold text-purple-800 dark:text-purple-300 tracking-wide",children:"Total Users"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.reduce((n,a)=>n+a.userCount,0)})]})})}),t.jsx("div",{className:"bg-card/70 backdrop-blur-sm p-6 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 hover:scale-105",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500/20 to-orange-600/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(kc,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsx("div",{className:"text-sm font-semibold text-orange-800 dark:text-orange-300 tracking-wide",children:"SAML Providers"})]}),t.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.filter(n=>n.type==="SAML").length})]})})})]})}function O5({isOpen:e,onClose:n,onSubmit:a,newIdp:o,setNewIdp:c}){return e?t.jsxs("div",{className:"bg-card/70 backdrop-blur-sm p-8 rounded-2xl border border-border shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(At,{className:"w-6 h-6 text-primary"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-foreground tracking-tight",children:"Add New Identity Provider"}),t.jsx("p",{className:"text-muted-foreground font-medium",children:"Configure a new identity provider for healthcare system authentication"})]})]})}),t.jsxs("form",{onSubmit:a,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"name",className:"text-sm font-semibold text-foreground",children:"Provider Name"}),t.jsx(Ae,{id:"name",placeholder:"e.g., Hospital Azure AD",value:o.name,onChange:d=>c({...o,name:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm",required:!0})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"provider",className:"text-sm font-semibold text-foreground",children:"Provider Type"}),t.jsx(Ae,{id:"provider",placeholder:"e.g., Microsoft Azure, Google, Okta",value:o.provider,onChange:d=>c({...o,provider:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"type",className:"text-sm font-semibold text-foreground",children:"Authentication Type"}),t.jsxs("select",{id:"type",className:"flex h-12 w-full rounded-xl border border-border bg-background px-4 py-3 text-sm shadow-sm focus:border-ring focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-all duration-200",value:o.type,onChange:d=>c({...o,type:d.target.value}),children:[t.jsx("option",{value:"SAML",children:"SAML 2.0"}),t.jsx("option",{value:"OAuth2",children:"OAuth 2.0"}),t.jsx("option",{value:"OIDC",children:"OpenID Connect"}),t.jsx("option",{value:"LDAP",children:"LDAP"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"entityId",className:"text-sm font-semibold text-foreground",children:"Entity ID / Client ID"}),t.jsx(Ae,{id:"entityId",placeholder:"Entity identifier or client ID",value:o.entityId,onChange:d=>c({...o,entityId:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm",required:!0})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"ssoUrl",className:"text-sm font-semibold text-foreground",children:"SSO URL / Authorization Endpoint"}),t.jsx(Ae,{id:"ssoUrl",type:"url",placeholder:"https://login.provider.com/sso",value:o.ssoUrl,onChange:d=>c({...o,ssoUrl:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm",required:!0})]}),t.jsxs("div",{className:"mt-8 pt-6 border-t border-border",children:[t.jsx("h4",{className:"text-lg font-semibold text-foreground mb-4",children:"Additional Configuration"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"displayName",className:"text-sm font-semibold text-foreground",children:"Display Name"}),t.jsx(Ae,{id:"displayName",placeholder:"Friendly name for users",value:o.displayName,onChange:d=>c({...o,displayName:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"issuer",className:"text-sm font-semibold text-foreground",children:"Issuer"}),t.jsx(Ae,{id:"issuer",placeholder:"Identity provider issuer URL",value:o.issuer,onChange:d=>c({...o,issuer:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]}),(o.type==="OIDC"||o.type==="OAuth2")&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"clientSecret",className:"text-sm font-semibold text-foreground",children:"Client Secret"}),t.jsx(Ae,{id:"clientSecret",type:"password",placeholder:"OAuth2/OIDC client secret",value:o.clientSecret,onChange:d=>c({...o,clientSecret:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"tokenUrl",className:"text-sm font-semibold text-foreground",children:"Token URL"}),t.jsx(Ae,{id:"tokenUrl",type:"url",placeholder:"https://login.provider.com/token",value:o.tokenUrl,onChange:d=>c({...o,tokenUrl:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"userInfoUrl",className:"text-sm font-semibold text-foreground",children:"User Info URL"}),t.jsx(Ae,{id:"userInfoUrl",type:"url",placeholder:"https://login.provider.com/userinfo",value:o.userInfoUrl,onChange:d=>c({...o,userInfoUrl:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"defaultScopes",className:"text-sm font-semibold text-foreground",children:"Default Scopes"}),t.jsx(Ae,{id:"defaultScopes",placeholder:"openid profile email",value:o.defaultScopes,onChange:d=>c({...o,defaultScopes:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]})]}),o.type==="SAML"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"signatureAlgorithm",className:"text-sm font-semibold text-foreground",children:"Signature Algorithm"}),t.jsxs("select",{id:"signatureAlgorithm",className:"flex h-12 w-full rounded-xl border border-border bg-background px-4 py-3 text-sm shadow-sm focus:border-ring focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-all duration-200",value:o.signatureAlgorithm,onChange:d=>c({...o,signatureAlgorithm:d.target.value}),children:[t.jsx("option",{value:"RS256",children:"RSA-SHA256"}),t.jsx("option",{value:"RS384",children:"RSA-SHA384"}),t.jsx("option",{value:"RS512",children:"RSA-SHA512"}),t.jsx("option",{value:"ES256",children:"ECDSA-SHA256"}),t.jsx("option",{value:"ES384",children:"ECDSA-SHA384"}),t.jsx("option",{value:"ES512",children:"ECDSA-SHA512"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"nameIdFormat",className:"text-sm font-semibold text-foreground",children:"NameID Format"}),t.jsxs("select",{id:"nameIdFormat",className:"flex h-12 w-full rounded-xl border border-border bg-background px-4 py-3 text-sm shadow-sm focus:border-ring focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-all duration-200",value:o.nameIdFormat,onChange:d=>c({...o,nameIdFormat:d.target.value}),children:[t.jsx("option",{value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",children:"Persistent"}),t.jsx("option",{value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",children:"Transient"}),t.jsx("option",{value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",children:"Email Address"}),t.jsx("option",{value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",children:"Unspecified"})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"certificate",className:"text-sm font-semibold text-foreground",children:"X.509 Certificate"}),t.jsx(Po,{id:"certificate",placeholder:`-----BEGIN CERTIFICATE-----
MIIBIjANBgkqhkiG9w0BAQ...
-----END CERTIFICATE-----`,value:o.certificate,onChange:d=>c({...o,certificate:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm min-h-[120px]",rows:5})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"logoutUrl",className:"text-sm font-semibold text-foreground",children:"Logout URL"}),t.jsx(Ae,{id:"logoutUrl",type:"url",placeholder:"https://login.provider.com/logout",value:o.logoutUrl,onChange:d=>c({...o,logoutUrl:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"metadataUrl",className:"text-sm font-semibold text-foreground",children:"Metadata URL"}),t.jsx(Ae,{id:"metadataUrl",type:"url",placeholder:"https://login.provider.com/.well-known/metadata",value:o.metadataUrl,onChange:d=>c({...o,metadataUrl:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-border",children:[t.jsx("h5",{className:"text-md font-semibold text-foreground mb-4",children:"Security Options"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"validateSignature",checked:o.validateSignature,onChange:d=>c({...o,validateSignature:d.target.checked}),className:"rounded border-border"}),t.jsx(re,{htmlFor:"validateSignature",className:"text-sm text-foreground",children:"Validate Signature"})]}),o.type==="SAML"&&t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"wantAuthnRequestsSigned",checked:o.wantAuthnRequestsSigned,onChange:d=>c({...o,wantAuthnRequestsSigned:d.target.checked}),className:"rounded border-border"}),t.jsx(re,{htmlFor:"wantAuthnRequestsSigned",className:"text-sm text-foreground",children:"Want AuthnRequests Signed"})]})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx(ne,{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Add Identity Provider"}),t.jsx(ne,{type:"button",variant:"outline",onClick:n,className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:"Cancel"})]})]})]}):null}function P5({idps:e,testingConnection:n,connectionResults:a,onToggleStatus:o,onEdit:c,onTestConnection:d,onViewCertificates:m,onDelete:f}){const p=x=>{switch(x){case"SAML":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"OAuth2":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"OIDC":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";case"LDAP":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300"}};return t.jsxs("div",{className:"backdrop-blur-sm bg-card/90 rounded-2xl shadow-xl border border-border p-8 transition-all duration-300 hover:shadow-2xl",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Identity Providers"}),t.jsx("p",{className:"text-muted-foreground",children:"View and manage all configured identity providers"})]}),t.jsx("div",{className:"overflow-hidden rounded-xl border border-border bg-card/50",children:t.jsxs($c,{children:[t.jsx(Vc,{children:t.jsxs(Us,{className:"bg-gradient-to-r from-muted/50 to-muted/70 hover:from-muted/70 hover:to-muted/90 border-b border-border",children:[t.jsx(at,{className:"font-semibold text-foreground",children:"Provider"}),t.jsx(at,{className:"font-semibold text-foreground",children:"Type"}),t.jsx(at,{className:"font-semibold text-foreground",children:"Status"}),t.jsx(at,{className:"font-semibold text-foreground",children:"Users"}),t.jsx(at,{className:"font-semibold text-foreground",children:"Last Used"}),t.jsx(at,{className:"w-12"})]})}),t.jsx(Gc,{children:e.map(x=>t.jsxs(Us,{className:"hover:bg-muted/30 transition-colors duration-200 border-b border-border/50",children:[t.jsx(it,{className:"py-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-foreground",children:x.name}),t.jsx("div",{className:"text-sm text-muted-foreground",children:x.provider})]})}),t.jsx(it,{className:"py-4",children:t.jsx(ge,{className:`${p(x.type)} shadow-sm`,children:x.type})}),t.jsx(it,{className:"py-4",children:t.jsx(ge,{variant:x.status==="active"?"default":"secondary",className:`${x.status==="active"?"bg-green-100 text-green-800 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-300 dark:hover:bg-green-900/30":"bg-muted text-muted-foreground hover:bg-muted/80"} shadow-sm`,children:x.status})}),t.jsxs(it,{className:"py-4",children:[t.jsx("span",{className:"text-sm font-medium text-foreground",children:x.userCount}),t.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"users"})]}),t.jsx(it,{className:"text-sm text-muted-foreground py-4",children:new Date(x.lastUsed).toLocaleDateString()}),t.jsx(it,{className:"py-4",children:t.jsxs(mi,{children:[t.jsx(fi,{asChild:!0,children:t.jsx(ne,{variant:"ghost",className:"h-8 w-8 p-0 hover:bg-muted/50 transition-colors duration-200 text-muted-foreground hover:text-foreground",children:t.jsx(Gh,{className:"h-4 w-4"})})}),t.jsxs(pi,{align:"end",className:"bg-popover/90 backdrop-blur-sm border border-border shadow-xl",children:[t.jsx(ft,{onClick:()=>o(x.id),className:"hover:bg-muted/50",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pe,{className:"h-4 w-4 mr-2"}),x.status==="active"?"Disable":"Enable"]})}),t.jsx(ft,{onClick:()=>c(x),className:"hover:bg-muted/50",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(_s,{className:"h-4 w-4 mr-2"}),"Edit Configuration"]})}),t.jsx(ft,{onClick:()=>d(x),className:"hover:bg-muted/50",disabled:n===x.id,children:t.jsxs("div",{className:"flex items-center",children:[n===x.id?t.jsx(Mt,{className:"h-4 w-4 mr-2 animate-spin"}):a[x.id]?a[x.id].success?t.jsx(Nt,{className:"h-4 w-4 mr-2 text-green-600 dark:text-green-400"}):t.jsx(Es,{className:"h-4 w-4 mr-2 text-red-600 dark:text-red-400"}):t.jsx(M0,{className:"h-4 w-4 mr-2"}),n===x.id?"Testing...":"Test Connection"]})}),t.jsx(ft,{onClick:()=>m(x),className:"hover:bg-muted/50",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Bn,{className:"h-4 w-4 mr-2"}),"View Certificates"]})}),t.jsx(ft,{onClick:()=>f(x.id),className:"text-destructive hover:bg-destructive/10",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Es,{className:"h-4 w-4 mr-2"}),"Remove Provider"]})})]})]})})]},x.id))})]})})]})}function L5({isOpen:e,onClose:n,onUpdate:a,editingIdp:o,setEditingIdp:c}){return o?t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsx(Xt,{className:"pb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/30 dark:to-blue-800/40 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(_s,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx(Zt,{className:"text-2xl font-bold text-foreground tracking-tight",children:"Edit Identity Provider"}),t.jsxs(dr,{className:"text-muted-foreground font-medium mt-1",children:["Modify the configuration for ",o.name]})]})]})}),t.jsxs("form",{onSubmit:d=>{d.preventDefault(),a(o)},className:"space-y-6",children:[t.jsxs("div",{className:"bg-card/50 p-6 rounded-xl border border-border",children:[t.jsxs("h4",{className:"text-lg font-semibold text-foreground mb-4 flex items-center space-x-2",children:[t.jsx(Pe,{className:"w-5 h-5"}),t.jsx("span",{children:"Basic Configuration"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"edit-name",className:"text-sm font-semibold text-foreground",children:"Provider Name"}),t.jsx(Ae,{id:"edit-name",value:o.name,onChange:d=>c({...o,name:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"edit-provider",className:"text-sm font-semibold text-foreground",children:"Provider Type"}),t.jsx(Ae,{id:"edit-provider",value:o.provider,onChange:d=>c({...o,provider:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"edit-type",className:"text-sm font-semibold text-foreground",children:"Authentication Type"}),t.jsxs("select",{id:"edit-type",className:"flex h-12 w-full rounded-xl border border-border bg-background px-4 py-3 text-sm shadow-sm focus:border-ring focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-all duration-200",value:o.type,onChange:d=>c({...o,type:d.target.value}),children:[t.jsx("option",{value:"SAML",children:"SAML 2.0"}),t.jsx("option",{value:"OAuth2",children:"OAuth 2.0"}),t.jsx("option",{value:"OIDC",children:"OpenID Connect"}),t.jsx("option",{value:"LDAP",children:"LDAP"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(re,{htmlFor:"edit-entityId",className:"text-sm font-semibold text-foreground",children:"Entity ID / Client ID"}),t.jsx(Ae,{id:"edit-entityId",value:o.entityId,onChange:d=>c({...o,entityId:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]}),t.jsxs("div",{className:"space-y-3 mt-6",children:[t.jsx(re,{htmlFor:"edit-ssoUrl",className:"text-sm font-semibold text-foreground",children:"SSO URL / Authorization Endpoint"}),t.jsx(Ae,{id:"edit-ssoUrl",value:o.ssoUrl,onChange:d=>c({...o,ssoUrl:d.target.value}),className:"rounded-xl border-border focus:border-ring focus:ring-ring shadow-sm"})]})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx(ne,{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Update Provider"}),t.jsx(ne,{type:"button",variant:"outline",onClick:n,className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:"Cancel"})]})]})]})}):null}function B5({isOpen:e,onClose:n,connectionResults:a,idps:o}){return t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[t.jsx(Xt,{className:"pb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/40 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(M0,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsxs("div",{children:[t.jsx(Zt,{className:"text-2xl font-bold text-foreground tracking-tight",children:"Connection Test Results"}),t.jsx(dr,{className:"text-muted-foreground font-medium mt-1",children:"Results from testing identity provider connections"})]})]})}),t.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([c,d])=>{const m=o.find(f=>f.id===c);return t.jsx("div",{className:"bg-card/50 p-6 rounded-xl border border-border",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${d.success?"bg-gradient-to-br from-green-100 to-green-200 dark:from-green-900/30 dark:to-green-800/40":"bg-gradient-to-br from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/40"}`,children:d.success?t.jsx(Nt,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):t.jsx(Es,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"font-semibold text-foreground",children:m?.name}),t.jsx(ge,{className:`${d.success?"bg-green-100 text-green-800 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-300":"bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-300"} shadow-sm`,children:d.success?"Connection Successful":"Connection Failed"})]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d.message})]})]})},c)})}),t.jsx("div",{className:"flex justify-end pt-6",children:t.jsx(ne,{onClick:n,variant:"outline",className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:"Close"})})]})})}function z5({isOpen:e,onClose:n,showCertificates:a,idps:o}){const c=o.find(d=>d.id===a);return t.jsx(cr,{open:e,onOpenChange:n,children:t.jsxs(Kt,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[t.jsx(Xt,{className:"pb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/40 rounded-xl flex items-center justify-center shadow-sm",children:t.jsx(Bn,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{children:[t.jsx(Zt,{className:"text-2xl font-bold text-foreground tracking-tight",children:"Identity Provider Certificates"}),t.jsxs(dr,{className:"text-muted-foreground font-medium mt-1",children:["View and manage certificates for ",c?.name]})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-card/50 p-6 rounded-xl border border-border",children:[t.jsxs("h4",{className:"text-lg font-semibold text-foreground mb-4 flex items-center space-x-2",children:[t.jsx(Pe,{className:"w-5 h-5"}),t.jsx("span",{children:"Certificate Status"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-xl border border-green-200 dark:border-green-800/50",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/40 rounded-xl flex items-center justify-center",children:t.jsx(Nt,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-green-900 dark:text-green-100",children:"Signing Certificate"}),t.jsx("span",{className:"text-sm text-green-700 dark:text-green-300",children:"Valid & Active"})]})]}),t.jsxs("div",{className:"space-y-1 text-sm text-green-800 dark:text-green-200",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Subject:"})," CN=hospital.example.com"]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Issuer:"})," DigiCert Inc"]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Valid Until:"})," 2025-12-31"]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Algorithm:"})," RSA-SHA256"]})]})]}),t.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-xl border border-amber-200 dark:border-amber-800/50",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-amber-100 dark:bg-amber-900/40 rounded-xl flex items-center justify-center",children:t.jsx(tt,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),t.jsxs("div",{children:[t.jsx("h5",{className:"font-semibold text-amber-900 dark:text-amber-100",children:"Encryption Certificate"}),t.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Expires Soon"})]})]}),t.jsxs("div",{className:"space-y-1 text-sm text-amber-800 dark:text-amber-200",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Subject:"})," CN=hospital.example.com"]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Issuer:"})," DigiCert Inc"]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Valid Until:"})," 2025-01-15"]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Algorithm:"})," RSA-SHA256"]})]})]})]})]}),t.jsxs("div",{className:"bg-card/50 p-6 rounded-xl border border-border",children:[t.jsxs("h4",{className:"text-lg font-semibold text-foreground mb-4 flex items-center space-x-2",children:[t.jsx(kc,{className:"w-5 h-5"}),t.jsx("span",{children:"Certificate Details (PEM Format)"})]}),t.jsx(Po,{className:"h-48 font-mono text-xs bg-muted/30 dark:bg-muted/50 border-border rounded-xl text-foreground",readOnly:!0,value:`-----BEGIN CERTIFICATE-----
MIIDXTCCAkWgAwIBAgIJAKoK/heBjcOuMA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV
BAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX
aWRnaXRzIFB0eSBMdGQwHhcNMTMwODI3MjM0NjUwWhcNMjMwODI1MjM0NjUwWjBF
MQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50
ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB
CgKCAQEAvpnaPKLIKdvx98KW68lz8pGaRRcYersNGqPjpifMVjjE8LuCoXgPU0HePK
-----END CERTIFICATE-----`})]})]}),t.jsxs("div",{className:"flex justify-between pt-6",children:[t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs(ne,{variant:"outline",className:"px-6 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Download Certificate"]}),t.jsxs(ne,{variant:"outline",className:"px-6 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:[t.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Verify Certificate"]})]}),t.jsx(ne,{onClick:n,variant:"outline",className:"px-8 py-3 border-border text-foreground font-semibold rounded-xl hover:bg-muted transition-all duration-200 shadow-sm hover:shadow-md",children:"Close"})]})]})})}const Sh=[{id:"1",name:"Hospital Azure AD",type:"SAML",provider:"Microsoft Azure",status:"active",entityId:"https://hospital.onmicrosoft.com/saml",ssoUrl:"https://login.microsoftonline.com/hospital/saml2",lastUsed:"2024-12-28T10:30:00Z",userCount:156},{id:"2",name:"Google Workspace",type:"OAuth2",provider:"Google",status:"active",entityId:"google-workspace-hospital",ssoUrl:"https://accounts.google.com/oauth/authorize",lastUsed:"2024-12-28T09:15:00Z",userCount:89},{id:"3",name:"Epic MyChart SSO",type:"OIDC",provider:"Epic",status:"active",entityId:"epic-mychart-sso",ssoUrl:"https://mychart.hospital.com/oauth2/authorize",lastUsed:"2024-12-27T16:45:00Z",userCount:342},{id:"4",name:"Legacy LDAP",type:"LDAP",provider:"OpenLDAP",status:"inactive",entityId:"ldap://hospital.local",ssoUrl:"ldap://hospital.local:389",lastUsed:"2024-12-15T08:30:00Z",userCount:23},{id:"5",name:"Okta Healthcare",type:"SAML",provider:"Okta",status:"active",entityId:"https://hospital.okta.com/saml2/service-provider",ssoUrl:"https://hospital.okta.com/app/saml/sso",lastUsed:"2024-12-28T11:00:00Z",userCount:78}];function q5(){const{isAuthenticated:e,clientApis:n}=Vn(),[a,o]=k.useState([]),[c,d]=k.useState(!0),[m,f]=k.useState(!1),[p,x]=k.useState(null),[j,b]=k.useState(null),[y,_]=k.useState({}),[B,P]=k.useState(null),[L,U]=k.useState(null),T=()=>({name:"",type:"SAML",provider:"",entityId:"",ssoUrl:"",displayName:"",clientSecret:"",tokenUrl:"",userInfoUrl:"",logoutUrl:"",issuer:"",metadataUrl:"",certificate:"",signatureAlgorithm:"RS256",nameIdFormat:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",defaultScopes:"openid profile email",validateSignature:!0,wantAuthnRequestsSigned:!1,enabled:!0}),[S,w]=k.useState(T());k.useEffect(()=>{(async()=>{d(!0);try{if(!e){o(Sh);return}const ie=await n.identityProviders.getAdminIdpsCount();if(ie.total&&ie.total>0){const R=(await n.identityProviders.getAdminIdps()).map(D=>{const K=D.config;return{id:D.alias||"unknown",name:D.displayName||D.alias||"Unknown Provider",type:D.providerId||"Unknown",provider:D.providerId||"Unknown",status:D.enabled?"active":"inactive",entityId:K?.entityId||D.alias||"",ssoUrl:K?.singleSignOnServiceUrl||"",lastUsed:new Date().toISOString(),userCount:0}});o(R),console.log("Loaded real Identity Provider data from backend")}else console.log("No real IdP data found, using sample data"),o(Sh)}catch(ie){console.error("Failed to load Identity Providers, using sample data:",ie),o(Sh)}finally{d(!1)}})()},[e,n.identityProviders]);const I=async Q=>{try{if(e&&n.identityProviders){const ie={displayName:Q.displayName||Q.name,entityId:Q.entityId,singleSignOnServiceUrl:Q.ssoUrl};(Q.type==="OIDC"||Q.type==="OAuth2")&&(Q.clientSecret&&(ie.clientSecret=Q.clientSecret),Q.tokenUrl&&(ie.tokenUrl=Q.tokenUrl),Q.userInfoUrl&&(ie.userInfoUrl=Q.userInfoUrl),Q.issuer&&(ie.issuer=Q.issuer),Q.defaultScopes&&(ie.defaultScopes=Q.defaultScopes),Q.logoutUrl&&(ie.logoutUrl=Q.logoutUrl)),Q.type==="SAML"&&(Q.signatureAlgorithm&&(ie.signatureAlgorithm=Q.signatureAlgorithm),Q.nameIdFormat&&(ie.nameIdPolicyFormat=Q.nameIdFormat),Q.certificate&&(ie.signingCertificate=Q.certificate),Q.logoutUrl&&(ie.singleLogoutServiceUrl=Q.logoutUrl),ie.validateSignature=Q.validateSignature,ie.wantAuthnRequestsSigned=Q.wantAuthnRequestsSigned),Q.metadataUrl&&(ie.metadataDescriptorUrl=Q.metadataUrl),ie.enabled=Q.enabled;const me=await n.identityProviders.postAdminIdps({postAdminIdpsRequest:{alias:Q.name.toLowerCase().replace(/\s+/g,"-"),providerId:Q.type.toLowerCase(),config:ie}});console.log("IdP added successfully:",me);const D=(await n.identityProviders.getAdminIdps()).map(K=>{const de=K.config;return{id:K.alias||"unknown",name:K.displayName||K.alias||"Unknown Provider",type:K.providerId||"Unknown",provider:K.providerId||"Unknown",status:K.enabled?"active":"inactive",entityId:de?.entityId||K.alias||"",ssoUrl:de?.singleSignOnServiceUrl||"",lastUsed:new Date().toISOString(),userCount:0}});o(D),U({type:"success",message:"Identity Provider added successfully!"})}else{const ie={id:Date.now().toString(),name:Q.name,type:Q.type,provider:Q.provider,status:"active",entityId:Q.entityId,ssoUrl:Q.ssoUrl,lastUsed:new Date().toISOString(),userCount:0};o([...a,ie]),U({type:"success",message:"Identity Provider added successfully!"})}w(T()),f(!1)}catch(ie){console.error("Failed to add IdP:",ie),U({type:"error",message:"Failed to add Identity Provider. Please try again."});const me={id:Date.now().toString(),name:Q.name,type:Q.type,provider:Q.provider,status:"active",entityId:Q.entityId,ssoUrl:Q.ssoUrl,lastUsed:new Date().toISOString(),userCount:0};o([...a,me]),w(T()),f(!1)}},J=Q=>{x(Q)},W=async Q=>{try{if(e&&n.identityProviders){await n.identityProviders.putAdminIdpsByAlias({alias:Q.id,putAdminIdpsByAliasRequest:{displayName:Q.name,enabled:Q.status==="active",config:{entityId:Q.entityId,singleSignOnServiceUrl:Q.ssoUrl}}});const me=(await n.identityProviders.getAdminIdps()).map(R=>{const D=R.config;return{id:R.alias||"unknown",name:R.displayName||R.alias||"Unknown Provider",type:R.providerId||"Unknown",provider:R.providerId||"Unknown",status:R.enabled?"active":"inactive",entityId:D?.entityId||R.alias||"",ssoUrl:D?.singleSignOnServiceUrl||"",lastUsed:new Date().toISOString(),userCount:0}});o(me),U({type:"success",message:"Identity Provider updated successfully!"})}else o(a.map(ie=>ie.id===Q.id?Q:ie)),U({type:"success",message:"Identity Provider updated successfully!"});x(null)}catch(ie){console.error("Failed to update IdP:",ie),U({type:"error",message:"Failed to update Identity Provider. Please try again."}),o(a.map(me=>me.id===Q.id?Q:me)),x(null)}},C=async Q=>{b(Q.id);try{await new Promise(R=>setTimeout(R,2e3));const ie=Q.status==="active"&&Math.random()>.3,me=ie?`Successfully connected to ${Q.name}. SSO endpoint is reachable and responding.`:Q.status==="inactive"?`Connection failed: ${Q.name} is currently disabled.`:`Connection failed: Unable to reach SSO endpoint at ${Q.ssoUrl}`;_(R=>({...R,[Q.id]:{success:ie,message:me}}))}catch(ie){_(me=>({...me,[Q.id]:{success:!1,message:`Connection test failed: ${ie instanceof Error?ie.message:"Unknown error"}`}}))}finally{b(null)}},$=Q=>{P(Q.id)},ee=async Q=>{try{if(e&&n.identityProviders){await n.identityProviders.deleteAdminIdpsByAlias({alias:Q});const me=(await n.identityProviders.getAdminIdps()).map(R=>{const D=R.config;return{id:R.alias||"unknown",name:R.displayName||R.alias||"Unknown Provider",type:R.providerId||"Unknown",provider:R.providerId||"Unknown",status:R.enabled?"active":"inactive",entityId:D?.entityId||R.alias||"",ssoUrl:D?.singleSignOnServiceUrl||"",lastUsed:new Date().toISOString(),userCount:0}});o(me),U({type:"success",message:"Identity Provider deleted successfully!"})}else o(a.filter(ie=>ie.id!==Q)),U({type:"success",message:"Identity Provider deleted successfully!"})}catch(ie){console.error("Failed to delete IdP:",ie),U({type:"error",message:"Failed to delete Identity Provider. Please try again."}),o(a.filter(me=>me.id!==Q))}},X=async Q=>{const ie=a.find(me=>me.id===Q);if(ie){const me={...ie,status:ie.status==="active"?"inactive":"active"};await W(me)}};return c?t.jsx("div",{className:"p-8 flex items-center justify-center min-h-[300px]",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Mt,{className:"h-6 w-6 animate-spin text-primary"}),t.jsx("div",{className:"text-muted-foreground",children:"Loading Identity Providers..."})]})}):t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsx(_5,{notification:L,onClose:()=>U(null)}),t.jsx("div",{className:"bg-gradient-to-r from-background to-muted/50 p-8 rounded-3xl border border-border shadow-lg",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3 tracking-tight",children:"Identity Provider Management"}),t.jsxs("div",{className:"text-muted-foreground text-lg flex items-center",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary/20 to-primary/30 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:t.jsx(Pe,{className:"w-5 h-5 text-primary"})}),"Configure and manage identity providers for healthcare system authentication"]})]}),t.jsxs(ne,{onClick:()=>f(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white font-semibold rounded-2xl hover:from-blue-500 hover:via-indigo-500 hover:to-purple-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-500/20",children:[t.jsx(At,{className:"h-5 w-5 mr-2"}),"Add Identity Provider"]})]})}),t.jsx(D5,{idps:a}),t.jsx(O5,{isOpen:m,onClose:()=>f(!1),onSubmit:async Q=>{Q.preventDefault(),await I(S)},newIdp:S,setNewIdp:w}),t.jsx(P5,{idps:a,testingConnection:j,connectionResults:y,onEdit:J,onToggleStatus:X,onTestConnection:C,onViewCertificates:$,onDelete:ee}),t.jsx(L5,{isOpen:!!p,onClose:()=>x(null),onUpdate:W,editingIdp:p,setEditingIdp:x}),Object.keys(y).length>0&&t.jsx(B5,{isOpen:Object.keys(y).length>0,onClose:()=>_({}),connectionResults:y,idps:a}),B&&t.jsx(z5,{isOpen:!!B,onClose:()=>P(null),showCertificates:B,idps:a})]})}function H5(){const[e,n]=k.useState("dashboard"),[a,o]=k.useState(!1),{isAuthenticated:c,loading:d,profile:m}=Vn(),{activeTab:f,setActiveTab:p}=Qc(),{t:x}=hn(),j=f||e,b=_=>{p(_),n(_)},y=()=>{o(!a)};return d?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsx(t0,{className:"max-w-md mx-auto",children:t.jsxs("div",{className:"text-center p-8",children:[t.jsx(_h,{}),t.jsx("h2",{className:"mt-4 text-lg font-semibold text-foreground",children:x("Loading Admin Panel...")}),t.jsx("p",{className:"mt-2 text-muted-foreground",children:x("Please wait while we initialize your workspace.")})]})})}):!c||!m?t.jsx(k5,{}):t.jsxs("div",{className:"min-h-screen flex flex-col bg-background [&_.mantine-AppShell-main]:!pt-2 md:[&_.mantine-AppShell-main]:!pt-4",children:[t.jsx(u5,{activeTab:j,onTabChange:b,profile:m,onChatToggle:y}),t.jsx(OT,{logo:t.jsxs("div",{className:"flex items-center space-x-3 animate-fade-in",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-primary/80 rounded-2xl flex items-center justify-center shadow-2xl border border-primary/20",children:t.jsx(Jh,{className:"w-7 h-7 text-primary-foreground"})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-bold text-xl text-foreground tracking-tight",children:x("Healthcare Administration")}),t.jsx("div",{className:"text-xs text-muted-foreground font-medium tracking-wide",children:x("Proxy Smart")})]})]}),children:t.jsx("div",{className:"flex-1 px-4 sm:px-6 lg:px-8 py-8",children:t.jsx("div",{className:"w-full lg:w-[90%] max-w-none mx-auto",children:t.jsxs(t0,{className:Ie("min-h-[600px] shadow-2xl border-0 bg-background backdrop-blur-sm rounded-3xl overflow-hidden border border-border/20 animate-fade-in w-full max-w-none","max-w-none w-full"),children:[j==="dashboard"&&t.jsx(n5,{onNavigate:b}),j==="smart-apps"&&t.jsx(iA,{}),j==="users"&&t.jsx(j5,{}),j==="fhir-servers"&&t.jsx(fA,{}),j==="idp"&&t.jsx(q5,{}),j==="scopes"&&t.jsx(gA,{}),j==="launch-context"&&t.jsx(NA,{}),j==="oauth-monitoring"&&t.jsx(M5,{})]})})})}),t.jsx(T5,{}),t.jsx(E5,{isOpen:a,onClose:()=>o(!1)})]})}const F5=new Yv({baseUrl:un.api.baseUrl});function $5(){return t.jsx(c5,{defaultTheme:"system",storageKey:"proxy-smart-theme",children:t.jsx(v1,{children:t.jsx(S3,{medplum:F5,children:t.jsx(H5,{})})})})}const c0=document.getElementById("root");if(!c0.innerHTML){const e=A1.createRoot(c0);Promise.all([nA,aA()]).then(()=>{e.render(t.jsx(k.StrictMode,{children:t.jsx(ay,{children:t.jsx($5,{})})}))})}
