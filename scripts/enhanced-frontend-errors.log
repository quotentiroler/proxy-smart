$ vitest --coverage "--reporter=verbose" "--reporter=json" "--outputFile=test-results.json"

[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/home/runner/work/proxy-smart/proxy-smart/ui[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32m✓[39m test/components/theme-provider.behavior.test.tsx[2m > [22mThemeProvider behavior (hook consumer)[2m > [22mprovides theme and setTheme to consumers, and updates value on interaction[32m 196[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.domclass.extra.test.tsx[2m > [22mThemeProvider DOM class toggling (extra)[2m > [22madds the dark class on documentElement when theme set to dark and removes it when set to light[32m 159[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.domclass.extra.test.tsx[2m > [22mThemeProvider DOM class toggling (extra)[2m > [22mrespects system preference when setting theme to system[32m 15[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.system-preference.test.tsx[2m > [22mThemeProvider system preference behavior[2m > [22mapplies system dark preference and updates when OS preference changes[32m 162[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.system-preference.test.tsx[2m > [22mThemeProvider system preference behavior[2m > [22mrespects explicit user override even if system preference is dark[32m 31[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.domclass.test.tsx[2m > [22mThemeProvider DOM class toggling[2m > [22madds and removes the dark class on documentElement when toggling themes[32m 153[2mms[22m[39m
 [32m✓[39m test/components/button.test.tsx[2m > [22mButton[2m > [22mrenders with default props[32m 129[2mms[22m[39m
 [32m✓[39m test/components/button.test.tsx[2m > [22mButton[2m > [22mrenders with different variants[32m 21[2mms[22m[39m
 [32m✓[39m test/components/button.test.tsx[2m > [22mButton[2m > [22mrenders with different sizes[32m 17[2mms[22m[39m
 [32m✓[39m test/components/button.test.tsx[2m > [22mButton[2m > [22mhandles click events[32m 35[2mms[22m[39m
 [32m✓[39m test/components/button.test.tsx[2m > [22mButton[2m > [22mcan be disabled[32m 8[2mms[22m[39m
 [32m✓[39m test/components/button.test.tsx[2m > [22mButton[2m > [22mrenders as child when asChild is true[32m 10[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.extra.test.tsx[2m > [22mThemeProvider integration[2m > [22mpersists theme to storage and toggles DOM class when setTheme is called[32m 197[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.extra.test.tsx[2m > [22mThemeProvider integration[2m > [22msystem theme follows prefers-color-scheme and stores "system"[32m 26[2mms[22m[39m
 [31m×[39m test/hooks/useTheme.outside-provider.test.tsx[2m > [22museTheme[2m > [22mthrows when used outside of ThemeProvider[32m 33[2mms[22m[39m
[31m   → expected [Function] to throw an error[39m
 [31m×[39m test/hooks/useTheme.inside-provider.test.tsx[2m > [22museTheme (inside ThemeProvider)[2m > [22mprovides theme and updates when setTheme is called[32m 232[2mms[22m[39m
[31m   → expected 'system' not to be 'system' // Object.is equality[39m
 [32m✓[39m test/components/input.extra.test.tsx[2m > [22mInput (extra)[2m > [22mupdates value on typing[32m 144[2mms[22m[39m
 [32m✓[39m test/components/input.extra.test.tsx[2m > [22mInput (extra)[2m > [22mdoes not accept input when disabled[32m 6[2mms[22m[39m
 [32m✓[39m test/components/input.test.tsx[2m > [22mInput[2m > [22mrenders an input with provided placeholder and type[32m 55[2mms[22m[39m
 [32m✓[39m test/components/input.test.tsx[2m > [22mInput[2m > [22maccepts className and forwards props[32m 5[2mms[22m[39m
 [32m✓[39m test/components/input.test.tsx[2m > [22mInput[2m > [22mcalls onChange when user types and updates value[32m 125[2mms[22m[39m
 [32m✓[39m test/components/input.test.tsx[2m > [22mInput[2m > [22mforwards ref to the input element[32m 7[2mms[22m[39m
 [32m✓[39m test/components/theme-provider.test.tsx[2m > [22mThemeProvider[2m > [22minitializes with defaultTheme and updates DOM and storage when setTheme is called[32m 153[2mms[22m[39m
 [32m✓[39m test/components/button.extra.test.tsx[2m > [22mButton (extra)[2m > [22mcalls onClick when enabled[32m 155[2mms[22m[39m
 [32m✓[39m test/components/button.extra.test.tsx[2m > [22mButton (extra)[2m > [22mdoes not call onClick when disabled[32m 20[2mms[22m[39m
 [32m✓[39m test/components/textarea.test.tsx[2m > [22mTextarea[2m > [22mrenders textarea with placeholder and className[32m 45[2mms[22m[39m
 [32m✓[39m test/components/textarea.test.tsx[2m > [22mTextarea[2m > [22mforwards ref to the textarea element[32m 4[2mms[22m[39m
 [32m✓[39m test/lib/utils.test.ts[2m > [22mlib/utils - cn[2m > [22mreturns a space-separated string containing provided classes[32m 9[2mms[22m[39m
 [32m✓[39m test/lib/utils.test.ts[2m > [22mlib/utils - cn[2m > [22mignores falsy values and merges conditional classes[32m 0[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 2 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m test/hooks/useTheme.inside-provider.test.tsx[2m > [22museTheme (inside ThemeProvider)[2m > [22mprovides theme and updates when setTheme is called
[31m[1mAssertionError[22m: expected 'system' not to be 'system' // Object.is equality[39m
[36m [2m❯[22m test/hooks/useTheme.inside-provider.test.tsx:[2m44:39[22m[39m
    [90m 42| [39m    [34mexpect[39m(themeNode)[33m.[39m[34mtoHaveTextContent[39m([32m'system'[39m)
    [90m 43| [39m
    [90m 44| [39m    [34mexpect[39m(themeNode[33m.[39mtextContent)[33m.[39mnot[33m.[39m[34mtoBe[39m(initial)
    [90m   | [39m                                      [31m^[39m
    [90m 45| [39m  })
    [90m 46| [39m})

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/2]⎯[22m[39m

[41m[1m FAIL [22m[49m test/hooks/useTheme.outside-provider.test.tsx[2m > [22museTheme[2m > [22mthrows when used outside of ThemeProvider
[31m[1mAssertionError[22m: expected [Function] to throw an error[39m
[36m [2m❯[22m test/hooks/useTheme.outside-provider.test.tsx:[2m14:55[22m[39m
    [90m 12| [39m[34mdescribe[39m([32m'useTheme'[39m[33m,[39m () [33m=>[39m {
    [90m 13| [39m  [34mit[39m([32m'throws when used outside of ThemeProvider'[39m[33m,[39m () [33m=>[39m {
    [90m 14| [39m    [34mexpect[39m(() [33m=>[39m [34mrender[39m([33m<[39m[33mConsumerWithoutProvider[39m [33m/[39m[33m>[39m))[33m.[39m[34mtoThrow[39m()
    [90m   | [39m                                                      [31m^[39m
    [90m 15| [39m  })
    [90m 16| [39m})

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/2]⎯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m12 passed[39m[22m[90m (14)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m27 passed[39m[22m[90m (29)[39m
[2m   Start at [22m 09:08:25
[2m   Duration [22m 8.20s[2m (transform 195ms, setup 3.15s, collect 1.38s, tests 2.19s, environment 8.23s, prepare 1.94s)[22m

JSON report written to /home/runner/work/proxy-smart/proxy-smart/ui/test-results.json
error: script "test:coverage" exited with code 1
